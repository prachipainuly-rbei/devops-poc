#!/usr/bin/env python
# -*- python -*- coding: iso-8859-1 -*-
#
# Copyright (C) 1990 - 2012 CONTACT Software GmbH
# All rights reserved.
# http://www.contact.de/

__docformat__ = "restructuredtext en"
__revision__ = "$Id: __init__.py 174359 2018-03-13 10:29:29Z cso $"

import os
import sys
from cdb import rte
from cdb import sig
from cs.platform.web import static
from cs.taskmanager import settings
from cs.taskmanager.mixin import WithTasksIntegration

FILE = __file__.decode(sys.getfilesystemencoding())
PLUGIN = "cs-tasks-actions-plugin"
VERSION = "15.1.0"
APPDIR = os.path.dirname(FILE)


class ActionWithCsTasks(WithTasksIntegration):
    pass


@sig.connect(settings.REGISTER_TABLE_SETTINGS)
def register_table_settings(register_file):
    register_file(os.path.join(APPDIR, "table_settings.json"))


@sig.connect(rte.APPLICATIONS_LOADED_HOOK)
def _register_libraries():
    lib = static.Library(
        PLUGIN,
        VERSION,
        os.path.join(APPDIR, 'js', 'build'))
    lib.add_file("{}.js".format(PLUGIN))
    lib.add_file("{}.js.map".format(PLUGIN))
    static.Registry().add(lib)
