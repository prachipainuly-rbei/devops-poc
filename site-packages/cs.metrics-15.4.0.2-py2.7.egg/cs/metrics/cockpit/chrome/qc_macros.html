<metal:qc_head_block define-macro="qc_headblock" tal:define="debug_mode debug_mode|False">
	<metal:include use-macro="postingtools.templates()['postings.html'].macros.postinghead" />
	<link href="${options.css}jquery/dataTables.cdb.css" rel="stylesheet" type="text/css" />
	<link href="${options.plugins}float/float.css" rel="stylesheet" type="text/css" />
	<link href="${options.plugins}datatables/datatables.css" rel="stylesheet" type="text/css" />
	<link tal:condition="debug_mode == True" href="${options.localres_base}cs.metrics.cockpit/cdbqc_cockpit.css?v=${time}" rel="stylesheet" type="text/css" />
	<link tal:condition="debug_mode != True" href="${options.localres_base}cs.metrics.cockpit/cdbqc_cockpit.css" rel="stylesheet" type="text/css" />	
	<script src="${options.jscript}jquery/jquery.dataTables.min.js" type="text/javascript"></script>
	<script src="${options.jscript}jquery/dataTables/jquery.dataTables.colvis.min.js" type="text/javascript"></script>
	<script src="${options.jscript}jquery/jquery.jeditable.mini.js" type="text/javascript"></script>
	<script src="${options.jscript}jquery/jquery.flot.min.js" type="text/javascript"></script>
	<script src="${options.jscript}jquery/flot/jquery.flot.selection.min.js" type="text/javascript"></script>
	<script src="${options.jscript}jquery/flot/jquery.flot.resize.min.js" type="text/javascript"></script>
	<script src="${options.jscript}jquery/flot/jquery.flot.time.min.js" type="text/javascript"></script>
	<script src="${options.jscript}jquery/dataTables/jquery.dataTables.keytable.min.js" type="text/javascript"></script>		
	<script src="${options.plugins}float/float.js" type="text/javascript"></script>
	<script src="${options.plugins}datatables/jquery.dataTables.cdb.elink.columndropdown.js" type="text/javascript"></script>
	<script tal:condition="debug_mode == True" src="${options.localres_base}cs.metrics.cockpit/cdbqc_cockpit.js?v=${time}"></script>
	<script tal:condition="debug_mode != True" src="${options.localres_base}cs.metrics.cockpit/cdbqc_cockpit.js"></script>
</metal:qc_head_block>

<metal:qc_container define-macro="qc_container" tal:define="qccockpittools qccockpittools|None; qc_cockpit_app qc_cockpit_app|None;cdb_object_id cdb_object_id|None; qc_title qc_title|None;qc_modal_title qc_modal_title|None;newActivityButtonLink newActivityButtonLink|None;user_settings user_settings|None;containerclass containerclass|None; qctable_deactivated qctable_deactivated|False" tal:condition="qccockpittools!=None and qc_cockpit_app in qccockpittools.get_user_settings()">
<div class="${containerclass if containerclass else ''}" tal:omit-tag="containerclass == None">
<div class="cdbqc_process_container" tal:condition="qc_cockpit_app=='qc_process' and ('qc_process_data' and 'qc_process_columns' and 'qc_process_settings' in qccockpittools.get_render_data(qc_cockpit_app))">
<metal:qc_head_container use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_head_container" tal:define="qc_cockpit_app qc_cockpit_app;qc_settings qccockpittools.get_render_data(qc_cockpit_app)['qc_process_settings'];containerclass containerclass"/>
<metal:qc_kpi_container use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_container" tal:define="qc_cockpit_app qc_cockpit_app;thead_columns qccockpittools.get_render_data(qc_cockpit_app)['qc_process_columns'];tbody_data qccockpittools.get_render_data(qc_cockpit_app)['qc_process_data'];user_settings qccockpittools.get_user_settings()[qc_cockpit_app]"/>
<metal:qc_kpi_modal_container use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_modal_container" tal:define="qc_cockpit_app qc_cockpit_app;thead_columns qccockpittools.get_render_data(qc_cockpit_app)['qc_process_columns'];tbody_data qccockpittools.get_render_data(qc_cockpit_app)['qc_process_data'];user_settings qccockpittools.get_user_settings()[qc_cockpit_app]" />
</div>
<div class="cdbqc_object_container" tal:condition="cdb_object_id!=None and qc_cockpit_app=='qc_object' and ('qc_object_data' and 'qc_object_columns' and 'qc_object_settings' in qccockpittools.get_render_data(qc_cockpit_app,cdb_object_id))">
<metal:qc_head_container use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_head_container" tal:define="qc_cockpit_app qc_cockpit_app;qc_settings qccockpittools.get_render_data(qc_cockpit_app,cdb_object_id)['qc_object_settings'];containerclass containerclass"/>
<metal:qc_kpi_container use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_container" tal:define="qc_cockpit_app qc_cockpit_app;thead_columns qccockpittools.get_render_data(qc_cockpit_app,cdb_object_id)['qc_object_columns'];tbody_data qccockpittools.get_render_data(qc_cockpit_app,cdb_object_id)['qc_object_data'];user_settings qccockpittools.get_user_settings()[qc_cockpit_app]"/>
<metal:qc_kpi_modal_container use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_modal_container" tal:define="qc_cockpit_app qc_cockpit_app;thead_columns qccockpittools.get_render_data(qc_cockpit_app,cdb_object_id)['qc_object_columns'];tbody_data qccockpittools.get_render_data(qc_cockpit_app,cdb_object_id)['qc_object_data'];user_settings qccockpittools.get_user_settings()[qc_cockpit_app]" />
</div> 
</div>
</metal:qc_container>

<metal:qc_head_container define-macro="qc_head_container" tal:define="qc_cockpit_app qc_cockpit_app|None; qc_settings qc_settings|None;app_id app_id|'';containerclass containerclass|None">
<script tal:condition="qc_settings!=None and qc_cockpit_app=='qc_process'" type="text/javascript">
if(typeof(qc_cockpit_settings) !== "object"){
	qc_cockpit_settings={};
}
qc_cockpit_settings['${("div.%s" % containerclass) if containerclass else "div.cdbqc-prc-cockpit"}']={
	"appID":"${app_id}",
	"options_local_res": "${options.localres}",
	"restore_columns":'<h4>${options.labels.cdbqc_elink_cockpit_reset}</h4>',
	${qc_settings}
}
</script>
<script tal:condition="qc_settings!=None and qc_cockpit_app=='qc_object'" type="text/javascript">
if(typeof(qc_cockpit_settings) !== "object"){
	qc_cockpit_settings={};
}
qc_cockpit_settings['${("div.%s" % containerclass) if containerclass else "div.cdbqc-obj-cockpit"}']={
	"appID":"${app_id}",
	"options_local_res": "${options.localres}",
	"restore_columns":'<h4>${options.labels.cdbqc_elink_cockpit_reset}</h4>',
	${qc_settings}
}
</script>
</metal:qc_head_container>

<metal:qc_kpi_container define-macro="qc_kpi_container"
		tal:define="qc_cockpit_app qc_cockpit_app|None;
					thead_columns thead_columns|None;
					tbody_data tbody_data|None;
					user_settings user_settings|None">
	<div class="cdbqc-prc-cockpit" tal:condition="qc_cockpit_app=='qc_process'">
		<metal:qc_kpi_graph_container use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_graph_container"/>
	  	<div class="container-fluid">
	  		<metal:qc_kpi_tab_control_row use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_tab_control_row" tal:define="user_settings user_settings; thead_columns thead_columns"/>
			<div class="row-fluid">
				<div class="span12 qctable hide">
	  				<table cellpadding="0" cellspacing="0" border="0" class="table  table-bordered qctable" tal:condition="qctable_deactivated == False">
						<thead>
							<metal:qc_column use-macro="qccockpittools.templates()['qc_macros.html'].macros.thead_dictlist" tal:define="dictlist thead_columns"/>
						</thead>
						<tbody>
							<metal:qc_data use-macro="qccockpittools.templates()['qc_process.html'].macros.process_qclist" tal:define="qc_objlist tbody_data"/>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	<div class="cdbqc-obj-cockpit" tal:condition="qc_cockpit_app=='qc_object'">
	  	<metal:qc_kpi_graph_container use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_graph_container"/>
	  	<div class="container-fluid">
	  		<metal:qc_kpi_tab_control_row use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_tab_control_row" tal:define="user_settings user_settings; thead_columns thead_columns"/>
			<div class="row-fluid">
				<div class="span12 qctable hide">
	  				<table cellpadding="0" cellspacing="0" border="0" class="table  table-bordered qctable" tal:condition="qctable_deactivated == False">
						<thead>
							<metal:qc_column use-macro="qccockpittools.templates()['qc_macros.html'].macros.thead_dictlist" tal:define="dictlist thead_columns"/>
						</thead>
						<tbody>
							<metal:qc_data use-macro="qccockpittools.templates()['qc_object.html'].macros.object_qclist" tal:define="qc_objlist tbody_data"/>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</metal:qc_kpi_container>

<metal:qc_kpi_modal_container define-macro="qc_kpi_modal_container" tal:define="qc_cockpit_app qc_cockpit_app|None;thead_columns thead_columns|None;tbody_data tbody_data|None;user_settings user_settings|None;qc_title_inline qc_title_inline|False">
	<div tal:condition="qc_cockpit_app=='qc_process'" class="cdbqc-prc-cockpit-modal modal hide fade kpi_modal">
		<div class="modal-header qc_title">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 tal:condition="qc_title_inline==False" tal:define="qc_title qc_title|None" class="qc_title">${qc_title if qc_title else ''}</h3>
				<h3 tal:condition="qc_title_inline==True or qc_title_inline==None" tal:define="qc_title qc_title|None" class="qc_modal_title">${qc_modal_title if qc_modal_title else ''}</h3>
		</div>
		<div class="modal-body kpi_modal_body">
			<metal:qc_kpi_graph_container use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_graph_container" tal:define="qc_title_inline qc_title_inline"/>
		  	<div class="container-fluid">
		  		<metal:qc_kpi_tab_control_row use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_tab_control_row" tal:define="user_settings user_settings; thead_columns thead_columns"/>
				<div class="row-fluid">
					<div class="span12 qctable hide">
			  			<table cellpadding="0" cellspacing="0" border="0" class="table  table-bordered qctable"  tal:condition="qctable_deactivated == False">
							<thead>
								<metal:qc_column use-macro="qccockpittools.templates()['qc_macros.html'].macros.thead_dictlist" tal:define="dictlist thead_columns"/>
							</thead>
							<tbody>
								<metal:qc_data use-macro="qccockpittools.templates()['qc_process.html'].macros.process_qclist" tal:define="qc_objlist tbody_data"/>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button class="btn" data-dismiss="modal" aria-hidden="true">${options.labels.button_close|'Close'}</button>
		</div>
	</div>
	<div tal:condition="qc_cockpit_app=='qc_object'" class="cdbqc-obj-cockpit-modal modal hide fade kpi_modal">
		<div class="modal-header qc_title">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 tal:condition="qc_title_inline==False" tal:define="qc_title qc_title|None" class="qc_title">${qc_title if qc_title else ''}</h3>
				<h3 tal:condition="qc_title_inline==True or qc_title_inline==None" tal:define="qc_title qc_title|None" class="qc_modal_title">${qc_modal_title if qc_modal_title else ''}</h3>
		</div>
		<div class="modal-body kpi_modal_body">
			<metal:qc_kpi_graph_container use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_graph_container" tal:define="qc_title_inline qc_title_inline"/>
		  	<div class="container-fluid">
		  		<metal:qc_kpi_tab_control_row use-macro="qccockpittools.templates()['qc_macros.html'].macros.qc_kpi_tab_control_row" tal:define="user_settings user_settings;thead_columns thead_columns"/>
				<div class="row-fluid">
					<div class="span12 qctable hide">
			  			<table cellpadding="0" cellspacing="0" border="0" class="table  table-bordered qctable"  tal:condition="qctable_deactivated == False">
							<thead>
								<metal:qc_column use-macro="qccockpittools.templates()['qc_macros.html'].macros.thead_dictlist" tal:define="dictlist thead_columns"/>
							</thead>
							<tbody>
								<metal:qc_data use-macro="qccockpittools.templates()['qc_object.html'].macros.object_qclist" tal:define="qc_objlist tbody_data"/>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button class="btn" data-dismiss="modal" aria-hidden="true">${options.labels.button_close|'Close'}</button>
		</div>
	</div>	
</metal:qc_kpi_modal_container>


<metal:qc_kpi_graph_container define-macro="qc_kpi_graph_container" tal:define="qc_title_inline qc_title_inline|True">
 	<div class="container-fluid qc_kpi_graph_container">
	  	<div class="row-fluid" tal:condition="qc_title_inline==True">
			<div class="span12 qc_title">
				<h3 tal:define="qc_title qc_title|None" class="qc_title">${qc_title if qc_title else ''}</h3>
			</div>
		</div>
  		<div class="row-fluid">
	  		<div class="hide span6 history_dia" data-elink-spanclass="span6">
	  			<div class="history_dia_container">
		  			<div class="container-fluid">
		  				<div class="row-fluid">
		  					<div class="span12">
		  						<h4>${options.labels.cdbqc_elink_cockpit_history}</h4>
		  					</div>
		  				</div>
		  				<div class="row-fluid">
		  					<div class="span12">
		  						<div class="history_content" style="height:300px;width:100%;"></div>
		  					</div>
		  				</div>
		  				<div class="row-fluid">
		  					<div class="span12">
		  						<div class="history_content_pan" style="height:30px;width:100%;"></div>
		  					</div>
	  					</div>
	  				</div>
	  			</div>
  			</div>
			<div class="hide span6 history_legend_dia" data-elink-spanclass="span6">
				<div class="history_legend"></div>
			</div>
			<div class="hide span6 activity_dia" data-elink-spanclass="span6">
  			  	<div class="activity_container">
  			  		<div class="container-fluid">
  			  		 	<div class="row-fluid">
  			  		 		<div class="span12">
		  						<h4>${options.labels.cdbqc_elink_cockpit_actions}</h4>
		  					</div>
		  				</div>
		  					<div class="row-fluid">
		  						<div class="span12">
  			  						<div class="span12 activity_content" style="height:300px;width:100%;"></div>
  			  					</div>
  			  				</div>
  			  			<div class="row-fluid">
  			  				<div class="span12">
  			  	  				<a tal:define="newActivityButtonLink newActivityButtonLink|None"
  			  	  						class="btn newActivityButton" tabindex="1" accesskey="n"
  			  	  						title="${options.labels.cdbqc_elink_cockpit_new_action}"
  			  	  						href="${newActivityButtonLink if newActivityButtonLink else ''}" >
  			  	  					<i class="icon-wrench"></i>
  			  	  				</a>
  			  	  				<a class="btn toggleOptimalActions" tabindex="2" accesskey="o" title="${options.labels.cdbqc_elink_cockpit_optimal_actionmix}" >
  			  	  					<i class="icon-star-empty"></i>
  			  	  				</a>
  			  	  			</div>
  			  	  		</div>
  			  	  	</div>
  			  	</div>
  			</div>
  		</div>
  	</div>
</metal:qc_kpi_graph_container>

<metal:qc_kpi_tab_control_row define-macro="qc_kpi_tab_control_row" tal:define="thead_columns thead_columns|None; user_settings user_settings|None">
<div class="row-fluid qc_kpi_tab_control_row hide">
	<div class="span6">
		<metal:menu use-macro="global_plugins['datatables'].macros.dt_col_show_hide_dropdown" 
			    tal:define="title options.labels.cdbqc_elink_cockpit_show_hide;
							additional_container_classes 'showhide-drop'" />  	
	</div>
	<div class="span6">
		<form>
			<div class="input-prepend pull-right">
				<span class="add-on"><i class="icon-search"></i></span><input class="filter_search" title="${options.labels.cdbqc_elink_cockpit_search2}" tabindex="4" accesskey="s" type="text" placeholder="${options.labels.cdbqc_elink_cockpit_search}"  value="${user_settings['searchquery'] if (user_settings and 'searchquery' in user_settings) else ''}">
			</div>
		</form>
	</div>
</div>
</metal:qc_kpi_tab_control_row>

<metal:action_dia_styling define-macro="action_dia_styling">
	<div class="flot_target_css_attributes hide"></div>
	<div class="flot_act_val_css_attributes hide"></div>
	<div class="flot_action_bar_css_attributes hide"></div>
	<div class="flot_action_effect_css_attributes hide"></div>
	<div class="flot_action_highlight_css_attributes hide"></div>
</metal:action_dia_styling>

<metal:comment define-macro="comment">
	<div tal:omit-tag="" tal:condition="debug_mode == True" tal:content="comment">
	<!-- only works within tal:pagecontent -->
	</div>
</metal:comment>

<metal:qc_showhide define-macro="showhide_dictlist">
	<div tal:repeat="dict dictlist" tal:omit-tag="1">
		<li class="columnswitch" data-elink-cdbqc-cockpit-column-id="${dict.id}" tal:condition="dict.excluded == 0">
			<a tabindex="${4+dict.id}"><h4><i class="" style="padding-right:10px;"></i>${dict.title}</h4></a>
		</li>
	</div>
</metal:qc_showhide>

<metal:dictlist define-macro="thead_dictlist">
	<div tal:repeat="dict dictlist" tal:omit-tag="1">
		<th class="${dict.cclass}"><h4>${dict.title}</h4></th>
	</div>
</metal:dictlist>

<metal:qc_activitystream define-macro="modal_window">
<div id="popup_modal" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<div class="modal-header-content">
			<h3>${options.labels.cdbqc_elink_cockpit_comment}</h3>
		</div>
	</div>
	<div class="modal-body">
	</div>
	<div class="modal-footer">
		<button class="btn" data-dismiss="modal" aria-hidden="true">${options.labels.button_close|'Close'}</button>
	</div>
</div>
</metal:qc_activitystream>