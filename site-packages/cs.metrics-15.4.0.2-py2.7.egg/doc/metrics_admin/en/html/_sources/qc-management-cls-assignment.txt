.. _`HELPID_qc-management-cls-assignment`:
.. _`qc-management-cls-assignment`:

Klassenzuordnung
################

In diesem Abschnitt wird auf die Besonderheiten bzw. Unterschiede beider Kennzahlentypen, bezüglich der Konfiguration von Klassenzuordnungen zu Kennzahldefinitionen, eingegangen.  Zunächst soll das grundsätzliche Vorgehen bei der Zuordnung einer Klasse zu einer Kennzahldefinition beschrieben werden. Im Anschluss erfolgen die Erläuterungen für die durchgehenden Beispielkennzahlen.

	.. note::
		Voraussetzung für die Zuordnung einer Klasse ist eine bereits angelegte Kennzahldefinition.

Eine Klassenzuordnung lässt sich im Kontext einer Kennzahldefinition vornehmen. Das heißt, über die Trefferliste von Kennzahldefinitionen können Sie das Datenblatt einer Kennzahldefinition aufrufen. Ausgehend vom Datenblatt gelangen Sie zum Reiter :guilabel:`Klassenzuordnung`. Im Ergebnisbereich dieses Reiters lässt sich über das Kontextmenü (rechte Maustaste) eine Neuanlage vornehmen.

Dazu werden über einen Dialog die entsprechenden Angaben angefordert. Für eine Klassenzuordnung im Kontext einer Objektkennzahldefinition existieren neben den Pflicht-Eingabefeldern :guilabel:`Klassenname` und  :guilabel:`Kennzahldefinition` die Felder :guilabel:`Objektregel`, :guilabel:`Berechnungsregel`, :guilabel:`Berechnungsfrequenz` und :guilabel:`Nächste Berechnung` sowie die Kontrollboxen :guilabel:`Berechnet` und :guilabel:`Aggregierten Wert automatisch als aktuellen Wert übernehmen`.

	.. note::
		Wurde bei der Kennzahldefinition bereits die Kontrollbox :guilabel:`Berechnet` ausgewählt, sind auch die Dialogfelder :guilabel:`Berechnungsregel` und :guilabel:`Berechnungsfrequenz` Pflichtfelder.

Der Neuanlagedialog für die Klassenzuordnung einer Klassenkennzahl ist weniger umfangreich. Hier sind lediglich die Eingabefelder :guilabel:`Klassenname`, :guilabel:`Kennzahldefinition`, :guilabel:`Objektregel`, :guilabel:`Berechnungsregel`, :guilabel:`Berechnungsfrequenz` und :guilabel:`Nächste Berechnung` vorhanden. Darüber hinaus gehören neben dem :guilabel:`Klassennamen` und der :guilabel:`Kennzahldefinition` auch die Felder :guilabel:`Berechnungsregel` und :guilabel:`Berechnungsfrequenz` zu den Pflichtfeldern.

Der :guilabel:`Klassenname` bezieht sich auf die Klasse der Objekte, für die entsprechend der Definition die Kennzahlen generiert werden sollen. Die Auswahl erfolgt über einen Katalog, der sämtliche verfügbare Klassen im System auflistet. Das Feld :guilabel:`Kennzahldefinition` wird in der Regel mit dem Namen der entsprechenden Definition vorbelegt, da eine Klassenzuordnung grundsätzlich nur im Kontext einer Kennzahldefinition vorgenommen werden kann.

Bei der Zuordnung ist im Vorfeld darauf zu achten bzw. dafür zu sorgen, dass bei der Klasse, die zugeordnet werden soll, ein voll qualifizierter Python-Name eingetragen ist. Eine weitere Voraussetzung, für die spätere Erzeugung und Berechnung von Kennzahlen, ist die vorhandene Ableitung der Klasse der Klassenzuordnung von der Klasse ``WithQualityCharacteristics`` (``cs.metrics.qcclasses.WithQualityCharacteristics``).

Für Klassen - und Objektkennzahlen können mithilfe von Objektregeln unterschiedliche Konfigurationen realisiert werden.
Anhand einer :guilabel:`Objektregel` können Sie für Klassenzuordnungen im Kontext einer Klassenkennzahldefinition die Bedingung für die Auswertung über eine SQL-Statistik festlegen. Die allgemeine Funktion und Konfiguration von Objektregeln finden Sie im Administrationshandbuch (siehe :ref:`cdbpws-api-cdbobjects-rules`). Auf die unterschiedliche Bedeutung von Objektregeln bezüglich einer Klassenzuordnung sowie Klassen - und Objektkennzahlen wird in den entsprechenden Unterabschnitten (:ref:`Objektregel im Kontext einer Klassenzuordnung <qc-management-cls-assignment-objrule>`, :ref:`Objektregel im Kontext von Klassenkennzahlen <qc-management-cls-assignment-classqcs-objrule>`, :ref:`Objektregeln im Kontext von Objektkennzahlen <qc-management-cls-assignment-objqcs-objrule>`) eingegangen.

Im Eingabebereich :guilabel:`Berechnung` können Sie zusätzliche Einstellungen für die Berechnung vornehmen. Dazu ist es notwendig, dass bereits bei der Kennzahldefinition die Kontrollbox für :guilabel:`Berechnet` ausgewählt wurde, da andernfalls dieser Bereich im aktuellen Dialog nicht modifizierbar ist. Ist eine Bearbeitung dieser Werte möglich, können Sie eine :guilabel:`Berechnungsregel` (siehe :ref:`Berechnungsregeln <qc-management-comp-rules>`) auswählen und einen zeitlicher Takt für die Berechnung vorgeben. Aus diesen Angaben ergibt sich, bei Bedarf, ein Eintrag im Feld :guilabel:`Nächste Berechnung`.

Im letzten Abschnitt des Dialogs wird entschieden, ob der aggregierte Wert jeweils automatisch, als aktueller Wert für die betreffende Kennzahl übernommen werden soll. Die Übernahme ist unter bestimmten Voraussetzungen  manuell auch innerhalb des Objekt KPI Cockpits möglich. Das genaue Vorgehen dazu ist in :ref:`qc-menuezugang-obj` beschrieben.

Auch dieser Eingabedialog wird über die Schaltfläche :guilabel:`Neu` bestätigt. Anhand der Beispielkennzahlen soll die Bedeutung der Dialogfelder verdeutlicht werden.

.. rubric:: Berechnete Objektkennzahl: Kosteneffizienz

Für die Klassenzuordnung zur Kennzahldefinition Kosteneffizienz werden folgende Angaben gemacht:

	===================================		===========================
	Dialogfeld								Wert
	===================================		===========================
	:guilabel:`Klassenname`					cdbpcs_project
	:guilabel:`Kennzahldefinition`			Kosteneffizienz
	:guilabel:`Objektregel`					cdbpcs: Active Project
	:guilabel:`Berechnet`					ja
	:guilabel:`Berechnungsregel`			EVA: Cost performance index
	:guilabel:`Berechnungsfrequenz`			täglich
	:guilabel:`Nächste Berechnung`
	:guilabel:`AW übernehmen`				nein
	===================================		===========================

Diese Kennzahl ist eine Projektkennzahl, daher wird für den :guilabel:`Klassennamen` der entsprechene Name der Klasse für Projekte eingetragen. Die :guilabel:`Kennzahldefinition` wird entsprechend dem Namen der Kennzahldefinition (Kosteneffizienz) vorbelegt.

Ebenso wird der Wert der Kontrollbox :guilabel:`Berechnet` entsprechend der Auswahl bei der Erstellung der Kennzahldefinition übernommen, in diesem Fall soll eine Berechnung stattfinden. Dementsprechend wurde eine Berechnungsregel ausgewählt. Der Termin für die nächste Berechnung wird bei der :ref:`Aktivierung <qc-management-activate>` der Kennzahldefinition ermittelt.

Zusätzlich wurde für diese Klassenzuordnung eine :guilabel:`Objektregel` angegeben. Diese filtert nur aktive Projekte im System und nur für Projekte, die dieser Filterung entsprechen soll die Kennzahl generiert werden. Die Abkürzung *AW übernehmen* steht für die Bezeichnung der Kontrollbox :guilabel:`Aggregierten Wert automatisch als aktuellen Wert übernehmen`. In diesem Beispiel wird sie nicht bestätigt.

.. rubric:: Nicht berechnete Objektkennzahl: Produktgewicht

Nötige Angaben für die Klassenzuordnung:

	===================================		===========================
	Dialogfeld								Wert
	===================================		===========================
	:guilabel:`Klassenname`					part
	:guilabel:`Kennzahldefinition`			Produktgewicht
	:guilabel:`Objektregel`
	:guilabel:`Berechnet`					nein
	:guilabel:`Berechnungsregel`
	:guilabel:`Berechnungsfrequenz`
	:guilabel:`Nächste Berechnung`
	:guilabel:`AW übernehmen`				nein
	===================================		===========================

Für diese Klassenzuordnung wird lediglich der Name der Klasse benötigt, für deren Objekte die Kennzahl angelegt werden soll, d.h. der :guilabel:`Klassenname` ``part`` für Produkte bzw. Artikel. Angaben zur Berechnung können nicht vorgenommen werden, weil bereits bei der Kennzahldefinition Produktgewicht keine Berechnung gewünscht ist. Die Berechnung ergibt sich über eine Aggregation von Werten, über die Produktstruktur, aber der aggregierte Wert soll nicht automatisch als aktueller Wert übernommen werden.

.. rubric:: Klassenkennzahl mit SQL-Statistik: Anzahl Dokumente

Abschließend werden die Konfigurationsangaben für die Klassenkennzahl Anzahl Dokumente aufgelistet.

	===================================		===========================
	Dialogfeld								Wert
	===================================		===========================
	:guilabel:`Klassenname`					document
	:guilabel:`Kennzahldefinition`			Anzahl Dokumente
	:guilabel:`Objektregel`					cdbqc: non unvalid documents
	:guilabel:`Berechnungsregel`			Anzahl Dokumente ohne Revision
	:guilabel:`Berechnungsfrequenz`			monatlich
	:guilabel:`Nächste Berechnung`			tt.mm.jjjj
	===================================		===========================

Auch über diese :guilabel:`Objektregel` werden Klassenobjekte mit spezifischen Eigenschaften gefiltert, hier betrifft das Dokumente, die gültig sind.

.. toctree::
   :maxdepth: 2

   qc-management-cls-assignment-objrule
   qc-management-cls-assignment-comp-clock
   qc-management-cls-assignment-classqcs
   qc-management-cls-assignment-objqcs
   