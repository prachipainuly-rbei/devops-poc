#!/usr/bin/env powerscript
# -*- python -*- coding: iso-8859-1 -*-
#
# Copyright (C) 1990 - 2013 CONTACT Software GmbH
# All rights reserved.
# http://www.contact.de/

from cdb import sqlapi


class DataMigrations(object):

    # E045769: Set default values for new multilanguage field.

    def run(self):
        empty_db_string = "CHR(1)" if (sqlapi.SQLdbms() == sqlapi.DBMS_ORACLE) else "''"
        sqlapi.SQLupdate("cdb_folder SET name_de=name, name_en=name "
                         "WHERE (name_de IS NULL OR name_de=%s) "
                         "AND (name_en IS NULL OR name_en=%s) " % (empty_db_string, empty_db_string))

pre = []
post = [DataMigrations]

if __name__ == '__main__':
    DataMigrations().run()
