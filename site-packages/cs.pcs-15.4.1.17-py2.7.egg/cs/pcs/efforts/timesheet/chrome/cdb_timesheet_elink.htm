<metal:page use-macro="global_macros['cdb_standard_page_layout']"
  tal:define="curr_day_comp python:context.curr_day.split('.');
                      dummy1 python:curr_day_comp.reverse();
                      page_title python:options.labels.cdbpcs_timesheet_page_title;">
<html>
<head>

<metal:block fill-slot="head_block">
  <link
    tal:attributes="href string:${options.css}jquery/jquery.treeview.css?version=${context.call_time}"
    rel="stylesheet" type="text/css" />
  <link
    tal:attributes="href string:${options.css}jquery/jquery.autocomplete.contact.css?version=${context.call_time}"
    rel="stylesheet" type="text/css" />
  <link
    tal:attributes="href string:${options.css}jquery/bootstrap/datepicker/css/datepicker.css?version=${context.call_time}"
    rel="stylesheet" type="text/css" />
  <link
    tal:attributes="href string:${options.localres}cdbpcs_timesheet_elink.css?version=${context.call_time}"
    rel="stylesheet" type="text/css" />
    <script
      tal:attributes="src string:${options.jscript}jquery/jquery.cookie.js?version=${context.call_time}"
      type="text/javascript"></script>
    <script
      tal:attributes="src string:${options.jscript}jquery/jquery.treeview.min.js?version=${context.call_time}"
      type="text/javascript"></script>
    <script
      tal:attributes="src string:${options.jscript}jquery/jquery.autocomplete.contact.js?version=${context.call_time}"></script>
  <script
    tal:content="string:var ts_mandatory_fields=${context.ts_mandatory_fields};"
    type="text/javascript"
    tal:condition="context.ts_mandatory_fields|nothing"></script>
  <script
    tal:attributes="src string:${options.jscript}jquery/bootstrap/datepicker/bootstrap-datepicker.js?version=${context.call_time}"
    type="text/javascript"></script>
  <script
    tal:attributes="src string:${options.jscript}jquery/bootstrap/datepicker/locales/bootstrap-datepicker.${options.currlang}.js?version=${context.call_time}"
    type="text/javascript" tal:condition="options.currlang != 'en'"></script>
  <script
    tal:attributes="src string:${options.localres}cdbpcs_timesheet_elink.js?version=${context.call_time}"
    type="text/javascript" charset="UTF-8"></script>
</metal:block>
</head>

<body>
  <metal:block fill-slot="page_content">
    <form id="form1" name="form1" action="" method="get">
      <div id="ts_header" class="row-fluid">
        <div class="row-fluid">
          <div id="header_left" class="span4">
            <input type="hidden" name="cdb_person_id" value=""
              id="cdb_person_id" tal:attributes="value context.cdb_person_id"></input>
            <input type="hidden" name="sel_date" value=""
              tal:attributes="value context.sel_date" onchange="submitForm1()"></input>
            <input type="hidden" id="update_effort" name="update_effort"
              value=""></input>
            <div class="input-append">
              <input id="person_name" tabIndex="10" name="person_name" value=""
                type="text"
                                tal:attributes="value context.person_name"></input>
              <button id="btn_person_name" class="btn" tabIndex="20"
                onclick="showDropDown($('input#person_name'))" type="button">
                <i class="icon-chevron-down"></i>
              </button>
            </div>
          </div>

          <div id="header_center" class="span5">
            <div class="input-append input-prepend inline"
              style="display: inline">

              <button class="btn add-on" type="button" tabindex="30"
                tal:attributes="onclick string:document.form1.sel_date.value='${context.last_week}';;submitForm1()">
                <i class="icon-chevron-left"></i>
              </button>

              <input type="button"
                value="${context.week_begin} - ${context.week_end}" class="btn"></input>

              <button class="btn add-on" type="button" tabindex="40"
                tal:attributes="onclick string:document.form1.sel_date.value='${context.next_week}';;submitForm1()"
                style="display: inline">
                <i class="icon-chevron-right"></i>
              </button>
            </div>

            <div class="btn-group inline" style="display: inline">
              <button type="button" id="go_curr_week" tabindex="50" class="btn"
                tal:attributes="disabled context.disable_curr_week_button|nothing; onclick string:document.form1.sel_date.value='${context.curr_day}';;submitForm1()">
                ${options.labels.cdbpcs_timesheet_this_week}</button>

              <a id="tsheader_datepicker" class="btn" tabindex="60"
                date-date="${date_for_calendar}"> <i class="icon-calendar"></i>
              </a>

            </div>
          </div>

          <div class="span3" id="rule_selection_link">
            <a
              tal:content="python:options.labels.cdbpcs_timesheet_select_rule"
              onclick="show_rule_selection()"></a>
          </div>

          <tal:comment replace="nothing">Filters</tal:comment>

        </div>


        <div class="row-fluid">
          <div id="filter_header" class="filter_area_header span12">
            <a class="btn" data-toggle="collapse" href="#filter_area1"
              onclick="changeClass($('#filter_btn'),'icon-caret-down', 'icon-caret-up')">
              <span class="collapse_area_title"
              tal:content="python:options.labels.cdb_elink_filter" /> <span
              class="collapse_area_title_collapsed"> <i
                class="icon-caret-down" id="filter_btn"></i>
            </span>
            </a>
          </div>
        </div>
        <div class="row-fluid">
          <div id="filter_area1" class="collapse" style="height: 0px;">

            <div class="filter_button">
              <label>${options.labels.pcs_tage}</label> <label
                class="checkbox inline"> <input type="checkbox"
                id="filter_incompl" name="filter_incompl"
                value="${context.filter_incompl|nothing}"
                checked="${context.filter_incompl|nothing}"
                ></input>
                ${options.labels.cdbpcs_timesheet_incompl}
              </label> <label class="checkbox inline"> <input type="checkbox"
                id="filter_open" name="filter_open"
                value="${context.filter_open|nothing}"
                checked="${context.filter_open|nothing}"
                ></input>
                ${options.labels.cdbpcs_timesheet_filter_open}
              </label> <label class="checkbox inline"> <input type="checkbox"
                id="filter_weekday" name="filter_weekday"
                value="${fltr_weekday|nothing}"
                checked="${fltr_weekday|nothing}"
                tal:define="fltr_weekday python:context.filter_weekday if context.filter_weekday else None"></input>
                ${options.labels.cdbpcs_timesheet_all_weekday}
              </label>
            </div>

            <div class="filter_box">
              <span class="headline_text"
                tal:content="python:options.labels.pcs_project">Project</span><br />
              <input type="hidden" id="cdb_project_id__filter"
                name="filter_project" value=""
                tal:attributes="value context.filter_project|nothing"></input>


              <div class="input-append">
                <input type="text" id="project_name__filter"
                  tal:attributes="value context.filter_project_name|nothing"></input>
                <button type="button" class="btn"
                  onclick="showDropDown($('input#project_name__filter'))">

                  <i class="icon-chevron-down"></i>
                </button>
              </div>
            </div>

            <div class="filter_box">
              <span class="headline_text"
                tal:content="python:options.labels.pcs_task">Task</span><br />
              <input type="hidden" id="task_id__filter" name="filter_task"
                value="" tal:attributes="value context.filter_task|nothing"></input>

              <div class="input-append">
                <input type="text" id="task_name__filter" readonly="readonly"
                  class="task_name_readonly"
                  tal:attributes="value context.filter_task_name|nothing"></input>
                <button type="button" class="task_name_readonly btn"
                  onclick="showDropDown($('input#task_name__filter'))">
                  <i class="icon-chevron-down"></i>
                </button>
              </div>
            </div>
                                    
            <button class="btn submit-btn" type="button" onclick="submitForm1()">
              ${python:options.labels.button_apply}
            </button>
               
          </div>
        </div>
      </div>



      <div id="table_part" class="row-fluid">
        <div class="span12">
          <div class="blockhead" style="width: 100%; margin: 0 auto;"
            onresize="setTableWidth()">
            <table class="table" id="timesheets_header" cellspacing="0">
              <tr>
                <th class="h__date" tal:content="python:options.labels.date">Date</th>
                <th class="h__dateactions"></th>
                <th class="h__cdb_project_id"
                  tal:content="python:options.labels.cdbpcs_project_number">Project nr.</th>
                <th class="h__cdb_project_name"
                  tal:content="python:options.labels.cdbpcs_project_name">Project name</th>
                <th class="h__task_id"
                  tal:content="python:options.labels.pcs_task">Task</th>
                <th class="h__hours"
                  tal:content="python:options.labels.cdbpcs_timesheet_h">(h)</th>
                <th class="h__description"
                  tal:content="python:options.labels.desc">Description</th>
                <th class="h__activity_type_object_id"
                  tal:content="python:options.labels.cdbpcs_timesheet_activity_type">L.-art</th>
                <th class="h__buttons" tal:content="string: "></th>
              </tr>
            </table>
          </div>

          <div id="table_view" class="invisibleInit">

            <table class="table table-hover" id="timesheets_table"
              cellspacing="0">
              <tal:dayblock tal:repeat="workday context.workdays">
                <tal:dayblockdefine
                  define="wd_closed python:workday['day_object'] and int(workday['day_object']['ts_closed'])==1;
                                                idflag python:workday['date'].replace('.', '_');
                                                resthours python:workday['weekday_hours']-workday['sum_total'];
                                                is_today python:workday['date']==context.curr_day;
                                                has_ts python:len(workday['timesheets']);
                                                workday_comp python:workday['date'].split('.');
                                                dummy2 python:workday_comp.reverse();
                                                wdclass python:'day_closed' if wd_closed else 'day_future' if workday_comp>curr_day_comp and not has_ts else 'day_todo' if resthours>0 else 'day_finished';
                                                wdclass python:wdclass + ' is_today' if is_today else wdclass">
                  <tal:comment replace="nothing">Headline of each day-block</tal:comment>
                  <tr tal:attributes="class python:'dayheadline '+wdclass">
                    <tal:comment replace="nothing">Date</tal:comment>
                    <td class="middlealigned h__date">
                      <div class="dayname">
                        <div class="date_text inline">
                          <span tal:content="python: workday['weekdayname']"></span>
                          <span
                            tal:define="datestrs python:workday['date'].split('.')"
                            tal:content="python:'%s%s.%s%s'%(datestrs[0][0].replace('0',''), datestrs[0][1], datestrs[1][0].replace('0',''), datestrs[1][1])"></span>

                          <tal:multiday condition="not:wd_closed">
                            <span class="hide_elmt to_symbol"> -</span>
                            <div class="hide_elmt multi_day_text"
                              tal:attributes="id string:text_multi_day__${idflag}">
                              <span></span>
                            </div>
                            <input type="hidden" value=""
                              tal:attributes="id string:multi_day__${idflag};
                                                       name string:multi_day__${idflag};
                                                       onchange string:changeMultiDay(this,'${idflag}')"></input>
                          </tal:multiday>
                        </div>

                      </div> <input type="hidden"
                      tal:attributes="id string:day__${idflag};
                                                 name string:day__${idflag};
                                                 value workday.date"></input>
                      <input type="hidden" value=""
                      tal:attributes="id string:effort_id__${idflag};
                                                 name string:effort_id__${idflag}"></input>

                      <input type="hidden"
                      tal:attributes="id string:wd_hours__${idflag};
                                                 value python:workday['weekday_hours']"></input>

                    </td>

                    <tal:comment replace="nothing">Date actions</tal:comment>
                    <td class="middlealigned h__dateactions">
                      <div class="day_button_div">
                        <button class="multi_day_button btn btn-mini" type="button"
                          data-date="${date_for_calendar}"
                          tal:attributes="id string:btn_multi_day__${idflag};
                                                    onclick string:chooseMultiDay('${idflag}')"
                          tal:condition="not:wd_closed">
                          <i class="icon-plus"></i>
                        </button>
                      </div>
                    </td>

                    <tal:comment replace="nothing">Project</tal:comment>
                    <td class="h__cdb_project_id"><tal:block
                        condition="not:wd_closed">
                        <input type="hidden"
                          tal:attributes="id string:cdb_project_id__${idflag};
                                                   name string:cdb_project_id__${idflag};
                                                   value python: project_id if idflag==date else ''"></input>
                        <div class="input-append">
                          <input type="text" class=""
                            tal:attributes="id string:project_id__${idflag};
                                                     value python: project_id if idflag==date else ''"></input>
                          <button type="button" class="btn"
                            tal:attributes="onclick string:showDropDown($('input#project_id__${idflag}'))">
                            <i class="icon-chevron-down"></i>
                          </button>
                        </div>
                      </tal:block></td>
                    <td class="h__cdb_project_name"><tal:block
                        condition="not:wd_closed">
                        <input type="hidden"
                          tal:attributes="id string:cdb_project_name__${idflag};
                                                   name string:cdb_project_name__${idflag};
                                                   value python: project_name if idflag==date else ''"></input>
                        <div class="input-append">
                          <input type="text" class=""
                            tal:attributes="id string:project_name__${idflag};
                                                     value python: project_name if idflag==date else ''"></input>
                          <button type="button" class="btn"
                            tal:attributes="onclick string:showDropDown($('input#project_name__${idflag}'))">
                            <i class="icon-chevron-down"></i>
                          </button>
                        </div>
                      </tal:block></td>

                    <tal:comment replace="nothing">Task</tal:comment>

                    <td
                      tal:attributes="class python:'rightaligned h__task_id' if wd_closed else 'h__task_id'">
                      <tal:block condition="not:wd_closed">
                        <div class="input-append">
                          <input type="hidden"
                            tal:attributes="id string:task_id__${idflag};
                                                                        name string:task_id__${idflag};
                                                                        value python: task_id if idflag==date else ''"></input>
                          <input type="text" readonly="readonly"
                            class=" task_name_readonly ${no_default_task|nothing}"
                            tal:attributes="id string:task_name__${idflag};
                                                                        value python: task_name if idflag==date else ''"></input>
                          <button type="button" class="task_name_readonly btn"
                            tal:attributes="onclick string:showDropDown($('input#task_name__${idflag}'))">
                            <i class="icon-chevron-down"></i>
                          </button>
                        </div>
                      </tal:block>
                    </td>

                    <tal:comment replace="nothing">(h)</tal:comment>
                    <td class="h__hours"><tal:block condition="not:wd_closed">
                        <input type="hidden"
                          tal:attributes="id string:wd_sum__${idflag};
                                                   value python:workday['sum']"></input>
                        <input type="hidden"
                          tal:attributes="id string:wd_sum_total__${idflag};
                                                   value python:workday['sum_total']"></input>
                        <div class="input-append">
                          <input type="text" class=" hours_input hourstext"
                            onkeypress="return timeonly(this,event,true);"
                            tal:attributes="id string:hours__${idflag};
                                                     name string:hours__${idflag};
                                                     value resthours"></input>
                          <button type="button" id="clock" class="clock btn"
                            tal:condition="python:is_today"
                            tal:attributes="id string:clock__${idflag};
                                                      onclick string:toggleClock('${idflag}')">
                            <i class="icon-time"></i> <img src=""
                              tal:attributes="src string:${options.localres}clock_run.png"
                              style="display: none;" />
                          </button>
                        </div>
                        <input type="hidden" value=""
                          tal:condition="python:is_today"
                          tal:attributes="id string:clock_value__${idflag}"></input>
                        <span class="clock_starttime hide_elmt"
                          tal:condition="python:is_today"
                          tal:attributes="id string:clock_starttime__${idflag}"></span>
                      </tal:block></td>

                    <tal:comment replace="nothing">Description</tal:comment>
                    <td width="auto" class="h__description"><tal:block
                        condition="not:wd_closed">
                        <div class="input-append">
                          <input type="text" class=" "
                            tal:attributes="id string:description__${idflag};
                                                     name string:description__${idflag};
                                                     value dftdesc if idflag==date else wddesc"
                                                        tal:define="wddesc workday.default_description|nothing;
                                                                    dftdesc default_description|wddesc"></input>
                          <button type="button" class="btn"
                            tal:attributes="id string:cpoi__${idflag}"
                            disabled="disabled" onclick="show_cpoi_view(this);">
                            <i class="icon-chevron-down"></i>

                          </button>
                        </div>
                      </tal:block></td>

                    <tal:comment replace="nothing">Activity Type</tal:comment>
                    <td class="h__activity_type_object_id"><tal:block
                        condition="not:wd_closed">
                        <div class="input-append">
                          <input type="hidden"
                            tal:attributes="id string:activity_type_object_id__${idflag};
                                                                        name string:activity_type_object_id__${idflag};
                                                                        value dftatype if idflag==date else wdatype"
                                                        tal:define="wdatype workday.default_activity_type_object_id|nothing;
                                                                    dftatype default_activity_type_object_id|wdatype"></input>
                          <input type="text" class="activity_type_readonly"
                            tal:attributes="id string:activity_type__${idflag};
                                                                        value dftatype if idflag==date else wdatype"
                                                        tal:define="wdatype workday.default_activity_type|nothing;
                                                                    dftatype default_activity_type|wdatype"
                            style="width: 153px"></input>
                          <button type="button" class=" activity_type_readonly btn"
                            tal:attributes="onclick string:showDropDown($('input#activity_type__${idflag}'))">
                            <i class="icon-chevron-down"></i>
                          </button>
                        </div>
                      </tal:block></td>

                    <tal:comment replace="nothing">Buttons</tal:comment>
                    <td class="h__buttons"><tal:block
                        condition="not:wd_closed">
                        <div class="inline btn-group">
                          <button type="button" class="btn" disabled="disabled"
                            tal:attributes="onclick string:submitEffort('${idflag}')">
                            <i class="icon-save"></i>
                          </button>
                          <button type="button" class="btn" disabled="disabled"
                            tal:attributes="onclick string:cancelChange('${idflag}')">
                            <i class="icon-undo"></i>
                          </button>
                        </div>
                      </tal:block></td>
                  </tr>

                  <tal:comment replace="nothing">Time sheets</tal:comment>
                  <tal:ts_block tal:repeat="timesheet workday.timesheets">
                    <tal:defineblock
                      define="ts_closed timesheet.ts_closed|nothing;
                                                 ts_id timesheet.effort_id">

                      <tr
                        tal:attributes="class python:''+'ts_closed' if ts_closed else ''">
                        <tal:comment replace="nothing">Effort-id</tal:comment>
                        <td><input type="hidden" value=""
                          tal:attributes="id string:ts_effort_id__${ts_id};
                                                     name string:ts_effort_id__${ts_id};
                                                     value ts_id"></input>
                          <div class="daybutton">
                            <span>&nbsp;</span>
                          </div></td>

                        <tal:comment replace="nothing">Date actions</tal:comment>
                        <td class="t__dateactions"></td>

                        <tal:comment replace="nothing">Project id</tal:comment>
                        <td class="t__cdb_project_id"><input type="hidden"
                          tal:attributes="id string:ts_cdb_project_id__${ts_id};
                                                     value timesheet.cdb_project_id"></input>
                          <span tal:content="timesheet.cdb_project_id"
                          tal:attributes="id string:ts_project_id__${ts_id}"></span>
                        </td>

                        <tal:comment replace="nothing">Project name</tal:comment>
                        <td class="t__cdb_project_name"><input type="hidden"
                          tal:attributes="id string:ts_cdb_project_name__${ts_id};
                                                     value timesheet.project_name"></input>
                          <span tal:content="timesheet.project_name"
                          tal:attributes="id string:ts_project_name__${ts_id}"></span>
                        </td>

                        <tal:comment replace="nothing">Task</tal:comment>
                        <td class="t__task_id"><input type="hidden"
                          tal:attributes="id string:ts_task_id__${ts_id};
                                                     value timesheet.task_id"></input>
                          <span tal:content="timesheet.task_name"
                          tal:attributes="id string:ts_task_name__${ts_id}"></span></td>

                        <tal:comment replace="nothing">(h)</tal:comment>
                        <td class="t__hours"><input type="hidden"
                          tal:attributes="id string:ts_hours__${ts_id};
                                                     value timesheet.hours"></input>
                          <span class="hourstext"
                          tal:attributes="id string:span_ts_hours__${ts_id}"
                          tal:content="timesheet.hours"></span></td>

                        <tal:comment replace="nothing">Description</tal:comment>
                        <td class="t__description"><a href="" class="with-overflow"
                          tal:content="timesheet.description"
                          tal:attributes="id string:ts_description__${ts_id};
                                          href timesheet.ts_href;
                                          title timesheet.description"></a>
                        </td>

                        <tal:comment replace="nothing">Activity Type</tal:comment>
                        <td class="t__activity_type_object_id"><input
                          type="hidden"
                          tal:attributes="id string:ts_activity_type_object_id__${ts_id};
                                                     value timesheet.activity_type_object_id"></input>
                          <span tal:content="timesheet.activity_type|nothing"
                          tal:attributes="id string:ts_activity_type__${ts_id}" /></td>
                        <tal:comment replace="nothing">Buttons</tal:comment>
                        <td class="t__buttons"><tal:block
                            condition="python:not ts_closed and not wd_closed">
                            <div class="btn-group">
                              <button class="btn" type="button"
                                tal:attributes="onclick string:changeEffort('${ts_id}', '${idflag}')">
                                <i class="icon-pencil" src="" alt="" title=""
                                  tal:define="btn_lbl_tsmod python:options.labels.pcs_modify"
                                  tal:attributes="alt btn_lbl_tsmod;
                                                         title btn_lbl_tsmod" ></i>
                              </button>
                              <button class="btn" type="button"
                                tal:attributes="onclick string:deleteEffortByID('${ts_id}')">
                                <i class="icon-remove" src="" alt="" title=""
                                  tal:define="btn_lbl_tsdel python:options.labels.pcs_delete"
                                  tal:attributes="alt btn_lbl_tsdel;
                                                         title btn_lbl_tsdel" ></i>
                              </button>
                            </div>
                          </tal:block></td>
                      </tr>

                    </tal:defineblock>
                  </tal:ts_block>

                  <tal:comment replace="nothing">Daily sum</tal:comment>
                  <tr class="daily_sum"
                    tal:attributes="class python:'daily_sum day_closed' if wd_closed else 'daily_sum'"
                    tal:condition="python:wdclass.find('day_future')==-1">
                    <td colspan=3></td>
                    <td class="ds_label"><span
                      tal:content="python:options.labels.cdbpcs_timesheet_daily_total">Daily
                        total</span></td>
                    <td><span class="hourstext" tal:content="workday.sum"></span>
                    </td>
                    <td class="ds_diff"
                      tal:attributes="class python: 'ds_diff' if resthours>0 else 'ds_diff_ok'">
                      <span
                      tal:content="python:options.labels.cdbpcs_timesheet_total_diff">Difference</span>:
                      <span class="hourstext diffhours"
                      tal:content="python:-resthours"></span>
                    </td>

                    <td></td>

                    <td class="ds_buttons"><span></span> <tal:isself
                        condition="context.person_is_self|nothing">
                        <tal:block condition="not:wd_closed">
                          <button class="btn" type="button"
                            tal:attributes="onclick string:toggleDay('${idflag}')">
                            <i class="icon-ok" src="" alt="" title=""
                              tal:define="btn_lbl_dayclose python:options.labels.cdbpcs_timesheet_close_day"
                              tal:attributes="src string:${options.localres}tick_button.png;
                                                     alt btn_lbl_dayclose;
                                                     title btn_lbl_dayclose"></i>
                          </button>
                        </tal:block>

                        <tal:block condition="wd_closed">
                          <button class="btn" type="button"
                            tal:attributes="onclick string:toggleDay('${idflag}')">
                            <i class="icon-pencil" src="" alt="" title=""
                              tal:define="btn_lbl_dayopen python:options.labels.cdbpcs_timesheet_reopen_day"
                              tal:attributes="alt btn_lbl_dayopen;
                                                     title btn_lbl_dayopen" />
                          </button>
                        </tal:block>
                      </tal:isself></td>
                  </tr>
                </tal:dayblockdefine>
              </tal:dayblock>
              <tr id="week_sum" class="blockfoot">
                <td></td>
                <td></td>
                <td></td>
                <td id="week_sum_label" class="rightaligned ds_label"><span
                  tal:content="python:options.labels.cdbpcs_timesheet_week_total">Weekly
                    total</span></td>
                <td id="week_sum_number"><span class="hourstext"
                  tal:content="context.weeksum"></span></td>
                <td class="ds_diff" width="auto"
                  tal:attributes="class python:'ds_diff' if context.weekhours-context.weeksum>0 else 'ds_diff_ok'">
                  <span class="diff_lbl"
                  tal:content="python:options.labels.cdbpcs_timesheet_total_diff">Difference</span>:
                  <span class="hourstext diffhours"
                  tal:content="python:context.weeksum-context.weekhours"></span>
                </td>
                <td></td>
                <td></td>

              </tr>
            </table>
          </div>
        </div>
      </div>
    </form>

    <input type="hidden" id="hiddenDate" value="${date}" />

    <div class="modal hide" id="error_modal">
      <div id="error_modal_container" class="modal-body"></div>

      <div id="error_modal_buttons" class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">${options.labels.button_cancel}</a>
      </div>
    </div>



    <div class="modal hide" id="structure_view">
      <div id="structure_actions" class="modal-header">
        <a class="close" data-dismiss="modal">&times;</a>
        <div class="modal-header-content">
          <h2 class="pull-left"></h2>
          <div class="filter-container"></div>
          <div class="no-float"></div>
        </div>
      </div>

      <div id="structure_container" class="modal-body"></div>

      <div id="structure_buttons" class="modal-footer">
        <a onclick="close_structure_view_on_select()" href="#" class="btn">${options.labels.cdb_browser_select}</a>
        <a onclick="close_structure_view()" href="#" class="btn btn-primary">${options.labels.button_cancel}</a>
      </div>
    </div>

    <div class="modal hide" id="rule_view">
      <div id="rule_actions" class="modal-header">
        <a class="close" data-dismiss="modal">&times;</a>
        <div class="modal-header-content">
          <h2 class="pull-left"></h2>
          <div class="filter-container"></div>
          <div class="no-float"></div>
        </div>
      </div>

      <div id="rule_container" class="modal-body">
        <div>
          <input type="checkbox" readonly="readonly" value="1"
            checked="checked" disabled="disabled" /> &nbsp; <span>${options.labels.cdbpcs_timesheet_rule_resp}</span>
        </div>

        <div>
          <input type="checkbox" name="filter_all_tasks" value="1"
            last_checked="0" /> &nbsp; <span>${options.labels.cdbpcs_timesheet_rule_alltasks}</span>
        </div>

        <div>
          <input type="checkbox" name="filter_all_projects" value="1"
            last_checked="0" /> &nbsp; <span>${options.labels.cdbpcs_timesheet_rule_allprojs}</span>
        </div>

        <div>
          <input type="checkbox" name="filter_all_status" value="1"
            last_checked="0" /> &nbsp; <span>${options.labels.cdbpcs_timesheet_rule_allstatus}</span>
        </div>
      </div>

      <div id="rule_buttons" class="modal-footer">
        <button type="button" class="btn" id="rule_select_button"
          onclick="save_rule_view()">${options.labels.ok}</button>
        <button type="button" class="btn btn-primary"
          onclick="close_rule_view()" id="rule_cancel_button">${options.labels.button_cancel}</button>
      </div>
    </div>

    <tal:comment replace="nothing">Translations</tal:comment>
    <input type="hidden" id="text_info_not_compl"
      tal:attributes="value python:options.labels.cdbpcs_timesheet_incompl_tip"></input>
  </metal:block>
</body>
  </html>
</metal:page>
