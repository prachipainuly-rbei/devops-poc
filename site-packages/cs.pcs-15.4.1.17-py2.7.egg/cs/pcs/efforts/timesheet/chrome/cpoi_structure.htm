<div>
<ul id="task_struct"
	tal:attributes="fill_target_field string:description"  
	tal:condition="context.task_object|nothing">
	<li tal:define="issuelist context.issues;
					cllist context.cls;
					task_level python:1;
					global task_order python:0" class="toplevel_object">
		<div class="context_div">
			<img src="" tal:attributes="src context.task_object.icon"/>
			<span tal:content="context.task_object.task_name"
				  tal:define="global task_order python:task_order+1"
				  tal:attributes="tabindex task_order"
				  class="toplevel_object"/>	
			<div class="clearlayout"></div>		
		</div>
		<tal:subtasks repeat="subobj issuelist" define="objtype string:OI">	
		<metal:taskobj use-macro="template.macros.display_task_object"></metal:taskobj>
		</tal:subtasks>
		<tal:subtasks repeat="subobj cllist" define="objtype string:CP">	
		<metal:taskobj use-macro="template.macros.display_task_object"></metal:taskobj>
		</tal:subtasks>
	</li>
</ul>
</div>
<tal:hide replace="nothing">
<metal:taskobj define-macro="display_task_object">
<ul tal:attributes="class string:task_level_${task_level}">
	<li>
	    <tal:defineatt define="task_level python:task_level+1">	 
	    									  
	    <div tal:attributes="class python:'highlight_display  context_div' if  subobj.get('highlight', False) else 'context_div'">
	    	<img src="" tal:attributes="src subobj.icon"/>
	    	<span tal:content="subobj.name"
	    		  tal:define="global task_order python:task_order+1"
	    	      tal:attributes="class python:'task_selectable' if subobj.get('is_group', 0)==0 else None;
	    	      				  oid subobj.id;
	    	      				  objtype objtype;
	    	      				  tabindex task_order"/>
	    	<div class="clearlayout"></div>
	    </div>
		<tal:subtasks repeat="subobj subobj.children|nothing">	
		<metal:taskobj use-macro="template.macros.display_task_object"></metal:taskobj>
		</tal:subtasks>
		</tal:defineatt>
	</li>
</ul>
</metal:taskobj>
</tal:hide>