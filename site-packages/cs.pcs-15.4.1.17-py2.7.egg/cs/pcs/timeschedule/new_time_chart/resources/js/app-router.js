App.IndexRoute.reopen({
  beforeModel: function() {
    var self = this;
    return this._super().then(function() {
      return self.container.lookup('Settings:timeChart').load();
    });
  },

  model: function(params) {
    var self = this;
    return this._super(params).then(function() {
      return self.container.lookup('ScheduleContent:timeChartStructure').load();
    });
  },

  setupController: function(controller, model) {
    this._super(controller, model);
    controller.set('timeSettings',
                   this.container.lookup('Settings:timeChart'));
    controller.set('timeReftable',
        this.container.lookup('ScheduleContent:timeChartReftable'));
  }
});
