<metal:page use-macro="global_macros['cdb_welcome_page_layout']"
            tal:define="page_title options.labels.cdbpcs_kosmodrom_page_title|'My Projects';
                        current_toolbar_op 'CDB_eLink_kosmodrom'">
  <html>
    <head>
      <metal:head fill-slot="head_block">
        <link href="${options.plugins}picture_uploader/picture_uploader.css" rel="stylesheet" type="text/css" />
        <link href="${options.plugins}collapsible_blocks/collapsible_blocks.css" rel="stylesheet" type="text/css" />
        <link href="${options.localres}kosmodrom.css" rel="stylesheet" type="text/css" />
        <script src="${options.plugins}picture_uploader/picture_uploader.js" type="text/javascript"></script>
        <script src="${options.plugins}collapsible_blocks/collapsible_blocks.js" type="text/javascript"></script>
        <script src="${options.plugins}filters/button_filter.js" type="text/javascript"></script>
        <script src="${options.localres}kosmodrom_widgets.js" type="text/javascript"></script>
        <script src="${options.localres}kosmodrom.js" type="text/javascript"></script>
      </metal:head>
    </head>
    <body>
      <metal:pt fill-slot="page_title_content">
        <metal:opmenu use-macro="global_plugins['components'].macros.operations_dropdown_navbar"
                          tal:define="oplist []"/>
      </metal:pt>
      <metal:content fill-slot="page_content">
        <section>
          <div class="projectlist main-area kosmodrom">
            <div class="list-title">
              <h1>${options.labels['cdbpcs_kosmodrom_page_title']}</h1>
            </div>
            <tal:rows repeat="project projects" condition="plugin">
              <metal:fillrow use-macro="plugin.getTemplate(macrofile).macros.block_widget"
                             tal:define="macrofile getattr(plugin, '__plugin_macro_file__', 'macros.html')" />
            </tal:rows>

          </div>
          <div class="projectpaginator kosmodrom">
            <metal:pg use-macro="global_plugins['pagination'].macros.paginator"
                      tal:define="paginator projects_paginator"/>
          </div>
        </section>
        <metal:popup use-macro="kosmodromtools.templates()['layout.html'].macros.popup_modal" />
        <tal:modalupload metal:use-macro="global_plugins['picture_uploader'].macros['upload_modal']"
                         tal:define="action_url upload_action_url">
          <metal:formHidden fill-slot="input_hidden">
            <input type="hidden" name="cdb_project_id" value=""/>
          </metal:formHidden>
        </tal:modalupload>
      </metal:content>
    </body>
  </html>
</metal:page>
