<metal:page use-macro="global_macros['cdb_welcome_page_layout']"
            tal:define="page_title project.GetDescription();
                        current_toolbar_op 'CDB_eLink_kosmodrom';
                        only_toolbar_ops [current_toolbar_op]">
<html>
  <head>
    <metal:head fill-slot="head_block">
      <link href="${options.plugins}picture_uploader/picture_uploader.css" rel="stylesheet" type="text/css" />
      <link href="${options.plugins}collapsible_blocks/collapsible_blocks.css" rel="stylesheet" type="text/css" />
      <metal:include use-macro="postingtools.templates()['postings.html'].macros.postinghead" />
      <link href="${options.localres}kosmodrom.css" rel="stylesheet" type="text/css" />
      <script src="${options.jscript}jquery/jquery.ui.min.js" type="text/javascript"></script>
      <script src="${options.jscript}jquery/ui/jquery.ui.sortable.min.js" type="text/javascript"></script>
      <script src="${options.plugins}picture_uploader/picture_uploader.js" type="text/javascript"></script>
      <script src="${options.plugins}collapsible_blocks/collapsible_blocks.js" type="text/javascript"></script>
      <script src="${options.plugins}filters/button_filter.js" type="text/javascript"></script>
      <script src="${options.localres}kosmodrom_widgets.js" type="text/javascript"></script>
      <script src="${options.localres}kosmodrom.js" type="text/javascript"></script>
    </metal:head>
  </head>
  <body>
    <metal:pt fill-slot="page_title_content">
      <metal:opmenu use-macro="global_plugins['components'].macros.operations_dropdown_navbar"
                    tal:define="obj project"/>
    </metal:pt>
    <metal:content fill-slot="page_content">
    <div class="projectdetail main-area kosmodrom"
         data-elink-cdb_project_id="${project.cdb_project_id}"
         data-elink-block-sortable="y">
      <div class="list-title">
        <h1>${project.GetDescription()}</h1>
      </div>
      <tal:widgets repeat="widget widgets">
        <metal:widget use-macro="pluginmacros['collapsible_widget']"
                      tal:define="plugin widget[1];
                                  macrofile getattr(plugin, '__plugin_macro_file__', 'macros.html');
                                  pluginmacros plugin.getTemplate(macrofile).macros;
                                  detail_widget_order widget[0];
                                  widget_expanded widget[2]"/>
      </tal:widgets>
      <metal:popup use-macro="kosmodromtools.templates()['layout.html'].macros.popup_modal" />
    </div>
    <tal:modalupload metal:use-macro="global_plugins['picture_uploader'].macros['upload_modal']"
                     tal:define="action_url upload_action_url">>
            <metal:formHidden fill-slot="input_hidden">
                <input type="hidden" name="cdb_project_id" value="${project.cdb_project_id}"/>
                <input type="hidden" name="person_id" value=""/>
            </metal:formHidden>
      </tal:modalupload>
    </metal:content>
  </body>
</html>
</metal:page>
