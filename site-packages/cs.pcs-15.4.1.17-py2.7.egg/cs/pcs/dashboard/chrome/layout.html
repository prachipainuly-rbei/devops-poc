<metal:popup define-macro="popup_modal">
  <div class="modal hide fade kosmodrom-popup-modal kosmodrom-filterable"
       data-elink-filter-target="div.detail-object">
    <div class="modal-header">
      <a class="close" data-dismiss="modal">&times;</a>
      <div class="modal-header-content">
        <h2></h2>
        <div class="filter-container"></div>
      </div>
    </div>
    <div class="modal-body">

    </div>
    <div class="modal-footer">
      <a href="#" class="btn" data-dismiss="modal">${options.labels.button_close|'Close'}</a>
    </div>
  </div>
</metal:popup>

<metal:filter define-macro="filter_button"
              use-macro="global_plugins['filters'].macros['filter_button']"
              tal:define="filtername filtername;
                          filteractive filtername in widget_data['filters'];
                          filtertitle filtertitle;
                          cnt cnt">
</metal:filter>

<metal:showobj define-macro="object_info">
  <div class="detail-object"
       data-cdb-object-id="${obj.cdb_object_id}">
    <div class="detail-action pull-right">
      <metal:oas define-slot="other_actions"></metal:oas>
      <metal:ops use-macro="global_plugins['components'].macros.operations_dropdown" />
    </div>
    <div class="detail-text">
      <img src="${obj.GetObjectIcon()}"
           class="pull-left"/>
      <h4 class="title-with-icon">${obj.GetDescription()}</h4>
      <div class="detail-desc" tal:condition="more_desc|nothing">
        <span class="show-more pull-left">
          <i class="icon-plus-sign"
             data-elink-toggle-class1="icon-plus-sign"
             data-elink-toggle-class2="icon-minus-sign"></i>
        </span>
        <p class="object-desc">${more_desc}</p>
      </div>
      <div class="detail-desc" tal:content="structure add_html" tal:condition="add_html|nothing">
      </div>
      <div class="container-fluid">
        <div class="row-fluid">
          <div class="span5 fix-text"><small>${responsible_label|obj.Label(responsible_field)}: ${responsible_name|obj[responsible_field]}</small></div>
          <div class="span3 fix-text"><small>${deadline_label|obj.Label(deadline_field)}: ${deadline_date|kosmodromtools.format_date(obj[deadline_field])}</small></div>
          <div class="span4 fix-text"
               tal:define="status_field status_field|'joined_status_name'"><small>${status_label|obj.Label(status_field)}: ${status_text|obj[status_field]}</small></div>
        </div>
      </div>
    </div>
  </div>
</metal:showobj>

