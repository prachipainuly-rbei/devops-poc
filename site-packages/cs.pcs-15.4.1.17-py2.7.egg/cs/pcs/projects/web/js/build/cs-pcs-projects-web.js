!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("cs-web-components-base"),require("React"),require("cs-web-components-externals"),require("ReactBootstrap"),require("moment"),require("Immutable")):"function"==typeof define&&define.amd?define(["cs-web-components-base","React","cs-web-components-externals","ReactBootstrap","moment","Immutable"],t):"object"==typeof exports?exports["cs-pcs-projects-web"]=t(require("cs-web-components-base"),require("React"),require("cs-web-components-externals"),require("ReactBootstrap"),require("moment"),require("Immutable")):e["cs-pcs-projects-web"]=t(e["cs-web-components-base"],e.React,e["cs-web-components-externals"],e.ReactBootstrap,e.moment,e.Immutable)}(this,function(e,t,r,n,o,a){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.default)();return(0,m.default)(e,m.default.ISO_8601)}function a(e){return o(e).format(_)}function i(e){return"cs-pcs-projects-web-"+e}function l(e,t){var r=o(e.get("start_time_plan")),n=o(e.get("end_time_plan")),a=o(t),i=m.default.duration(n.diff(r)).asDays(),l=m.default.duration(a.diff(r)).asDays();return 0===i?100:100*l/i}function c(e){return l(e)}function s(e,t){var r=e?e.get("attributes").find(function(e){return e.get("name")===t}):null;return r?r.get("label"):""}function u(e,t){return(0,p.getAppSetup)().getIn(["detail_view","relshipConfiguration"],b.default.Map()).get(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDateObject=o,t.formatDate=a,t.prefixNS=i,t.getTimeLinePosition=l,t.getTodayPosition=c,t.getAttributeLabel=s,t.getRelship=u;var p=r(0),f=r(7),m=n(f),d=r(8),b=n(d),_=(0,p.getAppSetup)().getIn(["formats","dateFormat"])},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.get("end_time_fcast")}function l(e){var t=(0,f.getDateObject)();return(0,f.getDateObject)(i(e))<t?[180,200,250].indexOf(e.get("status"))>-1?"success":"danger":"default"}function c(e,t){var r=t.contextObject;return{milestones:(0,d.referencedObjects)(e,r,_)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Milestones=t.Milestone=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),p=function(e){return e&&e.__esModule?e:{default:e}}(u),f=r(2),m=r(3),d=r(0),b=r(4),_="Milestones",j=t.Milestone=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"renderTooltip",value:function(){var e=this.props.milestone;return p.default.createElement(b.Popover,{id:(0,f.prefixNS)("project-timeline-milestone-info"),title:e.get("task_name")},p.default.createElement("span",null,e.get("mapped_subject_name")),p.default.createElement("br",null),p.default.createElement("span",null,(0,f.formatDate)(i(e))),p.default.createElement("br",null),p.default.createElement("span",null,e.get("joined_status_name")))}},{key:"render",value:function(){var e=this.props,t=e.project,r=e.milestone,n=(0,f.getTimeLinePosition)(t,i(r)),o=l(r),a=(0,m.classNames)((0,f.prefixNS)("project-timeline__milestone"),(0,f.prefixNS)("project-timeline__milestone--"+o));return p.default.createElement(b.OverlayTrigger,{trigger:"click",rootClose:!0,placement:"top",overlay:this.renderTooltip(),key:(0,f.prefixNS)("project-timeline-milestone-info-trigger")},p.default.createElement("svg",{viewBox:"-5 -5 10 10",className:a,style:{left:n+"%"}},p.default.createElement("polygon",{points:"0,-5 -5,0 0,5 5,0"})))}}]),t}(p.default.PureComponent);j.propTypes={project:m.ImmutablePropTypes.map.isRequired,milestone:m.ImmutablePropTypes.map.isRequired};var y=t.Milestones=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.fetchMilestones=r.fetchMilestones.bind(),r}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.contextObject&&this.fetchMilestones(this.props)}},{key:"componentWillReceivProps",value:function(e){e.contextObject&&e.contextObject!==this.props.contextObject&&this.fetchMilestones(e)}},{key:"fetchMilestones",value:function(e){var t=e.contextObject,r=e.fetchRelship,n=(0,d.getRelshipUrl)(t,_);r&&r(n)}},{key:"render",value:function(){var e=this.props,t=e.contextObject,r=e.milestones;return void 0===r?null:p.default.createElement("div",{className:(0,f.prefixNS)("project-timeline__milestones")},r.map(function(e){return p.default.createElement(j,{key:e.get("@id"),project:t,milestone:e})}))}}]),t}(p.default.Component);y.propTypes={contextObject:m.ImmutablePropTypes.map.isRequired,milestones:m.ImmutablePropTypes.orderedSet},t.default=(0,m.connect)(c,{fetchRelship:d.fetchRelship})(y)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=r(0),a=r(2),i=r(9),l=n(i),c=r(5),s=n(c);o.Registry.registerComponent((0,a.prefixNS)("ProjectTimeLine"),l.default),e.exports={ProjectTimeLine:l.default,ProjectTimeLineMilestones:s.default}},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return p.default.createElement("svg",s({viewBox:"-5 -5 10 10"},e),p.default.createElement("circle",{r:"4",cx:"0",cy:"0"}))}function a(e){return p.default.createElement("svg",s({viewBox:"-5 -5 10 10"},e),p.default.createElement("polygon",{points:"-5,-5 0,5 5,-5"}))}function i(e){var t=e.contextObject,r=Math.min(100,Math.max((0,f.getTodayPosition)(t),0)),n=p.default.createElement(b.Popover,{id:(0,f.prefixNS)("project-timeline-today-info"),title:(0,d.formatStr)("today")},p.default.createElement("span",null,(0,f.formatDate)()),p.default.createElement("br",null));return p.default.createElement("div",{className:(0,f.prefixNS)("project-timeline__today")},p.default.createElement(b.OverlayTrigger,{trigger:"click",rootClose:!0,placement:"top",overlay:n,key:(0,f.prefixNS)("project-timeline-today-info-trigger")},p.default.createElement(a,{style:{left:r+"%"}})))}function l(e){var t=e.contextObject,r=t.get("percent_complet");return p.default.createElement(b.ProgressBar,{className:(0,f.prefixNS)("project-timeline__progress"),now:r})}function c(e){var t=e.contextObject,r=(0,f.formatDate)(t.get("start_time_plan")),n=(0,f.formatDate)(t.get("end_time_plan"));return p.default.createElement("div",{className:(0,f.prefixNS)("project-timeline")},p.default.createElement("div",{className:(0,f.prefixNS)("project-timeline__base")},p.default.createElement(l,{contextObject:t}),p.default.createElement("div",{className:(0,f.prefixNS)("project-timeline__base__axis")},p.default.createElement(o,{className:(0,f.prefixNS)("project-timeline__base__start")}),p.default.createElement("svg",{viewBox:"0 0 100 1",preserveAspectRatio:"none",className:(0,f.prefixNS)("project-timeline__base__line")},p.default.createElement("line",{x1:"0",y1:"1",x2:"100%",y2:"1"})),p.default.createElement(o,{className:(0,f.prefixNS)("project-timeline__base__end")})),p.default.createElement("div",{className:(0,f.prefixNS)("project-timeline__base__labels")},p.default.createElement("small",null,r),p.default.createElement("small",{className:(0,f.prefixNS)("project-timeline__base__duration")},(0,d.formatStr)("total_duration",{days:t.get("days_fcast")})),p.default.createElement("small",null,n))),p.default.createElement("div",{className:(0,f.prefixNS)("project-timeline__layers")},e.children,p.default.createElement(j.default,{contextObject:t}),p.default.createElement(i,{contextObject:t})))}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.ProjectTimeLineCircle=o,t.ProjectTimeLineTriangle=a,t.ProjectTimeLineToday=i,t.ProjectTimeLineProgress=l,t.default=c;var u=r(1),p=n(u),f=r(2),m=r(3),d=r(10),b=r(4),_=r(5),j=n(_);i.propTypes={contextObject:m.ImmutablePropTypes.map.isRequired},l.propTypes={contextObject:m.ImmutablePropTypes.map.isRequired},c.propTypes={contextObject:m.ImmutablePropTypes.map.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatStr=t.Format=void 0;var n=r(0);t.Format=n.i18ndb.makeFormat("projects"),t.formatStr=n.i18ndb.makeFormatStr("projects")}])});
//# sourceMappingURL=cs-pcs-projects-web.js.map