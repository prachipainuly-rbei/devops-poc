#!/usr/bin/env powerscript
# -*- python -*- coding: utf-8 -*-
#
# Copyright (C) 1990 - 2018 CONTACT Software GmbH
# All rights reserved.
# http://www.contact-software.com
#

__docformat__ = "restructuredtext en"
__revision__ = "$Id: test_issues.py 184806 2018-10-08 12:46:12Z cso $"

import unittest

from cdb import testcase
from cs.documents import Document
from cs.pcs.issues import Issue
from cs.pcs.issues_documents import IssueDocumentReference

TEST = "cs.pcs unittest"


class IssueTestCase(testcase.RollbackTestCase):
    def test_Documents(self):
        vals = {
            "z_nummer": TEST,
            "z_index": "",
            "cdb_project_id": TEST,
            "issue_id": 1,
        }
        IssueDocumentReference.Create(**vals)
        Document.Create(**vals)
        i = Issue.Create(**vals)
        self.assertEqual([d.z_nummer for d in i.Documents], [vals["z_nummer"]])


# Allow running this testfile directly
if __name__ == "__main__":
    unittest.main()
