# Copyright (C) 1990 - 2017 CONTACT Software GmbH
# All rights reserved.
# http://www.contact-software.com/
#

Feature: Managing Time Schedule Documents

This feature is designed to test functionality regarding project and time schedule document.

Background:
    Given a project exists
        And the following documents exist
            | z_nummer | z_index | titel | z_status | cdb_obsolete | z_bemerkung |
            | T000999  | 7       | Seven | 0        | 0            | 0004        |
            | T000999  | 10      | Ten   | 0        | 0            | 0003        |
            | T000999  | 9       | Nine  | 0        | 0            | 0002        |
            | T000999  | 150     | 150   | 0        | 0            | 0001        |
        And the document is assigned to the project as time schedule


Scenario Outline: Determine the index of the schedule using numeric index schema
    When document with index <index_obsolete> is set to obsolete
    Then document with index <index_schedule> has to be used as time schedule

    Examples:
        | index_obsolete | index_schedule |
        | 7,9,10         | 150            |
        | 7,10,150       | 9              |
        | 7,9,150        | 10             |
        | 9,10,150       | 7              |
        | 7,150          | 10             |
        | 9,10           | 150            |
        | 150            | 10             |
        | 7,9,10,150     | not found      |


Scenario Outline: Determine the index of the schedule using cdb_cdate
    Given the sort order is set to the change control attribute cdb_cdate
    When document with index <index_obsolete> is set to obsolete
    Then document with index <index_schedule> has to be used as time schedule

    Examples:
        | index_obsolete | index_schedule |
        | 7,9,10         | 150            |
        | 7,10,150       | 9              |
        | 7,9,150        | 10             |
        | 9,10,150       | 7              |
        | 7,150          | 9              |
        | 9,10           | 150            |
        | 150            | 9              |
        | 7,9,10,150     | not found      |


Scenario Outline: Determine the index of the schedule using an alternative attribute
    Given the sort order is set to an alternative attribute
    When document with index <index_obsolete> is set to obsolete
    Then document with index <index_schedule> has to be used as time schedule

    Examples:
        | index_obsolete | index_schedule |
        | 7,9,10         | 150            |
        | 7,10,150       | 9              |
        | 7,9,150        | 10             |
        | 9,10,150       | 7              |
        | 7,150          | 10             |
        | 9,10           | 7              |
        | 150            | 7              |
        | 7,9,10,150     | not found      |

# Important Note:
# The sequence of the scenarios may not be changed because the document ID of the context object is overwritten

Scenario Outline: Determine the index of the schedule using alpha-numeric index schema
    Given the following documents exist
            | z_nummer | z_index | titel | z_status | cdb_obsolete |
            | T000111  |         | Empty | 0        | 0            |
            | T000111  | a       | A     | 0        | 0            |
            | T000111  | b       | B     | 0        | 0            |
            | T000111  | aa      | AA    | 0        | 0            |
        And the document is assigned to the project as time schedule
    When document with index <index_obsolete> is set to obsolete
    Then document with index <index_schedule> has to be used as time schedule

    Examples:
        | index_obsolete | index_schedule |
        | a,b,aa         |                |
        | ,              | aa             |
        | ,b,aa          | a              |
        | aa             | b              |


Scenario Outline: Determine the index of the schedule,if only the initial empty index exists
    Given the following documents exist
            | z_nummer | z_index | titel | z_status | cdb_obsolete |
            | T000111  |         | Empty | 0        | 0            |
        And the document is assigned to the project as time schedule
    Then document with index <index_schedule> has to be used as time schedule

    Examples:
        | index_obsolete | index_schedule |
        |                |                |
