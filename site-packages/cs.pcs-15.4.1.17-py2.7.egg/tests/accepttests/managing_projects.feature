# Copyright (C) 1990 - 2012 CONTACT Software GmbH
# All rights reserved.
# http://www.contact.de/
#

Feature: Managing Projects

This feature is designed to test the main possible, but basic operations a user can perform
in order to manage projects. Some fundamental connections/ assignments with other CDB objects
might also be tested. Further possible connections/ assignments are tested in the respective feature.

Scenario Outline: Create New Project
    When <role> creates a project
    Then a new project is <creation>

    Examples:
        | role   | creation  |
        | public | generated |


Scenario Outline: Create New Project From A Template
    Given a project template exists
        And Projektleiter changes the template's <attribute1> attribute to <value1>
        And Projektleiter changes the template's <attribute2> attribute to <value2>
        And the project template contains a checklist template
    When <role> creates a new project from a template
    Then a new project is <creation>
        And the generated project contains the defaults of the template
        And the generated project contains a checklist template

    Examples:
        | role   | creation  | attribute1       | value1     | attribute2     | value2     |
        | public | generated | start_time_fcast | 0000-00-00 | end_time_fcast | 0000-00-00 |
        | public | generated | start_time_fcast | 2016-09-01 | end_time_fcast | 2016-09-30 |


Scenario Outline: Create New Project From A Template With Task Structure
    Given a project template exists
        And the project template contains a task structure

            | parent_name | task_name | position |
            |             | Parent 01 | 5555     |
            | Parent 01   | Child 01  | 8888     |
            | Parent 01   | Child 02  | 9999     |

    When <role> creates a new project from a template
    Then a new project is <creation>
        And positions of the generated tasks have been initialized

            | task_name | position |
            | Parent 01 | 10       |
            | Child 01  | 10       |
            | Child 02  | 20       |

        Examples:
        | role   | creation  |
        | public | generated |


Scenario Outline: Change Project
    Given a project exists
    When <role> changes this project
    Then the changed project is <status>

    Examples:
        | role            | status    |
        | Projektleiter   | saved     |
        | Projektmitglied | not saved |


Scenario Outline: Copy Project
    Given a project exists
        And Projektleiter changes the project's <attribute1> attribute to <value1>
        And Projektleiter changes the project's <attribute2> attribute to <value2>
    When <role> copies this project
    Then the project is <status>

    Examples:
        | role   | status | attribute1       | value1     | attribute2     | value2     |
        | public | copied | start_time_fcast | 0000-00-00 | end_time_fcast | 0000-00-00 |
        | public | copied | start_time_fcast | 2016-09-01 | end_time_fcast | 2016-09-30 |


Scenario Outline: Copy Project With Time Shift
    Given a project exists
        And Projektleiter changes the project's <attribute1> attribute to <value1>
        And Projektleiter changes the project's <attribute2> attribute to <value2>
    When <role> copies the project with setting <attribute3> to <value3>
    Then the project is <status>

    Examples:
        | role   | status | attribute1       | value1     | attribute2     | value2     | attribute3       | value3     |
        | public | copied | start_time_fcast | 0000-00-00 | end_time_fcast | 0000-00-00 | start_time_fcast | 2016-10-01 |
        | public | copied | start_time_fcast | 0000-00-00 | end_time_fcast | 0000-00-00 | end_time_fcast   | 2016-10-31 |
        | public | copied | start_time_fcast | 2016-09-01 | end_time_fcast | 2016-09-30 | start_time_fcast | 2016-10-01 |
        | public | copied | start_time_fcast | 2016-09-01 | end_time_fcast | 2016-09-30 | end_time_fcast   | 2016-10-31 |


Scenario Outline: Delete Project
    Given a project exists
    When <role> deletes this project
    Then the project is <status>

    Examples:
        | role            | status      |
        | Projektleiter   | deleted     |
        | Projektmitglied | not deleted |
