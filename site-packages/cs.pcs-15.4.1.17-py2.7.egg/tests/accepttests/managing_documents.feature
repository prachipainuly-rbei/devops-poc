# Copyright (C) 1990 - 2012 CONTACT Software GmbH
# All rights reserved.
# http://www.contact.de/
#

Feature: Managing Documents

This feature is designed to test the main possible, but basic operations a user can perform
regarding documents, which are used in the Project Office environment. Some fundamental connections/
assignments with other CDB objects might also be tested. Further possible connections/ assignments
are tested in the respective feature.

Background:
    Given a document exists
        And a project exists


Scenario Outline: Allocate A Document To A Project
    When <role> allocates this document to the project
    Then the document is <state> to the project

    Examples:
        | role                 | state         |
        | Documentation,public | allocated     |
        | public               | not allocated |


Scenario Outline: Delete Project Allocation Of A Document
    Given a project exists
        And the document is allocated to the project
    When <role> deletes the allocation of this document to the project
    Then the allocation of the document to the project is <state>

    Examples:
        | role                 | state       |
        | Documentation,public | deleted     |
        | public               | not deleted |


Scenario Outline: Allocate A Document To A Task
    Given a task exists
    When <role> allocates this document to the task
    Then the document is <state> to the task

    Examples:
        | role            | state     |
        | Projektmitglied | allocated |


Scenario Outline: Delete Task Allocation Of A Document
    Given a task exists
        And the document is allocated to the task
    When <role> deletes the allocation of this document to the task
    Then the allocation of the document to the task is <state>

    Examples:
        | role            | state   |
        | Projektmitglied | deleted |


Scenario Outline: Allocate A Document To A Check List
    Given a checklist exists
    When <role> allocates this document to the checklist
    Then the document is <state> to the checklist

    Examples:
        | role            | state     |
        | Projektmitglied | allocated |


Scenario Outline: Delete Check List Allocation Of A Document
    Given a checklist exists
        And the document is allocated to a check list
    When <role> deletes the allocation of this document to the check list
    Then the allocation of the document to the checklist is <state>

    Examples:
        | role            | state   |
        | Projektmitglied | deleted |


Scenario Outline: Allocate A Document To A Checkpoint
    Given a checklist exists
        And a checkpoint exists
    When <role> allocates this document to the checkpoint
    Then the document is <state> to the checkpoint

    Examples:
        | role            | state     |
        | Projektmitglied | allocated |


Scenario Outline: Delete Checkpoint Allocation Of A Document
    Given a checklist exists
        And a checkpoint exists
        And the document is allocated to a checkpoint
    When <role> deletes the allocation of this document to the checkpoint
    Then the allocation of the document to the checkpoint is <state>

    Examples:
        | role            | state   |
        | Projektmitglied | deleted |


Scenario Outline: Allocate A Document To A Project Issue
    Given a project issue exists
    When <role> allocates this document to the project issue
    Then the document is <state> to the project issue

    Examples:
        | role            | state     |
        | Projektmitglied | allocated |


Scenario Outline: Delete Project Issue Allocation Of A Document
    Given a project issue exists
        And the document is allocated to the project issue
    When <role> deletes the allocation of this document to the project issue
    Then the allocation of the document to the project issue is <state>

    Examples:
        | role            | state   |
        | Projektmitglied | deleted |


Scenario Outline: Delete Document with Project
    Given a project exists
        And the document is allocated to the project
    When <role> deletes this document
    Then the document is <state>
        And the project is <project_state>
        And the document is <allocation> to the project

    Examples:
        | role                 | state       | allocation     | project_state |
        | Documentation,public | deleted     | not allocated  | not deleted   |
        | public               | not deleted | allocated      | not deleted   |


Scenario Outline: Delete Document with Task
    Given a task exists
        And the document is allocated to the task
    When <role> deletes this document
    Then the document is <doc_state>
        And the task is <task_state>
        And the allocation of the document to the task is <allocation_state>

    Examples:
        | role                 | doc_state   | task_state  | allocation_state |
        | Documentation,public | deleted     | not deleted | deleted          |
        | public               | not deleted | not deleted | not deleted      |


Scenario Outline: Delete Document with Checklist
    Given a checklist exists
        And the document is allocated to a check list
    When <role> deletes this document
    Then the document is <doc_state>
        And the checklist is <checklist_state>
        And the allocation of the document to the checklist is <allocation_state>

    Examples:
        | role                 | doc_state   | checklist_state | allocation_state |
        | Documentation,public | not deleted | not deleted     | not deleted      |


Scenario Outline: Delete Document with Checkpoint
    Given a checklist exists
        And a checkpoint exists
        And the document is allocated to a checkpoint
    When <role> deletes this document
    Then the document is <doc_state>
        And the checkpoint is <checkpoint_state>
        And the allocation of the document to the checkpoint is <allocation_state>

    Examples:
        | role                 | doc_state   | checkpoint_state | allocation_state |
        | Documentation,public | deleted     | not deleted      | deleted          |
        | public               | not deleted | not deleted      | not deleted      |


Scenario Outline: Delete Document with Project Issue
    Given a project issue exists
        And the document is allocated to the project issue
    When <role> deletes this document
    Then the document is <doc_state>
        And the project issue is <issue_state>
        And the allocation of the document to the project issue is <allocation_state>

    Examples:
        | role                 | doc_state   | issue_state | allocation_state |
        | Documentation,public | not deleted | not deleted | not deleted      |
