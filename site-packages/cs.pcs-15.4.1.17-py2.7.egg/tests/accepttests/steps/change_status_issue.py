#!/usr/bin/env python
# coding: utf-8
#
# Copyright (C) 2016 CONTACT Software GmbH
# All rights reserved.
# http://www.contact.de/
#
from cdb.validationkit import given
from common import generateProjectIssue
from common import getContextObject


@given("^the issue's waiting for attributes are (?P<filled_out>filled out|empty)$")
def step(context, filled_out):
    if filled_out == "filled out":
        context.issue.Update(
            waiting_reason="some reason",
            waiting_for_name="caddok")
    else:
        context.issue.Update(
            waiting_reason="",
            waiting_for_name="")


@given(u'a (?P<task>.*?task) issue exists')
def step_impl(context, task):
    task_obj = getContextObject(context, task)

    context.issue = generateProjectIssue(
        task_obj.Project,
        presets_custom={"task_id": task_obj.task_id},
        user_input_custom={})
