!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("cs-web-components-base"),require("React"),require("cs-web-components-externals"),require("Immutable"),require("ReactBootstrap"),require("moment")):"function"==typeof define&&define.amd?define(["cs-web-components-base","React","cs-web-components-externals","Immutable","ReactBootstrap","moment"],t):"object"==typeof exports?exports["cs-taskmanager-web"]=t(require("cs-web-components-base"),require("React"),require("cs-web-components-externals"),require("Immutable"),require("ReactBootstrap"),require("moment")):e["cs-taskmanager-web"]=t(e["cs-web-components-base"],e.React,e["cs-web-components-externals"],e.Immutable,e.ReactBootstrap,e.moment)}(this,function(e,t,n,r,o,a){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=27)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e,t,n){var r=e.get(f.PLUGIN_DISCRIMINATORS);return r?(0,d.getPlugin)(t,function(e){return r.includes(e)},n):n}function o(e){return"cs-taskmanager-web-"+e}function a(e){e.preventDefault(),e.stopPropagation()}function i(e,t){return e.findIndex(function(e){return e.get("id")===t})}function s(){return!0===window.appSetup.appSettings.debugMode}Object.defineProperty(t,"__esModule",{value:!0}),t.getOwnState=t.debounce=t.basePath=t.setupMoment=t.detectIE=t.humanizeDays=t.humanizeDuration=void 0,t.getTaskPlugin=r,t.prefixNS=o,t.stopEvent=a,t.getTaskIndex=i,t.debugMode=s;var u=n(15),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(4),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(6),d=n(0),y=t.humanizeDuration=function(e){switch(e.asDays()){case 0:return(0,p.formatStr)("now");case-1:return(0,p.formatStr)("yesterday");case 1:return(0,p.formatStr)("tomorrow");default:return e.humanize(!0)}},m=(t.humanizeDays=function(e){var t=l.default.duration(e,"days");return y(t)},t.detectIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)},!1);t.setupMoment=function(){m||(l.default.defaultFormat=(0,d.getAppSetup)().getIn(["formats","dateFormat"]),m=!0)},t.basePath=(0,d.getAppSetup)().getIn(["appSettings","basePath"]),t.debounce=function(e,t){var n=void 0,r=void 0,o=function(){n=null,r=e.apply(void 0,arguments)},a=function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return n&&clearTimeout(n),n=setTimeout(function(){return o.apply(void 0,a)},t),r};return a.cancel=function(){clearTimeout(n),n=null},a},t.getOwnState=function(e){return e[o("reducer")]}},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NULL="--",t.CDB_OBJECT_ID="cdb_object_id",t.ID="@id",t.DESCRIPTION="system:description",t.CLASSNAME="system:classname",t.ICON_LINK="system:icon_link",t.UI_LINK="system:ui_link",t.FILES="relship:files",t.TARGETS="targets",t.PERSNO="personalnummer",t.TASK_OID="task_object_id",t.TASK_OIDS="task_object_ids",t.PLUGIN_DISCRIMINATORS="@plugin_discriminators",t.CONTEXT="cs_tasks_context",t.RELSHIPS="cs_tasks_relships",t.USER_TAGS="userTags"},function(e,t){e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatStr=t.Format=void 0;var r=n(0);t.Format=r.i18ndb.makeFormat("cs-taskmanager-web"),t.formatStr=r.i18ndb.makeFormatStr("cs-taskmanager-web")},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.STORE_DEFAULT=t.CURRENT_SELECTION_DEFAULT=t.CURRENT_SELECTION=t.TASK_INFO=t.DELTA_DEFAULT=t.TABLE=t.DATE_PROPTYPE=t.USER_VIEW=t.VIEW_CONDITION=t.DEFAULT_CONDITION=t.ACTIVE_DEADLINE=t.OBJECT_PROPTYPE=void 0;var o,a,i,s,u,l=n(5),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f=n(4),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=n(3),y=d.PropTypes.oneOfType([d.PropTypes.func,d.PropTypes.element]),m=(t.OBJECT_PROPTYPE=d.ImmutablePropTypes.contains((o={},r(o,p.ID,d.PropTypes.string),r(o,p.ICON_LINK,d.PropTypes.string.isRequired),r(o,p.UI_LINK,d.PropTypes.string),r(o,p.DESCRIPTION,d.PropTypes.string.isRequired),o)),t.ACTIVE_DEADLINE=d.PropTypes.oneOf(["days","range"])),g=d.PropTypes.shape({start:d.PropTypes.string.isRequired,end:d.PropTypes.string.isRequired}),T=(t.DEFAULT_CONDITION=c.default.fromJS({types:[],contexts:[],users:[],roles:!1,deadline:{active:null,days:null,range:null}}),t.VIEW_CONDITION=d.ImmutablePropTypes.shape({types:d.ImmutablePropTypes.list.isRequired,contexts:d.ImmutablePropTypes.list.isRequired,users:d.ImmutablePropTypes.list.isRequired,roles:d.PropTypes.bool,deadline:d.PropTypes.shape({active:m,days:d.PropTypes.number,range:g}).isRequired})),v=c.default.fromJS({userSelection:!1,notificationInterval:null,taskClasses:c.default.List(),contextClassnames:c.default.List(),userViews:{}}),b=(t.USER_VIEW=d.ImmutablePropTypes.contains({edited:d.PropTypes.bool.isRequired,condition:T.isRequired}),t.DATE_PROPTYPE=d.ImmutablePropTypes.contains({iso:d.PropTypes.string,overdue:d.PropTypes.bool,epoch:d.PropTypes.number})),S=d.ImmutablePropTypes.contains((a={ui_link:d.PropTypes.string,cs_tasks_col_read_status:d.PropTypes.number.isRequired,cs_tasks_col_deadline:b,cs_tasks_col_overdue:d.PropTypes.bool.isRequired},r(a,p.ID,d.PropTypes.string.isRequired),r(a,p.CDB_OBJECT_ID,d.PropTypes.string.isRequired),r(a,"id",d.PropTypes.string.isRequired),r(a,"columns",d.ImmutablePropTypes.list.isRequired),a)),h=d.ImmutablePropTypes.listOf(S).isRequired,E=d.ImmutablePropTypes.contains({visible:d.PropTypes.bool,sortDesc:d.PropTypes.bool,width:d.ImmutablePropTypes.contains({unit:d.PropTypes.oneOf(["px","em"]).isRequired,value:d.PropTypes.oneOfType([d.PropTypes.number,d.PropTypes.string]).isRequired}),contentRenderer:d.PropTypes.oneOfType([y,d.PropTypes.string]),position:d.PropTypes.number,attribute:d.PropTypes.string.isRequired,label:d.PropTypes.string.isRequired,tooltip:d.PropTypes.string,groupBy:d.PropTypes.number}),_=c.default.Map({columns:c.default.List(),rows:c.default.List(),fetching:!0,error:""}),w=(t.TABLE=d.ImmutablePropTypes.contains({columns:d.ImmutablePropTypes.listOf(E).isRequired,rows:h,fetching:d.PropTypes.bool.isRequired,error:d.PropTypes.string.isRequired}).isRequired,t.DELTA_DEFAULT=c.default.fromJS({newTasks:c.default.Set(),missingTasks:c.default.Set(),temporaryTasks:c.default.Set(),proceeding:c.default.Set()})),P=t.TASK_INFO=d.ImmutablePropTypes.contains((i={},r(i,p.ID,d.PropTypes.string.isRequired),r(i,p.PLUGIN_DISCRIMINATORS,d.ImmutablePropTypes.list.isRequired),r(i,p.CONTEXT,d.ImmutablePropTypes.list.isRequired),r(i,p.RELSHIPS,d.ImmutablePropTypes.list.isRequired),i)),I=(t.CURRENT_SELECTION=d.ImmutablePropTypes.contains((s={},r(s,p.TASK_OIDs,d.ImmutablePropTypes.orderedSet),r(s,"byObjectID",d.ImmutablePropTypes.mapOf(P).isRequired),s)),t.CURRENT_SELECTION_DEFAULT=c.default.fromJS((u={},r(u,p.TASK_OIDS,c.default.OrderedSet()),r(u,"byObjectID",c.default.Map()),u)));t.STORE_DEFAULT=c.default.fromJS({settings:v,table:_,delta:w,currentSelection:I,fileContainerID:null,inFlight:c.default.Set()})},function(e,t){e.exports=o},function(e,t,n){"use strict";function r(e,t){return{type:p,payload:{actionName:e,isInFlight:t}}}function o(e){return(0,f.debugMode)()?(0,c.notifyError)(e,null,void 0,"danger",1,null,null):(0,c.notifyError)(e)}function a(e){return{type:d,payload:e}}function i(e){return{type:g,payload:{task_object_ids:e}}}function s(e,t){return{type:y,payload:{condition:e,ignoreTemporary:t}}}function u(e){return{type:m,payload:{condition:e}}}function l(e,t){return{type:T,payload:{payload:e,optimistic:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.URL_SETTINGS=t.DELETE=t.POST=t.GET=t.SAVE_USER_SETTINGS_RESPONSE=t.SAVE_USER_SETTINGS=t.SELECT_ROWS=t.NEW_TASKS=t.GET_NEW_TASKS=t.TASKS=t.CLEAR_TASKS=t.GET_TASKS=t.SHOW_TASKS_LOADING_INDICATOR=t.OPTIMISTIC_UPDATE_USER_SETTINGS=t.BACKEND_REQUEST_IN_FLIGHT=void 0,t.backendRequestInFlight=r,t.notifyError=o,t.optimisticUpdateUserSettings=a,t.selectRows=i,t.getTasks=s,t.getNewTasks=u,t.saveUserSettings=l;var c=n(0),f=n(2),p=t.BACKEND_REQUEST_IN_FLIGHT=(0,f.prefixNS)("BACKEND_REQUEST_IN_FLIGHT"),d=t.OPTIMISTIC_UPDATE_USER_SETTINGS=(0,f.prefixNS)("OPTIMISTIC_UPDATE_USER_SETTINGS"),y=(t.SHOW_TASKS_LOADING_INDICATOR=(0,f.prefixNS)("SHOW_TASKS_LOADING_INDICATOR"),t.GET_TASKS=(0,f.prefixNS)("GET_TASKS")),m=(t.CLEAR_TASKS=(0,f.prefixNS)("CLEAR_TASKS"),t.TASKS=(0,f.prefixNS)("TASKS"),t.GET_NEW_TASKS=(0,f.prefixNS)("GET_NEW_TASKS")),g=(t.NEW_TASKS=(0,f.prefixNS)("NEW_TASKS"),t.SELECT_ROWS=(0,f.prefixNS)("SELECT_ROWS")),T=t.SAVE_USER_SETTINGS=(0,f.prefixNS)("SAVE_USER_SETTINGS");t.SAVE_USER_SETTINGS_RESPONSE=(0,f.prefixNS)("SAVE_USER_SETTINGS_RESPONSE"),t.GET="GET",t.POST="POST",t.DELETE="DELETE",t.URL_SETTINGS=(0,c.getAppSetup)().getIn(["links","cs-taskmanager-web","settings"])},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){switch(t){case x.RECENT:case x.CURRENT:case x.DEFAULT:case x.CUSTOM:case x.BY_ID:return e.getIn(x.BASE.concat([t]));default:return t}}function a(e,t){return o(k.getOwnState(e),t)}function i(e){return x.BASE.concat([e])}function s(e,t){return x.BASE.concat([x.BY_ID,o(e,t)])}function u(e,t){return x.BASE.concat([x.BY_ID,a(e,t)])}function l(e,t){return t?e.getIn(s(e,t)):null}function c(e,t){return l(k.getOwnState(e),t)}function f(e,t){return t?e.objectsById.get(t):null}function p(e){return function(t){return c(t,a(t,e))}}function d(e){return function(t){return f(t,a(t,e))}}function y(e,t){return e?e.merge(t):null}function m(e){var t=k.getOwnState(e),n=t.getIn(i("custom"));return n||w.default.List()}function g(e){var t=a(e,"recent");return t||w.default.List()}function T(e){return m(e).toJS().map(function(t){return e.objectsById.get(t)}).filter(function(e){return e})}function v(e){return w.default.OrderedSet(T(e)).add(d("default")(e)).filter(function(e){return e}).map(function(e){return e.get("name")})}function b(e){return k.getOwnState(e).getIn(["settings","contextClassnames"]).join("@")}function S(e){var t=A(e);return V(e).concat([t?t.get(O.ID):null]).filter(function(t){var n=c(e,t);return n&&n.get("edited")}).map(function(t){return e.objectsById.getIn([t,"name"])}).join(", ")}function h(e){return L(e,"users").filter(function(t){return e.objectsById.get(t)}).join("@")}function E(e,t){var n=L(e,"users");return n?n.map(function(n){return t(e.objectsById.get(n))}).filter(function(e){return e}).join(", "):""}Object.defineProperty(t,"__esModule",{value:!0}),t.getContextClassnames=t.getSelectedUserNames=t.getCurrentViewUserIDs=t.getCurrentViewCondition=t.getViewNames=t.getEditedViewByID=t.getEditedViewNames=t.getRecentViewIDs=t.getUserViewIDs=t.getViewByID=t.getCurrentView=t.getCurrentCustomViewFromOwnState=t.getDefaultView=t.mergeViewObjects=void 0,t.getViewID=a,t.getViewIDPath=i,t.getViewPathFromOwnState=s,t.getViewPath=u,t._getRecentViewIDs=g;var _=n(5),w=function(e){return e&&e.__esModule?e:{default:e}}(_),P=n(3),I=n(4),O=r(I),R=n(2),k=r(R),N=n(7),C=r(N),D=P.reselect.createSelector,x={BASE:["settings","userViews"],RECENT:"recent",CURRENT:"current",DEFAULT:"default",CUSTOM:"custom",BY_ID:"byID",CONDITION:"condition"},A=(t.mergeViewObjects=D([function(e,t){return t},function(e,t,n){return n}],y),t.getDefaultView=D([p("default"),d("default")],y)),j=(t.getCurrentCustomViewFromOwnState=D([function(e){return function(t){return l(t,o(t,e))}}("current")],function(e){return e}),t.getCurrentView=D([p("current"),d("current")],y)),V=(t.getViewByID=D([f],function(e){return e}),t.getUserViewIDs=D([m],function(e){return e})),L=(t.getRecentViewIDs=D([g],function(e){return e}),t.getEditedViewNames=D([S],function(e){return e}),t.getEditedViewByID=D([c],function(e){return e.get("edited")}),t.getViewNames=D([v],function(e){return e}),t.getCurrentViewCondition=D([j,function(e,t){return t}],function(e,t){if(e){var n=["condition"];return t&&n.push(t),e.getIn(n)}var r=C.DEFAULT_CONDITION;return t?r.get(t):r}));t.getCurrentViewUserIDs=D([h],function(e){return w.default.List(e.split("@"))}),t.getSelectedUserNames=D([E],function(e){return e}),t.getContextClassnames=D([b],function(e){return e.split("@").filter(function(e){return e})})},,function(e,t,n){"use strict";function r(){return{type:b.SETUP,payload:null}}function o(e){var t=(0,g.getAppSetup)().getIn(["appSettings","title"]);return{type:v,payload:e?t+" - "+e:t}}function a(e,t){return{type:b.MODIFY,payload:{modification:{type:e,payload:t}}}}function i(e){return{type:b.SELECT,payload:{viewID:e}}}function s(e,t){return{type:b.SAVE,payload:{viewID:e,condition:t}}}function u(e,t){return{type:b.SAVE_AS,payload:{name:e,condition:t}}}function l(e){return{type:b.NEW_OPTIMISTIC,payload:{dummyID:e}}}function c(e,t){return{type:b.RENAME,payload:{viewID:e,name:t}}}function f(e,t){return{type:b.RENAME_OPTIMISTIC,payload:{viewID:e,name:t}}}function p(e){return{type:b.DELETE,payload:{viewID:e}}}function d(e){return{type:b.DELETE_OPTIMISTIC,payload:{viewID:e}}}function y(e,t){return{type:t?b.SET_EDITED:b.SET_UNEDITED,payload:{viewID:e}}}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=(0,T.debugMode)()?null:S;return(0,g.addNotification)(r,e,t,n,null,null,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.USER=t.DEADLINE=t.CONTEXT=t.TYPE=t.VIEW=t.UPDATE_DOCUMENT_TITLE=void 0,t.setupViews=r,t.updateDocumentTitle=o,t.modifyCurrentView=a,t.selectUserView=i,t.saveUserView=s,t.saveUserViewAs=u,t.newUserViewOptimistic=l,t.renameUserView=c,t.renameUserViewOptimistic=f,t.deleteUserView=p,t.deleteUserViewOptimistic=d,t.setViewEdited=y,t.notify=m;var g=n(0),T=n(2),v=t.UPDATE_DOCUMENT_TITLE=(0,T.prefixNS)("UPDATE_DOCUMENT_TITLE"),b=t.VIEW={SETUP:(0,T.prefixNS)("SETUP_VIEWS"),MODIFY:(0,T.prefixNS)("MODIFY_VIEW"),SELECT:(0,T.prefixNS)("SELECT_VIEW"),DO_SELECT:(0,T.prefixNS)("DO_SELECT_VIEW"),SELECTED:(0,T.prefixNS)("SELECTED_VIEW"),SET_EDITED:(0,T.prefixNS)("SET_VIEW_EDITED"),SET_UNEDITED:(0,T.prefixNS)("SET_VIEW_UNEDITED"),SAVE:(0,T.prefixNS)("SAVE_VIEW"),SAVED:(0,T.prefixNS)("SAVED_VIEW"),SAVE_AS:(0,T.prefixNS)("SAVE_VIEW_AS"),NEW_OPTIMISTIC:(0,T.prefixNS)("NEW_VIEW_OPTIMISTIC"),NEW:(0,T.prefixNS)("NEW_VIEW"),RENAME:(0,T.prefixNS)("RENAME_VIEW"),RENAME_OPTIMISTIC:(0,T.prefixNS)("RENAME_VIEW_OPTIMISTIC"),RENAMED:(0,T.prefixNS)("RENAMED_VIEW"),DELETE:(0,T.prefixNS)("DELETE_VIEW"),DELETE_OPTIMISTIC:(0,T.prefixNS)("DELETE_VIEW_OPTIMISTIC")},S=(t.TYPE={SELECT:(0,T.prefixNS)("SELECT_TYPE"),DESELECT:(0,T.prefixNS)("DESELECT_TYPE"),CLEAR:(0,T.prefixNS)("CLEAR_TYPES")},t.CONTEXT={SELECT:(0,T.prefixNS)("SELECT_CONTEXT"),DESELECT:(0,T.prefixNS)("DESELECT_CONTEXT"),CLEAR:(0,T.prefixNS)("CLEAR_CONTEXT")},t.DEADLINE={SET_DAYS:(0,T.prefixNS)("SET_DEADLINE_DAYS"),SET_RANGE:(0,T.prefixNS)("SET_DEADLINE_RANGE"),ACTIVATE:(0,T.prefixNS)("ACTIVATE_DEADLINE_FILTER")},t.USER={SELECT:(0,T.prefixNS)("SELECT_USER"),DESELECT:(0,T.prefixNS)("DESELECT_USER"),INCLUDE_ROLE_TASKS:(0,T.prefixNS)("INCLUDE_ROLE_TASKS")},1e4)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){if(e.get("className"))return e.get("className").indexOf("deleted")>-1}Object.defineProperty(t,"__esModule",{value:!0}),t.customSort=t.CELL_PROPTYPE=t.EMPTY=void 0,t.isDeleted=o;var a=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(4),u=r(s),l=n(3),c=n(2),f=r(c);t.EMPTY=i.default.createElement("div",{className:f.prefixNS("empty")},u.NULL),t.CELL_PROPTYPE={column:l.ImmutablePropTypes.map,row:l.ImmutablePropTypes.map,isGroup:l.PropTypes.bool},t.customSort=function(e,t,n,r){var o=n[0]?e(n[0]):t,a=r[0]?e(r[0]):t;return o===a?0:o>a?1:-1}},function(e,t,n){"use strict";function r(){return{type:c}}function o(e,t){return{type:f,payload:{task_object_id:e,tags:t}}}function a(e,t){return{type:p,payload:{task_object_id:e,read_status:t}}}function i(e){return{type:d,payload:{task_object_id:e}}}function s(e,t,n,r){return{type:y,payload:{task_object_id:e,proceed_to:t,kwargs:n,condition:r}}}Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_CHANGE_IN_FLIGHT=t.CHANGE_STATUS=t.TARGET_STATUSES=t.GET_TARGET_STATUSES=t.SAVE_READ_STATUS_RESPONSE=t.SAVE_READ_STATUS=t.SAVE_TAGS_RESPONSE=t.SAVE_TAGS=t.RECEIVED_SETTINGS=t.FETCH_SETTINGS=void 0,t.fetchSettings=r,t.saveTags=o,t.saveReadStatus=a,t.getTargetStatuses=i,t.changeStatus=s;var u=n(2),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),c=t.FETCH_SETTINGS=l.prefixNS("FETCH_SETTINGS"),f=(t.RECEIVED_SETTINGS=l.prefixNS("RECEIVED_SETTINGS"),t.SAVE_TAGS=l.prefixNS("SAVE_TAGS")),p=(t.SAVE_TAGS_RESPONSE=l.prefixNS("SAVE_TAGS_RESPONSE"),t.SAVE_READ_STATUS=l.prefixNS("SAVE_READ_STATUS")),d=(t.SAVE_READ_STATUS_RESPONSE=l.prefixNS("SAVE_READ_STATUS_RESPONSE"),t.GET_TARGET_STATUSES=l.prefixNS("GET_TARGET_STATUSES")),y=(t.TARGET_STATUSES=l.prefixNS("TARGET_STATUSES"),t.CHANGE_STATUS=l.prefixNS("CHANGE_STATUS"));t.STATUS_CHANGE_IN_FLIGHT=l.prefixNS("STATUS_CHANGE_IN_FLIGHT")},function(e,t){e.exports=a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return{type:c,payload:{task_object_id:e}}}function a(){return{type:f}}function i(e){return{type:p,payload:r({},u.ID,e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.SELECT_FILE_CONTAINER=t.RESET_TASK_DETAILS=t.TASK_DETAILS=t.GET_TASK_DETAILS=void 0,t.getTaskDetails=o,t.resetTaskDetails=a,t.selectFileContainer=i;var s=n(4),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),l=n(2),c=t.GET_TASK_DETAILS=(0,l.prefixNS)("GET_TASK_DETAILS"),f=(t.TASK_DETAILS=(0,l.prefixNS)("TASK_DETAILS"),t.RESET_TASK_DETAILS=(0,l.prefixNS)("RESET_TASK_DETAILS")),p=t.SELECT_FILE_CONTAINER=(0,l.prefixNS)("SELECT_FILE_CONTAINER")},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=e.label,n=e.id,o=e.children,a=r(e,["label","id","children"]);return u.default.createElement(c.Button.DropdownTextButton,i({},a,{pullRight:!0,label:t||y,className:p.prefixNS("filter-dropdown")+" "+n,id:n}),o)}function a(e){var t=e.name,n=e.onChange,r=e.checked,o=e.disabled,a=e.tooltip,i=e.label;return u.default.createElement(d,{eventKey:t,onSelect:n,className:(0,l.classNames)([p.prefixNS("simple-menuitem"),r?"checked":"unchecked"]),disabled:o||!1,title:a},i)}Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleFilterItem=t.FilterItem=t.FilterDropdown=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(3),c=n(0),f=n(2),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=c.Overlays.MenuItem,y="...";o.propTypes={label:l.PropTypes.string.isRequired,id:l.PropTypes.string.isRequired,title:l.PropTypes.string};var m=c.FormControl.CheckBoxMenuItem;a.propTypes={name:l.PropTypes.string.isRequired,tooltip:l.PropTypes.string,checked:l.PropTypes.bool,disabled:l.PropTypes.bool,label:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.element]).isRequired,onChange:l.PropTypes.func.isRequired},t.FilterDropdown=o,t.FilterItem=m,t.SimpleFilterItem=a},function(e,t,n){"use strict";function r(e){switch(e){case v.GET:return g.getJSON;case v.POST:return g.postJSON;case v.DELETE:return g.deleteObject}throw new Error("request method has to be either GET, POST or DELETE")}function o(e){return e.map(function(e){return e.split("/").pop()})}function a(e){try{return new URL(e).pathname}catch(t){if(t instanceof TypeError)return e;throw t}}function i(e){var t={users:o(e.get("users")).toJS(),roles:e.get("roles",!1),types:o(e.get("types",y.default.List())).toJS(),contexts:e.get("contexts",y.default.List()).map(function(e){return a(e)}).toJS()};switch(e.getIn(["deadline","active"])){case"days":t.days=e.getIn(["deadline","days"]);break;case"range":t.start=e.getIn(["deadline","range","start"]),t.end=e.getIn(["deadline","range","end"])}return t}function s(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.objects){t.next=3;break}return t.next=3,I((0,g.receivedCollection)(null,e.objects));case 3:case"end":return t.stop()}},b,this)}function u(e,t,n,o,a){var i;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t){u.next=2;break}throw new Error("no URL given");case 2:return u.next=4,I(v.backendRequestInFlight(e+" "+t,!0));case 4:return u.prev=4,u.next=7,O(r(e),t,o||{});case 7:return i=u.sent,u.next=10,I(v.backendRequestInFlight(e+" "+t,!1));case 10:return u.next=12,O(s,i);case 12:if(!n){u.next=15;break}return u.next=15,I({type:n,payload:i,meta:a});case 15:u.next=24;break;case 17:return u.prev=17,u.t0=u.catch(4),u.next=21,I(v.backendRequestInFlight(e+" "+t,!1));case 21:return u.next=23,I(v.notifyError(u.t0));case 23:throw u.t0;case 24:case"end":return u.stop()}},S,this,[[4,17]])}function l(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I({type:T.SHOW_TASKS_LOADING_INDICATOR});case 2:if(t=i(e.payload.condition),n={ignoreTemporary:Boolean(e.payload.ignoreTemporary)},0!==t.users.length){r.next=9;break}return r.next=7,I({type:v.CLEAR_TASKS});case 7:r.next=17;break;case 9:return r.prev=9,r.next=12,O(u,v.GET,k,v.TASKS,t,n);case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(9),g.Console.error(r.t0);case 17:case"end":return r.stop()}},h,this,[[9,14]])}function c(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=i(e.payload.condition),!(t.users.length>0)){n.next=10;break}return n.prev=2,n.next=5,O(u,v.GET,N,v.NEW_TASKS,t);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),g.Console.error(n.t0);case 10:case"end":return n.stop()}},E,this,[[2,7]])}function f(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,n=t.payload,r=t.optimistic,!r){o.next=4;break}return o.next=4,I(v.optimisticUpdateUserSettings(r));case 4:return o.prev=4,o.next=7,O(u,v.POST,v.URL_SETTINGS,v.SAVE_USER_SETTINGS_RESPONSE,n);case 7:o.next=12;break;case 9:o.prev=9,o.t0=o.catch(4),g.Console.error(o.t0);case 12:case"end":return o.stop()}},_,this,[[4,9]])}function p(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(v.GET_TASKS,l);case 2:return e.next=4,R(v.GET_NEW_TASKS,c);case 4:return e.next=6,R(v.SAVE_USER_SETTINGS,f);case 6:case"end":return e.stop()}},w,this)}Object.defineProperty(t,"__esModule",{value:!0}),t.getPKeyFromIDs=o,t.getRelativeRestID=a,t.getConditionPayload=i,t.mergeObjectStore=s,t.backendRequest=u,t.getTasks=l,t.getNewTasks=c,t.postUserSettings=f,t.default=p;var d=n(5),y=function(e){return e&&e.__esModule?e:{default:e}}(d),m=n(3),g=n(0),T=n(9),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(T),b=regeneratorRuntime.mark(s),S=regeneratorRuntime.mark(u),h=regeneratorRuntime.mark(l),E=regeneratorRuntime.mark(c),_=regeneratorRuntime.mark(f),w=regeneratorRuntime.mark(p),P=m.ReduxSaga.effects,I=P.put,O=P.call,R=P.takeEvery,k=(0,g.getAppSetup)().getIn(["links","cs-taskmanager-web","tasks"]),N=(0,g.getAppSetup)().getIn(["links","cs-taskmanager-web","newTasks"])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{detailsPaneSize:e[T.prefixNS("reducer")].getIn(["settings",S,"size"])}}function l(e){return{setUserSettings:function(t,n){e((0,m.saveUserSettings)(t,n))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PANE_WIDTH=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),d=n(3),y=n(0),m=n(9),g=n(2),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(g),v=n(28),b=r(v),S=T.prefixNS("details-pane"),h=t.DEFAULT_PANE_WIDTH="40rem",E=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.onChangeHandler=s.onChangeHandler.bind(s),s}return s(t,e),c(t,[{key:"onChangeHandler",value:function(e){(0,this.props.setUserSettings)(o({},S,e))}},{key:"render",value:function(){var e=this.props.detailsPaneSize;return p.default.createElement(y.SplitterLayout.SecondaryPane,{defaultSize:e,collapsible:!0,onChange:this.onChangeHandler},p.default.createElement(b.default,null))}}]),t}(p.default.PureComponent);E.defaultProps={detailsPaneSize:h},E.propTypes={setUserSettings:d.PropTypes.func.isRequired,detailsPaneSize:d.PropTypes.string.isRequired},t.default=(0,d.connect)(u,l)(E)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.obj,n=e.getDescription,r=e.deselectObject,o=e.messageRemove,a=t.get(S.ID);return d.default.createElement(g.Label,{key:a,bsStyle:"primary",className:E.prefixNS("selected-obj")},n(t),d.default.createElement(v.Button.IconButton,{buttonStyle:"link",size:"sm",iconName:"csweb_remove",title:(0,P.formatStr)(o),className:E.prefixNS("selected-obj--remove"),onClick:function(){return r(a)}}))}function l(e){var t=e.resolvedSelection,n=e.ignoredObjects,r=e.deselectObject,o=e.messageRemove,a=e.getDescription;return d.default.createElement("div",{className:E.prefixNS("selected-objs")},t.map(function(e){if(e){var t=e.get(S.ID);return n.includes(t)?null:d.default.createElement(u,{key:t,obj:e,deselectObject:r,messageRemove:o,getDescription:a})}return null}))}function c(e,t){return{resolvedSelection:t.currentSelection.map(function(t){return e.objectsById.get(t)}).filter(function(e){return e})}}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=o(p),y=n(5),m=o(y),g=n(8),T=n(3),v=n(0),b=n(4),S=r(b),h=n(2),E=r(h),_=n(7),w=r(_),P=n(6),I=v.Registry.findComponent("cs-web-components-base-ObjectSearch");u.propTypes={obj:w.OBJECT_PROPTYPE.isRequired,messageRemove:T.PropTypes.string.isRequired,deselectObject:T.PropTypes.func.isRequired,getDescription:T.PropTypes.func.isRequired},l.propTypes={currentSelection:T.PropTypes.oneOfType([T.ImmutablePropTypes.list,T.ImmutablePropTypes.set]).isRequired,resolvedSelection:T.PropTypes.oneOfType([T.ImmutablePropTypes.list,T.ImmutablePropTypes.set]).isRequired,ignoredObjects:T.ImmutablePropTypes.set.isRequired,messageRemove:T.PropTypes.string.isRequired,getDescription:T.PropTypes.func.isRequired,deselectObject:T.PropTypes.func.isRequired,fetchObject:T.PropTypes.func.isRequired};var O=(0,T.connect)(c,{fetchObject:v.fetchObject})(l),R=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.inputRef=null,s.setInputRef=s.setInputRef.bind(s),s.focus=s.focus.bind(s),s.selectObject=s.selectObject.bind(s),s.deselectObject=s.deselectObject.bind(s),s}return s(t,e),f(t,[{key:"setInputRef",value:function(e){this.inputRef=e}},{key:"focus",value:function(e){this.inputRef&&this.inputRef.getWrappedInstance&&this.inputRef.getWrappedInstance().focus(e)}},{key:"selectObject",value:function(e){var t=this.props,n=t.fetchObject,r=t.select,o=e.get("rest_url");n(o),r(o)}},{key:"deselectObject",value:function(e){(0,this.props.deselect)(e)}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.queryClassnames,r=e.currentSelection,o=e.ignoredObjects,a=e.messageRemove,i=e.messagePlaceholder,s=e.getDescription;return d.default.createElement(d.default.Fragment,null,d.default.createElement(O,{currentSelection:r,ignoredObjects:o,messageRemove:a,getDescription:s,deselectObject:this.deselectObject}),d.default.createElement(I,{className:E.prefixNS("object-search"),id:t,searchPlaceholder:(0,P.formatStr)(i),searchClasses:n,hideDefaultTags:!0,onSelectItem:this.selectObject}))}}]),t}(d.default.PureComponent);R.defaultProps={currentSelection:m.default.Set(),ignoredObjects:m.default.Set(),getDescription:function(e){return e.get(S.DESCRIPTION)}},R.propTypes={name:T.PropTypes.string.isRequired,queryClassnames:T.PropTypes.arrayOf(T.PropTypes.string).isRequired,currentSelection:T.PropTypes.oneOfType([T.ImmutablePropTypes.list,T.ImmutablePropTypes.set]).isRequired,ignoredObjects:T.ImmutablePropTypes.set.isRequired,additionalFilter:T.PropTypes.func,select:T.PropTypes.func.isRequired,deselect:T.PropTypes.func.isRequired,messageRemove:T.PropTypes.string.isRequired,messagePlaceholder:T.PropTypes.string.isRequired,getDescription:T.PropTypes.func.isRequired,fetchObject:T.PropTypes.func.isRequired},t.default=(0,T.connect)(null,{fetchObject:v.fetchObject})(R)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.task,n=e.taskInfo,r=n.get(g.CONTEXT);return p.default.createElement("ul",{className:(0,T.prefixNS)("task-context")},r?r.map(function(e,t){return p.default.createElement(_,{key:"context-node-"+t,nodeID:e,level:t,className:(0,T.prefixNS)("context-node-"+t)})}):null,p.default.createElement(_,{node:t,level:r?r.size:0,className:(0,T.prefixNS)("context-node-empty")}))}function l(e,t){return{resolvedNode:e.objectsById.get(t.nodeID)}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=o(f),d=n(3),y=n(0),m=n(4),g=r(m),T=n(2),v=n(7),b=r(v),S=n(22),h=o(S);u.propTypes={task:d.ImmutablePropTypes.map.isRequired,taskInfo:b.TASK_INFO.isRequired},t.default=u;var E=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.fetchNode=s.fetchNode.bind(s),s}return s(t,e),c(t,[{key:"componentWillMount",value:function(){this.fetchNode(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.nodeID!==this.props.nodeID&&this.fetchNode(e)}},{key:"fetchNode",value:function(e){var t=e.node,n=e.nodeID,r=e.fetchObject;!t&&n&&r(n)}},{key:"render",value:function(){var e=this.props,t=e.node,n=e.resolvedNode,r=e.level,o=t||n;return p.default.createElement("li",{className:(0,T.prefixNS)("task-context-node"),style:{marginLeft:2*r+"em"}},o?p.default.createElement(h.default,{obj:o}):"...")}}]),t}(p.default.PureComponent);E.propTypes={node:d.ImmutablePropTypes.map,resolvedNode:d.ImmutablePropTypes.map,nodeID:d.PropTypes.string,level:d.PropTypes.number.isRequired};var _=(0,d.connect)(l,{fetchObject:y.fetchObject})(E)},function(e,t,n){"use strict";function r(e){var t=e.obj;return t?a.default.createElement(s.SVGIconAndLink,{"data-cdb-object-id":t.get(l.CDB_OBJECT_ID),src:t.get(l.ICON_LINK),to:t.get(l.UI_LINK),label:t.get(l.DESCRIPTION),className:(0,c.prefixNS)("svg-icon-and-link")}):null}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(3),s=n(0),u=n(4),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),c=n(2);r.propTypes={obj:i.ImmutablePropTypes.contains({src:i.PropTypes.string,to:i.PropTypes.string,label:i.PropTypes.string})},t.default=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){e.stopPropagation()}function l(e){var t=e.resolvedObject;return m.default.createElement(I.default,{obj:t},m.default.createElement("div",{className:(0,b.prefixNS)("referenced-object__actions"),style:O?{marginTop:"-12px"}:null,onClick:u},m.default.createElement(v.ContentOperationToolbar,{contextObject:t,operationContextName:"CsTasksDetailReference",hideQuickAccess:!0})))}function c(e,t){var n=t.objID;return{resolvedObject:e.objectsById.get(n)}}function f(e){var t=e.objectIDs,n=e.showAllObjs,r=e.hasMore;return m.default.createElement(g.ListGroup,null,t.map(function(e){return m.default.createElement(g.ListGroupItem,{key:e,className:(0,b.prefixNS)("referenced-object")},m.default.createElement(k,{objID:e}))}),n&&r?m.default.createElement("a",{onClick:n,href:"#"},(0,S.formatStr)(R)):null)}function p(e,t){var n=t.relship.get("references");return{resolvedObjectCount:n?n.map(function(t){return e.objectsById.get(t)}).filter(function(e){return e}).size:0}}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(1),m=o(y),g=n(8),T=n(3),v=n(0),b=n(2),S=n(6),h=n(4),E=r(h),_=n(7),w=r(_),P=n(30),I=o(P),O=(0,b.detectIE)(),R="more";l.propTypes={resolvedObject:w.OBJECT_PROPTYPE.isRequired};var k=(0,T.connect)(c)(l);f.propTypes={objectIDs:T.ImmutablePropTypes.listOf(T.PropTypes.string).isRequired,shownObjs:T.ImmutablePropTypes.list.isRequired,showAllObjs:T.PropTypes.func,hasMore:T.PropTypes.bool};var N=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.state={shownReferences:0},s.initializeRef=s.initializeRef.bind(s),s.showAllReferences=s.showAllReferences.bind(s),s}return s(t,e),d(t,[{key:"initializeRef",value:function(e){var t=e.resolvedObjectCount,n=e.relship,r=n.get("references"),o=3;t<=4&&(o=4);var a=r.slice(0,o);this.setState({shownReferences:a,hasMore:a.size!==r.size})}},{key:"componentWillMount",value:function(){this.initializeRef(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.resolvedObjectCount!==this.props.resolvedObjectCount&&this.initializeRef(e)}},{key:"showAllReferences",value:function(){var e=this.props.relship;this.setState({shownReferences:e.get("references"),hasMore:!1})}},{key:"render",value:function(){var e=this.props,t=e.renderer,n=e.resolvedObjectCount,r=this.state,o=r.shownReferences,a=r.hasMore;return 0===n?null:t({objectIDs:o,showAllObjs:this.showAllReferences,hasMore:a})}}]),t}(m.default.PureComponent);N.getLabel=function(e){var t=e&&e.get("mappedName");return t?t.split("/").pop():E.NULL},N.propTypes={renderer:T.PropTypes.oneOfType([T.PropTypes.element,T.PropTypes.func]).isRequired,relship:T.ImmutablePropTypes.contains({references:T.ImmutablePropTypes.listOf(T.PropTypes.string).isRequired,mappedName:T.PropTypes.string.isRequired}).isRequired,resolvedObjectCount:T.PropTypes.number.isRequired},N.defaultProps={renderer:f},t.default=(0,T.connect)(p)(N)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.get(h.TASK_OIDS);return t||V}function l(e){var t=e[b.prefixNS("reducer")],n=t.get("currentSelection"),r=t.getIn(["currentSelection",h.TASK_OIDS]);return{currentSelection:n,initSelected:L(n),selectedTask:e.objectsById.get(t.getIn(["currentSelection","byObjectID",r.last(),h.ID])),condition:(0,k.getCurrentViewCondition)(e),table:t.get("table"),hiddenColumns:t.get("hiddenColumns")}}function c(e){return{selectRows:function(t){e((0,w.selectRows)(t))},setReadStatus:function(t,n){e((0,P.saveReadStatus)(t,n))},getTasks:function(t){e((0,w.getTasks)(t))},getSettings:function(){e((0,P.fetchSettings)())}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getInitSelected=t.TABLE_CONTEXT_PATH=void 0;var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=o(p),y=n(5),m=o(y),g=n(8),T=n(3),v=n(2),b=r(v),S=n(4),h=r(S),E=n(7),_=r(E),w=n(9),P=n(14),I=n(0),O=n(44),R=o(O),k=n(10),N=T.reselect.createSelector,C=I.Registry.findComponent("cs-web-components-base-ContextObjectWrapper"),D=I.Registry.findComponent("cs-web-components-base-TableWrapper"),x=t.TABLE_CONTEXT_PATH=b.prefixNS("tasks-table-context"),A="CsTasksTable",j=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),u=I.Table.PredefinedTables.getDefaultTableOptions();return u.Table=I.Table.Scrolled(I.Table.Table),u.toolbarButtons.push({toolbarButtons:[function(){return d.default.createElement(C,{readPath:x},d.default.createElement(I.TableOperationToolbar,{operationContextName:A,refreshTable:s.refreshTable.bind(s)}))}]}),s.FeatureTable=function(){return I.Table.PredefinedTables.DefaultTable(u)},s.refreshTable=s.refreshTable.bind(s),s.setCurrentURLFromPrimarySelection=s.setCurrentURLFromPrimarySelection.bind(s),s.resetURL=s.resetURL.bind(s),s.onSelect=s.onSelect.bind(s),s}return s(t,e),f(t,[{key:"refreshTable",value:function(){var e=this.props;(0,e.getTasks)(e.condition)}},{key:"componentWillMount",value:function(){this.props.getSettings()}},{key:"componentWillReceiveProps",value:function(e){e.currentSelection!==this.props.currentSelection&&this.setSelectedTaskRead(e),e.table.get("rows")!==this.props.table.get("rows")&&this.resetURL(e)}},{key:"resetURL",value:function(e){var t=e||this.props;t.currentSelection.get(h.TASK_OIDS).size>0&&-1===b.getTaskIndex(t.table.get("rows"),t.currentSelection.get(h.TASK_OIDS).last())&&this.setCurrentURLFromPrimarySelection()}},{key:"setCurrentURLFromPrimarySelection",value:function(e){e?T.browserHistory.push(b.basePath+"/"+e):T.browserHistory.push(b.basePath)}},{key:"onSelect",value:function(e){if(e.size>0){var t=e.last(),n=this.props,r=n.currentSelection,o=n.table,a=n.selectRows;this.context.loadTaskOperations(o.get("rows").filter(function(t){return e.includes(t.get("id"))}).map(function(e){return e.get(h.ID)})),a(e),r.get(h.TASK_OIDS).last()!==t&&this.setCurrentURLFromPrimarySelection(t)}else this.setCurrentURLFromPrimarySelection()}},{key:"setSelectedTaskRead",value:function(e){var t=e.selectedTask;if(t){var n=this.props,r=n.selectedTask,o=n.setReadStatus;if(!r||t!==r){var a=e.table.get("rows").filter(function(e){return e.get("id")===t.get(h.CDB_OBJECT_ID)});a&&!a.get("read_status")&&o(t.get(h.CDB_OBJECT_ID),1)}}}},{key:"render",value:function(){var e=this.props,t=e.table,n=e.initSelected,r=e.hiddenColumns;if(t&&t.get("error"))return d.default.createElement("div",null,d.default.createElement("p",{className:"text-error"},this.props.table.get("error")));if(!t||t.get("fetching"))return d.default.createElement(g.Alert,{bsStyle:"info"},"...");var o=b.prefixNS("tasks-table");return d.default.createElement(D,{title:d.default.createElement(R.default,null),hiddenColumns:r,id:o,collapsible:!1,settingID:o,initSelected:n,tableDef:t,rowValues:t.get("rows"),contentHeight:"100%",singleSelection:!1,withSelector:!0,onSelectionChanged:this.onSelect,table:this.FeatureTable})}}]),t}(d.default.PureComponent);j.contextTypes={loadTaskOperations:T.PropTypes.func.isRequired},j.propTypes={condition:_.VIEW_CONDITION,table:_.TABLE,hiddenColumns:T.ImmutablePropTypes.setOf(T.PropTypes.string),currentSelection:_.CURRENT_SELECTION,initSelected:T.ImmutablePropTypes.orderedSetOf(T.PropTypes.string).isRequired,selectedTask:_.OBJECT_PROPTYPE,selectRows:T.PropTypes.func.isRequired,setReadStatus:T.PropTypes.func.isRequired,getTasks:T.PropTypes.func.isRequired,getSettings:T.PropTypes.func.isRequired};var V=m.default.OrderedSet(),L=t.getInitSelected=N([u],function(e){return e});t.default=(0,T.connect)(l,c)(j)},function(e,t,n){"use strict";function r(e){var t=e.value,n=e.size;if(t){var r=t.get("data"),o=r.get("icon_url"),a=o?i.default.createElement(s.SVGIcon,{size:n,src:o,className:c.prefixNS("svg-status-icon")}):i.default.createElement(p,{color:r.get("color"),label:r.get("label"),className:c.prefixNS("status-icon"),size:n});return i.default.createElement("span",{className:c.prefixNS("status"),title:r.get("label")},a,r.get("label"))}return f.EMPTY}Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_PROPTYPE=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(0),u=n(3),l=n(2),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),f=n(13),p=s.Registry.findComponent("cs-web-components-base-StatusIcon"),d=t.STATUS_PROPTYPE=u.ImmutablePropTypes.contains({data:u.PropTypes.oneOfType([u.ImmutablePropTypes.contains({priority:u.PropTypes.number,status:u.PropTypes.number.isRequired,label:u.PropTypes.string.isRequired,icon_url:u.PropTypes.string,color:u.PropTypes.string.isRequired,attributes:u.ImmutablePropTypes.mapOf(u.ImmutablePropTypes.contains({mandatory:u.PropTypes.bool.isRequired,label:u.PropTypes.string.isRequired,value:u.PropTypes.string}))}),u.PropTypes.object]).isRequired});r.groupByFunction=function(e){return e.set("data",e.get("data").filter(function(e,t){return"color"===t||"label"===t||"icon_url"===t}))},r.sortFunction=function(e,t){return(0,f.customSort)(function(e){return e.getIn(["data","label"])},"",e,t)},r.filterFunction=function(e,t){return(e&&e.getIn(["data","label"])||"").toLowerCase().indexOf(t)>-1},r.propTypes=o({},f.CELL_PROPTYPE,{value:d.isRequired,size:u.PropTypes.string}),r.defaultProps={size:"sm"},t.default=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return t.isInFlight?e.set(x,e.get(x).add(t.actionName)):e.set(x,e.get(x).delete(t.actionName))}function s(e){return Q.hasOwnProperty(e)||(Q[e]=T.Registry.findComponent(e)),Q[e]}function u(e){return e.setIn([A,"fetching"],!0)}function l(e){return e.setIn([A,j],m.default.List()).setIn([A,"fetching"],!1)}function c(e,t,n){if(t[M]!==e.getIn([L,M]))return e;t[A][V].forEach(function(e){e[z]=s(e[z])}),t[A][j].forEach(function(e){e[U]=X(e[q])});var r=m.default.Set(),o=m.default.List();return n.ignoreTemporary||(r=$(e.getIn([A,j])).subtract($(m.default.fromJS(t[A][j]))).subtract(e.getIn([G,W])).subtract(e.getIn([G,B])),o=e.getIn([A,j]).filter(function(e){return r.includes(e.get(_.CDB_OBJECT_ID))}).map(function(e){return e.set(U,(0,g.classNames)(e.get(U),"deleted"))})),t[A][j]=o.concat(m.default.fromJS(t[A][j])),e.set(A,m.default.fromJS(t[A])).set(_.USER_TAGS,m.default.List(t[_.USER_TAGS])).set(G,P.DELTA_DEFAULT.set(W,r))}function f(e,t){var n=m.default.Set(t.filter(function(t){return-1===b.getTaskIndex(e.getIn([A,j]),t)})),r=$(e.getIn([A,j])).subtract(t).subtract(e.getIn([G,W]));return e.setIn([G,H],n).setIn([G,K],r)}function p(e,t){return e.setIn([F,_.TASK_OIDS],m.default.OrderedSet(t[_.TASK_OIDS]))}function d(e,t){return e.mergeIn([L],t[L])}Object.defineProperty(t,"__esModule",{value:!0}),t.getReadStatusCSSClasses=void 0,t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments[1];switch(t.type){case h.BACKEND_REQUEST_IN_FLIGHT:return i(e,t.payload);case h.OPTIMISTIC_UPDATE_USER_SETTINGS:return d(e,a({},L,t.payload));case h.SHOW_TASKS_LOADING_INDICATOR:return u(e);case h.CLEAR_TASKS:return l(e);case h.TASKS:return c(e,t.payload,t.meta);case h.NEW_TASKS:return f(e,t.payload);case h.SELECT_ROWS:return p(e,t.payload);case h.SAVE_USER_SETTINGS_RESPONSE:return d(e,t.payload);default:for(var n=[O.default,k.default,C.default],r=0;r<n.length;r++){var o=n[r],s=o(e,t);if(s!==e)return s}return t.type.startsWith("cs-taskmanager-web")&&console.warn("state unaltered",t.type),e}};var y=n(5),m=o(y),g=n(3),T=n(0),v=n(2),b=r(v),S=n(9),h=r(S),E=n(4),_=r(E),w=n(7),P=r(w),I=n(56),O=o(I),R=n(57),k=o(R),N=n(58),C=o(N),D=P.STORE_DEFAULT,x="inFlight",A="table",j="rows",V="columns",L="settings",M="userID",U="className",q="cs_tasks_col_read_status",F="currentSelection",G="delta",B="proceeding",W="temporaryTasks",K="missingTasks",H="newTasks",z="contentRenderer",Y=b.prefixNS("task-read"),J=b.prefixNS("task-unread"),X=t.getReadStatusCSSClasses=function(e,t){var n,r=t?t.split(" ").filter(function(e){return e!==Y&&e!==J}):[];return(0,g.classNames)(r,(n={},a(n,Y,e),a(n,J,!e),n))},Q={},$=function(e){return m.default.Set(e.map(function(e){return e.get(_.CDB_OBJECT_ID)}))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(0),a=n(2),i=n(19),s=r(i),u=n(31),l=r(u),c=n(32),f=r(c),p=n(21),d=r(p),y=n(23),m=r(y),g=n(33),T=r(g),v=n(41),b=r(v),S=n(42),h=r(S),E=n(20),_=r(E),w=n(24),P=r(w),I=n(45),O=r(I),R=n(46),k=r(R),N=n(47),C=r(N),D=n(48),x=r(D),A=n(49),j=r(A),V=n(51),L=r(V),M=n(25),U=r(M),q=n(52),F=r(q),G=n(18),B=r(G),W=n(53),K=r(W),H=n(54),z=r(H),Y=n(55),J=r(Y),X=n(26),Q=r(X);o.Registry.registerComponent((0,a.prefixNS)("AppMenu"),T.default),o.Registry.registerComponent((0,a.prefixNS)("DebugInfo"),b.default),o.Registry.registerComponent((0,a.prefixNS)("TasksTable"),P.default),o.Registry.registerComponent((0,a.prefixNS)("DetailsPane"),s.default),o.Registry.registerComponent((0,a.prefixNS)("Main"),h.default),o.Registry.registerComponent((0,a.prefixNS)("TypeAheadBrowser"),_.default),o.Registry.registerComponent((0,a.prefixNS)("DateCell"),k.default),o.Registry.registerComponent((0,a.prefixNS)("IconCell"),C.default),o.Registry.registerComponent((0,a.prefixNS)("OverdueCell"),x.default),o.Registry.registerComponent((0,a.prefixNS)("PrioCell"),O.default),o.Registry.registerComponent((0,a.prefixNS)("ProceedCell"),j.default),o.Registry.registerComponent((0,a.prefixNS)("ReadStatusCell"),L.default),o.Registry.registerComponent((0,a.prefixNS)("StatusCell"),U.default),o.Registry.registerComponent((0,a.prefixNS)("TagsCell"),F.default),o.Registry.registerComponent((0,a.prefixNS)("AttributeList"),l.default),o.Registry.registerComponent((0,a.prefixNS)("LongText"),f.default),o.Registry.registerComponent((0,a.prefixNS)("TaskContextTree"),d.default),o.Registry.registerComponent((0,a.prefixNS)("TaskReferenceList"),m.default),o.Registry.registerReducer((0,a.prefixNS)("reducer"),Q.default),o.Registry.registerSaga(B.default),o.Registry.registerSaga(z.default),o.Registry.registerSaga(J.default),o.Registry.registerSaga(K.default),e.exports=[]},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e.displayName||e.name||"Component"}function l(e){var t=e[E.prefixNS("reducer")],n=t.getIn(["currentSelection","byObjectID",t.getIn(["currentSelection",S.TASK_OID])]),r=n&&e.objectsById.get(n.get(S.ID)),o=t.getIn(["table","rows"]).filter(function(e){return e.get(S.CDB_OBJECT_ID)===t.getIn(["currentSelection",S.TASK_OID])}).last(),a=o&&o.get(k);return{task:r,taskInfo:n,activityContext:e.objectsById.get(a,r)}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=o(f),d=n(5),y=o(d),m=n(3),g=n(0),T=n(9),v=n(16),b=n(4),S=r(b),h=n(2),E=r(h),_=n(7),w=r(_),P=n(29),I=o(P),O=g.Registry.findComponent("cs-web-components-base-ContentBlockGroup"),R=E.basePath+"/:"+S.TASK_OID,k="activities_context",N=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.state={firstTask:!0},s.emptyRelships=[],s}return s(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.task,n=e.taskInfo,r=e.activityContext;return t&&n?p.default.createElement(O,{id:E.prefixNS("details-container")},p.default.createElement(I.default.TaskContext,{task:t,taskInfo:n}),p.default.createElement(I.default.TaskDescription,{task:t,taskInfo:n}),(n.get(S.RELSHIPS)||this.emptyRelships).map(function(e,n){return p.default.createElement(I.default.TaskRelship,{task:t,relship:e,key:"relship-"+n})}),p.default.createElement(I.default.CustomTaskPlugin,{task:t,taskInfo:n}),p.default.createElement(I.default.TaskActivities,{contextObject:r})):p.default.createElement("div",{id:E.prefixNS("details-container")},p.default.createElement(I.default.TaskManagerIntro,null))}}]),t}(p.default.PureComponent);N.contextTypes={loadTaskOperations:m.PropTypes.func.isRequired},N.propTypes={task:w.OBJECT_PROPTYPE,taskInfo:w.TASK_INFO,activityContext:m.ImmutablePropTypes.contains(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},S.CDB_OBJECT_ID,m.PropTypes.string.isRequired))};var C=(0,m.connect)(l,null)(N);t.default=m.ReactRouter.withRouter(function(e){function t(e){return{currentSelection:e[E.prefixNS("reducer")].get("currentSelection")}}function n(e){return{selectRows:function(t){e((0,T.selectRows)(t))},getTaskDetails:function(t){e((0,v.getTaskDetails)(t))},resetTaskDetails:function(){e((0,v.resetTaskDetails)())}}}var r=function(t){function n(e){a(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={pathname:e.history.location.pathname},t.getTaskOIDFromPath=t.getTaskOIDFromPath.bind(t),t.updateTaskDetailsFromURL=t.updateTaskDetailsFromURL.bind(t),t.removeHistoryListener=null,t}return s(n,t),c(n,[{key:"getTaskOIDFromPath",value:function(){var e=this.state.pathname,t=m.ReactRouter.matchPath(e,{path:R});return t&&t.params[S.TASK_OID]}},{key:"componentWillMount",value:function(){var e=this;this.removeHistoryListener=this.props.history.listen(function(t){var n=e.state.pathname;e.setState({pathname:t.pathname},function(){if(t.pathname!==n){var r=e.getTaskOIDFromPath();e.updateTaskDetailsFromURL(r)}})})}},{key:"componentWillUnmount",value:function(){this.removeHistoryListener&&(this.removeHistoryListener(),this.removeHistoryListener=null)}},{key:"updateTaskDetailsFromURL",value:function(e){e?this.props.getTaskDetails(e):this.props.resetTaskDetails()}},{key:"componentDidMount",value:function(){var e=this.props.selectRows,t=this.getTaskOIDFromPath();t&&e(y.default.OrderedSet([t])),this.updateTaskDetailsFromURL(t)}},{key:"render",value:function(){return p.default.createElement(e,this.props)}}]),n}(p.default.PureComponent);return r.propTypes={currentSelection:w.CURRENT_SELECTION,selectRows:m.PropTypes.func.isRequired,getTaskDetails:m.PropTypes.func.isRequired,resetTaskDetails:m.PropTypes.func.isRequired,history:m.PropTypes.object},r.displayName="DetailWrapper("+u(e)+")",(0,m.connect)(t,n)(r)}(C))},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r){var o=O.getTaskPlugin(t,n,r);return o?T.default.createElement(o,{task:e,taskInfo:t}):null}function i(e,t){if(e)switch(m(e.getLabel)){case"string":return e.getLabel;case"function":return e.getLabel(t)}return P.NULL}function s(e){var t=e.label,n=e.children;return T.default.createElement(A,{expanded:!0,collapsible:!0,key:t,className:V,title:t||P.NULL},T.default.createElement(A.Body,{className:L},n))}function u(e){var t=e.task,n=e.taskInfo;return T.default.createElement(s,{label:(0,_.formatStr)(B),className:O.prefixNS("detail-block")},T.default.createElement(C.default,{task:t,taskInfo:n,className:O.prefixNS("taskcontexttree")}))}function l(e){var t=e.task,n=e.taskInfo,r=a(t,n,M);return r?T.default.createElement(s,{label:(0,_.formatStr)(G),className:O.prefixNS("detail-block")},r):null}function c(e){var t=e.task,n=e.relship,r=n.get("references");if(r&&r.size>0){var o=(0,E.getPlugin)(q,function(e){return n.get("relshipName")===e},x.default);return T.default.createElement(s,{label:i(o,n),className:O.prefixNS("detail-block")},T.default.createElement(o,{task:t,relship:n}))}return null}function f(e,t){var n=t.relship.get("references");return{objects:n?n.map(function(t){return e.objectsById.get(t)}).filter(function(e){return e}):z}}function p(e){var t=e.task,n=e.taskInfo,r=O.getTaskPlugin(n,U);return r?T.default.createElement(s,{label:i(r),className:O.prefixNS("detail-block")},T.default.createElement(r,{task:t,taskInfo:n})):null}function d(e){var t=e.contextObject;return T.default.createElement(s,{label:(0,_.formatStr)(F),className:O.prefixNS("detail-block")},T.default.createElement(j,{instanceName:"cs-taskmanager-web",contextObject:t,className:O.prefixNS("object-activities")}))}function y(){return T.default.createElement(S.Alert,{bsStyle:"info",className:O.prefixNS("detail-blocks-alert")},T.default.createElement("strong",null,(0,_.formatStr)(W)),T.default.createElement("p",null,(0,_.formatStr)(K)))}Object.defineProperty(t,"__esModule",{value:!0});var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=n(1),T=o(g),v=n(5),b=o(v),S=n(8),h=n(3),E=n(0),_=n(6),w=n(4),P=r(w),I=n(2),O=r(I),R=n(7),k=r(R),N=n(21),C=o(N),D=n(23),x=o(D),A=E.Registry.findComponent("cs-web-components-base-ContentBlock"),j=E.Registry.findComponent("cs-activitystream-web-ObjectActivities"),V=O.prefixNS("details-contentblock"),L=O.prefixNS("details-contentblock-body"),M="cs-tasks-desc",U="cs-tasks-custom",q="cs-tasks-custom-relship",F="activities",G="description",B="context",W="no_selection_header",K="no_selection",H={task:k.OBJECT_PROPTYPE.isRequired,taskInfo:k.TASK_INFO.isRequired};s.propTypes={label:h.PropTypes.oneOfType([h.PropTypes.string,h.PropTypes.element,h.PropTypes.func])},u.propTypes=H,l.propTypes=H,c.propTypes={task:k.OBJECT_PROPTYPE.isRequired,relship:h.ImmutablePropTypes.contains({references:h.ImmutablePropTypes.list.isRequired}).isRequired};var z=b.default.List(),Y=(0,h.connect)(f)(c);p.propTypes=H,d.propTypes={contextObject:h.ImmutablePropTypes.contains(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},P.CDB_OBJECT_ID,h.PropTypes.string.isRequired)).isRequired},t.default={DetailBlock:s,TaskContext:u,TaskDescription:l,TaskRelship:Y,CustomTaskPlugin:p,TaskActivities:d,TaskManagerIntro:y}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.obj,n=e.children,r=e.fileContainerID,o=e.selectFileContainer;if(!t)return u.default.createElement("span",null,p.NULL);if(t.has(p.FILES)){var a=r===t.get(p.ID);return u.default.createElement("div",{className:(0,l.classNames)((0,d.prefixNS)("simple-object"),"has-files",{selected:a}),title:a?(0,y.formatStr)("hide-files"):(0,y.formatStr)("show-files"),onClick:function(){o(t.get(p.ID))}},u.default.createElement(g.default,{obj:t}),n)}return u.default.createElement("div",{className:(0,d.prefixNS)("simple-object")},u.default.createElement(g.default,{obj:t}),n)}function a(e){return{fileContainerID:e[(0,d.prefixNS)("reducer")].get("fileContainerID")}}function i(e){return{selectFileContainer:function(t){e((0,c.selectFileContainer)(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),l=n(3),c=n(16),f=n(4),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=n(2),y=n(6),m=n(22),g=r(m);o.propTypes={className:l.PropTypes.string,obj:l.ImmutablePropTypes.map,fileContainerID:l.PropTypes.string,selectFileContainer:l.PropTypes.func.isRequired},t.default=(0,l.connect)(a,i)(o)},function(e,t,n){"use strict";function r(e){var t=e.attributes;return a.default.createElement("div",{className:(0,s.prefixNS)("attribute-list")},t.map(function(e,t){return a.default.createElement("span",{className:(0,s.prefixNS)("attribute"),key:"attr-"+t},e.label?a.default.createElement("span",{className:(0,s.prefixNS)("attribute-label")},e.label):null,a.default.createElement(f,{attribute:e,className:(0,s.prefixNS)("textattribute")}))}))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(3),s=n(2),u=n(4),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),c=i.PropTypes.shape({label:i.PropTypes.string.isRequired,value:i.PropTypes.any}),f=function(e){var t=e.attribute;return a.default.createElement("span",null,null===t.value?l.NULL:t.value)};f.propTypes={attribute:c.isRequired},r.propTypes={attributes:i.PropTypes.arrayOf(c).isRequired},t.default=r},function(e,t,n){"use strict";function r(e){var t=e.text;return a.default.createElement("pre",{id:(0,s.prefixNS)("long-text")},t||l.NULL)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(3),s=n(2),u=n(4),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u);r.propTypes={text:i.PropTypes.string},t.default=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{condition:(0,C.getCurrentViewCondition)(e)}}function l(e){return{getTasks:function(t){e((0,S.getTasks)(t,!0))}}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=o(f),d=n(0),y=n(3),m=n(2),g=r(m),T=n(7),v=r(T),b=n(6),S=n(9),h=n(34),E=o(h),_=n(35),w=o(_),P=n(36),I=o(P),O=n(37),R=o(O),k=n(38),N=o(k),C=n(10),D=g.debugMode()?100:1e3,x=d.Registry.findComponent("cs-web-components-base-ApplicationBar"),A=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.delayedGetTasks=g.debounce(s.delayedGetTasks.bind(s),D),s}return s(t,e),c(t,[{key:"delayedGetTasks",value:function(e){var t=e.condition;(0,e.getTasks)(t)}},{key:"componentWillReceiveProps",value:function(e){var t=e.condition,n=e.getTasks,r=this.props.condition;t!==r&&(r===v.DEFAULT_CONDITION?n(t):this.delayedGetTasks(e))}},{key:"render",value:function(){var e={active:!0,key:"cs-taskmanager-web",name:(0,b.formatStr)("app_title")},t={active:!0,key:g.prefixNS("user-views"),component:p.default.createElement(N.default,null)};return p.default.createElement(x,{items:[e,t]},p.default.createElement(j,null))}}]),t}(p.default.PureComponent);A.propTypes={condition:v.VIEW_CONDITION,getTasks:y.PropTypes.func.isRequired},t.default=(0,y.connect)(u,l)(A);var j=function(){return p.default.createElement(d.ButtonToolbar,{className:"pull-right"},p.default.createElement(d.ButtonGroup,{className:g.prefixNS("filters")},p.default.createElement(E.default,null),p.default.createElement(w.default,null),p.default.createElement(I.default,null),p.default.createElement(R.default,null)))}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n=e.get("title"),r=t.get("title");return n>r?1:n<r?-1:0}function l(e){var t=e[_.prefixNS("reducer")],n=t.getIn(["settings","taskClasses"]),r=(0,I.getCurrentViewCondition)(e);return{taskClasses:n,resolvedTaskClasses:n?n.map(function(t){return e.typesById.get(t)}).filter(function(e){return e}).sort(u):k,currentTypes:r&&r.get("types").toSet()}}function c(e){return{fetchTypes:function(t){e((0,v.fetchTypes)(t))},selectType:function(t){e((0,b.modifyCurrentView)(b.TYPE.SELECT,{typeID:t}))},deselectType:function(t){e((0,b.modifyCurrentView)(b.TYPE.DESELECT,{typeID:t}))},clearTypes:function(){e((0,b.modifyCurrentView)(b.TYPE.CLEAR))}}}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=o(p),y=n(5),m=o(y),g=n(8),T=n(3),v=n(0),b=n(12),S=n(4),h=r(S),E=n(2),_=r(E),w=n(6),P=n(17),I=n(10),O=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.toggleType=s.toggleType.bind(s),s}return s(t,e),f(t,[{key:"toggleType",value:function(){var e=this.props,t=e.typeID,n=e.checked;(0,e.toggleType)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.typeID,n=e.checked,r=e.icon,o=e.title;return d.default.createElement(P.FilterItem,{key:t,name:t,checked:n,label:d.default.createElement(v.SVGIconAndLabel,{src:r,label:o}),onChange:this.toggleType})}}]),t}(d.default.PureComponent);O.propTypes={typeID:T.PropTypes.string.isRequired,checked:T.PropTypes.bool,icon:T.PropTypes.string,title:T.PropTypes.string.isRequired,toggleType:T.PropTypes.func.isRequired};var R=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.toggleType=s.toggleType.bind(s),s}return s(t,e),f(t,[{key:"componentWillMount",value:function(){var e=this.props;(0,e.fetchTypes)(e.taskClasses)}},{key:"componentWillReceiveProps",value:function(e){var t=e.fetchTypes,n=e.taskClasses;n!==this.props.taskClasses&&t(n)}},{key:"toggleType",value:function(e,t){var n=this.props,r=n.deselectType,o=n.selectType;t?r(e):o(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.resolvedTaskClasses,r=t.currentTypes,o=t.clearTypes;if(!r)return null;var a=0===r.size,i=a?(0,w.formatStr)("all_types"):n.filter(function(e){return r.includes(e.get(h.ID))}).map(function(e){return e.get("title")}).join(", ");return d.default.createElement(P.FilterDropdown,{label:i,title:(0,w.formatStr)("type_filter"),disabled:0===n.size,id:_.prefixNS("type-filter")},d.default.createElement(P.SimpleFilterItem,{key:"all_types",name:"all_types",checked:a,label:(0,w.formatStr)("all_types"),onChange:o}),d.default.createElement(g.MenuItem,{divider:!0}),d.default.createElement(g.MenuItem,{header:!0},(0,w.formatStr)("header_type_filter")),n.map(function(t){var n=t.get(h.ID);return d.default.createElement(O,{key:n,typeID:n,checked:r.includes(n),icon:t.get("icon"),title:t.get("title"),toggleType:e.toggleType})}))}}]),t}(d.default.PureComponent);R.propTypes={taskClasses:T.ImmutablePropTypes.list,resolvedTaskClasses:T.ImmutablePropTypes.list.isRequired,fetchTypes:T.PropTypes.func.isRequired,currentTypes:T.ImmutablePropTypes.set,selectType:T.PropTypes.func.isRequired,deselectType:T.PropTypes.func.isRequired,clearTypes:T.PropTypes.func.isRequired};var k=m.default.List();t.default=(0,T.connect)(l,c)(R)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=(0,I.getCurrentViewCondition)(e),n=t?t.get("contexts").toSet():y.default.Set();return{contextClassnames:(0,I.getContextClassnames)(e),selectedContexts:n,selectedContextNames:n.map(function(t){return e.objectsById.getIn([t,b.DESCRIPTION])})}}function l(e){return{selectContext:function(t){e((0,T.modifyCurrentView)(T.CONTEXT.SELECT,{contextID:t}))},deselectContext:function(t){e((0,T.modifyCurrentView)(T.CONTEXT.DESELECT,{contextID:t}))},clearContext:function(){e((0,T.modifyCurrentView)(T.CONTEXT.CLEAR))}}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=o(f),d=n(5),y=o(d),m=n(8),g=n(3),T=n(12),v=n(4),b=r(v),S=n(2),h=r(S),E=n(6),_=n(17),w=n(20),P=o(w),I=n(10),O=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.inputRef=null,s.setInputRef=s.setInputRef.bind(s),s.focus=h.debounce(s.focus.bind(s),0),s.selectContext=s.selectContext.bind(s),s.deselectContext=s.deselectContext.bind(s),s.onToggleHandler=s.onToggleHandler.bind(s),s}return s(t,e),c(t,[{key:"setInputRef",value:function(e){this.inputRef=e}},{key:"focus",value:function(e){this.inputRef&&this.inputRef.focus&&this.inputRef.focus(e)}},{key:"selectContext",value:function(e){(0,this.props.selectContext)(e)}},{key:"deselectContext",value:function(e){(0,this.props.deselectContext)(e)}},{key:"onToggleHandler",value:function(e,t){!0===e&&this.focus(t)}},{key:"render",value:function(){var e=this.props,t=e.contextClassnames,n=e.selectedContexts,r=e.selectedContextNames,o=e.clearContext;if(!t||0===t.length)return null;var a=0===n.size,i=h.prefixNS("context-browser");return p.default.createElement(_.FilterDropdown,{onToggle:this.onToggleHandler,label:a?(0,E.formatStr)("all_contexts"):r.join(", "),title:(0,E.formatStr)("context_filter"),id:h.prefixNS("context-filter")},p.default.createElement(_.SimpleFilterItem,{key:"all_contexts",name:"all_contexts",checked:a,label:(0,E.formatStr)("all_contexts"),onChange:o}),p.default.createElement(m.MenuItem,{divider:!0}),p.default.createElement(P.default,{ref:this.setInputRef,key:i,name:i,queryClassnames:t,currentSelection:n,select:this.selectContext,deselect:this.deselectContext,messageRemove:"remove_object",messagePlaceholder:"search_context"}))}}]),t}(p.default.PureComponent);O.propTypes={contextClassnames:g.PropTypes.arrayOf(g.PropTypes.string).isRequired,selectedContexts:g.ImmutablePropTypes.set.isRequired,selectedContextNames:g.ImmutablePropTypes.set.isRequired,selectContext:g.PropTypes.func.isRequired,deselectContext:g.PropTypes.func.isRequired,clearContext:g.PropTypes.func.isRequired},t.default=(0,g.connect)(u,l)(O)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){return k.setupMoment(),(0,P.getAppSetup)().getIn(["formats","dateFormat"])}function c(e){var t=l();return e.format(t)}function f(e){var t=e.split(" - ");if(2===t.length){var n=l(),r=(0,E.default)(t[0],n),o=(0,E.default)(t[1],n);if(r.isValid()&&o.isValid())return{startMoment:r,endMoment:o}}return null}function p(e){return e.toISOString(!0)}function d(e){k.stopEvent(e)}function y(e){e.stopPropagation()}function m(e,t,n){switch(e){case A:return k.humanizeDays(t);case j:return n||(0,O.formatStr)(V);default:return(0,O.formatStr)(V)}}function g(e){var t=(0,x.getCurrentViewCondition)(e,"deadline"),n=t&&t.get("active"),r=t&&t.getIn([j,"start"]),o=t&&t.getIn([j,"end"]),a=(0,E.default)(r),i=(0,E.default)(o),s=r&&o&&a.isValid()&&i.isValid(),u=s&&{startMoment:a,endMoment:i};return{activeDeadlineFilter:n,dateRange:u,dateRangeText:u?c(u.startMoment)+" - "+c(u.endMoment):"",days:t&&t.get(A),dateFormat:l()}}function T(e){return{setDays:function(t){e((0,I.modifyCurrentView)(I.DEADLINE.SET_DAYS,{days:Number(t)}))},setDateRange:function(t,n){var r=t&&n&&{start:t,end:n};e((0,I.modifyCurrentView)(I.DEADLINE.SET_RANGE,r))},activateDays:function(t){var n={filterName:A,active:t};e((0,I.modifyCurrentView)(I.DEADLINE.ACTIVATE,n))},activateRange:function(t){var n={filterName:j,active:t};e((0,I.modifyCurrentView)(I.DEADLINE.ACTIVATE,n))}}}Object.defineProperty(t,"__esModule",{value:!0});var v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getDateFormat=l,t.formatMoment=c,t.getDateRangeFromText=f;var b=n(1),S=o(b),h=n(15),E=o(h),_=n(8),w=n(3),P=n(0),I=n(12),O=n(6),R=n(2),k=r(R),N=n(7),C=r(N),D=n(17),x=n(10),A="days",j="range",V="all_deadlines",L=w.PropTypes.shape({startMoment:w.PropTypes.object.isRequired,endMoment:w.PropTypes.object.isRequired}),M=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a.inputRef=null,a.setInputRef=a.setInputRef.bind(a),a.focus=k.debounce(a.focus.bind(a),0),a.activateDays=a.activateDays.bind(a),a}return u(t,e),v(t,[{key:"setInputRef",value:function(e){this.inputRef=e}},{key:"focus",value:function(){this.inputRef&&this.inputRef.focus&&this.inputRef.focus()}},{key:"componentWillMount",value:function(){this.props.checked&&this.focus()}},{key:"componentWillReceiveProps",value:function(e){e.checked&&!this.props.checked&&this.focus()}},{key:"activateDays",value:function(){var e=this.props,t=e.checked;(0,e.activateDays)(!t)}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.checked,r=e.onChange,o=k.prefixNS(A);return S.default.createElement(D.SimpleFilterItem,{name:o,checked:n,label:S.default.createElement(_.Form,{className:(0,w.classNames)(o,{checked:n}),onDragStart:d,inline:!0},S.default.createElement(P.FormControl.NumericEdit,{ref:this.setInputRef,name:o,type:"number",bsSize:"sm",label:(0,O.formatStr)("deadline_days"),value:t,onClick:y,onValueChange:r})),onChange:this.activateDays})}}]),t}(S.default.PureComponent);M.propTypes={value:w.PropTypes.number,checked:w.PropTypes.bool,onChange:w.PropTypes.func.isRequired,activateDays:w.PropTypes.func.isRequired};var U=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a.state={text:null},a.inputRef=null,a.emptySelection=[],a.setInputRef=a.setInputRef.bind(a),a.focus=k.debounce(a.focus.bind(a),0),a.validateText=a.validateText.bind(a),a.rememberText=a.rememberText.bind(a),a.onTextChange=k.debounce(a.onTextChange.bind(a),400),a.clearText=a.clearText.bind(a),a.activateRange=a.activateRange.bind(a),a.dayPickerChangeHandler=a.dayPickerChangeHandler.bind(a),a}return u(t,e),v(t,[{key:"setInputRef",value:function(e){this.inputRef=e}},{key:"focus",value:function(){this.inputRef&&this.inputRef.focus&&this.inputRef.focus()}},{key:"componentWillMount",value:function(){var e=this.props,t=e.dateRangeText,n=e.checked;this.setState({text:t}),n&&this.focus()}},{key:"componentWillReceiveProps",value:function(e){e.checked&&!this.props.checked&&this.focus(),e.dateRangeText!==this.props.dateRangeText&&this.setState({text:e.dateRangeText})}},{key:"validateText",value:function(e){return e?f(e)?"success":"warning":null}},{key:"rememberText",value:function(e){this.setState({text:e}),this.onTextChange(e)}},{key:"onTextChange",value:function(e){var t=this.props.onChange,n=f(e);n&&t(p(n.startMoment),p(n.endMoment))}},{key:"clearText",value:function(e){this.rememberText(""),y(e)}},{key:"activateRange",value:function(){var e=this.props,t=e.checked;(0,e.activateRange)(!t)}},{key:"dayPickerChangeHandler",value:function(e){(0,this.props.onChange)(p(e.startMoment),p(e.endMoment))}},{key:"render",value:function(){var e=this.props,t=e.checked,n=e.dateRange,r=e.dateFormat,o=this.state.text,a=k.prefixNS(j);return S.default.createElement(S.default.Fragment,null,S.default.createElement(D.SimpleFilterItem,{name:a,checked:t,label:S.default.createElement(_.Form,{className:(0,w.classNames)(a,{checked:t}),onDragStart:d,inline:!0},S.default.createElement(P.FormControl.TextInput,{ref:this.setInputRef,name:a,bsSize:"sm",autoComplete:"off",label:(0,O.formatStr)("deadline_range"),value:o,placeholder:r+" - "+r,validationState:this.validateText(o),onClick:y,onKeyDown:y,onChange:function(){},onValueChange:this.rememberText,afterControl:o?S.default.createElement(P.Button.CloseButton,{title:(0,O.formatStr)("clear_range"),onClick:this.clearText}):" "})),onChange:this.activateRange}),S.default.createElement(P.DayPicker,{currentDate:(0,E.default)(),selectedDates:n?[n.startMoment,n.endMoment]:this.emptySelection,selectRange:!0,readOnly:!1,onChange:this.dayPickerChangeHandler}))}}]),t}(S.default.PureComponent);U.propTypes={checked:w.PropTypes.bool,dateRange:L,dateRangeText:w.PropTypes.string,dateFormat:w.PropTypes.string.isRequired,onChange:w.PropTypes.func.isRequired,activateRange:w.PropTypes.func.isRequired};var q=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=Array(r),u=0;u<r;u++)o[u]=arguments[u];var l=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return l.inputRefs=(n={},a(n,A,null),a(n,j,null),n),l.setDaysRef=l.setDaysRef.bind(l),l.setRangeRef=l.setRangeRef.bind(l),l.focus=k.debounce(l.focus.bind(l),0),l.onToggleHandler=l.onToggleHandler.bind(l),l.deactivateDays=l.deactivateDays.bind(l),l}return u(t,e),v(t,[{key:"setDaysRef",value:function(e){this.inputRefs[A]=e}},{key:"setRangeRef",value:function(e){this.inputRefs[j]=e}},{key:"focus",value:function(e){var t=this.props.activeDeadlineFilter,n=this.inputRefs[t];n&&n.focus&&n.focus(e)}},{key:"onToggleHandler",value:function(e,t){!0===e&&this.focus(t)}},{key:"deactivateDays",value:function(){(0,this.props.activateDays)(!1)}},{key:"render",value:function(){var e=this.props,t=e.activeDeadlineFilter,n=e.days,r=e.dateRangeText,o=e.dateRange,a=e.dateFormat,i=e.setDays,s=e.setDateRange,u=e.activateDays,l=e.activateRange;return S.default.createElement(D.FilterDropdown,{onToggle:this.onToggleHandler,label:m(t,n,r),title:(0,O.formatStr)("deadline_filter"),id:k.prefixNS("deadline-filter")},S.default.createElement(D.SimpleFilterItem,{name:V,checked:!t,onChange:this.deactivateDays,label:(0,O.formatStr)(V)}),S.default.createElement(_.MenuItem,{divider:!0}),S.default.createElement(M,{ref:this.setDaysRef,value:n,checked:t===A,onChange:i,activateDays:u}),S.default.createElement(_.MenuItem,{divider:!0}),S.default.createElement(U,{ref:this.setRangeRef,dateRange:o,dateRangeText:r,dateFormat:a,checked:t===j,onChange:s,activateRange:l}))}}]),t}(S.default.PureComponent);q.defaultProps={activeDeadlineFilter:null},q.propTypes={activeDeadlineFilter:C.ACTIVE_DEADLINE,days:w.PropTypes.number,dateRangeText:w.PropTypes.string,dateRange:L,dateFormat:w.PropTypes.string.isRequired,setDays:w.PropTypes.func.isRequired,setDateRange:w.PropTypes.func.isRequired,activateDays:w.PropTypes.func.isRequired,activateRange:w.PropTypes.func.isRequired},t.default=(0,w.connect)(g,T)(q)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){if(e)return e.get(S.ID)===N?(0,_.formatStr)(k):e.get("firstname")+" "+e.get("lastname")}function l(e){var t=e[E.prefixNS("reducer")],n=(0,R.getCurrentViewCondition)(e),r=(0,R.getCurrentViewUserIDs)(e);return{allowUserSelection:t.getIn(["settings","userSelection"]),loggedInUserID:N,currentUsers:r,includeRoles:n&&n.get("roles"),selectedUserNames:(0,R.getSelectedUserNames)(e,u)}}function c(e){return{selectUser:function(t){e((0,w.modifyCurrentView)(w.USER.SELECT,{userID:t}))},deselectUser:function(t){e((0,w.modifyCurrentView)(w.USER.DESELECT,{userID:t}))},toggleRoleTasks:function(t){e((0,w.modifyCurrentView)(w.USER.INCLUDE_ROLE_TASKS,{includeRoleTasks:t}))}}}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=o(p),y=n(5),m=o(y),g=n(3),T=n(0),v=n(8),b=n(4),S=r(b),h=n(2),E=r(h),_=n(6),w=n(12),P=n(17),I=n(20),O=o(I),R=n(10),k="my_tasks",N=(0,T.getAppSetup)().getIn(["links","common","currentUser"]),C=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.queryClassnames=["angestellter"],s.ignoredObjects=m.default.Set([N]),s.inputRef=null,s.setInputRef=s.setInputRef.bind(s),s.focus=E.debounce(s.focus.bind(s),0),s.additionalFilter=s.additionalFilter.bind(s),s.onToggleHandler=s.onToggleHandler.bind(s),s.toggleMyTasks=s.toggleMyTasks.bind(s),s.toggleRoleTasks=s.toggleRoleTasks.bind(s),s}return s(t,e),f(t,[{key:"setInputRef",value:function(e){this.inputRef=e}},{key:"focus",value:function(e){this.inputRef&&this.inputRef.focus&&this.inputRef.focus(e)}},{key:"additionalFilter",value:function(e){return"1"===e.active_account&&1===e.visibility_flag&&0===e.is_system_account}},{key:"onToggleHandler",value:function(e,t){!0===e&&this.focus(t)}},{key:"toggleMyTasks",value:function(){var e=this.props,t=e.currentUsers,n=e.loggedInUserID,r=e.deselectUser,o=e.selectUser;t.includes(n)?r(n):o(n)}},{key:"toggleRoleTasks",value:function(){var e=this.props;(0,e.toggleRoleTasks)(!e.includeRoles)}},{key:"render",value:function(){var e=this.props,t=e.allowUserSelection,n=e.loggedInUserID,r=e.currentUsers,o=e.selectedUserNames,a=e.selectUser,i=e.deselectUser,s=e.includeRoles;if(!r)return null;var l=s?(0,_.formatStr)("all_tasks"):(0,_.formatStr)("personal_tasks"),c=E.prefixNS("my-tasks"),f=E.prefixNS("include-roles"),p=r.includes(n),y=r.size>0?o+" ("+l+")":(0,_.formatStr)("no_user_selected"),m=E.prefixNS("user-browser");return d.default.createElement(P.FilterDropdown,{onToggle:this.onToggleHandler,label:y,title:(0,_.formatStr)("responsible_filter"),id:E.prefixNS("responsible-filter")},d.default.createElement(P.FilterItem,{key:c,name:c,checked:p,label:(0,_.formatStr)(k),onChange:this.toggleMyTasks}),d.default.createElement(P.FilterItem,{key:f,name:f,checked:s,label:(0,_.formatStr)("include_role_tasks"),onChange:this.toggleRoleTasks}),!0===t&&d.default.createElement(d.default.Fragment,null,d.default.createElement(v.MenuItem,{divider:!0}),d.default.createElement(O.default,{ref:this.setInputRef,name:m,queryClassnames:this.queryClassnames,currentSelection:r,ignoredObjects:this.ignoredObjects,additionalFilter:this.additionalFilter,select:a,deselect:i,messageRemove:"remove_user",messagePlaceholder:"search_user",getDescription:u})))}}]),t}(d.default.PureComponent);C.propTypes={allowUserSelection:g.PropTypes.bool.isRequired,loggedInUserID:g.PropTypes.string,currentUsers:g.ImmutablePropTypes.list,selectedUserNames:g.PropTypes.string,selectUser:g.PropTypes.func.isRequired,deselectUser:g.PropTypes.func.isRequired,includeRoles:g.PropTypes.bool,toggleRoleTasks:g.PropTypes.func.isRequired},t.default=(0,g.connect)(l,c)(C)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.viewName,n=e.edited;return m.default.createElement(m.default.Fragment,null,t,n&&m.default.createElement("span",{className:_.prefixNS("user-views__edited")},"(",(0,R.formatStr)(V),")"))}function l(e){var t=e.defaultView,n=e.currentViewID,r=e.selectView,o=e.onSelect;return t&&m.default.createElement(m.default.Fragment,null,m.default.createElement(U,{view:t,active:t.get(h.ID)===n,onSelect:o,selectView:r}),m.default.createElement(x,null))}function c(e,t){return{view:t.view||e.objectsById.get(t.viewID),edited:t.view?t.view.get("edited"):O.getEditedViewByID(e,t.viewID)}}function f(e){return{defaultView:O.getDefaultView(e),recentViewIDs:O.getRecentViewIDs(e),currentView:O.getCurrentView(e),userViewIDs:O.getUserViewIDs(e),editedViewNames:O.getEditedViewNames(e)}}function p(e){return{setupViews:function(){e((0,b.setupViews)())},selectView:function(t){e((0,b.selectUserView)(t))},saveView:function(t,n){e((0,b.saveUserView)(t,n))},saveViewAs:function(t,n){e((0,b.saveUserViewAs)(t,n))},renameView:function(t,n){e((0,b.renameUserView)(t,n))},deleteView:function(t){e((0,b.deleteUserView)(t))},updateDocumentTitle:function(t){e((0,b.updateDocumentTitle)(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(1),m=o(y),g=n(3),T=n(8),v=n(0),b=n(12),S=n(4),h=r(S),E=n(2),_=r(E),w=n(7),P=r(w),I=n(10),O=r(I),R=n(6),k=n(39),N=o(k),C=n(40),D=o(C),x=v.Overlays.MenuDivider,A=v.Overlays.MenuHeader,j=v.Overlays.MenuItem,V="edited";u.propTypes={viewName:g.PropTypes.string.isRequired,edited:g.PropTypes.bool.isRequired},l.propTypes={defaultView:P.USER_VIEW,currentViewID:g.PropTypes.string,selectView:g.PropTypes.func.isRequired,onSelect:g.PropTypes.func};var L=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.renderUserViews=s.renderUserViews.bind(s),s}return s(t,e),d(t,[{key:"renderUserViews",value:function(e){if(e&&e.size>0){var t=this.props,n=t.currentViewID,r=t.selectView,o=t.onSelect;return e.map(function(e){return m.default.createElement(U,{key:e,viewID:e,active:e===n,onSelect:o,selectView:r})})}return null}},{key:"render",value:function(){var e=this.props,t=e.userViewIDs,n=e.recentViewIDs,r=t.size;if(!r)return null;if(r<=3)return m.default.createElement(m.default.Fragment,null,this.renderUserViews(t),m.default.createElement(x,null));var o=t.groupBy(function(e){return n.includes(e)}),a=o.get(!0)||null,i=o.get(!1)||null;return m.default.createElement(m.default.Fragment,null,m.default.createElement(A,null,(0,R.formatStr)("select_user_view")),this.renderUserViews(a),i&&i.size>0&&m.default.createElement("li",{role:"presentation",className:"dropdown-submenu"},m.default.createElement("a",{role:"menuitem",tabIndex:-1,href:"#"},(0,R.formatStr)("more_user_views")),m.default.createElement(T.Dropdown.Menu,null,this.renderUserViews(i))),m.default.createElement(x,null))}}]),t}(m.default.PureComponent);L.propTypes={userViewIDs:g.ImmutablePropTypes.orderedSetOf(g.PropTypes.string).isRequired,recentViewIDs:g.ImmutablePropTypes.orderedSetOf(g.PropTypes.string).isRequired,currentViewID:g.PropTypes.string,selectView:g.PropTypes.func.isRequired,onSelect:g.PropTypes.func};var M=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.onSelectHandler=s.onSelectHandler.bind(s),s}return s(t,e),d(t,[{key:"onSelectHandler",value:function(e,t){var n=this.props,r=n.view,o=n.selectView,a=n.onSelect;o(r.get(h.ID)),a(e,t)}},{key:"render",value:function(){var e=this.props,t=e.view,n=e.active,r=e.edited,o=t.get("name");return m.default.createElement(j,{key:o,active:n,onSelect:this.onSelectHandler},o," ",r&&"("+(0,R.formatStr)(V)+")")}}]),t}(m.default.PureComponent);M.propTypes={viewID:g.PropTypes.string,view:P.OBJECT_PROPTYPE.isRequired,active:g.PropTypes.bool,selectView:g.PropTypes.func.isRequired,onSelect:g.PropTypes.func.isRequired,edited:g.PropTypes.bool};var U=(0,g.connect)(c)(M),q=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.state={showManagement:!1,showSaveAs:!1},s.warnBeforeLeavingEditedViews=s.warnBeforeLeavingEditedViews.bind(s),s.saveView=s.saveView.bind(s),s.saveViewAs=s.saveViewAs.bind(s),s.openSaveViewAsDialog=s.openSaveViewAsDialog.bind(s),s.closeSaveViewAsDialog=s.closeSaveViewAsDialog.bind(s),s.renderSaveViewAsDialog=s.renderSaveViewAsDialog.bind(s),s.openManageViewsDialog=s.openManageViewsDialog.bind(s),s.closeManageViewsDialog=s.closeManageViewsDialog.bind(s),s.renderManageViewsDialog=s.renderManageViewsDialog.bind(s),s}return s(t,e),d(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.setupViews,n=e.currentView;window.addEventListener("beforeunload",this.warnBeforeLeavingEditedViews),n&&t()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.warnBeforeLeavingEditedViews)}},{key:"componentWillReceiveProps",value:function(e){var t=e.setupViews,n=e.currentView,r=e.updateDocumentTitle,o=this.props.currentView;(n?n.get(h.ID):void 0)!==(o?o.get(h.ID):void 0)&&(r(n.get("name")),t())}},{key:"warnBeforeLeavingEditedViews",value:function(e){var t=this.props.editedViewNames;if(t>""){var n='Your edited view(s) "'+t+'" will be lost if you continue.';return v.Console.error(n),(e||window.event).returnValue=n,n}}},{key:"saveView",value:function(){var e=this.props,t=e.currentView;(0,e.saveView)(t.get(h.ID),t.get("condition"))}},{key:"saveViewAs",value:function(e){var t=this.props;(0,t.saveViewAs)(e,t.currentView.get("condition"))}},{key:"openSaveViewAsDialog",value:function(){this.setState({showSaveAs:!0})}},{key:"closeSaveViewAsDialog",value:function(){this.setState({showSaveAs:!1})}},{key:"renderSaveViewAsDialog",value:function(){return m.default.createElement(D.default,{saveViewAs:this.saveViewAs,closeDialog:this.closeSaveViewAsDialog})}},{key:"openManageViewsDialog",value:function(){this.setState({showManagement:!0})}},{key:"closeManageViewsDialog",value:function(){this.setState({showManagement:!1})}},{key:"renderManageViewsDialog",value:function(){var e=this.props,t=e.userViewIDs,n=e.defaultView,r=e.renameView,o=e.deleteView;return n?m.default.createElement(N.default,{userViewIDs:t.toOrderedSet(),defaultView:n,renameView:r,deleteView:o,closeDialog:this.closeManageViewsDialog}):null}},{key:"render",value:function(){var e=this.props,t=e.defaultView,n=e.userViewIDs,r=e.recentViewIDs,o=e.currentView,a=e.selectView,i=this.state,s=i.showSaveAs,c=i.showManagement;if(!o)return null;var f=o.get(h.ID),p=o.get("edited");return m.default.createElement(m.default.Fragment,null,m.default.createElement(T.NavDropdown,{className:_.prefixNS("user-views"),title:m.default.createElement(u,{viewName:o.get("name"),edited:p})},m.default.createElement(l,{defaultView:t,currentViewID:f,selectView:a}),m.default.createElement(L,{userViewIDs:n.toOrderedSet(),recentViewIDs:r.toOrderedSet(),currentViewID:f,selectView:a}),m.default.createElement(j,{className:_.prefixNS("save-current-view"),disabled:!(o.get("edited")&&!o.get("isEditable")),onSelect:this.saveView},(0,R.formatStr)("save_user_view")),m.default.createElement(j,{className:_.prefixNS("save-current-view-as"),onSelect:this.openSaveViewAsDialog},(0,R.formatStr)(C.MESSAGE_SAVE_USER_VIEW_AS)),m.default.createElement(x,null),m.default.createElement(j,{className:_.prefixNS("open-view-dialog"),onSelect:this.openManageViewsDialog},(0,R.formatStr)(k.MESSAGE_MANAGE_USER_VIEWS))),s&&this.renderSaveViewAsDialog(),c&&this.renderManageViewsDialog())}}]),t}(m.default.PureComponent);q.propTypes={defaultView:P.USER_VIEW,currentView:P.USER_VIEW,recentViewIDs:g.ImmutablePropTypes.listOf(g.PropTypes.string).isRequired,userViewIDs:g.ImmutablePropTypes.listOf(g.PropTypes.string).isRequired,setupViews:g.PropTypes.func.isRequired,selectView:g.PropTypes.func.isRequired,saveView:g.PropTypes.func.isRequired,saveViewAs:g.PropTypes.func.isRequired,renameView:g.PropTypes.func.isRequired,deleteView:g.PropTypes.func.isRequired,updateDocumentTitle:g.PropTypes.func.isRequired,editedViewNames:g.PropTypes.string.isRequired},t.default=(0,g.connect)(f,p)(q)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.userViews,n=e.defaultView,r=e.renameView,o=e.deleteView,a=e.closeDialog;return p.default.createElement(m.Dialog.Dialog,{title:(0,E.formatStr)(_),buttons:[p.default.createElement(m.Dialog.Buttons.Close,{key:"close",onClick:a})],size:m.Dialog.SIZE_SMALL,onHide:a,show:!0},p.default.createElement(y.Table,{striped:!0,hover:!0,borderless:"true",className:b.prefixNS("manage-views")},p.default.createElement("tbody",null,p.default.createElement(w,{key:n.get(T.ID),renameView:r,deleteView:o,view:n}),t.map(function(e){return p.default.createElement(w,{key:e.get(T.ID),renameView:r,deleteView:o,view:e})}))))}function u(e,t){return{userViews:t.userViewIDs.map(function(t){return e.objectsById.get(t)}).filter(function(e){return e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_MANAGE_USER_VIEWS=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=function(e){return e&&e.__esModule?e:{default:e}}(f),d=n(3),y=n(8),m=n(0),g=n(4),T=r(g),v=n(2),b=r(v),S=n(7),h=r(S),E=n(6),_=t.MESSAGE_MANAGE_USER_VIEWS="manage_user_views",w=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.state={viewName:null,editing:!1},s.inputRef=null,s.setInputRef=s.setInputRef.bind(s),s.setViewName=s.setViewName.bind(s),s.setViewNameFromEvent=s.setViewNameFromEvent.bind(s),s.startEditing=s.startEditing.bind(s),s.stopEditing=s.stopEditing.bind(s),s.saveViewName=s.saveViewName.bind(s),s.deleteView=s.deleteView.bind(s),s.getRenameButtonProps=s.getRenameButtonProps.bind(s),s.getDeleteButtonProps=s.getDeleteButtonProps.bind(s),s.cancelRenameView=s.cancelRenameView.bind(s),s}return i(t,e),c(t,[{key:"setInputRef",value:function(e){this.inputRef=e,this.inputRef&&this.inputRef.focus&&this.inputRef.focus()}},{key:"setViewName",value:function(e){this.setState({viewName:e})}},{key:"setViewNameFromEvent",value:function(e){this.setViewName(e.target.value)}},{key:"componentWillMount",value:function(){var e=this.props.view;this.setViewName(e.get("name"))}},{key:"componentWillReceiveProps",value:function(e){var t=e.view;t!==this.props.view&&this.setViewName(t.get("name"))}},{key:"startEditing",value:function(){this.setState({editing:!0})}},{key:"stopEditing",value:function(e){this.setState({editing:!1}),!0===e&&this.setViewName(this.props.view.get("name"))}},{key:"saveViewName",value:function(){var e=this.props,t=e.view,n=e.renameView,r=this.state.viewName;n(t.get(T.ID),r),this.stopEditing()}},{key:"deleteView",value:function(){var e=this.props,t=e.view;(0,e.deleteView)(t.get(T.ID))}},{key:"getRenameButtonProps",value:function(e){return e?{iconName:"csweb_check",title:(0,E.formatStr)("rename_view_now"),onClick:this.saveViewName}:{iconName:"csweb_edit",title:(0,E.formatStr)("rename_view"),onClick:this.startEditing}}},{key:"getDeleteButtonProps",value:function(){return this.props.view.get("customizes")>""?{buttonStyle:"warning",iconName:"csweb_richtext_undo",title:(0,E.formatStr)("revert_view"),className:b.prefixNS("manage-views__revert"),onClick:this.deleteView}:{buttonStyle:"danger",iconName:"csweb_trash",title:(0,E.formatStr)("delete_view"),className:b.prefixNS("manage-views__delete"),onClick:this.deleteView}}},{key:"cancelRenameView",value:function(e){this.stopEditing(!0),e.stopPropagation()}},{key:"render",value:function(){var e=this.props.view,t=this.state,n=t.viewName,r=t.editing,o="user"===e.get("category");return p.default.createElement("tr",{"data-view-name":n},p.default.createElement("td",{className:b.prefixNS("manage-views-name-col")},r?p.default.createElement(m.FormControl.TextInput,{compact:!0,ref:this.setInputRef,name:e.get(T.CDB_OBJECT_ID),value:n,onChange:this.setViewNameFromEvent,onEnter:this.saveViewName,onBlur:this.stopEditing,afterControl:n!==e.get("name")?p.default.createElement(m.Button.CloseButton,{title:(0,E.formatStr)("cancel_rename_view"),onClick:this.cancelRenameView}):" "}):p.default.createElement("div",{className:b.prefixNS("manage-views-name__label"),onClick:this.startEditing},n)),p.default.createElement("td",{className:b.prefixNS("manage-views-button-col")},p.default.createElement(m.Button.IconButton,l({buttonStyle:"success",className:b.prefixNS("manage-views__edit")},this.getRenameButtonProps(n!==e.get("name"))))),p.default.createElement("td",{className:b.prefixNS("manage-views-button-col")},p.default.createElement(m.Button.IconButton,l({disabled:!1===o},this.getDeleteButtonProps()))))}}]),t}(p.default.PureComponent);w.propTypes={view:h.OBJECT_PROPTYPE.isRequired,renameView:d.PropTypes.func.isRequired,deleteView:d.PropTypes.func.isRequired},s.propTypes={defaultView:h.USER_VIEW.isRequired,userViewIDs:d.ImmutablePropTypes.orderedSetOf(d.PropTypes.string),userViews:d.ImmutablePropTypes.orderedSetOf(h.OBJECT_PROPTYPE),renameView:d.PropTypes.func.isRequired,deleteView:d.PropTypes.func.isRequired,closeDialog:d.PropTypes.func.isRequired},t.default=(0,d.connect)(u)(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{existingNames:(0,v.getViewNames)(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_SAVE_USER_VIEW_AS=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),f=n(5),p=r(f),d=n(3),y=n(0),m=n(6),g=n(2),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(g),v=n(10),b=t.MESSAGE_SAVE_USER_VIEW_AS="save_user_view_as",S="error",h=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.state={value:"",validationState:S},s.inputRef=null,s.setInputRef=s.setInputRef.bind(s),s.focus=T.debounce(s.focus.bind(s),300),s.isValidName=s.isValidName.bind(s),s.rememberValue=s.rememberValue.bind(s),s.saveViewAs=s.saveViewAs.bind(s),s}return i(t,e),u(t,[{key:"setInputRef",value:function(e){this.inputRef=e,this.focus()}},{key:"focus",value:function(){this.inputRef&&this.inputRef.focus&&this.inputRef.focus()}},{key:"isValidName",value:function(e){var t=this.props.existingNames;return e.length>0&&!t.includes(e)?"success":S}},{key:"rememberValue",value:function(e){var t=e.target.value;this.setState({value:t,validationState:this.isValidName(t)})}},{key:"saveViewAs",value:function(){var e=this.props,t=e.saveViewAs,n=e.closeDialog,r=this.state,o=r.value;"success"===r.validationState&&(t(o),n())}},{key:"render",value:function(){var e=this.props.closeDialog,t=this.state,n=t.value,r=t.validationState;return c.default.createElement(y.Dialog.Dialog,{title:(0,m.formatStr)(b),buttons:[c.default.createElement(y.Dialog.Buttons.Ok,{key:"ok",onClick:this.saveViewAs,disabled:"success"!==r}),c.default.createElement(y.Dialog.Buttons.Cancel,{key:"cancel",onClick:e})],size:y.Dialog.SIZE_SMALL,onHide:e,show:!0},c.default.createElement(y.FormControl.TextInput,{compact:!0,ref:this.setInputRef,name:"save-as",value:n,onChange:this.rememberValue,onSubmit:this.saveViewAs,onEnter:this.saveViewAs,validationState:r}))}}]),t}(c.default.PureComponent);h.defaultProps={existingNames:p.default.List()},h.propTypes={saveViewAs:d.PropTypes.func.isRequired,closeDialog:d.PropTypes.func.isRequired,existingNames:d.ImmutablePropTypes.iterableOf(d.PropTypes.string).isRequired},t.default=(0,d.connect)(s)(h)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.completeState,n=e.fetching,r=e.condition,o=e.getTasks;return v.debugMode()&&d.default.createElement("pre",{className:v.prefixNS("debug-info")},d.default.createElement(l,{fetching:n,tasks:t.getIn(["table","rows"]).size,condition:r,getTasks:o}),d.default.createElement("div",{className:v.prefixNS("debug-info__bulk")},d.default.createElement("div",{className:v.prefixNS("debug-info__bulk--setup")},d.default.createElement("h4",null,"App Setup"),JSON.stringify(window.appSetup,null,4)),d.default.createElement("div",{className:v.prefixNS("debug-info__bulk--state")},d.default.createElement("h4",null,"Redux Store"),JSON.stringify(t.toJS(),null,4))))}function u(e){var t=e[v.prefixNS("reducer")];return{completeState:t,fetching:e.fetchingById.size+t.get("inFlight").size,condition:(0,h.getCurrentViewCondition)(e)}}function l(e){var t=e.fetching,n=e.tasks,r=e.condition,o=e.getTasks;return d.default.createElement("div",{className:v.prefixNS("debug-info__main")},d.default.createElement("h1",null,"Debug Mode Active"),d.default.createElement(E,{fetching:t}),d.default.createElement(c,{tasks:n}),d.default.createElement(m.Button.IconButton,{iconName:"csweb_refresh",title:"Reload tasks",onClick:function(){return o(r)}}))}function c(e){var t=e.tasks;return d.default.createElement("div",{className:v.prefixNS("debug-info__tasks"),"data-tasks":t},"cs-taskmanager-web"," showing ",t," tasks")}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=function(e){return e&&e.__esModule?e:{default:e}}(p),y=n(3),m=n(0),g=n(9),T=n(2),v=r(T),b=n(7),S=r(b),h=n(10);s.propTypes={completeState:y.ImmutablePropTypes.map.isRequired,fetching:y.PropTypes.number.isRequired,condition:S.VIEW_CONDITION,getTasks:y.PropTypes.func.isRequired},t.default=(0,y.connect)(u,{getTasks:g.getTasks})(s),l.propTypes={fetching:y.PropTypes.number.isRequired,tasks:y.PropTypes.number.isRequired,condition:S.VIEW_CONDITION,getTasks:y.PropTypes.func.isRequired};var E=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.pendingCheck=null,s.state={checksDone:0,checksRequired:3,checkInterval:400,fetchingDone:!1},s.checkContinously=s.checkContinously.bind(s),s.killContinuousCheck=s.killContinuousCheck.bind(s),s.checkIfDone=s.checkIfDone.bind(s),s}return i(t,e),f(t,[{key:"componentDidMount",value:function(){this.checkContinously()}},{key:"componentWillReceiveProps",value:function(e){e.fetching!==this.props.fetching&&this.checkContinously()}},{key:"checkContinously",value:function(){var e=this.state.checkInterval;null===this.pendingCheck&&(this.pendingCheck=setInterval(this.checkIfDone,e))}},{key:"killContinuousCheck",value:function(){clearInterval(this.pendingCheck),this.pendingCheck=null}},{key:"checkIfDone",value:function(){var e=this.props.fetching,t=this.state,n=t.checksDone,r=t.checksRequired;0===e?n+1>=r?(this.killContinuousCheck(),this.setState({checksDone:0,fetchingDone:!0})):this.setState(function(e){return{checksDone:e.checksDone+1,fetchingDone:!1}}):this.setState({checksDone:0,fetchingDone:!1})}},{key:"render",value:function(){var e=this.props.fetching,t=this.state.fetchingDone;return d.default.createElement("div",{className:(0,y.classNames)(v.prefixNS("debug-info__fetching"),{fetching:!t}),"data-fetching":!t},e?"fetching "+e+"...":"fetching done")}}]),t}(d.default.PureComponent);E.propTypes={fetching:y.PropTypes.number.isRequired},c.propTypes={tasks:y.PropTypes.number.isRequired}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{setContextObjectList:function(t,n){e((0,y.setContextObjectList)(t,n))}}}function u(){return f.default.createElement("div",{className:"cs-taskmanager-web-content"},f.default.createElement(y.SplitterLayout,{vertical:!1},f.default.createElement(_,null),f.default.createElement(b.default,null)))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),p=n(5),d=r(p),y=n(0),m=n(3),g=n(19),T=r(g),v=n(43),b=r(v),S=n(24),h=r(S),E=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"getChildContext",value:function(){var e=this;return{loadTaskOperations:function(t){return e.props.setContextObjectList(S.TABLE_CONTEXT_PATH,t||d.default.List())}}}},{key:"render",value:function(){return f.default.createElement(y.SplitterLayout.PrimaryPane,null,f.default.createElement(y.SplitterLayout,{vertical:!1},f.default.createElement(y.SplitterLayout.PrimaryPane,null,f.default.createElement(h.default,null)),f.default.createElement(T.default,null)))}}]),t}(f.default.PureComponent);E.childContextTypes={loadTaskOperations:m.PropTypes.func.isRequired},E.propTypes={setContextObjectList:m.PropTypes.func.isRequired};var _=(0,m.connect)(null,s)(E);t.default=u},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e[g.prefixNS("reducer")],n=t.get("fileContainerID");return{filesPaneSize:t.getIn(["settings",b,"size"]),fileContainer:e.objectsById.get(n,null)}}function u(e){return{setUserSettings:function(t,n){e((0,y.saveUserSettings)(t,n))}}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=function(e){return e&&e.__esModule?e:{default:e}}(c),p=n(3),d=n(0),y=n(9),m=n(2),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(m),T=n(19),v=d.Registry.findComponent("cs-web-components-base-FileList"),b=g.prefixNS("files-pane"),S=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.setUserSettings=s.setUserSettings.bind(s),s}return i(t,e),l(t,[{key:"setUserSettings",value:function(e){(0,this.props.setUserSettings)(r({},b,e))}},{key:"render",value:function(){var e=this.props,t=e.fileContainer,n=e.filesPaneSize,r=null!==t;return f.default.createElement(d.SplitterLayout.SecondaryPane,{className:(0,p.classNames)(g.prefixNS("file-list"),{active:r},{inactive:!r}),resizable:r,collapsible:r,initCollapsed:!r,defaultSize:n,onChange:this.setUserSettings},t&&f.default.createElement(v,{contextObject:t,expanded:!0,minified:!1}))}}]),t}(f.default.PureComponent);S.defaultProps={filesPaneSize:T.DEFAULT_PANE_WIDTH},S.propTypes={fileContainer:p.ImmutablePropTypes.map,fileContainerID:p.PropTypes.string,filesPaneSize:p.PropTypes.string.isRequired,setUserSettings:p.PropTypes.func.isRequired},t.default=(0,p.connect)(s,u)(S)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function u(e){var t=e.newTasks,n=e.missingTasks;return m.default.createElement("ul",{className:h.prefixNS("notification__text")},t>0&&m.default.createElement("li",null,t+" "+(0,b.formatStr)(C)),n>0&&m.default.createElement("li",null,n+" "+(0,b.formatStr)(D)))}function l(e){var t=e.reloadTasks,n=e.updatedTasks,r=s(e,["reloadTasks","updatedTasks"]);return m.default.createElement(g.Popover,d({id:h.prefixNS("notification__popover-info"),title:(0,b.formatStr)(x),className:h.prefixNS("notification__popover-info")},r),m.default.createElement("a",{href:"#",onClick:t},(0,b.formatStr)(A),n))}function c(e){var t=e[h.prefixNS("reducer")];return{notificationInterval:t.getIn(["settings","notificationInterval"]),condition:(0,I.getCurrentViewCondition)(e),delta:t.get("delta")}}function f(e){return{getTasks:function(t){e((0,E.getTasks)(t))},addNotification:function(t,n){e((0,_.notify)(t,n,"info","refreshNotification"))},getNewTasks:function(t){e((0,E.getNewTasks)(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=n(1),m=function(e){return e&&e.__esModule?e:{default:e}}(y),g=n(8),T=n(3),v=n(0),b=n(6),S=n(2),h=r(S),E=n(9),_=n(12),w=n(7),P=r(w),I=n(10),O=h.debugMode(),R=O?500:5e3,k=O?1e4:400,N=v.Registry.findComponent("cs-web-components-base-Icon"),C="new_tasks",D="missing_tasks",x="updates_available",A="load_updates";u.propTypes={newTasks:T.PropTypes.number.isRequired,missingTasks:T.PropTypes.number.isRequired},l.propTypes={reloadTasks:T.PropTypes.func.isRequired,updatedTasks:T.PropTypes.element.isRequired};var j=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.state={notificationTimer:null,newTasks:0,missingTasks:0},s.popoverTrigger=null,s.checkForNewTasks=s.checkForNewTasks.bind(s),s.reloadTasks=s.reloadTasks.bind(s),s.setPopoverTrigger=s.setPopoverTrigger.bind(s),s.showPopover=s.showPopover.bind(s),s.hidePopover=s.hidePopover.bind(s),s}return i(t,e),p(t,[{key:"startTimer",value:function(e){if("number"==typeof e)return this.stopTimer(),{notificationTimer:setInterval(this.checkForNewTasks,Math.max(e,R))}}},{key:"stopTimer",value:function(){if(this.state.notificationTimer)return clearInterval(this.state.notificationTimer),{notificationTimer:null}}},{key:"componentWillReceiveProps",value:function(e){var t=e.delta,n=e.notificationInterval;if(t&&t!==this.props.delta){var r=t.get("newTasks"),o=t.get("missingTasks");this.setState({newTasks:r?r.size:0,missingTasks:o?o.size:0})}n&&n!==this.props.notificationInterval&&this.setState(this.startTimer(n))}},{key:"componentWillMount",value:function(){this.setState(this.startTimer(this.props.notificationInterval))}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"checkForNewTasks",value:function(){var e=this.props,t=e.getNewTasks,n=e.condition;document.hidden||t(n)}},{key:"reloadTasks",value:function(){var e=this.props;(0,e.getTasks)(e.condition)}},{key:"setPopoverTrigger",value:function(e){this.popoverTrigger=e}},{key:"showPopover",value:function(e){this.popoverTrigger&&this.popoverTrigger.handleMouseOver(e)}},{key:"hidePopover",value:function(e){this.popoverTrigger&&this.popoverTrigger.handleMouseOut(e)}},{key:"render",value:function(){var e=this.state,t=e.newTasks,n=e.missingTasks;return t||n?m.default.createElement("div",{className:h.prefixNS("notification"),title:(0,b.formatStr)(x)},m.default.createElement(g.OverlayTrigger,{placement:"top",trigger:["hover","focus"],delayShow:0,delayHide:k,animation:!1,shouldUpdatePosition:!0,ref:this.setPopoverTrigger,overlay:m.default.createElement(l,{reloadTasks:this.reloadTasks,updatedTasks:m.default.createElement(u,{newTasks:t,missingTasks:n}),onMouseOver:this.showPopover,onMouseOut:this.hidePopover})},m.default.createElement("a",{href:"#",tabIndex:"0",className:h.prefixNS("notification__focusable")},m.default.createElement(N,{className:h.prefixNS("notification__icon"),name:"csweb_information",size:"sm"})))):null}}]),t}(m.default.PureComponent);j.propTypes={notificationInterval:T.PropTypes.number.isRequired,condition:P.VIEW_CONDITION,delta:T.ImmutablePropTypes.contains({newTasks:T.ImmutablePropTypes.set,missingTasks:T.ImmutablePropTypes.set,temporaryTasks:T.ImmutablePropTypes.set,proceeding:T.ImmutablePropTypes.set}).isRequired,getTasks:T.PropTypes.func.isRequired,addNotification:T.PropTypes.func.isRequired,getNewTasks:T.PropTypes.func.isRequired},t.default=(0,T.connect)(c,f)(j)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){var t=e.value,n=e.isGroup,r=t?(0,u.formatStr)(t):d.NULL;return s.default.createElement("div",{className:f.prefixNS("prio-wrapper")},s.default.createElement("div",{className:(0,l.classNames)([f.prefixNS("prio"),t]),title:r}),n&&s.default.createElement("span",{className:f.prefixNS("prio-label")},r))}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(6),l=n(3),c=n(2),f=r(c),p=n(4),d=r(p),y=n(13),m=["cs_tasks_prio_low","cs_tasks_prio_medium","cs_tasks_prio_high"];o.sortFunction=function(e,t){return(0,y.customSort)(function(e){return m.indexOf(e)},-1,e,t)},o.filterFunction=function(e,t){return(e&&(0,u.formatStr)(e)||"").toLowerCase().indexOf(t)>-1},o.propTypes=a({},y.CELL_PROPTYPE,{value:l.PropTypes.oneOf(m)}),t.default=o},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){if(S.setupMoment(),!_.hasOwnProperty(e)){var t=(0,y.default)(e).startOf("day");if(t.isValid()){var n=y.default.duration(t.diff(w));_[e]={isodate:e,formatted_date:t.format(),humanized_delta:S.humanizeDuration(n),days:n.asDays()}}else _[e]={isodate:e,error:"invalid date"}}return _[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedDate=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=o(f),d=n(15),y=o(d),m=n(8),g=n(3),T=n(4),v=r(T),b=n(2),S=r(b),h=n(7),E=n(13),_={},w=(0,y.default)().startOf("day");t.getFormattedDate=u;var P=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.getFormattedDate=s.getFormattedDate.bind(s),s.getLabelStyleAndValue=s.getLabelStyleAndValue.bind(s),s}return s(t,e),c(t,[{key:"getFormattedDate",value:function(e){if(e&&e.get("iso")){var t=u(e.get("iso"));this.setState(this.getLabelStyleAndValue(t))}else this.setState({value:null})}},{key:"componentWillMount",value:function(){this.getFormattedDate(this.props.value)}},{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.getFormattedDate(e.value)}},{key:"getLabelStyleAndValue",value:function(e){var t=e.days,n=e.humanized_delta,r=e.formatted_date;switch(!0){case t>0:return{label:"default",value:1===t?n:r,tooltip:1===t?r:n};case t<0:return{label:"danger",value:-1===t?n:r,tooltip:-1===t?r:n};default:return{label:"info",value:n,tooltip:r}}}},{key:"render",value:function(){var e=this.state,t=e.label,n=e.value,r=e.tooltip;return this.props.unstyled?p.default.createElement("span",{className:S.prefixNS("date-unstyled"),title:r},n||v.NULL):p.default.createElement("div",null,p.default.createElement(m.Label,{bsStyle:t,className:S.prefixNS("date"),title:r},n||v.NULL))}}]),t}(p.default.PureComponent);t.default=P,P.sortFunction=function(e,t){return(0,E.customSort)(function(e){return e.get("epoch")},9999999999,e,t)},P.filterFunction=function(e,t){var n=e&&u(e.get("iso"));return(n&&n.formatted_date+n.humanized_delta||"").toLowerCase().indexOf(t)>-1},P.propTypes=l({},E.CELL_PROPTYPE,{value:h.DATE_PROPTYPE,unstyled:g.PropTypes.bool})},function(e,t,n){"use strict";function r(e){var t=e.value,n=e.isGroup;return t?i.default.createElement("span",null,i.default.createElement(p,{src:t.get("icon"),title:t.get("tooltip"),size:"sm",className:l.prefixNS("object-icon")}),n?t.get("tooltip"):""):f.EMPTY}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(3),u=n(2),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),c=n(0),f=n(13),p=c.Registry.findComponent("cs-web-components-base-Icon");r.sortFunction=function(e,t){return(0,f.customSort)(function(e){return e.get("tooltip")},"",e,t)},r.filterFunction=function(e,t){return(e&&e.get("tooltip")||"").toLowerCase().indexOf(t)>-1},r.propTypes=o({},f.CELL_PROPTYPE,{value:s.ImmutablePropTypes.contains({icon:s.PropTypes.string.isRequired,tooltip:s.PropTypes.string})}),t.default=r},function(e,t,n){"use strict";function r(e){var t=e.value,n=e.isGroup,r=t?(0,u.formatStr)(p):(0,u.formatStr)(d);return i.default.createElement("span",null,i.default.createElement("div",{title:r,className:c.prefixNS(t?"overdue":"not-overdue")}),n&&r)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(3),u=n(6),l=n(2),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),f=n(13),p="overdue",d="not_overdue";r.sortFunction=function(e,t){return(0,f.customSort)(function(e){return e},!1,e,t)},r.filterFunction=function(e,t){return!1},r.propTypes=o({},f.CELL_PROPTYPE,{value:s.PropTypes.bool}),t.default=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e.get(h.CDB_OBJECT_ID)}function l(e){return{condition:(0,D.getCurrentView)(e).get("condition")}}function c(e){return{getProceed:function(t){e((0,O.getTargetStatuses)(t))},proceed:function(t,n,r,o){e((0,O.changeStatus)(t,n,r,o))},getTasks:function(t){e((0,I.getTasks)(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),y=o(d),m=n(5),g=o(m),T=n(3),v=n(0),b=n(8),S=n(4),h=r(S),E=n(2),_=r(E),w=n(7),P=r(w),I=n(9),O=n(14),R=n(25),k=o(R),N=n(50),C=n(13),D=n(10),x=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.getStatusCellComponent=s.getStatusCellComponent.bind(s),s.emptyAttributes=g.default.Map(),s.state={showModalForNextStatus:null,statusCellComponent:s.getStatusCellComponent(s.props),attributes:s.emptyAttributes},s.initAttributes=s.initAttributes.bind(s),s.getAttributes=s.getAttributes.bind(s),s.setAttributes=s.setAttributes.bind(s),s.getMissingAttributes=s.getMissingAttributes.bind(s),s.proceedTo=s.proceedTo.bind(s),s.refreshTable=s.refreshTable.bind(s),s.modalClosed=s.modalClosed.bind(s),s.proceedToggled=s.proceedToggled.bind(s),s.onSelectHandler=s.onSelectHandler.bind(s),s.initAttributes(r),s}return s(t,e),p(t,[{key:"getStatusCellComponent",value:function(e){return _.getTaskPlugin(e.row,"cs-tasks-custom-status-cell",k.default)}},{key:"componentWillReceiveProps",value:function(e){e.row.get(h.PLUGIN_DISCRIMINATORS)!==this.props.row.get(h.PLUGIN_DISCRIMINATORS)&&this.setState({statusCellComponent:this.getStatusCellComponent(e)}),e.value!==this.props.value&&this.initAttributes(e)}},{key:"initAttributes",value:function(e){if(e.value){var t=e.value.get(h.TARGETS).reduce(function(e,t){return e.set(t.getIn(["data","status"]),t.getIn(["data","attributes"]))},this.emptyAttributes);this.setState({attributes:t}),this.setState({attributes:t})}}},{key:"getAttributes",value:function(e){return this.state.attributes.get(e.getIn(["data","status"]))||this.emptyAttributes}},{key:"setAttributes",value:function(e,t){this.setState(function(n){return{attributes:n.attributes.set(e,t)}})}},{key:"getMissingAttributes",value:function(e){if(!e)return null;var t=e.getIn(["data","attributes"]);if(t){return t.filter(function(e){return e.get("mandatory")}).keySeq().toSet().intersect(this.getAttributes(e).filter(function(e){return!(0,N.isValid)(e.get("value"))}).keySeq())}return g.default.Set()}},{key:"proceedTo",value:function(e,t){var n=this.getMissingAttributes(e),r=this.getAttributes(e),o=this.props,a=o.proceed,i=o.row,s=o.condition;e&&0===n.size?(this.setState({showModalForNextStatus:null}),a(u(i),e.getIn(["data"]),r&&r.toJS(),s)):this.setState({showModalForNextStatus:e}),t&&_.stopEvent(t)}},{key:"refreshTable",value:function(){var e=this.props;(0,e.getTasks)(e.condition)}},{key:"modalClosed",value:function(e){if(e)this.setState({showModalForNextStatus:null});else{var t=this.state.showModalForNextStatus;this.proceedTo(t)}}},{key:"proceedToggled",value:function(e){var t=this.props,n=t.row,r=t.value,o=t.getProceed;if(r&&e)r.get(h.TARGETS).size||o(u(n));else{document.getElementById(_.prefixNS("proceed-btn-"+u(n))).blur()}}},{key:"onSelectHandler",value:function(e,t){var n=this.props.value;this.proceedTo(n.getIn([h.TARGETS,e]),t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.row,o=t.column,a=t.isGroup,i=this.state,s=i.statusCellComponent,l=i.showModalForNextStatus,c=a||(0,C.isDeleted)(r),f=n?y.default.createElement(s,{value:n.get("current"),row:r,column:o,isGroup:a}):h.NULL;if(c)return f;var p=n&&0===n.get(h.TARGETS);return y.default.createElement("span",{className:_.prefixNS("proceed-cell")},y.default.createElement(v.Button.DropdownTextButton,{label:f,className:_.prefixNS("proceed-button"),id:_.prefixNS("proceed-btn-"+u(r)),onToggle:this.proceedToggled,onSelect:this.onSelectHandler},p?h.LOADING:n&&n.get(h.TARGETS).map(function(t,n){return y.default.createElement(b.MenuItem,{key:"next-status-"+n,eventKey:n},y.default.createElement(s,{value:t,row:r,column:o,getTasks:e.refreshTable}))})),!a&&l&&y.default.createElement(N.ProceedModal,{status:l.getIn(["data","status"]),attributes:this.getAttributes(l),setAttributes:this.setAttributes,onClose:this.modalClosed}))}}]),t}(y.default.PureComponent);x.groupByFunction=function(e){return e.filter(function(e,t){return"current"===t}).setIn(["current","data"],e.getIn(["current","data"]).filter(function(e,t){return"color"===t||"label"===t||"icon_url"===t}))},x.sortFunction=function(e,t){return(0,C.customSort)(function(e){return e.getIn(["current","data","label"])},"",e,t)},x.filterFunction=function(e,t){return(e&&e.getIn(["current","data","label"])||"").toLowerCase().indexOf(t)>-1},x.propTypes=f({},C.CELL_PROPTYPE,{row:T.ImmutablePropTypes.map.isRequired,value:T.ImmutablePropTypes.contains(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({current:R.STATUS_PROPTYPE},h.TARGETS,T.ImmutablePropTypes.listOf(R.STATUS_PROPTYPE))),condition:P.VIEW_CONDITION,proceed:T.PropTypes.func.isRequired,getTasks:T.PropTypes.func.isRequired}),t.default=(0,T.connect)(l,c)(x)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e&&e.length>1}Object.defineProperty(t,"__esModule",{value:!0}),t.isValid=t.ProceedModal=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(3),f=n(0),p=n(8),d=n(6),y=n(2),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y),g=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return s.getValidationState=s.getValidationState.bind(s),s.cancel=s.cancel.bind(s),s.ok=s.ok.bind(s),s.onChange=s.onChange.bind(s),s}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=document.getElementById(""+m.prefixNS("comment-input"));e&&e.focus()}},{key:"cancel",value:function(){this.props.onClose(!0)}},{key:"ok",value:function(){var e=this.props;(0,e.onClose)(!1,e.attributes)}},{key:"getValidationState",value:function(){var e=this.props.attributes,t="success",n=function(n){return i(e.getIn([n,"value"]))?"success":(e.getIn([n,"mandatory"])&&(t="error"),"error")},r=e.map(function(e,t){return n(t)});return{overall:t,byKey:r}}},{key:"onChange",value:function(e,t){var n=this.props,r=n.attributes;(0,n.setAttributes)(n.status,r.setIn([t,"value"],e.target.value))}},{key:"render",value:function(){var e=this,t=this.props.attributes,n=this.getValidationState();return l.default.createElement(p.Modal,{show:!0,onHide:this.cancel,className:m.prefixNS("proceed-modal")},l.default.createElement(p.Modal.Header,{closeButton:!0,className:m.prefixNS("proceed-modal-header")},l.default.createElement(p.Modal.Title,{className:m.prefixNS("proceed-modal-title")},(0,d.formatStr)("proceed_attrs"))),l.default.createElement(p.Modal.Body,{className:m.prefixNS("proceed-modal-body")},t.entrySeq().toList().map(function(t){var r=t[1].get("mandatory");return l.default.createElement(p.FormGroup,{controlId:m.prefixNS(t[0]+"-input"),key:t[0],validationState:r&&n.byKey.get(t[0]),className:m.prefixNS("proceed-modal-body-formgroup")},l.default.createElement(p.ControlLabel,{className:m.prefixNS("proceed-modal-body-formgroup-controllabel")},r?t[1].get("label")+" *":t[1].get("label")),l.default.createElement(p.FormControl,{componentClass:"textarea",name:t[0],value:t[1].get("value")||"",onChange:function(n){return e.onChange(n,t[0])},className:m.prefixNS("proceed-modal-body-formgroup-formcontrol")}))})),l.default.createElement(p.Modal.Footer,{className:m.prefixNS("proceed-modal-footer")},l.default.createElement(f.Button.TextButton,{label:(0,d.formatStr)("cancel"),onClick:this.cancel,className:m.prefixNS("proceed-modal-footer-button-cancel")}),l.default.createElement(f.Button.TextButton,{buttonStyle:"primary",label:(0,d.formatStr)("ok"),disabled:"success"!==n.overall,onClick:this.ok,className:m.prefixNS("proceed-modal-footer-button-ok")})))}}]),t}(l.default.PureComponent);g.propTypes={status:c.PropTypes.number.isRequired,onClose:c.PropTypes.func.isRequired,setAttributes:c.PropTypes.func.isRequired,attributes:c.ImmutablePropTypes.mapOf(c.ImmutablePropTypes.contains({label:c.PropTypes.string.isRequired,mandatory:c.PropTypes.bool,value:c.PropTypes.string}).isRequired).isRequired},t.ProceedModal=g,t.isValid=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{setReadStatus:function(t,n){e((0,m.saveReadStatus)(t,n))}}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f=n(3),p=n(2),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),y=n(6),m=n(14),g=n(13),T=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return s.cycleReadStatus=s.cycleReadStatus.bind(s),s}return a(t,e),u(t,[{key:"cycleReadStatus",value:function(e){var t=this.props.row;this.props.setReadStatus(t.get("id"),t.get("cs_tasks_col_read_status")?0:1),d.stopEvent(e)}},{key:"render",value:function(){var e=this.props,t=e.row,n=e.value,r=e.isGroup,o=1===n,a=o?"read":"unread",i=o?(0,y.formatStr)("read"):(0,y.formatStr)("unread"),s=o?(0,y.formatStr)("task-read"):(0,y.formatStr)("task-unread");return c.default.createElement("span",null,c.default.createElement("div",{className:d.prefixNS("read-status-"+a),title:r?s:i,onClick:r||(0,g.isDeleted)(t)?null:this.cycleReadStatus}),r?s:"")}}]),t}(c.default.PureComponent);T.filterFunction=function(e,t){return!1},T.propTypes=s({},g.CELL_PROPTYPE,{row:f.ImmutablePropTypes.map.isRequired,value:f.PropTypes.number,setReadStatus:f.PropTypes.func.isRequired}),t.default=(0,f.connect)(null,i)(T)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{setTags:function(t,n){e((0,T.saveTags)(t,n))}}}function l(e){return{data:e[E.prefixNS("reducer")].get(w.USER_TAGS)}}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=o(p),y=n(5),m=o(y),g=n(8),T=n(14),v=n(3),b=n(0),S=n(6),h=n(2),E=r(h),_=n(4),w=r(_),P=n(13),I=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.removeTag=s.removeTag.bind(s),s}return s(t,e),f(t,[{key:"removeTag",value:function(e){var t=this.props;(0,t.removeTag)(t.index),E.stopEvent(e)}},{key:"render",value:function(){var e=this.props,t=e.tag,n=e.index,r=e.active;return d.default.createElement(g.Label,{key:"tag-"+n,bsStyle:"primary",className:(0,v.classNames)(E.prefixNS("task-tag"),E.prefixNS("task-tag-"+t))},t,r&&d.default.createElement("span",{className:E.prefixNS("remove-tag"),onClick:this.removeTag},""))}}]),t}(d.default.PureComponent);I.propTypes={tag:v.PropTypes.string.isRequired,index:v.PropTypes.number.isRequired,active:v.PropTypes.bool.isRequired,removeTag:v.PropTypes.func.isRequired};var O=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.removeTag=s.removeTag.bind(s),s.addTag=s.addTag.bind(s),s}return s(t,e),f(t,[{key:"removeTag",value:function(e){var t=e;-1===e&&(t+=this.props.value.size);var n=this.props.value.concat().splice(t,1);this.props.setTags(this.props.row.get("id"),n)}},{key:"addTag",value:function(e){if(e&&"string"==typeof e){var t=e>""?e.split(","):[];this.props.setTags(this.props.row.get("id"),this.props.value.concat(t).filter(function(e){return"string"==typeof e}))}E.stopEvent(event)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.isGroup,o=t.row,a=!(r||(0,P.isDeleted)(o));return void 0!==n&&null!==n?d.default.createElement("span",{className:E.prefixNS("task-tag-wrapper")},n.map(function(t,n){return d.default.createElement(I,{key:t,tag:t,index:n,active:a,removeTag:e.removeTag})}),a&&d.default.createElement(k,{name:"tag-input-"+n[w.ID],addTag:this.addTag,removeTag:this.removeTag,showPlaceholder:!n.size})):P.EMPTY}}]),t}(d.default.PureComponent);O.sortFunction=function(e,t){return(0,P.customSort)(function(e){return e.map(function(e){return e.toLowerCase()}).join("")},"",e,t)},O.filterFunction=function(e,t){return(e.join(", ")||"").toLowerCase().indexOf(t)>-1},O.propTypes=c({},P.CELL_PROPTYPE,{value:v.ImmutablePropTypes.listOf(v.PropTypes.string),setTags:v.PropTypes.func.isRequired}),t.default=(0,v.connect)(null,u)(O);var R=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.emptyMatches=m.default.List(),s.state={text:"",matches:s.emptyMatches},s.filterTags=s.filterTags.bind(s),s.keyDownHandler=s.keyDownHandler.bind(s),s.keyUpHandler=s.keyUpHandler.bind(s),s.onTextChange=s.onTextChange.bind(s),s.onSelectAt=s.onSelectAt.bind(s),s}return s(t,e),f(t,[{key:"filterTags",value:function(e,t){var n=t.toLowerCase(),r=e.filter(function(e){return""!==n&&0===e.toLowerCase().indexOf(n)});return 0===r.size?this.emptyMatches:r}},{key:"keyDownHandler",value:function(e){var t=this.props.removeTag;switch(e.key){case"Backspace":""===e.target.value&&t(-1)}}},{key:"keyUpHandler",value:function(){this.props.addTag(this.state.text),this.setState({text:"",matches:this.emptyMatches})}},{key:"onTextChange",value:function(e){var t=this.props.data,n=e.target.value;this.setState({text:n,matches:this.filterTags(t,n)})}},{key:"onSelectAt",value:function(e){var t=this;this.setState(function(n,r){var o=r.data,a=n.matches.get(e);return{text:a,matches:t.filterTags(o,a)}})}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.showPlaceholder,r=e.addTag,o=this.state,a=o.text,i=o.matches,s=(0,S.formatStr)("tags_tooltip_1"),u=s+"\n"+(0,S.formatStr)("tags_tooltip_2");return d.default.createElement(g.Form,{inline:!0,onSubmit:E.stopEvent,className:E.prefixNS("tags-input-form")},d.default.createElement(g.FormGroup,{bsSize:"small"},d.default.createElement(N,{value:a,matched:i,onChange:this.onTextChange,onSelectAt:this.onSelectAt,name:t,className:E.prefixNS("tags-input"),onBlur:r,onKeyDown:this.keyDownHandler,onEnter:this.keyUpHandler,title:u,placeholder:n?s:null})))}}]),t}(d.default.PureComponent);R.defaultProps={showPlaceholder:!0},R.propTypes={name:v.PropTypes.string.isRequired,addTag:v.PropTypes.func.isRequired,removeTag:v.PropTypes.func.isRequired,showPlaceholder:v.PropTypes.bool,data:v.ImmutablePropTypes.list};var k=(0,v.connect)(l)(R),N=b.FormControl.WithTypeAhead(b.FormControl.TextInput)},function(e,t,n){"use strict";function r(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t={task_object_id:e.payload.task_object_id},r.next=3,y(s.backendRequestInFlight,"GET "+g,!0);case 3:return r.prev=3,r.next=6,d((0,s.backendRequestInFlight)("GET "+g,!1));case 6:return r.next=8,y(i.getJSON,g,t);case 8:if(n=r.sent,!n.task||!n.task[T]){r.next=13;break}return r.next=12,d((0,i.fetchTypes)(n.task[T]));case 12:delete n.task[T];case 13:return r.next=15,y(u.mergeObjectStore,n);case 15:return r.next=17,d({type:l.TASK_DETAILS,payload:n});case 17:r.next=25;break;case 19:return r.prev=19,r.t0=r.catch(3),r.next=23,d((0,s.backendRequestInFlight)("GET "+g,!1));case 23:return r.next=25,d((0,s.notifyError)(r.t0));case 25:case"end":return r.stop()}},c,this,[[3,19]])}function o(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(l.GET_TASK_DETAILS,r);case 2:case"end":return e.stop()}},f,this)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(3),i=n(0),s=n(9),u=n(18),l=n(16),c=regeneratorRuntime.mark(r),f=regeneratorRuntime.mark(o),p=a.ReduxSaga.effects,d=p.put,y=p.call,m=p.takeEvery,g=(0,i.getAppSetup)().getIn(["links","cs-taskmanager-web","taskDetails"]),T="cs_tasks_object_types"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){var e,t,n,r,o,a,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,L(K);case 2:e=s.sent,t=!0,n=!1,r=void 0,s.prev=6,o=e[Symbol.iterator]();case 8:if(t=(a=o.next()).done){s.next=15;break}return i=a.value,s.next=12,M((0,g.fetchObject)(i));case 12:t=!0,s.next=8;break;case 15:s.next=21;break;case 17:s.prev=17,s.t0=s.catch(6),n=!0,r=s.t0;case 21:s.prev=21,s.prev=22,!t&&o.return&&o.return();case 24:if(s.prev=24,!n){s.next=27;break}throw r;case 27:return s.finish(24);case 28:return s.finish(21);case 29:case"end":return s.stop()}},O,this,[[6,17,21,29],[22,,24,28]])}function a(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.viewID,n=W(t),r.next=4,M({type:h.VIEW.DO_SELECT,payload:{viewID:t}});case 4:return r.prev=4,r.next=7,U(T.backendRequest,v.POST,G.replace("${view_object_id}",n),h.VIEW.SELECTED);case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(4),g.Console.error("could not update current view on server");case 12:case"end":return r.stop()}},R,this,[[4,9]])}function i(e,t,n){var r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,L(e);case 2:return r=a.sent,o=n||r.get(_.ID),a.next=6,M((0,g.receivedObject)(o,r.set("name",t)));case 6:case"end":return a.stop()}},k,this)}function s(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.name,r=t.condition,o.next=3,U(i,z,n,H);case 3:return o.next=5,M(h.newUserViewOptimistic(H));case 5:return o.next=7,U(T.backendRequest,v.POST,F,h.VIEW.NEW,{name:n,condition:r});case 7:case"end":return o.stop()}},N,this)}function u(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.viewID,r=t.condition,o=W(n),a.next=4,M(h.setViewEdited(n,!1));case 4:return a.prev=4,a.next=7,U(T.backendRequest,v.POST,B.replace("${view_object_id}",o),h.VIEW.SAVED,{viewID:n,condition:r});case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(4),a.next=13,M(h.setViewEdited(n,!0));case 13:case"end":return a.stop()}},C,this,[[4,9]])}function l(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.viewID,n=W(t),r.next=4,M(h.deleteUserViewOptimistic(t));case 4:return r.next=6,U(T.backendRequest,v.DELETE,B.replace("${view_object_id}",n));case 6:return r.next=8,M((0,b.fetchSettings)());case 8:case"end":return r.stop()}},D,this)}function c(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.modification,r.next=3,L(Y);case 3:return n=r.sent,r.next=6,M(h.setViewEdited(n,!0));case 6:return r.next=8,M(t);case 8:case"end":return r.stop()}},x,this)}function f(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.viewID,r=t.name,a.next=3,U(i,J(n),r);case 3:return a.next=5,M(h.renameUserViewOptimistic(n,r));case 5:return o=W(n),a.next=8,U(T.backendRequest,v.POST,B.replace("${view_object_id}",o),h.VIEW.RENAMED,{viewID:n,name:r});case 8:case"end":return a.stop()}},A,this)}function p(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(h.VIEW.SETUP,o);case 2:return e.next=4,q(h.VIEW.SELECT,a);case 4:return e.next=6,q(h.VIEW.SAVE,u);case 6:return e.next=8,q(h.VIEW.SAVE_AS,s);case 8:return e.next=10,q(h.VIEW.DELETE,l);case 10:return e.next=12,q(h.VIEW.MODIFY,c);case 12:return e.next=14,q(h.VIEW.RENAME,f);case 14:case"end":return e.stop()}},j,this)}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchUnresolvedContexts=o,t.selectUserView=a,t.newUserView=s,t.saveUserView=u,t.deleteUserView=l,t.modifyCurrentView=c,t.renameView=f,t.default=p;var d=n(5),y=function(e){return e&&e.__esModule?e:{default:e}}(d),m=n(3),g=n(0),T=n(18),v=n(9),b=n(14),S=n(12),h=r(S),E=n(4),_=r(E),w=n(2),P=r(w),I=n(10),O=regeneratorRuntime.mark(o),R=regeneratorRuntime.mark(a),k=regeneratorRuntime.mark(i),N=regeneratorRuntime.mark(s),C=regeneratorRuntime.mark(u),D=regeneratorRuntime.mark(l),x=regeneratorRuntime.mark(c),A=regeneratorRuntime.mark(f),j=regeneratorRuntime.mark(p),V=m.ReduxSaga.effects,L=V.select,M=V.put,U=V.call,q=V.takeEvery,F=(0,g.getAppSetup)().getIn(["links","cs-taskmanager-web","newUserView"]),G=(0,g.getAppSetup)().getIn(["links","cs-taskmanager-web","rememberUserView"]),B=(0,g.getAppSetup)().getIn(["links","cs-taskmanager-web","userView"]),W=function(e){return e.split("/").pop()},K=function(e){var t=e[P.prefixNS("reducer")],n=y.default.List();return["contexts","users"].forEach(function(r){n=n.concat(t.getIn((0,I.getViewPath)(e,"current").concat(["condition",r]),y.default.List()).filter(function(t){return!e.objectsById.get(t)}))}),n},H="viewCurrentlyCreated",z=function(e){return e.objectsById.get((0,I.getViewID)(e,"current"))},Y=function(e){return(0,I.getViewID)(e,"current")},J=function(e){return function(t){return t.objectsById.get(e)}}},function(e,t,n){"use strict";function r(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(d.backendRequest,f.GET,f.URL_SETTINGS,p.RECEIVED_SETTINGS);case 2:case"end":return e.stop()}},y,this)}function o(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(d.backendRequest,f.POST,w,p.SAVE_TAGS_RESPONSE,e.payload);case 2:case"end":return t.stop()}},m,this)}function a(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(d.backendRequest,f.POST,P,p.SAVE_READ_STATUS_RESPONSE,e.payload);case 2:case"end":return t.stop()}},g,this)}function i(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(d.backendRequest,f.GET,I,p.TARGET_STATUSES,e.payload);case 2:case"end":return t.stop()}},T,this)}function s(e){var t,n,r,o,a,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.task_object_id,r=t.proceed_to,o=t.kwargs,a=t.condition,s.next=3,h({type:p.STATUS_CHANGE_IN_FLIGHT,payload:{task_object_id:n}});case 3:return s.prev=3,i={task_object_id:n,proceed_to:r},o&&(i=Object.assign(o,i)),s.next=8,E(c.postJSON,I,i);case 8:return s.next=10,h((0,f.getTasks)(a));case 10:s.next=16;break;case 12:return s.prev=12,s.t0=s.catch(3),s.next=16,h((0,f.notifyError)(s.t0));case 16:case"end":return s.stop()}},v,this,[[3,12]])}function u(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(p.FETCH_SETTINGS,r);case 2:return e.next=4,_(p.SAVE_TAGS,o);case 4:return e.next=6,_(p.SAVE_READ_STATUS,a);case 6:return e.next=8,_(p.GET_TARGET_STATUSES,i);case 8:return e.next=10,_(p.CHANGE_STATUS,s);case 10:case"end":return e.stop()}},b,this)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=n(3),c=n(0),f=n(9),p=n(14),d=n(18),y=regeneratorRuntime.mark(r),m=regeneratorRuntime.mark(o),g=regeneratorRuntime.mark(a),T=regeneratorRuntime.mark(i),v=regeneratorRuntime.mark(s),b=regeneratorRuntime.mark(u),S=l.ReduxSaga.effects,h=S.put,E=S.call,_=S.takeEvery,w=(0,c.getAppSetup)().getIn(["links","cs-taskmanager-web","tag"]),P=(0,c.getAppSetup)().getIn(["links","cs-taskmanager-web","readStatus"]),I=(0,c.getAppSetup)().getIn(["links","cs-taskmanager-web","proceed"])},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){return e.setIn([m,"byObjectID",e.getIn([m,p.TASK_OID])],u.default.fromJS(t.task))}function a(e){return e.set(m,y.CURRENT_SELECTION_DEFAULT)}function i(e,t){var n=t[p.ID];return n===e.get(g)?e.set(g,null):e.set(g,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.CURRENT_SELECTION=void 0,t.default=function(e,t){switch(t.type){case c.TASK_DETAILS:return o(e,t.payload);case c.RESET_TASK_DETAILS:return a(e);case c.SELECT_FILE_CONTAINER:return i(e,t.payload);default:return e}};var s=n(5),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(16),c=r(l),f=n(4),p=r(f),d=n(7),y=r(d),m=t.CURRENT_SELECTION="currentSelection",g="fileContainerID"},function(e,t,n){"use strict";function r(e,t){return document.title=t,e}function o(e,t){var n=(0,P.getViewIDPath)("current");return e.setIn(n,t.viewID)}function a(e,t){return e.setIn((0,P.getViewIDPath)("recent"),E.default.fromJS(t.recentUserViews))}function i(e,t,n){var r=t.viewID,o=(0,P.getViewPathFromOwnState)(e,r).concat(["edited"]);return e.setIn(o,n)}function s(e,t){var n=t.settings,r=E.default.fromJS(n),o=(0,P.getViewIDPath)("byID"),a=e.getIn(o).filter(function(e){return e.get("edited")}).map(function(e,t){return e.set("name",r.getIn(o.concat([t,"name"])))});return o.shift(),e.set("settings",r.mergeIn(o,a))}function u(e,t){var n=t.viewID,r=(0,P.getViewIDPath)("custom");return e.setIn(r,e.getIn(r).filter(function(e){return e!==n}))}function l(e,t){var n=t.dummyID,r=(0,P.getViewIDPath)("byID").concat([n]),o=(0,P.getCurrentCustomViewFromOwnState)(e),a=(0,P.getViewIDPath)("current"),i=(0,P.getViewIDPath)("byID").concat([e.getIn(a),"edited"]);return e.setIn(i,!1).setIn(r,o).setIn(a,n)}function c(e,t){var n=t.viewID,r=t.name,o=(0,P.getViewIDPath)("default"),a=e.getIn(o);if(a===n){var i=(0,P.getViewPathFromOwnState)(e,a).concat(["name"]);return e.setIn(i,r)}var s=(0,P.getViewPathFromOwnState)(e,n).concat(["name"]);return e.setIn(s,r)}function f(e,t,n,r){var o=(0,P.getViewPathFromOwnState)(e,"current");if(!o[o.length-1])return e;var a=o.concat(["condition",t]),i=e.getIn(a);return r?e.setIn(a,i.toSet().union(n).toList()):e.setIn(a,i.toSet().subtract(n).toList())}function p(e,t,n){return f(e,"types",[t.typeID],n)}function d(e){var t=(0,P.getViewPathFromOwnState)(e,"current").concat(["condition","types"]);return e.setIn(t,E.default.List())}function y(e,t,n){return f(e,"contexts",[t.contextID]||t.contextIDs,n)}function m(e){var t=(0,P.getViewPathFromOwnState)(e,"current").concat(["condition","contexts"]);return e.setIn(t,E.default.List())}function g(e,t){return e.setIn((0,P.getViewPathFromOwnState)(e,"current").concat(["condition","deadline","days"]),t.days).setIn((0,P.getViewPathFromOwnState)(e,"current").concat(["condition","deadline","active"]),"days")}function T(e,t){return e.setIn((0,P.getViewPathFromOwnState)(e,"current").concat(["condition","deadline","range"]),E.default.Map(t)).setIn((0,P.getViewPathFromOwnState)(e,"current").concat(["condition","deadline","active"]),"range")}function v(e,t){var n=t.active?t.filterName:null;return e.setIn((0,P.getViewPathFromOwnState)(e,"current").concat(["condition","deadline","active"]),n)}function b(e,t,n){return f(e,"users",[t.userID],n)}function S(e,t){return e.setIn((0,P.getViewPathFromOwnState)(e,"current").concat(["condition","roles"]),t.includeRoleTasks)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t.type){case w.UPDATE_DOCUMENT_TITLE:return r(e,t.payload);case w.VIEW.DO_SELECT:return o(e,t.payload);case w.VIEW.SELECTED:return a(e,t.payload);case w.VIEW.SET_EDITED:return i(e,t.payload,!0);case w.VIEW.SET_UNEDITED:return i(e,t.payload,!1);case w.VIEW.NEW:case w.VIEW.SAVED:case w.VIEW.RENAMED:return s(e,t.payload);case w.VIEW.NEW_OPTIMISTIC:return l(e,t.payload);case w.VIEW.RENAME_OPTIMISTIC:return c(e,t.payload);case w.VIEW.DELETE_OPTIMISTIC:return u(e,t.payload);case w.TYPE.SELECT:return p(e,t.payload,!0);case w.TYPE.DESELECT:return p(e,t.payload,!1);case w.TYPE.CLEAR:return d(e);case w.CONTEXT.SELECT:return y(e,t.payload,!0);case w.CONTEXT.DESELECT:return y(e,t.payload,!1);case w.CONTEXT.CLEAR:return m(e);case w.DEADLINE.SET_DAYS:return g(e,t.payload);case w.DEADLINE.SET_RANGE:return T(e,t.payload);case w.DEADLINE.ACTIVATE:return v(e,t.payload);case w.USER.SELECT:return b(e,t.payload,!0);case w.USER.DESELECT:return b(e,t.payload,!1);case w.USER.INCLUDE_ROLE_TASKS:return S(e,t.payload);default:return e}};var h=n(5),E=function(e){return e&&e.__esModule?e:{default:e}}(h),_=n(12),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_),P=n(10)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return e.set(_,p.default.fromJS(t[_]))}function i(e,t){var n=p.default.Set([]);return e.getIn([w,P]).forEach(function(e){n=n.union(e.getIn([I,t]))}),e.set(g.USER_TAGS,n.toList())}function s(e,t){var n=e.getIn([w,I]).findIndex(function(e){return e.get(O)===S});return i(e.setIn([w,P,v.getTaskIndex(e.getIn([w,P]),t[g.TASK_OID]),I,n],p.default.fromJS(t[R])),n)}function u(e,t){var n=v.getTaskIndex(e.getIn([w,P]),t[g.TASK_OID]),r=e.getIn([w,I]).findIndex(function(e){return e.get(O)===h}),a=e.getIn([w,P,n,I]);if(void 0!==a){var i;return e.mergeIn([w,P,n],(i={},o(i,h,t[h]),o(i,k,(0,b.getReadStatusCSSClasses)(t[h],e.getIn([w,P,n,k]))),o(i,I,a.set(r,t[h])),i))}return e}function l(e,t){var n=v.getTaskIndex(e.getIn([w,P]),t[g.TASK_OID]),r=e.getIn([w,I]).findIndex(function(e){return e.get(O)===E});return e.setIn([w,P,n,I,r,g.TARGETS],p.default.fromJS(t[g.TARGETS]))}function c(e,t){return e.setIn([N,C],e.getIn([N,C]).add(t[g.TASK_OID]))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t.type){case y.RECEIVED_SETTINGS:return a(e,t.payload);case y.SAVE_TAGS_RESPONSE:return s(e,t.payload);case y.SAVE_READ_STATUS_RESPONSE:return u(e,t.payload);case y.TARGET_STATUSES:return l(e,t.payload);case y.STATUS_CHANGE_IN_FLIGHT:return c(e,t.payload);default:return e}};var f=n(5),p=function(e){return e&&e.__esModule?e:{default:e}}(f),d=n(14),y=r(d),m=n(4),g=r(m),T=n(2),v=r(T),b=n(26),S="cs_tasks_col_tags",h="cs_tasks_col_read_status",E="cs_tasks_col_status",_="settings",w="table",P="rows",I="columns",O="attribute",R="tags",k="className",N="delta",C="proceeding"}])});
//# sourceMappingURL=cs-taskmanager-web.d0a7040cda821d37a4ba.js.map