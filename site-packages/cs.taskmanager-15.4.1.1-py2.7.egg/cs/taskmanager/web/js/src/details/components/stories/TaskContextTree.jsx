import React from 'react';
import Immutable from 'immutable';
import {storiesOf, appContainer} from 'cs-web-components-storybook';
// DO NOT import components use relative path! Only use Registry or
// from component libs(defined externals)
import {Registry} from 'cs-web-components-base';
import * as constants from '../../../constants';

const TaskContextTree = Registry.findComponent('cs-taskmanager-web-TaskContextTree');

const task = Immutable.Map({
    [constants.ICON_LINK]: '/resources/icons/byname/branding_web_favicon',
    [constants.DESCRIPTION]: 'Example Object'
});
const taskInfo = Immutable.Map({
    [constants.ID]: '',
    [constants.PLUGIN_DISCRIMINATORS]: Immutable.List(),
    [constants.CONTEXT]: Immutable.List(),
    [constants.RELSHIPS]: Immutable.List()
});
// TODO actually load something into the object store and reference its @id here
const contextInfo = taskInfo.set(constants.CONTEXT, Immutable.List([
    'missing @id',
    'missing @id2'
]));

const DEFAULT_PROPS = {task, taskInfo};

storiesOf('TaskContextTree', {})
    .addDecorator(appContainer)
    .add('Task with Context', () => (
        <TaskContextTree {...DEFAULT_PROPS} taskInfo={contextInfo} />
    ))
    .add('Task Only', () => (
        <TaskContextTree {...DEFAULT_PROPS} />
    ))
;
