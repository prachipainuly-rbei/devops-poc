import React from 'react';
import {PropTypes} from 'cs-web-components-externals';
import {prefixNS} from '../../helpers';
import * as constants from '../../constants';

const ATTRIBUTE_PROP = PropTypes.shape({
    label: PropTypes.string.isRequired,
    value: PropTypes.any
});

const TextAttribute = ({attribute}) => (
    <span >
        {attribute.value === null ? constants.NULL : attribute.value}
    </span>
);

TextAttribute.propTypes = {
    attribute: ATTRIBUTE_PROP.isRequired
};

/**
 * Shows a list of key-value pairs.
 *
 * React Properties
 * ................
 *
 * +------------------+-------------------+---------+--------------------------------------+
 * | Property         | Type              | Default | Use                                  |
 * +==================+===================+=========+======================================+
 * | attributes       | Array of objects  | \-      | Attributes to be displayed. Keys of  |
 * |                  | (Required)        |         | each entry described below.          |
 * +------------------+-------------------+---------+--------------------------------------+
 * | attributes.label | String (Required) | \-      | Attribute name to be displayed.      |
 * +------------------+-------------------+---------+--------------------------------------+
 * | attributes.value | Any               | \-      | Attribute value to be displayed.     |
 * +------------------+-------------------+---------+--------------------------------------+
 *
 * @module AttributeList
 */
function AttributeList({attributes}) {
    return (
        <div className={prefixNS('attribute-list')}>
            {attributes.map((attribute, i) => (
                <span className={prefixNS('attribute')} key={`attr-${i}`}>
                    {attribute.label ? (
                        <span className={prefixNS('attribute-label')}>
                            {attribute.label}
                        </span>
                    ) : null}
                    <TextAttribute attribute={attribute} className={prefixNS('textattribute')} />
                </span>
            ))}
        </div>
    );
}

AttributeList.propTypes = {
    attributes: PropTypes.arrayOf(ATTRIBUTE_PROP).isRequired
};

export default AttributeList;
