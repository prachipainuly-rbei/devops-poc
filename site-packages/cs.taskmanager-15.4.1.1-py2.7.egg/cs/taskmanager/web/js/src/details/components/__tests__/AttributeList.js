import React from 'react';
import AttributeList from '../AttributeList';
import {shallow} from 'enzyme';

describe('The AttributeList component', () => {
    it('with attributes displays a vaid list of attribute labels', () => {
        const ATTRS = [
            {
                label: 'my kz',
                value: 'ur bf'
            },
            {
                label: 'number',
                value: 42
            },
            {
                label: 'element',
                value: (
                    <div>
                        To <b>boldly</b> go where no man has gone before.
                    </div>
                )
            },
            {
                label: 'no value'
            }
        ];

        const wrapper = shallow(<AttributeList attributes={ATTRS} />);

        // There are four items in the array ATTS
        expect(wrapper.find(
            '.cs-taskmanager-web-attribute-list > '+
            '.cs-taskmanager-web-attribute > '+
            '.cs-taskmanager-web-attribute-label'
            ).length).toBe(4);

        expect(wrapper.find(
                '.cs-taskmanager-web-attribute-list > '+
                '.cs-taskmanager-web-attribute > '+
                '.cs-taskmanager-web-textattribute'
                ).length).toBe(4);
    });

    it('with attributes, but without a label displays a valid list of textattributes', () => {
        const ATTRS = [
            {
                label: '',
                value: 'ur bf'
            }
        ];

        const wrapper = shallow(<AttributeList attributes={ATTRS} />);

        expect(wrapper.find(
            '.cs-taskmanager-web-attribute-list > '+
            '.cs-taskmanager-web-attribute > '+
            '.cs-taskmanager-web-attribute-label'
            ).length).toBe(0);

        // There is one item in the array ATTS
        expect(wrapper.find(
                '.cs-taskmanager-web-attribute-list > '+
                '.cs-taskmanager-web-attribute > '+
                '.cs-taskmanager-web-textattribute'
                ).length).toBe(1);
    });

    it('without attributes displays a empty list of attributes', () => {
        const wrapper = shallow(<AttributeList attributes={[]} />);

        expect(wrapper.find('.cs-taskmanager-web-attribute-list').length).toBe(1);

        expect(wrapper.find(
            '.cs-taskmanager-web-attribute-list > '+
            '.cs-taskmanager-web-attribute > '+
            '.cs-taskmanager-web-attribute-label'
            ).length).toBe(0);

        expect(wrapper.find(
                '.cs-taskmanager-web-attribute-list > '+
                '.cs-taskmanager-web-attribute > '+
                '.cs-taskmanager-web-textattribute'
                ).length).toBe(0);
    });
});
