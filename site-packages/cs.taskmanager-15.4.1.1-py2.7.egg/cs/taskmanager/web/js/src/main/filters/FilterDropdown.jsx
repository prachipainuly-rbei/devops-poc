import React from 'react';
import {classNames, PropTypes} from 'cs-web-components-externals';
import {Button, FormControl, Overlays} from 'cs-web-components-base';
import * as helpers from '../../helpers';

const MenuItem = Overlays.MenuItem;
const FETCHING_LABEL = '...';

function FilterDropdown({label, id, children, ...others}) {
    return (
        <Button.DropdownTextButton
            {...others}
            pullRight
            label={label || FETCHING_LABEL}
            className={helpers.prefixNS('filter-dropdown') + ' ' + id}
            id={id}
        >
            {children}
        </Button.DropdownTextButton>
    );
}

FilterDropdown.propTypes = {
    label: PropTypes.string.isRequired,
    id: PropTypes.string.isRequired,
    title: PropTypes.string
};

const FilterItem = FormControl.CheckBoxMenuItem;

// FilterItem without CheckBox
function SimpleFilterItem({name, onChange, checked, disabled, tooltip, label}) {
    return (
        <MenuItem
            eventKey={name}
            onSelect={onChange}
            className={classNames([
                helpers.prefixNS('simple-menuitem'),
                checked ? 'checked' : 'unchecked'
            ])}
            disabled={disabled || false}
            title={tooltip}
        >
            {label}
        </MenuItem>
    );
}

SimpleFilterItem.propTypes = {
    name: PropTypes.string.isRequired,
    tooltip: PropTypes.string,
    checked: PropTypes.bool,
    disabled: PropTypes.bool,
    label: PropTypes.oneOfType([PropTypes.string, PropTypes.element]).isRequired,
    onChange: PropTypes.func.isRequired
};

export {
    FilterDropdown,
    FilterItem,
    SimpleFilterItem
};
