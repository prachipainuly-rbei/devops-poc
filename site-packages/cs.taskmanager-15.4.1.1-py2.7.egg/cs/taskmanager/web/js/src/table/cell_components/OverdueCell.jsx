import React from 'react';
import {PropTypes} from 'cs-web-components-externals';
import {formatStr} from '../../i18n';
import * as helpers from '../../helpers';
import {CELL_PROPTYPE, customSort} from './index';

const MESSAGE_OVERDUE = 'overdue';
const MESSAGE_NOT_OVERDUE = 'not_overdue';

/**
 * Displays a boolean (task is overdue or not).
 *
 * React Properties
 * ................
 *
 * +----------+---------+---------+----------------------------------------------------------------------+
 * | Property | Type    | Default | Use                                                                  |
 * +==========+=========+=========+======================================================================+
 * | value    | Boolean | \-      | If true, the component displays a red square, else a greyed out one. |
 * +----------+---------+---------+----------------------------------------------------------------------+
 * | isGroup  | Boolean | \-      | If true, the tooltip will be displayed without the need to hover.    |
 * +----------+---------+---------+----------------------------------------------------------------------+
 *
 * No properties are required.
 *
 * Sorting
 * .......
 *
 * Icon cells are sorted by their value only.
 *
 * Filtering
 * .........
 *
 * Values will never match the table filter.
 *
 * @module OverdueCell
 */
function OverdueCell({value, isGroup}) {
    const desc = value ? formatStr(MESSAGE_OVERDUE) : formatStr(MESSAGE_NOT_OVERDUE);

    return (
        <span>
            <div
                title={desc}
                className={helpers.prefixNS(value ? 'overdue' : 'not-overdue')}
            />
            {isGroup && desc}
        </span>
    );
}

OverdueCell.sortFunction = (a, b) => (
    customSort(x => x, false, a, b)
);

OverdueCell.filterFunction = (value, loweredText) => false; // eslint-disable-line no-unused-vars

OverdueCell.propTypes = {
    ...CELL_PROPTYPE,
    value: PropTypes.bool
};

export default OverdueCell;
