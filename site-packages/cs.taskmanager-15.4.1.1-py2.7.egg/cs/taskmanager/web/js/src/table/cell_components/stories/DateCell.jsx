import React from 'react';
import Immutable from 'immutable';
import moment from 'moment';
import {storiesOf} from 'cs-web-components-storybook';
// DO NOT import components use relative path! Only use Registry or
// from component libs(defined externals)
import {Registry} from 'cs-web-components-base';

const DateCell = Registry.findComponent('cs-taskmanager-web-DateCell');

const TODAY = moment();

const getDate = (momentObject) => Immutable.Map({
    iso: momentObject.toISOString(),
    epoch: momentObject.unix(),
    overdue: TODAY.isAfter(momentObject, 'day')
});

const YESTERDAY = getDate(moment().add(-1, 'days'));

storiesOf('DateCell', {})
    .add('Last Christmas', () => (
        <DateCell value={getDate(moment(`${TODAY.year() - 1}-12-24`))} />
    ))
    .add('Yesterday', () => (
        <DateCell value={YESTERDAY} />
    ))
    .add('Yesterday (Unstyled)', () => (
        <DateCell value={YESTERDAY} unstyled />
    ))
    .add('Today', () => (
        <DateCell value={getDate(moment())} />
    ))
    .add('Tomorrow', () => (
        <DateCell value={getDate(moment().add(1, 'days'))} />
    ))
    .add('No Date', () => (
        <DateCell />
    ))
    .add('No Date (Unstyled)', () => (
        <DateCell unstyled />
    ))
    .add('value.iso missing', () => (
        <DateCell value={YESTERDAY.delete('iso')} />
    ))
    .add('value.epoch missing', () => (
        <DateCell value={YESTERDAY.delete('epoch')} />
    ))
    .add('value.overdue missing', () => (
        <DateCell value={YESTERDAY.delete('overdue')} />
    ))
;
