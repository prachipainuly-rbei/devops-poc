#!/usr/bin/env python
# -*- mode: python; coding: utf-8 -*-
#
# Copyright (C) 1990 - 2018 CONTACT Software GmbH
# All rights reserved.
# http://www.contact.de/
#

"""
This module sets up the stories for storybook.
"""
__docformat__ = "restructuredtext en"
__revision__ = "$Id: stories.py 179755 2018-06-29 10:27:35Z cso $"

import os
from cdb import rte
from cdb import sig

from cs.platform.web import static
from cs.web.components.storybook.main import add_stories

from cs.taskmanager.web.main import APPNAME
from cs.taskmanager.web.main import APPVERSION

STORIES_APP = "{}-stories".format(APPNAME)


@sig.connect(rte.APPLICATIONS_LOADED_HOOK)
def _register_libraries():
    stories = static.Library(
        STORIES_APP,
        APPVERSION,
        os.path.join(os.path.dirname(__file__), "js", "build"))
    stories.add_file("{}.js".format(STORIES_APP))
    stories.add_file("{}.js.map".format(STORIES_APP))
    static.Registry().add(stories)
    add_stories((APPNAME, APPVERSION), (STORIES_APP, APPVERSION))
