.. _`15_3_0_changes`:

What's New in cs.taskmanager 15.3.0?
###################################################################################################

cs.taskmanager 15.3.0 is a completely redesigned application. As such, it is not fully feature-
compatible with older versions, and updating will require you to run additional scripts and check
the resulting configuration for correctness.


Notable Changes
===================================================================================================


Renamed Plugins
---------------------------------------------------------------------------------------------------

Plugins have been renamed as follows:

+---------------------------------------------------------+----------------------------------------+
| Old Plugin                                              | New Plugin                             |
+=========================================================+========================================+
| cs.actions.taskmanager_plugin                           | cs.actions.tasks_plugin                |
+---------------------------------------------------------+----------------------------------------+
| cs.innovation.evaluations.analysis_taskmanager_plugin   | cs.innovation.evaluations.tasks_plugin |
+---------------------------------------------------------+----------------------------------------+
| cs.innovation.evaluations.evaluation_taskmanager_plugin | cs.innovation.evaluations.tasks_plugin |
+---------------------------------------------------------+----------------------------------------+
| cs.pcs.checklists.taskmanager_plugin                    | cs.pcs.checklists.tasks_plugin         |
+---------------------------------------------------------+----------------------------------------+
| cs.pcs.issues.taskmanager_plugin                        | cs.pcs.issues.tasks_plugin             |
+---------------------------------------------------------+----------------------------------------+
| cs.pcs.projects.taskmanager_plugin                      | cs.pcs.projects.tasks_plugin           |
+---------------------------------------------------------+----------------------------------------+
| cs.workflow.taskmanager_plugin                          | cs.workflow.tasks_plugin               |
+---------------------------------------------------------+----------------------------------------+

Any imports in Python scripts have to be changed accordingly or be removed. Plugin customization
has to be re-implemented, as the new plugins have been completely rewritten.


Removed Features
---------------------------------------------------------------------------------------------------

- Explicit operation configuration for task classes is replaced by the more generic cs.web
  mechanism to configure Web UI operations. See the cs.web documentation for further details. Users
  may access operations in the table's header now.
- Format configuration has been removed. It has been replaced by frontend components.


Changed Behavior
---------------------------------------------------------------------------------------------------

- The option to display another user's task has been limited to users granted "show_tasks" access
  for a given user. By default, only administrator accounts are allowed to use this feature for
  privacy reasons.
- The search field for users now uses the |cdbes|. If you want to use this feature, please make
  sure users are indexed.
- The table component has been standardized. As a result, it is much more powerful than before, and
  users will have to apply custom settings manually after updating.
- Task details are not shown inside the table, but a dedicated details area.
- The application will check periodically for new/updated data, just like the Activity Stream does.
  By default, the interval is 15 minutes. You can change this to any value >= 5000 ms by updating
  the default settings:

  .. code-block:: sql

    UPDATE cdb_setting
    SET default_val=REPLACE(
      default_val,
      '"notificationInterval": 900000',
      '"notificationInterval": 5000'
    )
    WHERE setting_id='cs.taskmanager'
      AND setting_id2='settings'

  Please make sure the new value is still valid JSON.


New Features
---------------------------------------------------------------------------------------------------

- Users may position the selection details area right to or below the tasks table. They may also
  change the area's size by dragging the divider between the table and the details area.
- Task details are divided into explicitely named blocks, which makes it easier to deduce their
  meaning and selectively show/hide blocks.
- The "Activities" detail block may show the task's or a confgured channel's activities. Some task
  classes define a parent object (such as "Project") as their activities context.
- Configuring new columns or attribute mappings now supports any attribute, property, or method
  callable on the task object. This includes Powerscript References of cardinality 1, and accessing
  their properties after a dot.
- New cell renderer components, such as IconCell, DateCell.
- Custom task detail plugins can now be written much easier. See the technical documentation for
  cs.taskmanager.


Updating From cs.taskmanager 10.1.1 or 15.2.0
===================================================================================================

Automatic Updates
---------------------------------------------------------------------------------------------------

When installing cs.taskmanager 15.3.0, it will install optional content (namely access-related
content, such as Access Control Domains), potentially resulting in changes to your custom data.
Please double-check any new patches.


update-cs-tasks.py
---------------------------------------------------------------------------------------------------

Updating to cs.taskmanager 15.3.0 will not automatically reuse your existing settings and
configuration, since class- and table names have been changed. In order to use your customized or
new task classes, you will have to run the optional update script ``update-cs-tasks.py``.

The script will try to migrate your old configuration, user tags and task read statuses to the new
schema. It will NOT migrate user settings (column visibility/width, filter...).

Please make sure to read and fully understand the script's docstring before running the script.
Never run the script in a production environment.
