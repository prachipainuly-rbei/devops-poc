# -*- mode: python; coding: utf-8 -*-
#
# Copyright (C) 1990 - 2018 CONTACT Software GmbH
# All rights reserved.
# http://www.contact.de/

"""
Custom Tasks Plugin

To enable default tasks functionality, your task class should implement the
provided mixin:

.. code :: python

    from cs.taskmanager.mixin import WithTasksIntegration
    from custom.plm.my_module import MyClass

    class MyTaskClass(MyClass, WithTasksIntegration):
        pass

"""

__docformat__ = "restructuredtext en"
__revision__ = "$Id: __init__.py.template 174359 2018-03-13 10:29:29Z cso $"

import os
import sys
from cdb import rte
from cdb import sig
from cs.platform.web import static

FILE = __file__.decode(sys.getfilesystemencoding())
PLUGIN = "%(PACKAGE_JS)s"
VERSION = "15.3.0"
APPDIR = os.path.dirname(FILE)


@sig.connect(rte.APPLICATIONS_LOADED_HOOK)
def _register_libraries():
    lib = static.Library(
        PLUGIN,
        VERSION,
        os.path.join(APPDIR, 'js', 'build'))
    lib.add_file("{}.js".format(PLUGIN))
    lib.add_file("{}.js.map".format(PLUGIN))
    static.Registry().add(lib)
