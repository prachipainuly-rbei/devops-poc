<div {{bind-attr class=":tree-action hasChildren::invisible :pull-left"}}>
    {{view actionView expandingBinding="treeNode.expanded"}}
</div>
<div class="tree-node-structure">
    <div  {{bind-attr
            class=":tree-current-node isSelectable:tree-selectable isHit:node-found isNavigated:node-navigated treeCssClasses"
            title="treeNode.tooltip"
          }} {{action toggleButtonVisibility on="mouseEnter"}}>
        {{view treeNodeView treeComponent=treeComponent drag=drag drop=drop
              treeNode=treeNode
              isSelected=isSelected
              selectedNodesBinding="selectedNodes"}}

        {{#if buttonVisible}}
            {{!-- Only render the button when the mouse first entered the road,
                  this is necessary to speed up the application --}}
            {{tree-view-button rootNode=treeNode
                             selectedNodes=selectedNodes
                             selectedNode=selectedNode
                             operations=treeNode.operations
                             refreshBom="refreshBom"
                             treeComponent=this
                             treeNode=treeNode
                             selectedOperationName=selectedOperationName
                             selectedOperationContext=selectedOperationContext
            }}
        {{/if}}
    </div>
    <div class="tree-child-nodes collapse">
    {{#if treeNode.hasPredicates}}
        {{#if treeNode.expanded}}
            {{#if treeNode.predicates}}
                {{#each predicate in treeNode.predicates}}
                    {{tree-view-predicate predicate=predicate}}
                {{/each}}
            {{/if}}
        {{/if}}
    {{/if}}
    {{#each cldNode in treeNode.renderContent}}
        {{#if cldNode.visible}}
            {{tree-view-node treeNode=cldNode
                             treeComponent=treeComponent
                             selectedNodes=selectedNodes
                             viewSelector=viewSelector
                             expandLevel=nextExpandLevel
                             findNode=findNode
                             treeSearches=treeSearches
                             drag=drag
                             drop=drop
                             selectedOperationName=selectedOperationName
                             selectedOperationContext=selectedOperationContext}}
        {{/if}}
    {{/each}}
    </div>
</div>
