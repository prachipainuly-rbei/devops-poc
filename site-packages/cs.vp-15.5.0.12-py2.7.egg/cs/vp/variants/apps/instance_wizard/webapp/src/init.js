import {Registry} from 'cs-web-components-base';
import {combineReducers} from 'cs-web-components-externals';

import {reducer as treeReducerFactory} from 'cs-vp-tree-component';
import {reducer as tableReducerFactory} from 'cs-vp-table-component';
import {reducer as restTreeReducerFactory} from 'cs-vp-rest-tree-component';
import {
    config as configReducer,
    context as contextReducer,
    instance as instanceReducer,
    loading as loadingReducer
} from './reducers';

export const namespace = "cs-vp-instance-wizard";

// Init property tree

import treeContainerFactory from 'cs-vp-tree-component';
import {actions as treeActionsFactory} from 'cs-vp-tree-component';
import {actions as restTreeActionsFactory} from 'cs-vp-rest-tree-component';

export const PropertyTreeContainerId = 'propertyTree';
const PropertyRestTreeContainerId = PropertyTreeContainerId + '_rest';
export const PropertyTreeContainer = treeContainerFactory(namespace, PropertyTreeContainerId);
export const PropertyRestTreeActions =
    restTreeActionsFactory(namespace, PropertyRestTreeContainerId);

Registry.registerComponent(
    'cs.vp.variants.apps.instance_wizard.property_tree', PropertyTreeContainer);

// Init BOM tree

export const BOMTreeContainerId = 'bomTree';
const BOMRestTreeContainerId = BOMTreeContainerId + '_rest';
export const BOMTreeContainer = treeContainerFactory(namespace, BOMTreeContainerId);
export const BOMTreeActions = treeActionsFactory(namespace, BOMTreeContainerId);
export const BOMRestTreeActions = restTreeActionsFactory(namespace, BOMRestTreeContainerId);
Registry.registerComponent('cs.vp.variants.apps.instance_wizard.bom_tree', BOMTreeContainer);

// Init todo table
import tableContainerFactory from 'cs-vp-table-component';
import {actions as todoListActionsFactory} from 'cs-vp-table-component';
export const ToDoListContainerId = 'todoList';
export const ToDoListContainer = tableContainerFactory(namespace, ToDoListContainerId);
export const ToDoListActions = todoListActionsFactory(namespace, ToDoListContainerId);
Registry.registerComponent('cs.vp.variants.apps.instance_wizard.todo_list', ToDoListContainer);

// Init reducers

const reducers = {};
reducers[PropertyTreeContainerId] = treeReducerFactory(PropertyTreeContainerId);
reducers[BOMTreeContainerId] = treeReducerFactory(BOMTreeContainerId);
reducers[ToDoListContainerId] = tableReducerFactory(ToDoListContainerId);
reducers[PropertyRestTreeContainerId] = restTreeReducerFactory(PropertyRestTreeContainerId);
reducers[BOMRestTreeContainerId] = restTreeReducerFactory(BOMRestTreeContainerId);
reducers['config'] = configReducer;
reducers['context'] = contextReducer;
reducers['instance'] = instanceReducer;
reducers['loading'] = loadingReducer;

Registry.registerReducer(namespace, combineReducers(reducers));
