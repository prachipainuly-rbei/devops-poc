/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: list-tools.js 164057 2017-08-28 11:55:14Z gda $"
 */

 // jshint esversion:6

import {
    ROW_ID,
    ROW_SELECTED,
    ROW_VISIBLE
} from './list-constants';

export function filterList(listEntry, callback) {
    const isVisible = callback(listEntry);
    const updatedListEntry = listEntry.updateIn([ROW_VISIBLE], () => isVisible);
    if (isVisible) {
        return updatedListEntry;
    }
    else {
        // invisible entries should not be selected ...
        return updatedListEntry.updateIn([ROW_SELECTED], () => false);
    }
}

export function selectListEntry(listEntry, forThisId) {
    if (forThisId === listEntry.get(ROW_ID)) {
        return listEntry.updateIn([ROW_SELECTED], () => true);
    }
    else {
        if (listEntry.get(ROW_SELECTED)) {
            return listEntry.updateIn([ROW_SELECTED], () => false);
        }
        else {
            return listEntry;
        }
    }
}
