// jshint esversion:6

require('./app.css');

import React                                              from 'react';

import { createStore, combineReducers, applyMiddleware }  from 'redux';
import { Provider }                                       from 'react-redux';
import thunk                                              from 'redux-thunk';

import { Col, Grid, Row }                                 from 'react-bootstrap';

import listContainerFactory                               from '../index';
import { reducer as listReducerFactory }                  from '../index';
import { actions as listActionsFactory }                  from '../index';

import logger                                             from './logger';
import listdata                                           from './data';

const ListContainerId = 'List';
const ListContainer   = listContainerFactory(ListContainerId);
const ListActions     = listActionsFactory(ListContainerId);

const createStoreWithMiddleware = applyMiddleware(thunk, logger)(createStore);
let reducers = { };
reducers[ListContainerId]  = listReducerFactory(ListContainerId);

const store = createStoreWithMiddleware(combineReducers(reducers));
store.dispatch(ListActions['setInitialState'](listdata));

class DemoApp extends React.Component {
    render() {
        return (
            <Grid>
                <Row>
                    <Col xs={12} md={12} lg={12}>
                        <ListContainer {...this.props}/>
                    </Col>
                </Row>
            </Grid>
        );
    }
}

React.render(
    <Provider store={store} >
        <DemoApp/>
    </Provider>,
    document.getElementById('container')
);
