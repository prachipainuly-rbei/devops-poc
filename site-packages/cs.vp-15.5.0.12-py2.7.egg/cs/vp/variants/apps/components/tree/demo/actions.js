import wiki from './wiki';

export const FETCH_IMAGE_URL = 'FETCH_IMAGE_URL';
export const SET_IMAGE_URL = 'SET_IMAGE_URL';

const loadingUrl = 'ajax-loader.gif'
const notFoundUrl = 'notfound.jpg';

export function setImageUrl(url) {
    return {
        type: SET_IMAGE_URL,
        url
    }
}

export function fetchImageUrl(searchTerm) {
    return dispatch => {
        dispatch(setImageUrl(loadingUrl));
        wiki.getImage(searchTerm, url => {
            if (url === undefined) {
                url = notFoundUrl;
            }

            dispatch(setImageUrl(url));
        });
    }
}
