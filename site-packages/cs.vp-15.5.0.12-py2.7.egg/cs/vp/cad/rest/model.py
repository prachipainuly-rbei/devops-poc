#!/usr/bin/env powerscript
# -*- python -*- coding: iso-8859-1 -*-
#
# Copyright (C) 2013 CONTACT Software GmbH
# All rights reserved.
# http://www.contact.de/
#

from webob.exc import HTTPNotFound

from cs.vp.cad.rest import get_available_viewers_for_document

from cs.documents import Document


class AvailableViewers(object):
    def __init__(self, object_id):
        self.object_id = object_id

    def get_available_viewers(self, request):
        doc = Document.ByKeys(cdb_object_id=self.object_id)
        if doc is None:
            raise HTTPNotFound()

        return get_available_viewers_for_document(doc, request)
