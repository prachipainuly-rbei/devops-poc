# Copyright (C) 1990 - 2016 CONTACT Software GmbH
# All rights reserved.
# https://www.contact-software.com/
#

@variantmatrix
Feature: Variant matrix


@productmanager
Scenario Outline: Create a variant using just checkboxes
    Given no variants for a given product exist
    And the user opens the variant matrix
    When the user selects variant properties <properties_selected>
    And the user submits the selection with name <name>
    Then a new variant with <properties_generated> and name <name> exists

    Examples:
        | properties_selected | name           | properties_generated |
        | A,C                 | values A and C | A,C                  |
        | AA                  | value A        | A,AA                 |
        | AB                  | value A        | A,AB                 |

@productmanager
Scenario Outline: Create a variant using the dropdown
    Given no variants for a given product exist
    And the user opens the variant matrix
    When the user selects value <dropdown_value> for property <property_selected>
    And the user submits the selection with name <name>
    Then a new variant with <properties_generated> and name <name> exists
    And a new variant with value <dropdown_value> for property <property_selected> exists

    Examples:
        | property_selected | dropdown_value | name                | properties_generated |
        | AA                | AA1            | selected AA1 for AA | A,AA                 |

@productmanager
Scenario Outline: Filter variants by checkboxes
    Given no variants for a given product exist
    And the user opens the variant matrix
    And variants <variants_definition> for a given product exist
    When the user selects checkboxes <checkboxes_selected>
    Then <number> variants named <name> should be visible in the right table

    Examples:
        | variants_definition | checkboxes_selected | name    | number |
        | A,B;B,C             | B                   | A,B;B,C | 2      |
        | A,B;B,C             | A                   | A,B     | 1      |

@productmanager
Scenario Outline: Filter variants by dropdown
    Given no variants for a given product exist
    And the user opens the variant matrix
    And variants <variants_definition> for a given product exist
    When the user selects value <dropdown_value> for property <property_selected>
    Then <number> variants named <name> should be visible in the right table

    Examples:
        | variants_definition | dropdown_value | property_selected | name   | number |
        | AA:AA1;B            | AA1            | AA                | AA:AA1 | 1      |

@productmanager
Scenario Outline: Filter variants by filter
    Given no variants for a given product exist
    And the user opens the variant matrix
    And variants <variants_definition> for a given product exist
    When user types <text> in the variants filter
    Then <number> variants named <name> should be visible in the right table

    Examples:
        | variants_definition | text | name   | number |
        | AA:AA1;B            | AA1  | AA:AA1 | 1      |

@productmanager
Scenario Outline: Try to create invalid variants
    Given no variants for a given product exist
    And the user opens the variant matrix
    When the user selects a variant with definition <variants_definition>
    Then the user is not allowed to create a new variant

    Examples:
        | variants_definition |
        | AA:AA3,AB:AB1       |
