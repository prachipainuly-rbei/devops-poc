.. _`update`:

Update
======

Changes to part master data
---------------------------

New attributes
^^^^^^^^^^^^^^

* is_mbom

    Checkbox for marking mBOM-Views.
    In the search mask it is configured with the search condition =0.


* cdb_depends_on

    Reference to the eBOM-View. Only set for mBOM-Views.


* site_object_id

    Reference to the manufacturing site. Only set for mBOM-Views.


* bom_info

    An help attribute for the representation of mBOM-Views.


* cdb_copy_of_item_id

    Will be automatically set when copying a part. It contains the cdb_object_id
    of the copied part.


* materialnr_erp

    A new attribute. By default it is set equals to the part number
    when creating a new part or copying one.
    For mBOM-Views it contains the materialnr_erp of the corresponding eBOM-View.

    According to the circumstances further action may be required.
    Either you should deactivate this attribute, or
    you should integrate it in your installation as described in the following.

    If you are not planning to use the new mBOM functionality, you can deactivate
    the field materialnr_erp from masks and tables. You can then ignore the following
    points.

    1. Harmonization with an eventually already existing attribute for the
       ERP number

       If you already have an attribute for the ERP number, you have to decide
       how the two attributes should be harmonized. There are three different
       options:

       * Synchronization of the attributes
       * Replacement of the old attribute
       * Exclusive use of the old attribute

    2. Customization of the allocation of numbers for materialnr_erp

       You can customize the default allocation of numbers for the field
       materialnr_erp.

       It is important to observe the following specifications:

       * For mBOM-Views (is_mbom =1) the materialnr_erp should always equal
         the materialnr_erp of the corresponding eBOM-View.
         The materialnr_erp specifies the connection between the different
         eBOM revisions and the corresponding (site specific) mBOMs.

    3. Initialization of the materialnr_erp for the existing data.


All new attributes are visible in the tab :guilabel:`Details` of the part masks
(``tv_add_mask``, ``tv_add_mask_s``).

``materialnr_erp`` is also visible on the main tab of the part masks
(``tv_mask``, ``tv_mask_c``, ``tv_mask_s``).
Furthermore the default table for parts has also been changed accordingly (``tv_tab``).

The mentioned UI-Elements should be checked and eventually modified after updating.
If the new attributes are not used, you can remove them from all the masks and tables.


New Relationships
^^^^^^^^^^^^^^^^^

* Manifacturing Views

    1:N Relationship for the mBOM parts of the eBOM part.
    In case you are not using the new mBOM functionality,
    you can deactivate the relationship by deleting the role allocation.


New Operations
^^^^^^^^^^^^^^

* mBOM Manager

    Starts the ``mBOM Manager``

* Create Manufacturing View

    Generates the manufacturing view for the selected eBOM part.

* Carry over Manufacturing View

    Carries a manufacturing view of an old eBOM revision over to the selected
    eBOM revision.

If you are not using the new mBOM functionality you can deactivate the
operations mentioned above.
If you call these operation without an mBOM license an error message is shown.


Changes to Object Life Cycles
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The object life cycle ``Part_ERP`` has been extended with the status change
from 300 (Released for ERP) to 180 (Obsolete). This status change is
necessary so that when an mBOM view of a new eBOM revision is released,
the mBOM views of the old eBOM revisions can be set to Obsolete.
This is because for each site there should be at each time at most one released
mBOM pro materialnr_erp.

This change will not be automatically installed when updating.
If you plan to use the new mBOM functionality you should ensure that the
object life cycles (status and status changes) works with the rules mentioned
above.

Eventually you may need to modify the default implementation of the automatic
status changes.


Changes to bill of materials
----------------------------

New Operations
^^^^^^^^^^^^^^

* Replace by Manufacturing View

    Operation to replace an engineering assembly in an mBOM
    with an already existing or with a new mBOM.

    If you are not using the new mBOM functionality you can deactivate the
    operation.
    If you call this operation without an mBOM license an error message is shown.


Changes to properties and catalog properties
--------------------------------------------

New attribute value type
^^^^^^^^^^^^^^^^^^^^^^^^
* Value type ``boolean``

    Can be used for boolean properties and catalog properties.


Changes to the Variant Editor
-----------------------------

New Toolbar Button
^^^^^^^^^^^^^^^^^^

The old button :guilabel:`Show Variant in CATIA` is now a dropdown button,
which allows to show a variant in different authoring systems.
Other packages can define new operations for this button by defining
plugins.
The definition of a plugin is explained in the administration manual.
