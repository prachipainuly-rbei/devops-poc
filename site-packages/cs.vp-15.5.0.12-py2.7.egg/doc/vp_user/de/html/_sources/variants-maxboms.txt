.. _`variants-maxboms`:

Maximalstücklisten
##################

Zentral für das Variantenmanagement ist die Möglichkeit, Maximalstücklisten anhand einer ausgewählten Variante zu filtern.

Auswahlbedingungen
==================

Voraussetzung für das Filtern einer Maximalstückliste anhand einer ausgewählten Variante ist, dass zunächst entsprechende Auswahlbedingungen für die variablen Positionen der Maximalstückliste definiert werden. Das System prüft dann beim Filtern der Maximalstückliste die Merkmalbewertungen der ausgewählten Variante. Wenn diese Merkmalbewertungen eine der Auswahlbedingungen der Stücklistenposition erfüllen, wird die Stücklistenposition in die gefilterte Produktstruktur übernommen. Stücklistenpositionen, an denen keine Auswahlbedingung hängt, werden in jede gefilterte Struktur übernommen.

Die einfachste Auswahlbedingung besteht nur aus der Bewertung eines Merkmals. Dies führt zu einer Gleichung der Art :guilabel:`<Merkmal> = <Merkmalwert>`. Um eine solche Auswahlbedingung zu erstellen, ziehen Sie per |dragndrop| den Merkmalwert auf die Stücklistenposition. Sie können der Auswahlbedingung dann weitere Merkmalbewertungen hinzufügen. Hierfür ziehen Sie einen weiteren Merkmalwert auf die bestehende Auswahlbedingung. Alle Merkmalbewertungen, die an einer Auswahlbedingung hängen, werden semantisch mit ``AND`` verknüpft.

Alternativen und Optionen
=========================

Stücklistenpositionen einer Maximalstückliste, denen Auswahlbedingungen zugeordnet sind, werden semantisch in :guilabel:`Alternative` und :guilabel:`Option` unterteilt.

Von einer :guilabel:`Alternative` wird dann gesprochen, wenn zwei oder mehrere Stücklistenpositionen den gleichen Wert für das Attribut :guilabel:`Position` besitzen.

Von einer :guilabel:`Option` wird dann gesprochen, wenn es keinen gemeinsamen Wert für das Attribut :guilabel:`Position` gibt.

Alternativen und Optionen können optisch anhand ihrer Icons voneinander unterschieden werden.

.. _`filter-maxboms`:

Filtern von Maximalstücklisten
==============================

Nachdem Sie Auswahlbedingungen definiert haben, können Sie die Maximalstückliste anhand einer Variante filtern.

Filtern anhand einer gespeicherten Variante
-------------------------------------------

Sie können Maximalstücklisten anhand einer gespeicherten Variante filtern. Dafür nutzen Sie den Menüeintrag :guilabel:`Gefilterte Produktstruktur` im Kontextmenü der Variante oder die entsprechende Operation im Varianten-Editor. Alternativ können Sie in der Produktstruktur des Artikels zur Maximalstückliste eine Variante zur Filterung auswählen. Benutzen Sie dafür den Button :guilabel:`Konfiguration`, den Sie im oberen Bereich der Produktstruktur finden.

Wenn Sie eine spezielle Sicht (siehe dazu :ref:`using-views`) für die Auswertung der Maximalstücklisten markiert haben, dürfen Sie prinzipiell nur anhand Varianten dieser Sicht filtern. Das System erlaubt jedoch zusätzlich auch das Filtern anhand einer Produktvariante, sofern sich diese auf eine eindeutige Variante der markierten Sicht abbilden lässt. Dies ist genau dann der Fall, wenn im System ein eindeutiges Variantenmapping gespeichert wird, oder wenn sich eine eindeutige Variantenabbildung aus den definierten Constraints ableiten lässt.

Filtern anhand einer virtuellen Variante
----------------------------------------

Sie können Maximalstücklisten auch anhand einer nicht gespeicherten, d.h. einer rein virtuellen Variante filtern. Hierfür nutzen Sie die Operation :ref:`Produktstruktur anzeigen<variants-editor-toolbar>` des Varianten-Editors.

Wenn Sie eine spezielle Sicht zur Auswertung der Maximalstücklisten markiert haben, gelten die gleichen Hinweise wie bei den gespeicherten Varianten: um eine Maximalstückliste zu filtern, muss eine Variante der markierten Sicht ausgewählt werden.

Wenn Sie den Varianten-Editor im Sichtmodus oder im kombinierten View mit der zur Auswertung markierten Sicht aufgerufen haben, wird anhand der ausgewählten Sichtvariante gefiltert. Wenn Sie den Varianten-Editor auf Produktebene aufrufen, wird versucht, die ausgewählte Variante auf eine Sichtvariante abzubilden. Wird keine eindeutige Abbildung gefunden, erzeugt der Varianten-Editor eine entsprechende Fehlermeldung.
