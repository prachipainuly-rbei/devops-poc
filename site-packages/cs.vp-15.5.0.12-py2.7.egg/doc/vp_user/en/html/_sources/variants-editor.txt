.. _`HELPID_cs_vp_variants_editor`:
.. _`variants-editor.png`:

.. figure:: images\variants-editor.png
   :align: center

   Varianten-Editor

.. _`variants-editor`:

Varianten-Editor
################

Im Varianten-Editor können Sie Varianten eines Produkts mit all seinen Merkmalen, Constraints und Sichten (siehe für Details den Anfang des Kapitels :ref:`variants`) betrachten und einzeln festhalten.

Starten Sie den Varianten-Editor über das Kontextmenü des Produkts.

Im oberen Bereich stellt der Varianten-Editor eine Übersicht über die Stammdaten des Produkts dar. Hier wird auch das Produktbild angezeigt. Sie haben an dieser Stelle die Möglichkeit, das Produktbild zu ändern, bzw. ein neues Bild zu importieren, falls das Produkt noch keines besitzt. In diesem Bereich können Sie zudem eine Maximalstückliste auswählen, die vom Varianten-Editor für die Stücklistenoperationen eingesetzt werden soll.

Im unteren Bereich zeigt der Varianten-Editor eine tabellarische Übersicht über die Varianten, die sich aus den definierten Merkmalen und Constraints ergeben. Die Übersicht des unteren Bereichs heißt Variantenraum und zeigt die Sammlung der verschiedenen Varianten zum ausgewählten Produkt.

Die ersten vier Spalten dieser Tabelle beschreiben die einzelne Variante:

:guilabel:`Status`
   Zeigt den Status der Variante graphisch anhand eines Icons. (Siehe :ref:`variants-editor-status`)

:guilabel:`ID`
   Falls die Zeile eine schon gespeicherte Variante darstellt, enthält diese Zelle die ID der Variante.

:guilabel:`Name`
   Der manuell eingetragene Name der Variante (nur für gespeicherte Varianten).

:guilabel:`Artikel`
   Hyperlinks zu ausgeprägten Artikeln, falls vorhanden (nur für gespeicherte Varianten).

Sie haben die Möglichkeit, die Spalten anhand eines Merkmalwerts oder eines Status zu filtern.

Zudem können Sie Varianten in der Tabelle per Mausklick auswählen. Die Buttons in der Toolbar beziehen sich dann auf die aktuell ausgewählten Varianten. Um mehrere Varianten auszuwählen, benutzten Sie die Steuerung- und Shift-Taste. 
Die ersten vier Spalten der Tabelle können fixiert werden, sodass bei einer größeren Anzahl weiterer Spalten die fixierten immer sichtbar sind, während die weiteren mittels einer horizontalen Bildlaufleiste durch den sichtbaren Bereich bewegt werden können.

Varianten
=========

Der Varianten-Editor berechnet und zeigt zunächst alle möglichen Kombinationen von Merkmalwerten, die den definierten Constraints nicht widersprechen. Solche Varianten werden als *virtuelle Varianten* oder *nicht gespeicherte Varianten* bezeichnet, die nur in der aktuellen Session und auch nur im Varianten-Editor existieren.

Sie können diese virtuellen Varianten dann aber mit dem Varianten-Editor speichern. Damit entstehen im System die sogenannten *gespeicherten Varianten*. Die gespeicherten Varianten existieren dann sessionübergreifend und auch außerhalb des Varianten-Editors. Darüber hinaus können Sie für gespeicherte Varianten einen Namen und eine Beschreibung erfassen, Sie können diesen weitere Objekte zuordnen oder Sie können daraus einen neuen Artikel ausprägen.

.. _`variants-editor-status`:

Status
======

Varianten haben einen Status, welcher anzeigt, ob die Variante bereits gespeichert ist und, wenn ja, ob sie immer noch alle definierten Constraints erfüllt. Die folgenden Status sind hierbei möglich:

:guilabel:`new`
    noch nicht gespeicherte Varianten haben den Status :guilabel:`new`;

:guilabel:`ok`
    gespeicherte Varianten, die alle Constraints erfüllen, haben den Status :guilabel:`ok`;

:guilabel:`invalid`
    gespeicherte Varianten, die einem Constraint wiedersprechen, haben den Status :guilabel:`invalid`;

:guilabel:`manual`
    manuell angelegte Varianten haben den Status :guilabel:`manual`.

Der Status wird graphisch im Varianten-Editor dargestellt. Für gespeicherte Varianten ist das Objekticon vom Status abhängig.


.. _`variants-editor-toolbar`:

Toolbar
=======

Der Toolbar im Varianten-Editor stellt diverse Operationen zu Verfügung.

:guilabel:`Varianten speichern`
   Speichert die ausgewählten Varianten.

:guilabel:`Gespeicherte Varianten löschen`
   Löscht die ausgewählten gespeicherten Varianten.

:guilabel:`Varianten aus dem Lösungsraum ausschließen`
   Erzeugt für jede der ausgewählten Varianten jeweils einen Constraint, der die betrachtete Variante ungültig macht. (Siehe :ref:`variants-automatic-generated-constraints`)

:guilabel:`Artikel ausprägen`
   Prägt aus der anhand der aktuell ausgewählten Variante gefilterten Maximalstückliste einen neuen Artikel aus.

:guilabel:`CSV exportieren`
   Exportiert die angezeigte Tabelle als CSV-Datei.

:guilabel:`Produktstruktur anzeigen`
   Filtert die Maximalstückliste anhand der ausgewählten Variante und öffnet deren Produktstruktur.

:guilabel:`Stücklistenreport erzeugen`
   Filtert die Maximalstückliste anhand der ausgewählten Variante und öffnet deren Strukturstückliste als PowerReport.

:guilabel:`Variantenvergleich`
   Zeigt einen Vergleich der ausgewählten Varianten als PowerReport. Im Report werden sowohl die gefilterten Stücklisten, als auch die Varianten selbst verglichen.

:guilabel:`Variante in CATIA anzeigen`
   Falls der Maximalstückliste ein entsprechendes Max-CATIA-Modell zugeordnet ist, wird die ausgewählte Variante in CATIA angezeigt.
   Der Eintrag :guilabel:`Variante in CATIA anzeigen` für das CAD-System :guilabel:`CATIA` ist standardmäßig vorbelegt.
   Es können auch weitere Autorensysteme über einen Plugin-Mechanismus hinzugefügt werden, so dass diese ebenfalls in dem Dropdown-Menü
   aufgeführt werden. Das Hinzufügen weiterer Autorensysteme ist im Administrationshandbuch zu |cs.vp| beschrieben.

:guilabel:`Variante manuell anlegen`
   Wenn Sie für alle Spalten der Variantentabelle einen Filter definieren, kann es sein, dass der Varianten-Editor keine entsprechenden Varianten anzeigt, z.B. weil die ausgewählten Bewertungen einem definierten Constraint widersprechen. In diesem Fall besteht die Möglichkeit, über die Operation :guilabel:`Variante manuell anlegen` manuell eine neue Variante anzulegen, die genau den definierten Filtern entspricht.

.. _`variants-editor-combined-view`:

Kombinierter View
=================

Der Varianten-Editor bietet die Möglichkeit, zusätzlich zu den Produktmerkmalen und Produktvarianten, auch Sichtmerkmale und Sichtvarianten anzuzeigen. Wählen Sie hierzu eine oder mehrere Sichten aus den Dropdownmenüs neben dem Toolbar.

Die Variantentabelle zeigt dann alle erlaubten Kombinationen von Produkt- und Sichtvarianten. Die Spalten links beziehen sich auf die Produktvariante, danach kommt jeweils eine Spaltengruppe für jede ausgewählte Sicht. Für jede Sicht wird zudem die zusätzliche Spalte :guilabel:`Abbildung` angezeigt. Hier wird anhand eines Icons angezeigt, ob eine Abbildung zwischen der Produkt- und der Sichtvariante in der Datenbank gespeichert ist und ob die ggf. gespeicherte Abbildung auch gültig ist.

Toolbar
-------

Einige Buttons in der Toolbar verhalten sich im kombinierten View speziell.

:guilabel:`Varianten Speichern`
   Hiermit werden die Produkt- und Sichtvarianten sowie die Abbildung zwischen diesen gespeichert.

:guilabel:`Gespeicherte Varianten löschen`
   Hiermit werden die Produktvarianten und die zugehörigen Mappings gelöscht. Die Sichtvarianten werden jedoch nicht gelöscht.

:guilabel:`Varianten aus dem Lösungsraum ausschließen`
   Hiermit werden nur die Produktvarianten aus dem Lösungsraum ausgeschlossen.

:guilabel:`Variantenvergleich`
   Hiermit werden die Varianten der zur Auswertung der Maximalstückliste markierten Sicht verglichen.

Sichtmerkmale ein- und ausblenden
---------------------------------

Mit dem Varianten-Editor im kombinierten View haben Sie auch die Möglichkeit, Sichtmerkmale auszublenden. Somit lassen sich die definierten Constraints leicht prüfen.

Um Sichtmerkmale auszublenden benutzen Sie das Menü :guilabel:`Sichtmerkmale ein- und ausblenden` neben der Toolbar.

Wenn Sie mindestens ein Sichtmerkmal ausgeblendet haben, zeigt der Varianten-Editor den Variantenstatus und das Variantenmapping nicht mehr an. Stattdessen wird für jede Zeile die Anzahl von Sichtvarianten angezeigt, die nach dem Ausblenden auf die angezeigte Wertekombination reduziert ist.

Darüber hinaus sind in diesem Modus alle Toolbaroperationen bis auf :guilabel:`Export CSV` deaktiviert.

Varianten-Editor im Sichtkontext
================================

Sie können den Varianten-Editor auch aus dem Kontext einer Sicht heraus öffnen. Hier können Sie analog zu den Produktvarianten auch mit Sichtvarianten arbeiten.