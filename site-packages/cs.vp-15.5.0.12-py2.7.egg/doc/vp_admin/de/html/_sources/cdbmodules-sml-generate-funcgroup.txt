.. _`HELPID_cdb_op_CDB_GenerateClassification`:
.. _`cdbmodules-sml-generate-funcgroup`:

Generieren einer Sachmerkmalleiste
##################################

Nach dem Anlegen oder dem Ändern einer Sachmerkmalleiste und ihrer Sachmerkmale muss diese erstmals bzw. erneut
"generiert" werden, damit diese Änderungen für die Anwender sichtbar werden.

Das Generieren ist manuell durch Auswahl des Kontextmenüpunktes :guilabel:`Sachmerkmalleiste generieren` zur entsprechenden
Sachmerkmalsleiste anzustoßen (siehe Anwendungshandbuch |cs.vp|). Die Methoden zur Generierung finden sich in den
entsprechenden cdb.objects-Klassen.

Beim Generieren der Sachmerkmalleiste wird eine DataDictionary-Klasse
(siehe :guilabel:`CONTACT Elements Plattform: Administration und Konfiguration`, Abschnitt *Facetten*) anhand der
Eigenschaften der Sachmerkmalleiste und deren Merkmale erzeugt bzw. angepasst. Für diese Klasse wird dann die
Standardmethodik zur Erzeugung von Schema, Oberflächenelementen und Operationen angewendet. Diese Methodik wurde
um folgende Aspekte erweitert:

:guilabel:`Bezeichnung der Klasse`
   Die generierte Bezeichnung der Sachgruppenklasse kann über die Fehlermeldung mit dem Meldungs-Label
   ``cdbsml_label_desc`` festgelegt werden.
   Innerhalb der Bezeichnung können Attribute der Relation ``cdbsml_propset``
   verwendet werden. Die Konfiguration von ``pset_id + " (" + name_de + ")"`` könnte
   beispielsweise zur Laufzeit zur Ausgabe von :guilabel:`10-0280-0020-0020 (Drahtstifte)` führen.

:guilabel:`Bezeichnung der Attribute`
   Die Attributbezeichnung im Data Dictionary wird aus der
   Merkmalskennung abgeleitet. Daher können
   SQL-Schlüsselworte, wie
   z.B. ``create``, ``delete``, ``update``, ``table``, ``lower``,
   ... nicht verwendet werden. Der Bezeichner wird dabei ggf. angepasst,
   z.B. wenn er mit Zahlen oder Unterstrichen beginnt oder
   Großbuchstaben enthält.

:guilabel:`Generierung der Standardmaske`
   Enthält eine Sachmerkmalleiste Sachmerkmale, werden zunächst die
   Felder einer Template-Maske kopiert, bevor die Attribute der
   Sachmerkmalleiste in die Maske aufgenommen werden. Diese
   Template-Maske muss für die Gruppe ``public``
   definiert sein und enthält im Standard die Felder, in denen die
   SML-Bilder dargestellt werden. Für die
   Operationen :guilabel:`Information`
   und :guilabel:`Ändern` wird die
   ``sml_base_mask`` als Template
   verwendet. Existiert die ``sml_base_mask_n`` wird
   anhand dieser Template-Maske eine Neuanlagemaske generiert. Existiert sie
   nicht, wird die Ändern-Maske auch zur Neuanlage verwendet. Sollen
   spezielle Recherchemasken generiert werden,
   ist ``sml_base_mask_s`` als Template zu verwenden.

:guilabel:`Generierung der Maskenfelder`
   Die Felder ``teilenummer`` und ``t_index`` werden nicht in die Maske aufgenommen.

   Die Feldbeschriftung erfolge anhand des Properties ``pmld``.

:guilabel:`Generierung der Darstellungstabelle`
   Die Felder ``teilenummer`` und ``t_index`` werden nicht in die Tabelle aufgenommen.

   Die Feldbeschriftung erfolge anhand des Properties ``ptld``.

.. index::
    single: Property; srmt

Automatisch generierte Definitionen für Masken, Maskenelemente, Tabelle und Tabellenelemente können - wie
andere Definitionen auch - anschließend etwa bzgl. des Layouts angepasst werden. Zu beachten ist, dass diese
Anpassungen bei einer erneuten Generierung mit Property ``srmt=true`` ggf. überschrieben werden bzw. bei
``srmt=false`` vorgenommene SML-Modifikationen (neue, geänderte oder gelöschte
Merkmale) anderweitig nachgepflegt werden müssen.

.. toctree::
   :maxdepth: 2
