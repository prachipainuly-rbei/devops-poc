#!/usr/bin/env powerscript
# -*- python -*- coding: iso-8859-1 -*-
#
# Copyright (C) 1990 - 2013 CONTACT Software GmbH
# All rights reserved.
# http://www.contact.de/

from cdb import sqlapi


class ChangeBomMethodNamesAfterRefactoring(object):

    def run(self):
        fqpynames = [('cs.vp.bomcreator.wsmbomtools.ComponentStructureBOMReader',
                      'cs.vp.bomcreator.componentstructurebomreader.ComponentStructureBOMReader'),
                     ('cs.vp.bomcreator.wsmbomtools.CADBomInfoReader',
                      'cs.vp.bomcreator.cadbominforeader.CADBomInfoReader'),
                     ('cs.vp.bomcreator.wsmbomtools.CADBomInfoReaderWithReferences',
                      'cs.vp.bomcreator.cadbominforeader.CADBomInfoReaderWithReferences'),
                     ('cs.vp.bomcreator.wsmbomtools.TakeReaderFromDocument',
                      'cs.vp.bomcreator.takereaderfromdocument.TakeReaderFromDocument'),
                     ('cs.vp.bomcreator.wsmbomtools.RecursiveBOMReader',
                      'cs.vp.bomcreator.componentstructurebomreader.RecursiveBOMReader')]
        for old_name, new_name in fqpynames:
            sqlapi.SQLupdate("bom_method set class_name = '%s' where class_name = '%s'" % (new_name, old_name))


pre = []
post = [ChangeBomMethodNamesAfterRefactoring]
