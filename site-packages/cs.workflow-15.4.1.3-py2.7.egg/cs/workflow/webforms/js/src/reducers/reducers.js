/* -*- mode: javascript; coding: utf-8 -*-
 * $Id: reducers.js 177273 2018-05-17 09:24:58Z cso $
 *
 * Copyright (c) 2017 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 */

import Immutable from 'immutable';
import {DATA_FETCH_SUCCESS, DATA_FETCH_FAILURE} from '../actions/actions';
import {Console} from 'cs-web-components-base';

export default function(state = Immutable.Map(), action) {
    Console.log('reducer got ', action.type);
    switch (action.type) {
        case DATA_FETCH_SUCCESS: {
            return state.setIn(
                ["forms", action.payload.key],
                Immutable.fromJS(action.payload)
            );
        }
        case DATA_FETCH_FAILURE: {
            Console.error('Data fetch failed');
            return state.setIn(
                ["forms", action.payload.key],
                Immutable.fromJS({'edit': [], 'info': []})
            );
        }
        default: {
            return state;
        }
    }
}
