import React from 'react';
import {getAppSetup} from 'cs-web-components-base';
import {ReactRouter, browserHistory} from 'cs-web-components-externals';
import TaskFormsWrapper from './TaskFormsWrapper';
import ObjectMissing from '../components/ObjectMissing';
import {prefixNS} from '../helpers';

const basePath = getAppSetup().getIn(['appSettings', 'basePath']);
const taskPath = `${basePath}/:task_object_id`;
const formPath = `${taskPath}/:form`;

const ROUTES = (
    <ReactRouter.Switch>
        <ReactRouter.Route path={formPath} component={TaskFormsWrapper} />
        <ReactRouter.Route path={taskPath} component={TaskFormsWrapper} />
        <ReactRouter.Route component={ObjectMissing} />
    </ReactRouter.Switch>
);

const App = () => (
    <div className={prefixNS('main')}>
        <ReactRouter.Router history={browserHistory}>
            {ROUTES}
        </ReactRouter.Router>
    </div>
);

export default App;
