-- Optional Performance Optimization
-- 1. Disable proactive access checks for everybody
UPDATE cdb_setting SET default_val='0' WHERE setting_id='cs.workflow.designer' AND setting_id2='check_access_proactively'
-- 2. Remove redundant access profile assignments
UPDATE cdb_relships SET rs_acc_prof='' WHERE rs_acc_prof='Workflow components' ('cdbwf_p2task', 'cdbwf_ag2task', 'cdbwf_p2component', 'cdbwf_p2aggr')
-- 3. Add new relationship for more efficient access checks
INSERT INTO cdb_relships (name, ordering, relship_table, referer, referer_kmap, reference, reference_kmap, label, descr, node_tag, rs_profile, overlay_icon_id, show_in_mask, show_in_menu, relship_cldef, prefix_rship, prefix_ref, menugroup, projection, acl_allow, acl_errmsg, rs_acc_prof, check_on_delete, dropreferenceok, assign_catalog, assign_opname, delcheck_errmsg, rolename, cdb_module_id) VALUES ('cdbwf_p2all_components', 70, '', 'cdbwf_process', 'cdb_process_id=cdb_process_id', 'cdbwf_process_component', 'cdb_process_id=cdb_process_id;task_id=task_id', 'cdbwf_process_component', '', '', 'cdb_navigation_1_N', '', 1, 0, 'cdbwf_process_component', '', '', 100, '', '', '', 'Workflow components', 0, 0, '', '', '', 'AllProcessComponents', 'cs.workflow')
INSERT INTO cdb_rs_owner (name, cdb_module_id, role_id) VALUES ('cdbwf_p2all_components', 'cs.workflow', 'public')
