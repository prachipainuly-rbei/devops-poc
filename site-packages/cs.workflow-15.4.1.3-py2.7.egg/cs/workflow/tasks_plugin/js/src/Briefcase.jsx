/* -*- mode: javascript; coding: utf-8 -*-
 * $Id: Briefcase.jsx 182658 2018-08-22 11:58:52Z cso $
 *
 * Copyright (c) 1990 - 2018 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 */

import React from 'react';
import * as helpers from './helpers';
import {Registry} from 'cs-web-components-base';
import {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';

const TaskReferenceList = Registry.findComponent('cs-taskmanager-web-TaskReferenceList');
const Icon = Registry.findComponent('cs-web-components-base-Icon');

const ICON = '/resources/icons/byname/cdbwf_briefcase_link_obj?iotype=';

function BriefcaseWrapper({task, relship}) {
    return (
        <TaskReferenceList task={task} relship={relship} />
    );
}

function BriefcaseLabel(relship) {
    return (
        <span>
            <Icon
                className={helpers.prefixNS('briefcase-label__icon')}
                src={`${ICON}${helpers.getMode(relship)}`}
                size='sm'
            />
            <span className={helpers.prefixNS('briefcase-label__name')}>
                {relship.get('mappedName')}
            </span>
        </span>
    );
}

BriefcaseWrapper.getLabel = (relship) => (
    relship && BriefcaseLabel(relship)
);

BriefcaseWrapper.propTypes = {
    task: ImmutablePropTypes.map.isRequired,
    relship: ImmutablePropTypes.contains({
        relshipName: PropTypes.string,
        references: ImmutablePropTypes.list.isRequired,
        mappedName: PropTypes.string.isRequired
    }).isRequired
};

export default BriefcaseWrapper;
