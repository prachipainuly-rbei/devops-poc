.. _`workflow_olc`:

Statusnetz von Workflows
########################

Statusnetz einer Workflow-Vorlage
=================================

.. _`lifecycle_workflow_template.png`:

.. figure:: images/lifecycle_workflow_template.png
    :align: center

    Statusnetz einer :term:`Workflow`-Vorlage

Bestehende :term:`Workflow`-Vorlagen können nur von der Inhabern der Rollen
|role_wf_admin| und |role_wf_lib_mgr| geändert werden.

+----------+----------------------------------------+-----------+-------------+
| Status   | Beschreibung                           | Änderbar? | Verwendbar? |
+==========+========================================+===========+=============+
| |wft0|   | Initialer Status. Die Vorlage befindet | Ja        | Nein        |
|          | sich im Entwurf.                       |           |             |
+----------+----------------------------------------+-----------+-------------+
| |wft100| | Die Vorlage wird gerade für eine       | Nein      | Nein        |
|          | potentielle Freigabe geprüft.          |           |             |
+----------+----------------------------------------+-----------+-------------+
| |wft20|  | Die Vorlage ist für die Verwendung     | Nein      | Ja          |
|          | freigegeben.                           |           |             |
+----------+----------------------------------------+-----------+-------------+
| |wft40|  | Die Vorlage ist obsolet und darf nicht | Nein      | Nein        |
|          | mehr verwendet werden.                 |           |             |
+----------+----------------------------------------+-----------+-------------+

Den Status einer :term:`Workflow`-Vorlage ändern Sie über das Kontextmenü.
Wählen Sie dazu im Kontextmenü der Workflow-Vorlage die Operation
:guilabel:`Statusänderung`.

Statusnetz eines Workflows
==========================

.. _`lifecycle_workflow.png`:

.. figure:: images/lifecycle_workflow.png
    :align: center

    Statusnetz eines :term:`Workflows <Workflow>`

Der Status eines :term:`Workflows <Workflow>` wird ausschließlich vom System
bzw. dedizierten Operationen geändert. Die Operation :guilabel:`Statusänderung`
darf nicht verwendet werden. Stattdessen finden Sie die relevanten Operationen
direkt im :term:`Workflow Designer` oder Kontextmenü eines
:term:`Workflows <Workflow>`.

+----------+---------------------------------------------+-----------+--------+
| Status   | Beschreibung                                | Änderbar? | Aktiv? |
+==========+=============================================+===========+========+
| |wf0|    | Initialer Status. Der :term:`Workflow`      | Ja        | Nein   |
|          | befindet sich im Entwurf.                   |           |        |
+----------+---------------------------------------------+-----------+--------+
| |wf10|   | Der :term:`Workflow` befindet sich in der   | Teilweise | Ja     |
|          | Abarbeitung.                                |           |        |
+----------+---------------------------------------------+-----------+--------+
| |wf20|   | Der :term:`Workflow` wurde erfolgreich      | Nein      | Nein   |
|          | beendet.                                    |           |        |
+----------+---------------------------------------------+-----------+--------+
| |wf30|   | Der :term:`Workflow` wurde ohne Erfolg      | Nein      | Nein   |
|          | beendet.                                    |           |        |
+----------+---------------------------------------------+-----------+--------+
| |wf40|   | Der :term:`Workflow` wurde vor dem          | Nein      | Nein   |
|          | regulären Ende abgebrochen.                 |           |        |
+----------+---------------------------------------------+-----------+--------+
| |wf50|   | Der :term:`Workflow` pausiert.              | Teilweise | Nein   |
+----------+---------------------------------------------+-----------+--------+

:term:`Workflows <Workflow>` sorgen vollautomatisch für die Statusänderungen
ihrer :term:`Aufgaben <Aufgabe>` in |task10|. Dabei berücksichtigen sie die im
:term:`Workflow Designer` festgelegt Struktur ihrer :term:`Aufgaben <Aufgabe>`.

Wird ein :term:`Workflow` eingefroren, bleiben die Status aller
:term:`Aufgaben <Aufgabe>` unverändert. Die :term:`Aufgaben <Aufgabe>` werden
ihren Verantwortlichen allerdings nicht in |cs.taskmanager| gezeigt, während
der :term:`Workflow` sich in einem anderen Status als |wf10| befindet.

Wird ein :term:`Workflow` gestoppt, ändert er gleichzeitig den Status seiner
sich im Status |task0| oder |task10| befindlichen :term:`Aufgaben <Aufgabe>` in
|task35|.

.. note::

    Bei eingefrorenen :term:`Workflows <Workflow>` sind folgende Operationen
    nicht verfügbar:

    - :term:`Workflow` ändern,
    - Statusänderung an :term:`Aufgaben <Aufgabe>` durchführen,
    - :term:`Aufgaben <Aufgabe>` und andere Objekte des
      :term:`Workflows <Workflow>` (z.B. :term:`Mappen <Mappe>`,
      :term:`Constraints <Constraint>`, etc...) ändern, anlegen, löschen oder
      kopieren und
    - :term:`Mappeninhalt` hinzufügen oder entfernen.

.. _`task_olc`:

Statusnetz einer Workflow-Aufgabe
=================================

.. _`lifecycle_task.png`:

.. figure:: images/lifecycle_task.png
    :align: center

    Statusnetz einer :term:`Aufgabe`

Der Status einer :term:`Aufgabe` wird überwiegend vom System bzw. ihres
:term:`Workflows <Workflow>` geändert. Interaktive :term:`Aufgaben <Aufgabe>`
im Status |task10| sind die Ausnahme: Ihr Status wird von einem ihrer
Verantwortlichen manuell geändert, sobald die Bearbeitung (positiv oder
negativ) abgeschlossen ist.

+----------+-----------------------------------------------------------+
| Status   | Beschreibung                                              |
+==========+===========================================================+
| |task0|  | Initialer Status. Die :term:`Aufgabe` wartet auf ihre     |
|          | Aktivierung.                                              |
+----------+-----------------------------------------------------------+
| |task10| | Die :term:`Aufgabe` wird gerade bearbeitet.               |
+----------+-----------------------------------------------------------+
| |task20| | Die :term:`Aufgabe` wurde erfolgreich beendet.            |
+----------+-----------------------------------------------------------+
| |task30| | Die :term:`Aufgabe` wurde ohne Erfolg beendet.            |
+----------+-----------------------------------------------------------+
| |task35| | Die :term:`Aufgabe` wurde unbearbeitet abgebrochen.       |
+----------+-----------------------------------------------------------+

Anwender können die folgenden Eigenschaften von :term:`Aufgaben <Aufgabe>`
bearbeiten, für die sie selbst verantwortlich sind:

- :guilabel:`Verantwortlich`,
- :guilabel:`Fälligkeitsdatum` und
- :guilabel:`Max. Dauer`.

Dies gilt nur, solange sich die :term:`Aufgabe` im Status |task10| befindet.

.. note::

    Diese Änderungen werden in den Aktivitäten des :term:`Workflows <Workflow>`
    protokolliert und die Verantwortlichen erhalten ggf. eine
    E-Mail-Benachrichtigung.

Darüber hinaus können Anwender den Status der :term:`Aufgaben <Aufgabe>` im
Status |task10| ändern, für die sie verantwortlich sind.

Auswirkungen von Statusänderungen von Aufgaben
----------------------------------------------

Die Statusänderung einer :term:`Aufgabe` von |task10| in einen anderen Status
lässt den :term:`Workflow` seinen nächsten Schritt ausführen. In der Regel ist
dies die Statusänderung der nachfolgenden :term:`Aufgabe(n) <Aufgabe>` in den
Status |task10|.

Einige Statusänderungen haben jedoch besondere Auswirkungen:

- Die Statusänderung einer :term:`Aufgabe` vom Typ Genehmigung in |task30|
  führt zu einer sofortigen Beendigung des :term:`Workflows <Workflow>` mit dem
  Status |wf30|.
- Die Statusänderung einer :term:`Aufgabe` vom Typ Prüfung oder Genehmigung in
  |task20| bei aktivierter Option :ref:`finish_option` ändert den Status ihrer
  übergeordneten :term:`Sammelaufgabe` ebenfalls in |task20|.

Ein weiterer Sonderfall tritt ein, wenn ein :term:`Constraint` nach
Statusänderung einer :term:`Aufgabe` in den Status |task10| verletzt ist. In
diesem Fall wird die :term:`Aufgabe` in den Status |task35| versetzt.
Sequentielle Folgeaufgaben der :term:`Aufgabe` werden ebenfalls in den Status
|task35| versetzt, während parallele :term:`Aufgaben <Aufgabe>` davon unberührt
bleiben. Bricht die :term:`Constraint`-Verletzung alle restlichen
:term:`Aufgaben <Aufgabe>` des :term:`Workflows <Workflow>` ab, wird dieser in
den Status |wf30| versetzt, ansonsten hängt der Erfolg des
:term:`Workflows <Workflow>` von den verbleibenden :term:`Aufgaben <Aufgabe>`
ab.

.. _`completion_example`:

Workflow-Abschluss
==================

Bevor ein :term:`Workflow` final in den Status |wf20| oder |wf30| versetzt
wird, führt er - falls vorhanden - noch seine :term:`Abschlussaufgabe` aus.
Erst wenn die :term:`Abschlussaufgabe` in einen finalen Status versetzt wurde,
wird der :term:`Workflow` in den finalen Status versetzt.

Innerhalb der :term:`Abschlussaufgabe` kann anhand des
:term:`Constraints <Constraint>` "wf-designer: process completing successfully"
unterschieden werden, ob der :term:`Workflow` fehlschlägt oder nicht:

.. figure:: images/branched_completion.png
    :align: center

    Fallunterscheidung in der :term:`Abschlussaufgabe`
