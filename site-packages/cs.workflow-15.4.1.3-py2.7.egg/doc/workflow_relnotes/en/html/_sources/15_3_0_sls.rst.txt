.. _`15_3_0_sls`:

Service Levels
##############

cs.workflow 15.3.0.15
=====================

.. _`15_3_0_15_schema_change`:

Schema Change
-------------

The attribute ``cdb_extension_class`` has been moved from class
``cdbwf_interactive_task`` to ``cdbwf_process_component`` to silence some
unnecessary error messages while copying processes.

.. warning::
    This change makes the view ``cdbwf_interactive_task_v`` obsolete. Please
    change usage of the view in your customizing accordingly.

Visibility of Info Message
--------------------------

Please see the release notes of :ref:`10.2.1.14 <10_2_1_cancel_info_on_failure>`
for details on this change.

cs.workflow 15.3.0.13
=====================

.. _`15_3_0_13_svcuser`:

Dedicated Service User
----------------------

The arguments of service `cs.workflow.services.WFServer` have been changed. They
should not contain a stringified dict anymore, but valid command line arguments.
Existing service configurations will be updated automatically.

The service now requires the argument `--svcuser` containing a valid user ID.
This user is a proxy for the service's license checks.

The service will _not_ start if no valid svcuser is given.

.. warning::
    The service user is shipped with cs.workflow, but will most likely not be
    created due to the update mode of the class ``cdb_person``. Make sure to
    revert the ``DELETED`` patch containing the user ``cs.workflow.svcuser`` or
    use a custom ``--svcuser`` for the ``WFServer``.

.. warning::
    As a result of this change, cs.workflow 15.3.0.13 requires |con15| SL 58 or
    newer.

.. _`15_3_0_13_completing_ok`:

Flag for Processes Completing Successful
----------------------------------------

Previously, if a process is completing successfully so far was calculated in
powerscript. To make the mechanism more predictable, it is replaced by the
persistent attribute ``cdbwf_process.completing_ok``:

- The attribute will contain a ``1`` for processes in status 0 (NEW) or 10
  (READY). The object lifecycle ``cdbwf_process`` takes care of this.
- Cancelling or dismissing a workflow sets the attribute to ``0`` before
  entering the completion task.

The attribute replaces
``cs.workflow.schemacomponents.SchemaComponent._processCompletingSuccessfully``,
which is removed completely. It will be used in the object rule
``wf-designer: process completing successfully`` instead.

The attribute will be initialized by an update script as follows:
- 1 for processes neither in status 30 (CANCELLED) nor 40 (DISMISSED)
- 0 for processes in status 30 (CANCELLED) and 40 (DISMISSED)

.. |con15| replace:: CONTACT Elements 15
