.. -*- rst -*-

Workflow Object
===============

The APIs to manage a workflow object are defined in the standard object class
`cs.workflow.processes.Process` and an interface class
`cs.workflow.designer.wfinterface.Process`, which enable some advanced APIs
on the standard object class to handle workflow programmatically.

.. autoclass:: cs.workflow.processes.Process
   :members: CreateProcess,
             SimplifyStructure,
             isActivatable,
             activate_process,
             isHoldable,
             onhold_process
             isCancelable,
             cancel_process,
             isDismissable,
             dismiss_process,
             close_process           

   .. method:: AddAttachment(object_id)

        Add an object to the attachment briefcase of this process.

   .. method:: RemoveAttachment(object_id)

        Remove an object from the attachment briefcase of this process.

   .. method:: AddConstraint(rule_name, invert_rule=0, task_id=None, briefcase_id=None)

        Add a constraint to the process.

        :param rule_name: the name of a cdb object rule.

        :param invert_rule: if negative, the object rule is inverte.d
        :type invert_rule: either 0 or 1.

        :param task_id: the id of a task in the process (optional).

        :param briefcase_id: the id of a briefcase in the process (optional);
                             if a task_id is specified, the briefcase should
                             be assigned to the given task
                             or be a global briefcase.

   .. method:: CreateTask(ttype, title, relative_position=None, other_task=None, **kwargs)

        Add a new task to the workflow.

        If the workflow has no task group, a parallel task group is created.
        Otherwise it is possible to add a task, specifying the relative
        position (before, after, parallel) of the new task with regard
        to another task (other_task)

        The workflow should have no tasks and at most one task group.
        Otherwise an exception is raised.

        :param ttype: type of the new task
        :type ttype: one of ['execution', 'approval', 'examination', 'system']

        :param title: title of the new task
        :type title: string

        The following parameters are optional

        :param subject_id: ID of the responsible for the new task
        :type subject_id: string

        :param subject_type: type of the responsible for the new task
        :type subject_type: one of ['Person', 'Common Role', 'PCS Role']

        :param deadline: deadline for the new task
        :type deadline: string formatted as in "14.09.1983"

        :param description: description of the new task
        :type description: string

        :param finish_option: flag to close the process early in case of
                              success
        :type finish_option: integer

        :param task_definition_id: cdb_object_id of the system task
                                   definition for the new tag,
                                   only for system tasks
        :type task_definition_id: a cdb_object_id

        :param parameters: parameters of the system task
        :type parameters: dictionary

        :raises: cdb.ue.Exception

   .. method:: CreateBriefcase(name)

        Interface method to create a briefcase. Checks permissions
            and executes user exits.

   .. method:: SaveAsTemplate(self)

        Save the current workflow as template. A new database object is
        created.

        :returns: the new template as a cs.workflow.processes.Process
                      object.

   .. method:: ModifyProcess(**kwargs)

        Interface method to modify the current process.
            Checks permissions and executes user exits.
