.. _`design_system_guidelines_selection`:

Selection
#########

Selection is the process of determining which members of a set are the input for an action.
The input can be evaluated immediately following a change in the selection state, or at a later stage determined by the user.

Selection Patterns
==================

There are many scenarios in Elements UI that involve selection, and different components supporting them.
This section illustrates three common selection components.

Table Selection
----------------

Tables are typically used for determining on which objects an operation is performed.
The user first selects objects, then an operation to be performed on them.

.. image:: images/guidelines_selection_object.png

Menu Selection
--------------

Choosing a menu item in a menu.
Typically, the according behavior is immediately triggered on selection.

.. image:: images/guidelines_selection_menu.png

Form Selection
--------------

Checking entries in a form in order to set a boolean attribute or choose an option.
A change in selection state can be evaluated immediately or at a later stage.

.. image:: images/guidelines_selection_form.png

Selection States
================

In most cases, a single selectable is in one of two UI states regarding selection: unselected or selected.

.. note:: These are transient UI states as opposed to persistent object states.
  They only pertain to the current, local selection context.
  Selection states are indicated by visual cues in the interface.

Unselected
----------

By default, members are unselected.
An unselected and not disabled member can be selected via selection mechanisms.
Unselected members are not visually highlighted, and any selection controls are in the 0 or empty state.

.. image:: images/guidelines_selection_unselected.png

Selected
--------

A selected member is the input to an action that follows either immediately or is triggered at a later stage.
It is visually highlighted in order to distinguish it from unselected members.
A selected and not disabled member can always be deselected by selecting an unselected member or by using selection mechanisms.
Corresponding selection controls are set to 1 or full state.

.. image:: images/guidelines_selection_selected.png

Indeterminate
-------------

Form selection can necessessitate indicating that a member is neither selected nor unselected.
For instance, for queries on boolean attributes the indeterminate state results in entries with both values being returned.

.. image:: images/guidelines_selection_indeterminate.png

Selection Mechanisms
====================

Selection can be performed via mouse or keyboard, using the *selection area* or *selection controls*.

Selection Area
--------------
The selection state is changed by focussing and triggering the selection area via mouse or keyboard.
A member's selection area typically encompasses the rectangle representing it *minus* the areas of other interactive elements that are part of the member representation (controls or links).

.. image:: images/guidelines_selection_area.png

.. note:: The selection area fill color is changed for selected state, cursor feedback, or highlighting (see below).

Selection Controls
------------------

**Member Selection Controls:** Member selection controls correspond to the selection state of a single member of a set.
They serve both as a control for changing the member's selection state and as a display of its current selection state.

.. image:: images/guidelines_selection_controls-member.png

**Set Selection Controls:** Set selection controls can aid managing selection states of large sets.
As opposed to member selection controls these are not related to a single member of a set.
Thus they are displayed outside of the set area so as not to be confused with member selection controls.
Layout should indicate clearly which set the control is associated with.

Like member selection controls, set controls serve both for controlling and displaying selection state, in their case the aggregate state of the set.

As a *control* they transfer its state to the set: if the set control is changed to selected, all members of the set are selected.
If the set control is changed to unselected, all members of the set are unselected.

As a *display* of the set's aggregate selection state, if all members of the set are in the same state, it represents that state, else indeterminate.

.. image:: images/guidelines_selection_controls-set.png

Any hierarchy of members is disregarded in selection.
In contrast to set selection, member selection always only selects a single member, regardless of whether it is a parent or child node.
Thus, even if child members represent a part of the parent, selecting the parent does not automatically select all children.

.. image:: images/guidelines_selection_hierarchies.png

Disabling Selection
===================

Selection mechanisms may be disabled.
In this case visual cues should tune down the affordance of selecting the member, and selection mechanisms no longer apply to this member.

Related States
==============

There are further transient or persistent member states that may need to be visualized in the UI.
The ones listed here are either conceptually related, employ similar (competing) strategies for visual cues, or are included for the sake of distinction.

Active
------

An active member has already been engaged and evaluated, its results typically being displayed in the current UI.
Examples are objects that are currently being previewed or a setting that determines the current UI layout.
By deselecting an active member it is disengaged and any consequences for the UI (a different layout setting or changed preview) should be immediately rendered.

.. image:: images/guidelines_selection_active-split.png

.. image:: images/guidelines_selection_active-settings.png

Cursor Feedback
---------------

In order to guide attention and ease selection, the mouse cursor should be supplemented with hover feedback for selectable members.
In order to enable efficient keyboard control, the current keyboard cursor should be denoted with a visual cue.
The area of visual feedback should be congruent with the bounding box of the selection area.
Apart from this, mouse and keyboard cursor/hover cues must be distinguishable from selection state cues.
Disabled members should not react to cursor input.

.. image:: images/guidelines_selection_cursors.png

Highlighting
------------

Highlighting is a mechanism for visually guiding attention to certain members of a set.
An example use for highlighting is displaying search filter results.
Highlighting should not interact with selection, and visual cues for selection override those for highlighting.

.. image:: images/guidelines_selection_highlighting.png

Other States
------------

Often other states will be displayed as part of a member's representation.
These are typically persistent states such as object lifecycle states, read/write states, or visibility.
As these are not related to selection states it is important to keep visual representation distinguishable from selection patterns.
A typical solution is to represent an object state with an icon.
If controls such as checkboxes are used for other states, they must be made as distinguishable from selection controls as possible, e. g. through layout.

.. image:: images/guidelines_selection_other-states.png


Selection Persistence
=====================

When displaying member selection, the user should always be able to recognize which members are currently selected. To permanently indicate the selection is a key challenge.
The following cases show how the selection state is displayed while varying the view on data.

Collapsing Behavior
-------------------

Collapsing members does not alter the selection states of sub-members. The selection of sub-members remains. 
The member (parent node) itself only shows its current selection state, it does not indicate the selection of the sub-members.

.. image:: images/guidelines_selection_collapsing.png

.. NOTE:: *Do not* confuse member controls with the set controls. Set controls involve the indeterminate selection state, member controls don't (see caption "Selection Controls").

Filtering Behavior
------------------

As well as while collapsing, member selection remains while filtering a table.

.. image:: images/guidelines_selection_filter.png


View Change Behavior
--------------------

When selecting one or more members in a table and then changing the view to a structure tree (or a structure view), the selection remains.

Behavior: 

* All parent members of the structure will be collapsed *except* those parent members which include a selection – these are expanded.

* If a selection is in a “deeper level”, all parent members of the object are displayed, but no sibling members. 

* If the structure (tree) is longer than the viewport, the selected members (with the parent member) is in the focus of the viewport. 

* In case of a multi selection, the hierarchically top-most member is in the viewport.

.. image:: images/guidelines_selection_changeview.png