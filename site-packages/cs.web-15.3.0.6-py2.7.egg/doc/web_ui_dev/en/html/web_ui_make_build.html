

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building web applications &mdash; Web UI Development</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Web UI Development" href="index.html"/>
        <link rel="up" title="Building And Deployment" href="web_ui_make.html"/>
        <link rel="next" title="Implementing Web Applications" href="web_ui_app_impl_tut.html"/>
        <link rel="prev" title="Generating documentation" href="web_ui_make_doc.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="/doc/en" class="icon fa-book">
            Documentation Portal
          </a>
        

        
          <a href="index.html" class="icon icon-home"> Web UI Development
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="web_ui_technical.html">Web UI technical background</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_ui_technical.html#rendering-an-application">Rendering an application</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_technical.html#disable-cache-in-development-scenarios">Disable cache in development scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_technical.html#frontend-registry">Frontend Registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_technical.html#immutable-objects">Immutable objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_technical.html#styling">Styling</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_technical.html#rd-party-javascript-libraries">3rd party JavaScript libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_technical.html#development-toolchain">Development toolchain</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_dev_guidelines.html">Guidelines for developing Web UI applications and components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_ui_dev_guidelines.html#babel-presets">Babel Presets</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_dev_guidelines.html#javascript-style-guide">JavaScript style guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_dev_guidelines.html#react-style-guide">React style guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_dev_guidelines.html#naming-rules">Naming rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_dev_guidelines.html#promise">Promise</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_dev_guidelines.html#error-boundaries">Error Boundaries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_branding.html">Branding and Styling</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_ui_branding.html#overriding-styles">Overriding styles</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_branding.html#customizing-fonts">Customizing Fonts</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_branding.html#image-urls">Image URLs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_configuration.html">Configuring Web Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_ui_configuration.html#basic-configuration-framework">Basic configuration framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_configuration.html#application-page">Application Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_configuration.html#generic-page">Generic Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_configuration.html#object-page">Object Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_configuration.html#class-page">Class Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_configuration.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_configuration.html#configuration-files-for-components">Configuration files for components</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_configuration.html#outlets">Outlets</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_configuration.html#display-contexts">Display Contexts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_operations.html">Kernel operations and the Web UI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_ui_operations_config.html">Web UI Operation Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_operations_hooks.html">Dialog Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_operations_restrictions.html">Restrictions running operations with WEB UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_operations_ui.html">Integrating Operation Handling into User Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_operations_examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_wincdb.html">Embedded Web Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_ui_wincdb.html#handling-modifications-in-embedded-web-applications">Handling Modifications in Embedded Web Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_history.html">Recently Used Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_plugins.html">Frontend Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_ui_plugins.html#plugin-configuration">Plugin configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_plugins.html#cs-web-components-plugin-config">cs.web.components.plugin_config</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_dashboard.html">The Dashboard</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_ui_dashboard.html#design">Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_dashboard.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_dashboard.html#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="web_ui_make.html">Building And Deployment</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="web_ui_make_create.html">Creating an application template</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_make_doc.html">Generating documentation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Building web applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_app_impl_tut.html">Implementing Web Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_ui_app_impl_tut_layout.html">Application Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_app_impl_tut_backend.html">Backend-specific tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_app_impl_tut_frontend.html">Frontend-specific tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_app_impl_tut_i18n.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_app_impl_tut_customize.html">Customizing BaseApp</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing cs.web Web Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="testing.html#testing-with-selenium">Testing with Selenium</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_jsdoc.html">App Development References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_ui_jsdoc.html#python-apis">Python APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_jsdoc.html#javascript-apis">Javascript-APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_jsdoc.html#known-problems">Known Problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_ui_jsdoc.html#concept-for-selected-objects">Concept for selected objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_ui_dev_glossary.html">Glossary</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Web UI Development</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="web_ui_make.html">Building And Deployment</a> &raquo;</li>
      
    <li>Building web applications</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/web_ui_make_build.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="building-web-applications">
<h1>Building web applications<a class="headerlink" href="#building-web-applications" title="Permalink to this headline">¶</a></h1>
<p>As explained in section <a class="reference internal" href="web_ui_technical.html#web-ui-technical"><span class="std std-ref">Web UI technical background</span></a>, application bundles
and their dependencies are transformed into bundles using webpack,
while dependency management is done using yarn, the npm replacement.</p>
<p>How these utilities are integrated with <code class="docutils literal"><span class="pre">webmake</span></code> is explained in
section <a class="reference internal" href="#web-ui-make-build-process"><span class="std std-ref">The build process</span></a>. Web applications are usually
defined inside Python packages in a cdb application package (c.f.
<a class="reference internal" href="web_ui_app_impl_tut_layout.html#web-ui-app-impl-tut-layout"><span class="std std-ref">Application Layout</span></a>). These can be either specified
manually, or read from <code class="docutils literal"><span class="pre">apps.json</span></code>
(c.f. <a class="reference internal" href="#web-ui-make-build-apps-json"><span class="std std-ref">The apps.json File</span></a>).</p>
<div class="section" id="the-build-process">
<span id="web-ui-make-build-process"></span><h2>The build process<a class="headerlink" href="#the-build-process" title="Permalink to this headline">¶</a></h2>
<p>While web applications are implemented in ES6, these sources must be
bundled and transpiled to be served to the browser. This is achieved
by the utilities <code class="docutils literal"><span class="pre">yarn</span></code> (for dependency management) and <code class="docutils literal"><span class="pre">webpack</span></code>
(for transpilation and bundling). Additionally, a global stylesheet is
generated from all SCSS style definitions.</p>
<p>These commands are integrated into <code class="docutils literal"><span class="pre">webmake</span></code> as follows:</p>
<ul class="simple">
<li>the command <code class="docutils literal"><span class="pre">webmake</span> <span class="pre">devupdate</span></code> copies the template file
<code class="file docutils literal"><span class="pre">package-base.json</span></code> from <code class="docutils literal"><span class="pre">cs.web</span></code> as <code class="docutils literal"><span class="pre">package.json</span></code> into the
instance directory and runs <code class="docutils literal"><span class="pre">yarn</span> <span class="pre">install</span></code> inside it.</li>
<li>the command <code class="docutils literal"><span class="pre">webmake</span> <span class="pre">build</span> <span class="pre">&lt;pkg-name&gt;</span></code> builds package
<code class="docutils literal"><span class="pre">&lt;pkg-name&gt;</span></code>, e.g., <code class="docutils literal"><span class="pre">cs.web</span></code>, i.e., it runs <code class="docutils literal"><span class="pre">yarn</span> <span class="pre">install</span></code> to
install missing dependencies, and <code class="docutils literal"><span class="pre">webpack</span></code> to create an
application bundle.</li>
<li>the command <code class="docutils literal"><span class="pre">webmake</span> <span class="pre">yarn</span> <span class="pre">&lt;pkg-name&gt;</span> <span class="pre">&lt;command&gt;</span></code> runs an arbitrary
<code class="docutils literal"><span class="pre">yarn</span></code> command.</li>
<li>the command <code class="docutils literal"><span class="pre">webmake</span> <span class="pre">webpack</span> <span class="pre">&lt;pkg-name&gt;</span></code> runs <code class="docutils literal"><span class="pre">webpack</span></code> on the
web applications in package <code class="docutils literal"><span class="pre">&lt;pkg-name&gt;</span></code>. Usually, during
development you simply invoke <code class="docutils literal"><span class="pre">webpack</span></code>, and only call <code class="docutils literal"><span class="pre">build</span></code> if
dependencies have changed.</li>
<li>the command <code class="docutils literal"><span class="pre">webmake</span> <span class="pre">styles</span></code> compiles the global stylesheet
<code class="docutils literal"><span class="pre">global-styles.css</span></code> into the instance directory.</li>
</ul>
<p>Additional commands exist to clean files generated during the build
process:</p>
<ul class="simple">
<li>the command <code class="docutils literal"><span class="pre">webmake</span> <span class="pre">cache-clean</span></code> cleans up the cache of
<code class="docutils literal"><span class="pre">only-if-changed</span></code> (see below).</li>
<li>the command <code class="docutils literal"><span class="pre">webmake</span> <span class="pre">clean</span></code> cleans up the cache of
<code class="docutils literal"><span class="pre">only-if-changed</span></code>, the <code class="docutils literal"><span class="pre">node_modules</span></code> folders created by
<code class="docutils literal"><span class="pre">yarn</span></code>, as well as the <code class="docutils literal"><span class="pre">bundle</span></code> files created by <code class="docutils literal"><span class="pre">webpack</span></code>.</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">webpack</span></code> command allows the path of the app as an optional
parameter. If provided, the command will be carried out for this
app in its respective directory. If it is omitted,
the command will be run for all web
application bundles specified in <code class="docutils literal"><span class="pre">apps.json</span></code>
(c.f. <a class="reference internal" href="#web-ui-make-build-apps-json"><span class="std std-ref">The apps.json File</span></a>).</p>
<p>Standard web application bundles shipped by CONTACT Software GmbH use
the npm <code class="docutils literal"><span class="pre">only-if-changed</span></code> package, which suppresses <code class="docutils literal"><span class="pre">webpack</span></code>, if the
timestamp of all source files is not newer than a timestamp cached by
the package during the last call of <code class="docutils literal"><span class="pre">webpack</span></code>. Note that this does only
consider changes to the file’s timestamp. If, e.g., the build
configuration is changed, the build cache needs to be invalidated
manually by invoking <code class="docutils literal"><span class="pre">webmake</span> <span class="pre">cache-clean</span></code>.</p>
</div>
<div class="section" id="the-apps-json-file">
<span id="web-ui-make-build-apps-json"></span><h2>The <code class="docutils literal"><span class="pre">apps.json</span></code> File<a class="headerlink" href="#the-apps-json-file" title="Permalink to this headline">¶</a></h2>
<p>The commands explained above usually either work on a single web
application bundle or on all bundles defined inside an application. In
order to find these bundles a file <code class="docutils literal"><span class="pre">apps.json</span></code> is created on the top
level of the application package. This file contains a list of paths to the
javascript bundle roots, relative to application package
root.</p>
<p>E.g., suppose you have an application in the folder <code class="docutils literal"><span class="pre">my.application</span></code>
and the Javascript roots (the folder containing your
<code class="docutils literal"><span class="pre">webpack.config.js</span></code> and <code class="docutils literal"><span class="pre">package.json</span></code>) of your web application
bundles in the folders <code class="docutils literal"><span class="pre">my.application/my/application/user_app/js</span></code> and
<code class="docutils literal"><span class="pre">my.application/my/application/news_app/js</span></code>, then you should have an
<code class="docutils literal"><span class="pre">my.application/apps.json</span></code> file, containing</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="s2">&quot;my/application/user_app/js&quot;</span><span class="p">,</span>
    <span class="s2">&quot;my/application/news_app/js&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Then you may build the web bundles in your application by issuing</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; webmake build my.application
...
$&gt; webmake styles
</pre></div>
</div>
<p>To build only one specific bundle, e.g. <code class="docutils literal"><span class="pre">user_app</span></code> issue</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$&gt; webmake webpack my.application my/application/user_app/js
</pre></div>
</div>
<p>Note that this file is necessary for integration with setuptools and
snapp.</p>
</div>
<div class="section" id="integration-with-setuptools-and-snapp">
<span id="web-ui-make-build-setuptools"></span><h2>Integration with setuptools and snapp<a class="headerlink" href="#integration-with-setuptools-and-snapp" title="Permalink to this headline">¶</a></h2>
<p><em>setuptools:</em> The <code class="docutils literal"><span class="pre">webmake</span></code> commands <code class="docutils literal"><span class="pre">build</span></code> and <code class="docutils literal"><span class="pre">clean</span></code> are
integrated into setuptools. The CONTACT Elements setuptools extension in
<code class="docutils literal"><span class="pre">cdb.comparch.pkgtools.setup</span></code> searches for an <code class="docutils literal"><span class="pre">apps.json</span></code> in the
current working directory (which should be the package directory
during buildout process). When an <code class="docutils literal"><span class="pre">apps.json</span></code> file exists,
setuptools will assume that web-specific tasks need to be carried out
during development and deployment. It will</p>
<ul class="simple">
<li>extend the setuptools commands <code class="docutils literal"><span class="pre">bdist_egg</span></code> and <code class="docutils literal"><span class="pre">develop</span></code> to
invoke the <code class="docutils literal"><span class="pre">build</span></code> command of <code class="docutils literal"><span class="pre">webmake</span></code>
(c.f. <code class="docutils literal"><span class="pre">cdb.comparch.pkgtools.apply_npm_wrappers</span></code>).</li>
<li>include web-specific files which would not be included in the
default data_files (c.f. <code class="docutils literal"><span class="pre">cdb.comparch.pkgtools.add_web_files</span></code>).</li>
</ul>
<p><code class="docutils literal"><span class="pre">bdist_egg</span></code> will result in a production build (using <code class="docutils literal"><span class="pre">webpack</span>
<span class="pre">-p</span></code>), while <code class="docutils literal"><span class="pre">develop</span></code> will result in a development build. Since
this change in configuration is not detected by <code class="docutils literal"><span class="pre">only-if-changed</span></code>,
the cache needs to be cleared for this to work. While <code class="docutils literal"><span class="pre">bdist_egg</span></code>
cleans the cache before invoking <code class="docutils literal"><span class="pre">webpack</span></code>, this needs to be done
manually by invoking <code class="docutils literal"><span class="pre">webmake</span> <span class="pre">cache-clean</span> <span class="pre">&lt;pkg-name&gt;</span></code>.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="web_ui_app_impl_tut.html" class="btn btn-neutral float-right" title="Implementing Web Applications" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="web_ui_make_doc.html" class="btn btn-neutral" title="Generating documentation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Contact Software.
      Last updated on 01.11.2018.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'15.3.0.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>