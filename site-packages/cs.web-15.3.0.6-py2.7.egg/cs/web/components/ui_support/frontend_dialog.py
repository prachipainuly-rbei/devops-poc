#!/usr/bin/env powerscript
# -*- python -*- coding: iso-8859-1 -*-
#
# Copyright (C) 2017 CONTACT Software GmbH
# All rights reserved.
# http://www.contact-software.com
#

"""
API to define dialogs that are shown from a hook function in the frontend.
"""

__revision__ = "$Id: frontend_dialog.py 169544 2017-11-29 09:06:51Z cla $"


class FrontendDialog(object):

    # `action` values for dialog buttons, must match the values in the fontend!
    ActionSubmit = 'SUBMIT'                # Submit the operation to the backend
    ActionCancel = 'CANCEL'                # Cancel the operatoion
    ActionCallServer = 'CALL_SERVER'       # Call the backend hooks again
    ActionBackToDialog = 'BACK_TO_DIALOG'  # Show the operation dialog again

    def __init__(self, title, text, argument_name=None):
        self.title = title
        self.text = text
        self.argument_name = argument_name
        self.buttons = []

    def add_button(self, label, value, action, is_default=False, is_cancel=False):
        self.buttons.append({"label": label,
                             "value": value,
                             "action": action,
                             "isDefault": is_default,
                             "isCancel": is_cancel})

    def to_json(self):
        return {"title": self.title,
                "text": self.text,
                "argumentName": self.argument_name,
                "buttons": self.buttons}
