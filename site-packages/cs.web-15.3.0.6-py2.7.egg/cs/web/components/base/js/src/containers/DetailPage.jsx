/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: DetailPage.jsx 162169 2017-07-26 08:20:12Z yzh $"
 */

import React from 'react';
import {PropTypes, ReactRouter, browserHistory} from 'cs-web-components-externals';
import {getAppSetup} from '../helpers.js';
import wrapDetail from './detail-wrapper.jsx';
import NoRouteError from './NoRouteError.jsx';

const basePath = getAppSetup().getIn(['appSettings', 'basePath']);

export default function DetailPage(props) {
    const {frameComponent: FrameComponent, detailView} = props;
    const detailPath = `${basePath}/:object_keys`;
    return (
        <FrameComponent>
            <ReactRouter.Router history={browserHistory}>
                <ReactRouter.Switch>
                    <ReactRouter.Route path={detailPath} component={wrapDetail(detailView)} />
                    <ReactRouter.Route component={NoRouteError} />
                </ReactRouter.Switch>
            </ReactRouter.Router>
        </FrameComponent>
    );
}

const propTypeComponent =
    PropTypes.oneOfType([
        PropTypes.func,
        PropTypes.instanceOf(React.Component)]).isRequired;

DetailPage.propTypes = {
    frameComponent: propTypeComponent,
    detailView: propTypeComponent
};
