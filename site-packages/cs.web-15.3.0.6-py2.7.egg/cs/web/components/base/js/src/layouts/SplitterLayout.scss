/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id$"
 */

.#{$componentNameSpace}-{

  $splitter-size: 1rem;
  $splitter-margin: 2rem;
  $splitter-position: ($splitter-margin + $splitter-size) / -2.0;
  $collapser-size: 0.6rem;  // size of the small collapser symbol
  $splitter-padding: ($splitter-size - $collapser-size) / 2.0;
  $resizer-size: 1.4rem;  // size of the small bar symbol
  $resizer-thickness: 0.2rem;  // thickness of the small bar symbol
  $resizer-margin1: 0.5rem;  // margin of the small bar symbol to symbols
  // margin of the small bar symbol to border
  $resizer-margin2: ($collapser-size - $resizer-thickness) / 2.0;

  &splitter-layout {
    display: flex;
    height: 100%;
    width: 100%;
  }

  &splitter-layout__pane {
    position: relative;
  }

  &splitter-layout__pane--collapsed > :not(.#{$componentNameSpace}-splitter-layout-splitter) {
    display: none;
  }

  &splitter-layout__pane--fix-size {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    overflow: hidden;
  }

  &splitter-layout__pane--primary {
    flex-grow: 1;
  }

  &splitter-layout__pane--secondary {
    flex-shrink: 1;
  }

  &splitter-layout-splitter {
    position: absolute;
    color: $gray;
    background-color: $gray-lighter;
    border-radius: $splitter-size * 0.4;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    justify-content: center;
  }

  &splitter-layout-splitter svg {
    width: $collapser-size;
    height: $collapser-size;
  }

  &splitter-layout-splitter svg > * {
    fill: currentColor;
  }

  &splitter-layout__pane--collapsed &splitter-layout-splitter svg {
    // collapsed state: turn the symbol to show expanding direction(inverted, rightwards)
    transform: scale(-1, 1);
  }

  &splitter-layout-splitter__resizer {
    width: $resizer-thickness;
    max-height: $resizer-size;
    flex: 1 1 $collapser-size;
    background-color: $gray;
    margin: $resizer-margin1 $resizer-margin2;
  }

  &splitter-layout-splitter--resizing {
    color: $white-base;
    background-color: $elements-primary;
  }

  &splitter-layout-splitter--resizing &splitter-layout-splitter__resizer {
    background-color: $white-base;
  }

  &splitter-layout__pane--collapsing &splitter-layout-splitter--resizing {
    background-color: $elements-info;
  }

  &splitter-layout-splitter--collapsible {
    cursor: pointer;
  }

  &splitter-layout--horizontal {
    flex-flow: row nowrap;
  }

  &splitter-layout--horizontal > &splitter-layout__pane {
    height: 100%;
  }

  &splitter-layout--horizontal > &splitter-layout__pane--secondary {
    margin-right: $splitter-margin;  // reserve place to show splitter
    min-width: 0px;
  }

  &splitter-layout--horizontal > &splitter-layout__pane--primary ~ &splitter-layout__pane--secondary {
    margin-left: $splitter-margin;  // secondary pane on the right side should have left splitter
    margin-right: 0;
  }

  // splitter on the right side
  &splitter-layout--horizontal > &splitter-layout__pane > &splitter-layout-splitter {
    top: 0px;
    bottom: 0px;
    right: $splitter-position;  // showing in the margin area of that secondary pane
    width: $splitter-size;
    padding: 0 $splitter-padding 0 $splitter-padding;
  }

  &splitter-layout--horizontal >
  &splitter-layout__pane.#{$componentNameSpace}-splitter-layout__pane--hiding > &splitter-layout-splitter {
    left: 0px;
    width: auto;
  }

  &splitter-layout--horizontal > &splitter-layout__pane > &splitter-layout-splitter--resizable {
    cursor: col-resize;
  }

  // splitter on the left side
  &splitter-layout--horizontal >
  &splitter-layout__pane--primary ~ &splitter-layout__pane--secondary > &splitter-layout-splitter{
    right: auto;
    left: $splitter-position;
    // mirroring the right-side-styled splitter (default rightwards, collapsed leftwards)
    transform: scale(-1, 1);
  }

  &splitter-layout--horizontal >
  &splitter-layout__pane--primary ~
    &splitter-layout__pane--secondary.#{$componentNameSpace}-splitter-layout__pane--hiding >
  &splitter-layout-splitter {
    right: 0px;
    width: auto;
  }

  &splitter-layout--vertical {
    flex-flow: column nowrap;
  }

  &splitter-layout--vertical > &splitter-layout__pane {
    width: 100%;
  }

  &splitter-layout--vertical > &splitter-layout__pane--secondary {
    margin-bottom: $splitter-margin;
    min-height: 0px;
  }

  &splitter-layout--vertical > &splitter-layout__pane--primary ~ &splitter-layout__pane--secondary {
    margin-top: $splitter-margin;
    margin-bottom: 0;
  }

  // splitter on the bottom side
  &splitter-layout--vertical > &splitter-layout__pane > &splitter-layout-splitter {
    left: 0px;
    right: 0px;
    bottom: $splitter-position;
    height: $splitter-size;
    flex-direction: row;
    padding: $splitter-padding 0 $splitter-padding 0;
  }

  &splitter-layout--vertical >
  &splitter-layout__pane.#{$componentNameSpace}-splitter-layout__pane--hiding > &splitter-layout-splitter {
    top: 0px;
    height: auto;
  }

  &splitter-layout--vertical > &splitter-layout__pane > &splitter-layout-splitter svg {
    transform: rotate(90deg);
    transform-origin: center;
  }

  &splitter-layout--vertical &splitter-layout__pane--collapsed &splitter-layout-splitter svg {
    // collapsed state: turn the symbol to show expanding direction
    transform: rotate(-90deg);
  }

  &splitter-layout--vertical > &splitter-layout__pane > &splitter-layout-splitter--resizable {
    cursor: row-resize;
  }

  // splitter on the top side
  &splitter-layout--vertical >
  &splitter-layout__pane--primary ~ &splitter-layout__pane--secondary > &splitter-layout-splitter{
    bottom: auto;
    top: $splitter-position;
    // mirroring the bottom-side-styled splitter (default downwards, collapsed upwards)
    transform: scale(1, -1);
  }

  &splitter-layout--vertical >
  &splitter-layout__pane--primary ~
    &splitter-layout__pane--secondary.#{$componentNameSpace}-splitter-layout__pane--hiding >
  &splitter-layout-splitter {
    bottom: 0px;
    height: auto;
  }

  &splitter-layout--vertical >
  &splitter-layout__pane > &splitter-layout-splitter &splitter-layout-splitter__resizer {
    height: $resizer-thickness;
    max-width: $resizer-size;
    width: auto;
    margin: $resizer-margin2 $resizer-margin1;
  }
}
