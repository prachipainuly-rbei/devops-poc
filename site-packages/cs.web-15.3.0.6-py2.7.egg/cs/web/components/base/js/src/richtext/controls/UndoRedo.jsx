/*
 * Copyright (C) 2017 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: UndoRedo.jsx 185904 2018-10-31 07:28:58Z ssa $"
 */

import React from 'react';
import {PropTypes, DraftJS} from 'cs-web-components-externals';
import ButtonGroup from '../../components/ButtonGroup.jsx';
import Button from '../../components/Button.jsx';
import {formatStr} from '../../i18n';

export default class UndoRedoControl extends React.Component {
    constructor() {
        super();
        this.undo = this._undo.bind(this);
        this.redo = this._redo.bind(this);
    }

    _undo(e) {
        e.preventDefault();
        const {editorState, onChange} = this.props;
        onChange(DraftJS.EditorState.undo(editorState));
    }

    _redo(e) {
        e.preventDefault();
        const {editorState, onChange} = this.props;
        onChange(DraftJS.EditorState.redo(editorState));
    }

    render() {
        const {editorState} = this.props;
        return (
            <ButtonGroup>
                <Button.IconButton iconName='csweb_richtext_undo'
                                   buttonStyle="outline"
                                   disabled={editorState.getUndoStack().isEmpty()}
                                   onMouseDown={this.undo}
                                   title={formatStr('richtext_undo')}
                                   />
                <Button.IconButton iconName='csweb_richtext_redo'
                                   buttonStyle="outline"
                                   disabled={editorState.getRedoStack().isEmpty()}
                                   onMouseDown={this.redo}
                                   title={formatStr('richtext_redo')}
                                   />
            </ButtonGroup>
        );
    }

}
UndoRedoControl.propTypes = {
    onChange: PropTypes.func.isRequired,
    editorState: PropTypes.object.isRequired
};
