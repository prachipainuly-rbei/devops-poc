/*
 * Copyright (C) 2017 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: ErrorLog.jsx 168528 2017-11-15 11:35:33Z gwe $"
 */

import React from 'react';
import {ImmutablePropTypes, connect, PropTypes} from 'cs-web-components-externals';
import {fetchServerMessages} from './actions.js';
import {FormControl} from 'react-bootstrap';
import {prefixNS} from '../helpers.js';

class ErrorLog extends React.Component {
    componentDidMount() {
        this.props.fetchServerMessages();
    }

    render() {
        return (
            <FormControl
                componentClass="textarea"
                className={prefixNS("server-log-area")}
                rows="20"
                value={this.props.serverMessages.toJS().join('')} />
        );
    }
}

ErrorLog.propTypes = {
    fetchServerMessages: PropTypes.func,
    serverMessages: ImmutablePropTypes.list
};

function mapStateToProps(state) {
    return {
        serverMessages: state.messages.getIn(['server', 'messages']),
    };
}

export default connect(mapStateToProps, {fetchServerMessages})(ErrorLog);
