/*
 * Copyright (C) 2017 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: DetailOutletRelationshipTreeTable.jsx 176920 2018-05-07 13:23:57Z gwe $"
 */

import React from 'react';
import {PropTypes, ImmutablePropTypes} from 'cs-web-components-externals';
import RelationshipTable from '../components/objectwidgets/RelationshipTable.jsx';
import ClassRelshipLoader from '../components/objectwidgets/ClassRelshipLoader.jsx';

/**
* A wrapper component for `RelationshipTable` intended for usage in a tab on a
* detail page. Renders the table as a TreeTable.
 *
 * @class DetailOutletRelationshipTreeTable
 * @extends React.Component
 */
export default function DetailOutletRelationshipTreeTable(props) {
    const {active, ...others} = props;
    return (
        <ClassRelshipLoader contextObject={others.contextObject}>
            {relships => (
                <RelationshipTable
                    {...others}
                    asTree={true}
                    relshipLabel={relships.getIn([others.relshipName, 'label'])}
                    relshipIconUrl={relships.getIn([others.relshipName, 'icon_url'])}
                    height='100%'
                    collapsible={false}
                    expanded={active}
                />
            )}
        </ClassRelshipLoader>


    );
}
DetailOutletRelationshipTreeTable.propTypes = {
    contextObject: ImmutablePropTypes.map,
    relshipName: PropTypes.string.isRequired,
    active: PropTypes.bool.isRequired
};
