/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: PersonTile.jsx 172637 2018-01-31 11:49:56Z bwf $"
 */

/**
 * @module
 */

import React from 'react';
import {PropTypes, ImmutablePropTypes} from 'cs-web-components-externals';
import {Tile} from './TileHelpers.jsx';
import {getIcon} from '../helpers';

import {formatStr} from '../i18n.js';
import {SVGIconAndLabel} from "../components/IconAndLabel";

import email_icon from '../../../resources/cis_envelope_primary.svg';
import phone_icon from '../../../resources/cis_earphone_primary.svg';

/**
 * A plugin component to show a ``cdb_person`` instance as a small tile.
 *
 * React Properties
 * ----------------
 *
 * =================  =============  ==================  ===================================
 * Property           Type           Default             Use
 * =================  =============  ==================  ===================================
 * contextObject      Immutable.Map  \-                  The ``cdb_person`` object to render
 * =================  =============  ==================  ===================================
 * plain              bool           \-                  If true, displays simplified tile
 * =================  =============  ==================  ===================================
 */
export default function PersonTile(props) {
    const {contextObject, plain, controls} = props;
    const email = contextObject.get('e_mail');
    const phone = contextObject.get('telefon1');
    return (
        <Tile
            contextObject={contextObject}
            plain={plain}
            labelText={props.label}
            fallbackImg={getIcon('csweb_person_fallback')}
            headerAttr='name'
            controls={controls}>
            <SVGIconAndLabel
                src={email_icon}
                title={formatStr('person_tile_email')}
                label={<a href={`mailto:${email}`}>{email}</a>}/>
            <SVGIconAndLabel
                src={phone_icon}
                title={formatStr('person_tile_earphone')}
                label={phone}/>
        </Tile>
    );
}
PersonTile.propTypes = {
    contextObject: ImmutablePropTypes.map.isRequired,
    label: PropTypes.string,
    plain: PropTypes.bool,
    controls: PropTypes.node
};
