/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: reducers.js 162141 2017-07-25 11:11:08Z gwe $"
 */

import Immutable from 'immutable';
import {FAVORITE_ADD, FAVORITE_DELETE,
        FAVORITE_INIT, FAVORITE_UPDATE} from './actions.js';

export default function favorites(state = Immutable.Map(), action) {
    switch (action.type) {
        case FAVORITE_INIT:
            //return state.clear().merge(action.favorites);
            return state.withMutations(map => {
                action.favorites.forEach(favorite => {
                    map.set(favorite.get('frontend_url'), favorite);
                });
            });
        case FAVORITE_DELETE:
            return state.delete(action.favorite.get('frontend_url'));
        case FAVORITE_UPDATE:
            return state.set(action.favorite.get('frontend_url'), action.favorite);
        case FAVORITE_ADD:
            return state.set(action.favorite.get('frontend_url'),
                            Immutable.fromJS(action.favorite));
        default:
            return state;
    }
}
