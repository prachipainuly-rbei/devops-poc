/*
 * Copyright (C) 1990-2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: Email.jsx 181281 2018-07-30 08:26:10Z cla $"
 */

import React from 'react';
import TextInput, {combineInputExtensions} from './TextInput';
import {sharedTextInputProps} from './sharedPropTypes';
import {prefixNS} from '../helpers';
import Button from '../components/Button';
import {formatStr} from '../i18n.js';

/**
 * This component can be used to show an email address. It provides also the action for sending email to
 * that address via ``mailto:`` protocol. It takes such properties just as the
 * <:ref:`cs-web-components-base-formcontrols.TextInput.__default__`>.
 *
 * @module Email
 */
export default function Email(props) {
    const {value, afterControl} = props;
    const disabled = !value || value.indexOf('@') === -1;
    const button = (<Button.IconButton
                className={prefixNS('form-control-button')}
                href={`mailto:${value}`}
                title={formatStr('formcontrol_email_to', {email: value})}
                key="EmailSendTo"
                disabled={disabled}
                iconName="csweb_envelope"
                buttonStyle="success"
                />);
    return (
        <TextInput
            type="email"
            {...props}
            afterControl={combineInputExtensions(afterControl, button)}
            />
    );
}

Email.propTypes = {...sharedTextInputProps};
