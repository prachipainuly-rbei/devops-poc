/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: custom.jsx 170344 2017-12-11 14:02:25Z cla $"
 */

import React from 'react';
import Immutable from 'immutable';
import {storiesOf, appContainer} from 'cs-web-components-storybook';
import {Table} from 'cs-web-components-base';

const columns = Immutable.fromJS(
    [
        {
            width: 400,
            label: "col1",
            tooltip: "Tooltip for col1",
            id: "col1"
        },
        {
            label: "col2",
            tooltip: "Tooltip for col2",
            id: "col2"
        }
    ]
);

const orderedColumns = Immutable.OrderedSet(
    columns.map(c => c.get('id'))
);

const initSortColumns = Immutable.fromJS(
    [{id: columns.getIn([0, 'id']), desc: true}]
).toOrderedSet();

const rows = Immutable.fromJS([
    {
        id: "0",
        columns: [
            "Hallo",
            "Welt"
        ]
    },
    {
        id: "1",
        columns: [
            "Hallo",
            "Erde"
        ]
    },
    {
        id: "2",
        columns: [
            "Guten Morgen",
            "Erde"
        ]
    },
    {
        id: "3",
        columns: [
            "Guten Morgen",
            "Welt"
        ]
    }

]);

const hiddenRows = Immutable.fromJS(["1"]);

function hiddenRowProvider(WrappedComponent) {
    class HiddenRowProvider extends React.Component {
        render() {
            return (
                <WrappedComponent
                    {...this.props}
                    hiddenRows={hiddenRows} />
            );
        }
    }

    return HiddenRowProvider;
}


storiesOf('Table', {})
    .addDecorator(appContainer)
    .add('Mock data with hidden rows', () => {
        // import {Table} from 'cs-web-components-base';
        const MyTable = Table.PredefinedTables.DefaultTable(
            {Table: hiddenRowProvider(Table.Table)},
        );
        return (
            <MyTable condensed={false} rows={rows}
                     title={"Simple Table"}
                     columns={columns}
                     orderedColumns={orderedColumns}
                     initSortColumns={initSortColumns}
                     contentHeight="120px"
                     className="my-table"/>
        );
    });
