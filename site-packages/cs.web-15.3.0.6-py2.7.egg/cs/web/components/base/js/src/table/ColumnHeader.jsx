/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: ColumnHeader.jsx 164744 2017-09-07 10:56:09Z yzh $"
 */

import React from 'react';
import Immutable from 'immutable';
import {PropTypes, ImmutablePropTypes} from 'cs-web-components-externals';
import {prefixNS} from '../helpers';
import connect from './connect';
import {setColumnHeaderClicked} from './common/actions';

export class ColumnHeader extends React.Component {
    constructor(props) {
        super(props);
        this.onHeaderClick = this.onHeaderClick.bind(this);
    }

    onHeaderClick() {
        const {setColumnHeaderClicked, column} = this.props;
        setColumnHeaderClicked(
            Immutable.Map({columnID: column.get('id')}));
    }

    render() {
        const {column, columnIndex, columnActions} = this.props;
        const label = column.get('hide_label') ? '' : column.get('label');
        const tooltip = column.get('tooltip') || column.get('label');
        return (
            <div className={prefixNS('table-column-header')}>
                <div className="header-content" title={tooltip}
                     onClick={this.onHeaderClick}>
                    {label}
                </div>
                {columnActions ? columnActions.map((Action, aIdx) =>
                    <Action key={aIdx} column={column} columnIndex={columnIndex}/>
                ) : null}
            </div>
        );
    }
}

ColumnHeader.propTypes = {
    column: ImmutablePropTypes.map,
    columnIndex: PropTypes.number,
    columnActions: ImmutablePropTypes.list,
    setColumnHeaderClicked: PropTypes.func
};

export default connect(() => ({}), {setColumnHeaderClicked})(ColumnHeader);
