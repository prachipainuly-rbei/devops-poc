/*
 * Copyright (C) 2017 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: SearchTab.jsx 182915 2018-08-28 07:46:46Z gwe $"
 */

import React from 'react';
import {PropTypes, connect} from 'cs-web-components-externals';
import {initializeSearchInstance} from '../search/actions/instances.js';
import SplitterLayout from '../layouts/SplitterLayout.jsx';
import SearchResult from './SearchResult.jsx';
import SearchBar from '../search/SearchBar.jsx';

class SearchTab extends React.Component {
    componentDidMount() {
        const {instanceName, initializeSearchInstance} = this.props;
        initializeSearchInstance(instanceName);
    }

    render() {
        const {instanceName, rootClassname, classTitle, detail,
               childConfiguration} = this.props;
        return (
            <SplitterLayout>
                <SplitterLayout.SecondaryPane initCollapsed={false} defaultSize="300px">
                    <SearchBar
                        instanceName={instanceName}
                        classTitle={classTitle} />
                </SplitterLayout.SecondaryPane>
                <SplitterLayout.PrimaryPane>
                    <SearchResult
                        instanceName={instanceName}
                        rootClassname={rootClassname}
                        detail={detail}
                        childConfiguration={childConfiguration} />
                </SplitterLayout.PrimaryPane>
            </SplitterLayout>
        );
    }
}
SearchTab.propTypes = {
    instanceName: PropTypes.string.isRequired,
    rootClassname: PropTypes.string.isRequired,
    classTitle: PropTypes.string.isRequired,
    detail: PropTypes.element,
    childConfiguration: PropTypes.object,
    // actions
    initializeSearchInstance: PropTypes.func.isRequired
};

export default connect(null, {initializeSearchInstance})(SearchTab);
