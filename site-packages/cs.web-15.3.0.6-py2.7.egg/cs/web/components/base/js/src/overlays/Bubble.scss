// Copyright (C) 2018 CONTACT Software GmbH
// All rights reserved.
// http://www.contact-software.com
//
// Revision "$Id$"

// This depends on the width of the arrow defined in layouting/bubbles.js.
$arrow-width: 22px;
$arrow-border: $arrow-width / 2;
$arrow-after-border: $arrow-border - 1;

@mixin bubble-arrow-base() {
	position: absolute;
    width: 0;
	height: 0;
}

@mixin bubble-arrow-after-base() {
	position: absolute;
	margin-left: -$arrow-after-border;
    border-style: solid;
    border-color: transparent;
    border-width: $arrow-after-border;
    content: " ";
}

@mixin bubble-container-base($background-color, $border-color) {
    background-color: $background-color;
    border: 1px solid $border-color;
    border-radius: 5px;
    padding: 5px;
    white-space: nowrap;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);
}

@mixin bubble-definition($background-color, $border-color) {
    .#{$componentNameSpace}-bubble-arrow-bottom {
        @include bubble-arrow-base();

	    top: 0;

	    border-left: $arrow-border solid transparent;
	    border-right: $arrow-border solid transparent;
	    border-bottom: $arrow-border solid $border-color;
    }

    .#{$componentNameSpace}-bubble-arrow-top {
        @include bubble-arrow-base();

	    bottom: 0;

	    border-left: $arrow-border solid transparent;
	    border-right: $arrow-border solid transparent;
	    border-top: $arrow-border solid $border-color;
    }

    // This arrow points above, and is displayed at the
    // top of the container, but at the bottom of the anchor
    .#{$componentNameSpace}-bubble-arrow-bottom::after {
        @include bubble-arrow-after-base();

        top: 1px;
        border-bottom-color: $background-color;
        border-top-width: 0;
    }

    .#{$componentNameSpace}-bubble-arrow-top::after {
        @include bubble-arrow-after-base();

        bottom: 1px;
        border-top-color: $background-color;
        border-bottom-width: 0;
    }

    .#{$componentNameSpace}-bubble-container-bottom {
        @include bubble-container-base($background-color, $border-color);
        margin-top: $arrow-after-border;
    }

    .#{$componentNameSpace}-bubble-container-top {
        @include bubble-container-base($background-color, $border-color);
        margin-bottom: $arrow-after-border;
    }
}

.#{$componentNameSpace}-overlay.#{$componentNameSpace}-bubble {
    border: none;
    box-shadow: none;
    background-color: transparent;

    .#{$componentNameSpace}-bubble-content {
        display: flex;
    }

    &.#{$componentNameSpace}-bubble-default {
        @include bubble-definition($white-base, $gray);
    }

    &.#{$componentNameSpace}-bubble-primary {
        @include bubble-definition($elements-primary-lightest, $elements-primary);
    }

    &.#{$componentNameSpace}-bubble-success {
        @include bubble-definition($elements-success-lightest, $elements-success);
    }

    &.#{$componentNameSpace}-bubble-info {
        @include bubble-definition($elements-info-lightest, $elements-info);
    }

    &.#{$componentNameSpace}-bubble-warning {
        @include bubble-definition($elements-warning-lightest, $elements-warning);
    }

    &.#{$componentNameSpace}-bubble-danger {
        @include bubble-definition($elements-danger-lightest, $elements-danger);
    }
}
