/*
 * Copyright (C) 2017 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: index.js 180802 2018-07-20 12:29:24Z mbr $"
 */

import Immutable from 'immutable';
import {combineReducers} from 'cs-web-components-externals';
import {Registry} from '../../registry.js';
import {ACTIONS} from '../constants.js';
import {operationByClass} from './operations.js';
import {favouritesByClass} from './favourites.js';
import {instances} from './instances.js';
import {context} from './context.js';

function initializedClasses(state = Immutable.Set(), action) {
    switch (action.type) {
        case ACTIONS.INIT_CLASS_SEARCH_DONE: {
            const {classname} = action.payload;
            return state.add(classname);
        }
        default:
            return state;
    }
}

Registry.registerReducer('search', combineReducers({
    initializedClasses,
    operationByClass,
    favouritesByClass,
    instances,
    context
}));
