/*
 * Copyright (C) 2017 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: Inline.jsx 174679 2018-03-19 11:49:45Z ssa $"
 */

import React from 'react';
import ButtonGroup from '../../components/ButtonGroup.jsx';
import {PropTypes, DraftJS} from 'cs-web-components-externals';
import StyleControlButton from './StyleControlButton';

const INLINE_STYLES = [
    {iconName: 'csweb_richtext_underlined', style: 'UNDERLINE'},
    {iconName: 'csweb_richtext_bold', style: 'BOLD'},
    {iconName: 'csweb_richtext_italic', style: 'ITALIC'},
    {iconName: 'csweb_richtext_strikethrough', style: 'STRIKETHROUGH'}
];

export const INLINEMAP = [
    {'STRIKETHROUGH': {textDecoration: 'line-through'}}
];

export default class InlineControl extends React.Component {
    constructor(props) {
        super(props);
        this.toggleInlineStyle = this._toggleInlineStyle.bind(this);
    }

    _toggleInlineStyle(inlineStyle) {
        const {editorState, onChange} = this.props;

        onChange(
            DraftJS.RichUtils.toggleInlineStyle(
                editorState,
                inlineStyle
            )
        );
    }

    render() {
        const {editorState, styles} = this.props;
        const currentStyle = editorState.getCurrentInlineStyle();

        return (
            <ButtonGroup>
                {styles.map(type =>
                    <StyleControlButton
                        key={type.style}
                        active={currentStyle.has(type.style)}
                        iconName={type.iconName}
                        onToggle={this.toggleInlineStyle}
                        style={type.style}
                    />
                )}
            </ButtonGroup>
        );
    }
}

InlineControl.propTypes = {
    onChange: PropTypes.func.isRequired,
    editorState: PropTypes.object.isRequired,
    styles: PropTypes.array
};

InlineControl.defaultProps = {
    styles: INLINE_STYLES
};
