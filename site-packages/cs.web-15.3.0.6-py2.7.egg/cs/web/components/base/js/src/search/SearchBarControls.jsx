/*
 * Copyright (C) 2018 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: SearchBarControls.jsx 180456 2018-07-12 09:39:41Z yaz $"
 */

import React from 'react';
import {PropTypes, ImmutablePropTypes} from 'cs-web-components-externals';
import {prefixNS} from '../helpers.js';
import {formatStr} from '../i18n.js';
import Button from '../components/Button.jsx';
import SelectAttributeTypeAhead from './SelectAttributeTypeAhead.jsx';
import SVGIcon from '../components/SVGIcon.jsx';
import add_search_attribute from '../../../resources/cis_plus_success.svg';

export default function SearchBarControls(props) {
    const {
        searchRunning, runSearch, addSearchField, fields, searchValues, visibleAttributes
    } = props;
    const beforeControl = (
      <SVGIcon src={add_search_attribute} className={prefixNS('class-search-area__fts-icon')} />
    );
    return (
        <div className={prefixNS('class-search-bar__controls')}>
            <SelectAttributeTypeAhead
                disabled={searchRunning}
                fields={fields}
                searchValues={searchValues}
                visibleAttributes={visibleAttributes}
                beforeControl={beforeControl}
                addSearchField={addSearchField} />
            <Button.TextButton
                buttonStyle="primary"
                disabled={searchRunning}
                data-ce-id="submit-search"
                onClick={runSearch}
                title={formatStr('do_extended_search')} />
      </div>
    );
}
SearchBarControls.propTypes = {
    searchRunning: PropTypes.bool.isRequired,
    fields: ImmutablePropTypes.map,
    searchValues: ImmutablePropTypes.map,
    visibleAttributes: ImmutablePropTypes.set,
    addSearchField: PropTypes.func.isRequired,
    runSearch: PropTypes.func.isRequired
};
