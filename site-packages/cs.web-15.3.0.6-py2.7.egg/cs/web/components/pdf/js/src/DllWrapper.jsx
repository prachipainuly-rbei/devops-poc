/*
 * Copyright (C) 2017 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: DllWrapper.jsx 166902 2017-10-19 06:29:21Z gwe $"
 */

import React from 'react';
import {getAppSetup, DynamicLibLoader} from 'cs-web-components-base';
import PDFViewer from './PDFViewer.jsx';

export default function DllWrapper(props) {
    const settings = getAppSetup().get('cs-web-components-pdf');
    return (
        <DynamicLibLoader
            scriptUrl={settings.get('lib-src')}
            setup={() => {
                // Setting worker path to worker bundle.
                // It is also possible to disable workers via `PDFJS.disableWorker = true`,
                // however that might degrade the UI performance in web browsers.
                window.pdfjsDistBuildPdf.PDFJS.workerSrc = settings.get('worker-src');
            }}
        >
            {pdfLibLoaded => pdfLibLoaded ? <PDFViewer {...props} /> : null}
        </DynamicLibLoader>
    );
}
