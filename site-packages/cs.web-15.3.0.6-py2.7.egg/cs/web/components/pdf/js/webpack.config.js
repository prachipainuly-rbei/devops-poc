/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: webpack.config.js 185513 2018-10-24 11:21:25Z gwe $"
 */

/* eslint-env node */

const CopyWebpackPlugin = require('copy-webpack-plugin');

const configModule = require(process.env.WEBPACK_CONFIG_COMMON);
const commonConfig = configModule.makeConfig();
const componentNameSpace = configModule.getComponentNameSpace();

commonConfig.plugins.push(new CopyWebpackPlugin([
    {from: 'node_modules/pdfjs-dist/build/pdf.min.js'},
    {from: 'node_modules/pdfjs-dist/build/pdf.worker.min.js'}
]));

const moreExternals = Object.assign({}, commonConfig.externals, {
    'cs-web-components-pdf': 'cs-web-components-pdf'
});

module.exports = Object.assign({}, commonConfig, {
    // here the app specific configs
    entry: Object.assign({}, commonConfig.entry, {
        [`${componentNameSpace}-stories`]: "./src/stories/index.js"
    }),
    externals: moreExternals
});
