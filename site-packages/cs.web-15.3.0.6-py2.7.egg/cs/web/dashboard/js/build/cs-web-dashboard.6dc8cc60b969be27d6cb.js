!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("cs-web-components-base"),require("React"),require("cs-web-components-externals"),require("Immutable"),require("ReactBootstrap")):"function"==typeof define&&define.amd?define(["cs-web-components-base","React","cs-web-components-externals","Immutable","ReactBootstrap"],t):"object"==typeof exports?exports["cs-web-dashboard"]=t(require("cs-web-components-base"),require("React"),require("cs-web-components-externals"),require("Immutable"),require("ReactBootstrap")):e["cs-web-dashboard"]=t(e["cs-web-components-base"],e.React,e["cs-web-components-externals"],e.Immutable,e.ReactBootstrap)}(this,function(e,t,o,n,a){return function(e){function t(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(t,o){t.exports=e},function(e,o){e.exports=t},function(e,t){e.exports=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatStrWithDomain=t.formatStr=t.Format=void 0;var n=o(0);t.Format=n.i18ndb.makeFormat("cs_web_dashboard"),t.formatStr=n.i18ndb.makeFormatStr("cs_web_dashboard"),t.formatStrWithDomain=n.i18ndb.formatString.bind(n.i18ndb)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Layouts=t.ColumnWidths=t.DASHBOARD_ITEM_DND_TYPE=t.DASHBOARD_STORE=t.Actions=t.DASHBOARD_API=t.APP_SETUP=void 0;var n=o(6),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=o(0),i=t.APP_SETUP=(0,r.getAppSetup)().get("cs-web-dashboard");t.DASHBOARD_API="/internal/cs.web.dashboard/dashboard_collection",t.Actions={SET_DASHBOARD:"cs-web-dashboard-SET_DASHBOARD",SWITCH_LAYOUT:"cs-web-dashboard-SWITCH_LAYOUT",INIT_ITEMS:"cs-web-dashboard-INIT_ITEMS",CREATE_ITEM:"cs-web-dashboard-CREATE_ITEM",CREATED_ITEM:"cs-web-dashboard-CREATED_ITEM",CREATE_ITEM_FAILED:"cs-web-dashboard-CREATE_ITEM_FAILED",DELETE_ITEM:"cs-web-dashboard-DELETE_ITEM",MOVE_ITEM_BEFORE:"cs-web-dashboard-MOVE_ITEM_BEFORE",REVERT_MOVE_ITEM:"cs-web-dashboard-REVERT_MOVE_ITEM",MOVE_ITEM_TO_COLUMN:"cs-web-dashboard-MOVE_ITEM_TO_COLUMN",NORMALIZE_POSITIONS:"cs-web-dashboard-NORMALIZE_POSITIONS",SET_SETTINGS:"cs-web-dashboard-SET_SETTINGS",UPDATE_ITEM:"cs-web-dashboard-UPDATE_ITEM",SET_ITEM_COLLAPSED:"cs-web-dashboard-SET_ITEM_COLLAPSED",CREATE_DASHBOARD:"cs-web-dashboard-CREATE_DASHBOARD",CREATED_DASHBOARD:"cs-web-dashboard-CREATED_DASHBOARD",CREATE_DASHBOARD_FAILED:"cs-web-dashboard-CREATE_DASHBOARD_FAILED",SWITCH_DASHBOARD:"cs-web-dashboard-SWITCH_DASHBOARD",SET_EDIT_MODE:"cs-web-dashboard-SET_EDIT_MODE",DASHBOARD_DELETED:"cs-web-dashboard-DASHBOARD_DELETED",RENAME_DASHBOARD:"cs-web-dashboard-RENAME_DASHBOARD",SET_LOADING_STATE:"cs-web-dashboard-SET_LOADING_STATE"},t.DASHBOARD_STORE="cs-web-dashboard-items",t.DASHBOARD_ITEM_DND_TYPE="cs-web-dashboard-DASHBOARD_ITEM_DND_TYPE",t.ColumnWidths={small:1,medium:2},t.Layouts=a.default.OrderedMap(i.get("layouts").map(function(e){return[e.get("name"),e]}))},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}function u(e){return{connectDropTarget:e.dropTarget()}}function c(e){return{editModeActive:e[m.DASHBOARD_STORE].get("editMode",!1)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),d=o(1),p=n(d),f=o(0),b=o(2),y=o(7),m=o(4),h=o(3),g=o(17),M=n(g),D=o(9),T=n(D),E=o(10),w=n(E),L={beginDrag:function(e){return{origItem:e.item}},endDrag:function(e,t){var o=t.getItem(),n=o.origItem;t.didDrop()?e.finalizeMoveItem(n):e.revertMoveItem(n)}},_={canDrop:function(){return!1},hover:function(e,t){var o=t.getItem(),n=o.origItem,a=e.item;a.get("cdb_object_id")!==n.get("cdb_object_id")&&e.moveItemBefore(n.get("cdb_object_id"),a.get("cdb_object_id"))}},S=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.deleteItem=o.deleteItem.bind(o),o.duplicateItem=o.duplicateItem.bind(o),o.toggleExpansion=o.toggleExpansion.bind(o),o}return i(t,e),l(t,[{key:"deleteItem",value:function(){this.props.deleteItem(this.props.item)}},{key:"duplicateItem",value:function(){this.props.duplicateItem(this.props.item)}},{key:"toggleExpansion",value:function(e){this.props.setItemCollapsed(this.props.item,!e)}},{key:"renderTitle",value:function(){var e=this.props.title;return p.default.createElement("div",{className:"cs-web-dashboard-dashboard__item-title",title:e},e)}},{key:"render",value:function(){var e=this.props,t=e.item,o=e.configCallback,n=e.connectDropTarget,a=e.connectDragSource,r=e.appLink,i=e.appNewWindow,s=e.editModeActive;return n(p.default.createElement("div",{className:"cs-web-dashboard-dashboard__item"},p.default.createElement(f.ContentBlock,{collapsible:this.props.itemCollapsible,expanded:!t.get("collapsed"),title:this.renderTitle(),headerDragger:a,onExpansionChanged:this.toggleExpansion},p.default.createElement(f.ContentBlock.Header,null,s?p.default.createElement(f.ButtonGroup,null,p.default.createElement(f.Button.IconButton,{onClick:this.duplicateItem,iconSrc:w.default,buttonStyle:"success",title:(0,h.formatStr)("duplicate_widget")}),void 0===o?null:p.default.createElement(f.Button.SettingsButton,{onClick:o,title:(0,h.formatStr)("edit_button")}),p.default.createElement(f.Button.IconButton,{onClick:this.deleteItem,iconSrc:T.default,title:(0,h.formatStr)("delete_button"),buttonStyle:"danger"})):null,void 0===r||s?null:p.default.createElement("a",{href:r,onClick:function(){i?window.open(r):window.location=r}},p.default.createElement(f.SVGIcon,{src:M.default,size:"sm"}))),p.default.createElement(f.ContentBlock.Body,null,p.default.createElement("div",{className:"cs-web-dashboard-dashboard__item-body"},this.props.children)))))}}]),t}(p.default.Component);S.propTypes={item:b.ImmutablePropTypes.map.isRequired,title:b.PropTypes.string,configCallback:b.PropTypes.func,appLink:b.PropTypes.string,appNewWindow:b.PropTypes.bool,itemCollapsible:b.PropTypes.bool.isRequired,editModeActive:b.PropTypes.bool.isRequired,deleteItem:b.PropTypes.func.isRequired,duplicateItem:b.PropTypes.func.isRequired,moveItemBefore:b.PropTypes.func.isRequired,revertMoveItem:b.PropTypes.func.isRequired,finalizeMoveItem:b.PropTypes.func.isRequired,setItemCollapsed:b.PropTypes.func.isRequired,connectDragSource:b.PropTypes.func.isRequired,connectDragPreview:b.PropTypes.func.isRequired,connectDropTarget:b.PropTypes.func.isRequired},S.defaultProps={title:"",itemCollapsible:!0,appNewWindow:!1};var I={deleteItem:y.deleteItem,moveItemBefore:y.moveItemBefore,revertMoveItem:y.revertMoveItem,finalizeMoveItem:y.finalizeMoveItem,setItemCollapsed:y.setItemCollapsed,duplicateItem:y.duplicateItem};t.default=(0,b.connect)(c,I)(b.ReactDnD.DropTarget(m.DASHBOARD_ITEM_DND_TYPE,_,u)(b.ReactDnD.DragSource(m.DASHBOARD_ITEM_DND_TYPE,L,s)(S)))},function(e,t){e.exports=n},function(e,t,o){"use strict";function n(e){return function(t){t({type:L.Actions.SET_LOADING_STATE,payload:null});var o=e.get("items_link");(0,w.getJSON)(o).then(function(e){t({type:L.Actions.INIT_ITEMS,payload:e})},function(e){t({type:L.Actions.CREATE_ITEM_FAILED,payload:e,error:!0})})}}function a(e,t){return function(o){o({type:L.Actions.SET_DASHBOARD,payload:{dashboards:e}}),o(n(t))}}function r(e,t){return function(o){o({type:L.Actions.SWITCH_LAYOUT,payload:{layout:e,dboard_id:t.get("cdb_object_id")}});var n=t.get("@id");(0,w.putJSON)(n,{layout:e}).then(function(e){o({type:L.Actions.SWITCH_LAYOUT,payload:{layout:e.layout,dboard_id:t.get("cdb_object_id")}})},function(e){o({type:L.Actions.CREATE_ITEM_FAILED,payload:e,error:!0})})}}function i(e,t){return function(o){var n=t.get("@id");(0,w.putJSON)(n,{name:e}).then(function(e){o({type:L.Actions.RENAME_DASHBOARD,payload:{name:e.name,dboard_id:t.get("cdb_object_id")}})},function(e){o({type:L.Actions.CREATE_ITEM_FAILED,payload:e,error:!0})})}}function s(e){return function(t){(0,w.deleteObject)(e.get("@id")).then(function(){t({type:L.Actions.DASHBOARD_DELETED,payload:{dboard_id:e.get("cdb_object_id")}})},function(e){t({type:L.Actions.CREATE_ITEM_FAILED,payload:e,error:!0})})}}function u(e,t){return function(o,n){var a=n()[L.DASHBOARD_STORE],r=a.get("dashboards").valueSeq().toList();o({type:L.Actions.NORMALIZE_POSITIONS,payload:e});var i=n()[L.DASHBOARD_STORE].get("items").map(function(e){return{xpos:e.get("xpos"),ypos:e.get("ypos")}}),s=t?t.get("items_link"):r.get(a.get("activeIndex")).get("items_link");(0,w.putJSON)(s,{positions:i}).then(function(e){o({type:L.Actions.INIT_ITEMS,payload:e})},function(e){o({type:L.Actions.CREATE_ITEM_FAILED,payload:e,error:!0})})}}function c(e,t){var o=e.cdb_object_id;return function(n,a){n({type:L.Actions.CREATE_ITEM,payload:e});var r=t.get("items_link");(0,w.postJSON)(r,e).then(function(e){n({type:L.Actions.CREATED_ITEM,payload:e,meta:{tempId:o}});var r=a()[L.DASHBOARD_STORE].getIn(["items",e.cdb_object_id]);return n(u(r,t))},function(e){n({type:L.Actions.CREATE_ITEM_FAILED,payload:e,error:!0,meta:{tempId:o}})})}}function l(e){var t={name:e};return function(o){o({type:L.Actions.CREATE_DASHBOARD,payload:e}),(0,w.postJSON)(L.DASHBOARD_API,t).then(function(e){o({type:L.Actions.CREATED_DASHBOARD,payload:e}),o(n(E.default.fromJS(e)))},function(e){o({type:L.Actions.CREATE_DASHBOARD_FAILED,payload:e,error:!0})})}}function d(e){var t=e.get("name"),o={source_id:e.get("cdb_object_id")};return function(e){e({type:L.Actions.CREATE_DASHBOARD,payload:t}),(0,w.postJSON)(L.DASHBOARD_API,o).then(function(t){e({type:L.Actions.CREATED_DASHBOARD,payload:t}),e(n(E.default.fromJS(t)))},function(t){e({type:L.Actions.CREATE_DASHBOARD_FAILED,payload:t,error:!0})})}}function p(e){return function(t){t({type:L.Actions.SWITCH_DASHBOARD,payload:e})}}function f(e){return function(t){t({type:L.Actions.DELETE_ITEM,payload:e}),(0,w.deleteObject)(e.get("@id"))}}function b(e){return function(t,o){var a=o()[L.DASHBOARD_STORE],r=a.get("activeIndex"),i=a.get("dashboards").valueSeq().toList().get(r);(0,w.postJSON)(e.get("@id"),{}).then(function(){t(n(i))},function(e){t({type:L.Actions.CREATE_ITEM_FAILED,payload:e,error:!0})})}}function y(e,t){return{type:L.Actions.MOVE_ITEM_BEFORE,payload:{id:e,beforeId:t}}}function m(e){return{type:L.Actions.REVERT_MOVE_ITEM,payload:e}}function h(e,t){return{type:L.Actions.MOVE_ITEM_TO_COLUMN,payload:{id:e,column:t}}}function g(e,t){return function(o){o({type:L.Actions.SET_SETTINGS,payload:{item:e,settings:t}}),(0,w.putJSON)(e.get("@id"),{settings:t}).then(function(e){o({type:L.Actions.UPDATE_ITEM,payload:e})})}}function M(e,t){var o=++_;return function(n){n({type:L.Actions.SET_ITEM_COLLAPSED,payload:{item:e,collapsed:t}}),(0,w.putJSON)(e.get("@id"),{collapsed:t}).then(function(e){o===_&&n({type:L.Actions.UPDATE_ITEM,payload:e})})}}function D(e){return function(t){t({type:L.Actions.SET_EDIT_MODE,payload:e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.initItems=n,t.setDashboard=a,t.switchLayout=r,t.renameDashboard=i,t.deleteDashboard=s,t.finalizeMoveItem=u,t.createItem=c,t.createDashboard=l,t.copyDashboard=d,t.switchDashboard=p,t.deleteItem=f,t.duplicateItem=b,t.moveItemBefore=y,t.revertMoveItem=m,t.moveItemToColumn=h,t.setSettings=g,t.setItemCollapsed=M,t.setEditMode=D;var T=o(6),E=function(e){return e&&e.__esModule?e:{default:e}}(T),w=o(0),L=o(4),_=0},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0),r=o(16),i=n(r),s=o(18),u=n(s),c=o(19),l=n(c),d=o(20),p=n(d),f=o(21),b=n(f),y=o(22),m=n(y);a.Registry.registerComponent("cs-web-dashboard-TextNoteWidget",u.default),a.Registry.registerComponent("cs-web-dashboard-ObjectWidget",l.default),a.Registry.registerComponent("cs-web-dashboard-SearchFavourite",b.default),a.Registry.registerComponent("cs-web-dashboard-OnboardingWidget",m.default),t.default={ErrorWidget:i.default,ObjectListWidget:p.default,SearchFavourite:b.default,OnboardingWidget:m.default}},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ij4NPGNpcy1uYW1lPnRyYXNoPC9jaXMtbmFtZT4NPHBhdGggZmlsbD0iIzk5OTk5OSIgZD0iTTQsMTNjMCwwLjU1LDAuNDUsMSwxLDFoN2MwLjU1LDAsMS0wLjQ1LDEtMVY1SDRWMTN6IE0xMy43NSwzSDExVjJjMC0wLjU1LTAuNDUtMS0xLTFIN0M2LjQ1LDEsNiwxLjQ1LDYsMg0JdjFIMy4yNUMzLjExLDMsMywzLjExLDMsMy4yNVY0aDExVjMuMjVDMTQsMy4xMSwxMy44OSwzLDEzLjc1LDN6IE03LjAyLDNIN1YyaDN2MUg3LjAyeiIvPg08L3N2Zz4N"},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ij4NPGNpcy1uYW1lPmNvcHk8L2Npcy1uYW1lPg08cGF0aCBmaWxsPSIjOTk5OTk5IiBkPSJNMywzLjVDMywzLjIsMy4yLDMsMy41LDNIMTJWMi41QzEyLDIuMiwxMS44LDIsMTEuNSwyaC05QzIuMiwyLDIsMi4yLDIsMi41djlDMiwxMS44LDIuMiwxMiwyLjUsMTJIM1YzLjV6DQkgTTEzLjUsMTRoLTlDNC4yLDE0LDQsMTMuOCw0LDEzLjV2LTlDNCw0LjIsNC4yLDQsNC41LDRoOUMxMy44LDQsMTQsNC4yLDE0LDQuNXY5QzE0LDEzLjgsMTMuOCwxNCwxMy41LDE0eiIvPg08L3N2Zz4N"},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0),r=o(12),i=n(r),s=o(5),u=n(s),c=o(4),l=o(7),d=o(30),p=n(d),f=o(8),b=n(f);a.Registry.registerComponent("cs-web-dashboard-Dashboard",i.default),a.Registry.registerReducer(c.DASHBOARD_STORE,p.default),t.default={DashboardItem:u.default,setSettings:l.setSettings,ObjectListWidget:b.default.ObjectListWidget}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e[m.DASHBOARD_STORE],o=t.getIn(["dashboards"]).valueSeq().toList(),n=t.get("activeIndex",0),a=t.get("errorOccurred",!1),r=t.get("loadingState",!0);return{dashboards:o,layout:o.get(n)?m.Layouts.get(o.get(n).get("layout"),m.Layouts.first()):m.Layouts.first(),items:e[m.DASHBOARD_STORE].get("items"),activeDashboardIndex:n,errorOccurred:a,loadingState:r}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(6),l=n(c),d=o(1),p=n(d),f=o(2),b=o(0),y=o(3),m=o(4),h=o(7),g=o(13),M=n(g),D=o(25),T=n(D),E=o(27),w=n(E),L=o(10),_=n(L),S=o(28),I=n(S),C=o(9),v=n(C),j=o(29),N=n(j),A=0,O=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.widgetList=m.APP_SETUP.get("widgets").sortBy(function(e){return e.get("name")}),o.widgetComponents=l.default.Map(o.widgetList.map(function(e){return[e.get("id"),e]})).map(function(e){return b.Registry.findComponent(e.get("component"))}).filter(function(e){return void 0!==e});return o.state={showWidgetCatalog:!1,showLayoutSelection:!1,activeKey:0,editMode:!1,showDeleteConfirmation:!1,newTitle:null,loadingDashboardContent:!0},o.initAddItem=o.initAddItem.bind(o),o.initSelectLayout=o.initSelectLayout.bind(o),o.cancelDialogs=o.cancelDialogs.bind(o),o.addItem=o.addItem.bind(o),o.setLayout=o.setLayout.bind(o),o.onSelectDashboard=o.onSelectDashboard.bind(o),o.createDashboard=o.createDashboard.bind(o),o.toggleEditMode=o.toggleEditMode.bind(o),o.copyDashboard=o.copyDashboard.bind(o),o.deleteDashboard=o.deleteDashboard.bind(o),o.initDeleteDashboard=o.initDeleteDashboard.bind(o),o.changeTabTitle=o.changeTabTitle.bind(o),o.leaveEditMode=o.leaveEditMode.bind(o),o.publicCallables={addWidgetFunc:o.initAddItem,editModeFunc:o.toggleEditMode},o}return i(t,e),u(t,[{key:"componentDidMount",value:function(){var e=m.APP_SETUP.getIn(["dashboards","dashboard_collection"]).first();this.props.setDashboard(m.APP_SETUP.getIn(["dashboards","dashboard_collection"]),e)}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.activeDashboardIndex&&(this.props.activeDashboardIndex!==e.activeDashboardIndex&&this.setState({activeKey:e.activeDashboardIndex}),this.props.dashboards.count()!==e.dashboards.count()&&e.initItems(e.dashboards.get(e.activeDashboardIndex)),this.props.items===e.items&&!1!==e.loadingState||this.setState({loadingDashboardContent:!1}))}},{key:"initAddItem",value:function(){this.setState({showWidgetCatalog:!0})}},{key:"initSelectLayout",value:function(){this.setState({showLayoutSelection:!0})}},{key:"initDeleteDashboard",value:function(){this.setState({showDeleteConfirmation:!0})}},{key:"changeTabTitle",value:function(e){this.setState({newTitle:e.target.value})}},{key:"cancelDialogs",value:function(){this.setState({showWidgetCatalog:!1,showLayoutSelection:!1})}},{key:"addItem",value:function(e){var t=this.props,o=t.createItem,n=t.layout,a=t.dashboards;A++,o({widget_id:e.get("id"),xpos:n.get("columns").size-1,ypos:0,temporary:!0,cdb_object_id:"temp_item_"+A},a.get(this.state.activeKey)),this.setState({showWidgetCatalog:!1})}},{key:"createDashboard",value:function(){var e=this.props.dashboards.size+1;this.props.createDashboard("Dashboard #"+e)}},{key:"copyDashboard",value:function(){this.props.copyDashboard(this.props.dashboards.get(this.state.activeKey))}},{key:"deleteDashboard",value:function(){var e=this;this.setState({showDeleteConfirmation:!1}),this.setState({editMode:!1},function(){e.props.deleteDashboard(e.props.dashboards.get(e.state.activeKey))})}},{key:"setLayout",value:function(e){this.props.switchLayout(e,this.props.dashboards.get(this.state.activeKey)),this.setState({showLayoutSelection:!1})}},{key:"onSelectDashboard",value:function(e){var t=this;if(e===b.Tab.EVENT_KEY_ADD)this.createDashboard();else if("CsWebDashboardControls"!==e&&!this.state.editMode){if(e===this.state.activeKey)return;this.setState({activeKey:e,loadingDashboardContent:!0},function(){t.props.initItems(t.props.dashboards.get(t.state.activeKey)),t.props.switchDashboard(t.state.activeKey)})}}},{key:"toggleEditMode",value:function(){this.state.newTitle&&this.props.renameDashboard(this.state.newTitle,this.props.dashboards.get(this.state.activeKey)),this.leaveEditMode()}},{key:"leaveEditMode",value:function(){var e=this;this.setState({editMode:!this.state.editMode,newTitle:null},function(){e.props.setEditMode(e.state.editMode)})}},{key:"renderLayoutSelection",value:function(){return this.state.showLayoutSelection?p.default.createElement(w.default,{show:!0,currentLayoutId:this.props.layout.get("name"),maxColumn:this.props.items.map(function(e){return e.get("xpos")}).max(),onSelect:this.setLayout,onHide:this.cancelDialogs}):null}},{key:"renderWidgetCatalog",value:function(){return this.state.showWidgetCatalog?p.default.createElement(T.default,{show:!0,onSelect:this.addItem,onHide:this.cancelDialogs,widgets:this.widgetList}):null}},{key:"renderDeleteConfirmation",value:function(){var e=this;return p.default.createElement(b.Dialog.Alert.Deferred,{title:(0,y.formatStr)("ask_remove_title"),show:this.state.showDeleteConfirmation,onHide:function(){e.setState({showDeleteConfirmation:!1})},onConfirm:this.deleteDashboard,ActionButton:p.default.createElement(b.Dialog.Buttons.Delete,null)},(0,y.formatStr)("ask_remove"))}},{key:"renderTabTools",value:function(e){return p.default.createElement(b.ButtonGroup,{key:"dashboard-tools"},p.default.createElement(b.Button.IconButton,{iconSrc:_.default,buttonStyle:"success",onClick:this.copyDashboard,title:(0,y.formatStr)("duplicate_dashboard")}),p.default.createElement(b.Button.IconButton,{iconSrc:I.default,buttonStyle:"info",title:(0,y.formatStr)("set_layout"),onClick:this.initSelectLayout}),p.default.createElement(b.Button.IconButton,{iconSrc:v.default,buttonStyle:"danger",title:(0,y.formatStr)("delete_dashboard"),onClick:this.initDeleteDashboard,disabled:1===e.get("is_default")}))}},{key:"renderTabTitles",value:function(){var e=this,t=this.props.dashboards,o=this.state.loadingDashboardContent;return t.map(function(t,n){var a=n===e.state.activeKey;return p.default.createElement(b.Tab.Title,{key:n,eventKey:n,title:a&&null!==e.state.newTitle?e.state.newTitle:t.get("name"),onChange:a&&e.state.editMode?e.changeTabTitle:null,onCancel:e.leaveEditMode,onEnter:e.toggleEditMode,iconName:"csweb_dashboard",disabled:!a&&e.state.editMode||o},a?e.state.editMode?[p.default.createElement(b.Button.IconButton,{key:"dashboard-ok",iconSrc:N.default,buttonStyle:"auxiliary",title:(0,y.formatStr)("close_edit_mode"),onClick:e.toggleEditMode}),e.renderTabTools(t)]:p.default.createElement(b.Button.EditButton,{title:(0,y.formatStr)("activate_edit_mode"),onClick:e.toggleEditMode}):null)})}},{key:"renderDashboards",value:function(){return this.state.loadingDashboardContent&&!this.props.errorOccurred?p.default.createElement("div",{className:"cs-web-dashboard-dashboard__loading-indicator"},p.default.createElement(b.Throbber,null),(0,y.formatStr)("loading")):this.props.errorOccurred?p.default.createElement(b.InfoBox,{title:(0,y.formatStr)("error_title"),msg:(0,y.formatStr)("error_msg"),alertType:"danger",iconName:"csweb_dashboard"}):this.props.items.isEmpty()?p.default.createElement(b.InfoBox,{title:(0,y.formatStr)("empty_title"),msg:(0,y.formatStr)("empty_msg"),alertType:"info",iconName:"csweb_dashboard"}):p.default.createElement(M.default,{items:this.props.items,layout:this.props.layout,widgets:this.widgetComponents})}},{key:"render",value:function(){var e=this.renderTabTitles();return p.default.createElement(b.Channel.Provider,{channelName:"dashboardControllingFunctions",channelValues:this.publicCallables},p.default.createElement("div",{className:"cs-web-dashboard-dashboard"},this.renderLayoutSelection(),this.renderWidgetCatalog(),this.renderDeleteConfirmation(),p.default.createElement(b.ApplicationBar,{items:[{name:(0,y.formatStr)("dashboard"),active:!0,key:1}]},p.default.createElement(b.Button.IconTextButton,{bsSize:"small",iconName:"csweb_add",label:(0,y.formatStr)("adding_widget"),title:(0,y.formatStr)("adding_widget"),size:"sm",buttonStyle:"success",onClick:this.initAddItem,disabled:this.state.loadingDashboardContent})),p.default.createElement(b.Tab.Container,{activeKey:this.state.activeKey,onSelect:this.onSelectDashboard,id:"cs-web-dashboard-selected-dashboard-tab"},p.default.createElement(b.Tab.Bar,{activeKey:this.state.activeKey,onSelectFromMenu:this.onSelectDashboard,disabled:this.state.editMode||this.state.loadingDashboardContent,addControlLabel:(0,y.formatStr)("adding_dashboard")},e),p.default.createElement(b.Tab.Content,null,this.renderDashboards()))))}}]),t}(p.default.Component);O.propTypes={dashboards:f.ImmutablePropTypes.list.isRequired,layout:f.ImmutablePropTypes.map.isRequired,items:f.ImmutablePropTypes.map.isRequired,setDashboard:f.PropTypes.func.isRequired,switchLayout:f.PropTypes.func.isRequired,initItems:f.PropTypes.func.isRequired,createItem:f.PropTypes.func.isRequired,createDashboard:f.PropTypes.func.isRequired,copyDashboard:f.PropTypes.func.isRequired,activeDashboardIndex:f.PropTypes.number,switchDashboard:f.PropTypes.func.isRequired,setEditMode:f.PropTypes.func.isRequired,deleteDashboard:f.PropTypes.func.isRequired,renameDashboard:f.PropTypes.func.isRequired,errorOccurred:f.PropTypes.bool.isRequired,loadingState:f.PropTypes.bool.isRequired};var P={setDashboard:h.setDashboard,switchLayout:h.switchLayout,initItems:h.initItems,createItem:h.createItem,createDashboard:h.createDashboard,switchDashboard:h.switchDashboard,setEditMode:h.setEditMode,copyDashboard:h.copyDashboard,deleteDashboard:h.deleteDashboard,renameDashboard:h.renameDashboard};t.default=(0,f.connect)(s,P)(O)},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.layout.get("columns"),o=t.map(function(e){return l.ColumnWidths[e]}).reduce(function(e,t){return e+t},0),n=(0,s.classNames)("cs-web-dashboard-dashboard__area","cs-web-dashboard-dashboard__area--"+o);return i.default.createElement("div",{className:n},t.map(function(t,o){return i.default.createElement(c.default,{key:o,items:e.items,column:o,columnWidth:t,widgets:e.widgets})}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=o(1),i=n(r),s=o(2),u=o(14),c=n(u),l=o(4);a.propTypes={items:s.ImmutablePropTypes.map.isRequired,layout:s.ImmutablePropTypes.map.isRequired,widgets:s.ImmutablePropTypes.map.isRequired}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return{connectDropTarget:e.dropTarget()}}function r(e){var t=e.items.filter(function(t){return t.get("xpos")===e.column}).sortBy(function(e){return e.get("ypos")}).toArray(),o=(0,u.classNames)("cs-web-dashboard-dashboard__column","cs-web-dashboard-dashboard__column--"+e.columnWidth);return e.connectDropTarget(s.default.createElement("div",{className:o},t.map(function(t){return s.default.createElement(l.default,{key:t.get("cdb_object_id"),item:t,columnWidth:e.columnWidth,widgets:e.widgets})}),s.default.createElement(p.default,{column:e.column})))}Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),s=n(i),u=o(2),c=o(15),l=n(c),d=o(24),p=n(d),f=o(4),b={drop:function(){}};r.propTypes={items:u.ImmutablePropTypes.map.isRequired,column:u.PropTypes.number.isRequired,columnWidth:u.PropTypes.oneOf(["small","medium"]).isRequired,widgets:u.ImmutablePropTypes.map.isRequired,connectDropTarget:u.PropTypes.func.isRequired},t.default=u.ReactDnD.DropTarget(f.DASHBOARD_ITEM_DND_TYPE,b,a)(r)},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),c=n(u),l=o(0),d=o(2),p=o(8),f=n(p),b=o(5),y=n(b),m=o(7),h=o(3),g=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={hasError:!1},o}return i(t,e),s(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){var e=this.props,t=e.item,o=e.columnWidth,n=e.widgets,a=e.setSettings,r=n.get(t.get("widget_id"),f.default.ErrorWidget);return this.state.hasError?c.default.createElement(y.default,{item:t,title:"Error"},c.default.createElement(l.InfoBox,{title:(0,h.formatStr)("error_title"),msg:(0,h.formatStr)("widget_render_err",t.toJS()),alertType:"danger",iconName:"csweb_dashboard"})):c.default.createElement(r,{item:t,columnWidth:o,setSettings:a})}}]),t}(c.default.Component);g.propTypes={item:d.ImmutablePropTypes.map.isRequired,columnWidth:d.PropTypes.oneOf(["small","medium"]).isRequired,widgets:d.ImmutablePropTypes.map.isRequired,setSettings:d.PropTypes.func.isRequired},t.default=(0,d.connect)(void 0,{setSettings:m.setSettings})(g)},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return i.default.createElement(d.default,{item:e.item,title:"Error"},i.default.createElement(u.InfoBox,{title:(0,c.formatStr)("error_title"),msg:(0,c.formatStr)("unknown_widget",e.item.toJS()),alertType:"danger",iconName:"csweb_dashboard"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=o(1),i=n(r),s=o(2),u=o(0),c=o(3),l=o(5),d=n(l);a.propTypes={item:s.ImmutablePropTypes.map.isRequired}},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ij4NPGNpcy1uYW1lPm9wZW4tZXh0ZXJuYWw8L2Npcy1uYW1lPg08cGF0aCBmaWxsPSIjOTk5OTk5IiBkPSJNMTMsNy41MmMwLDAuNTUsMCwyLjk4LDAsMi45OGMwLDIuMjItMS4zNCwzLjUtMy41LDMuNWgtNEMzLjMsMTQsMiwxMi43LDIsMTAuNXYtNEMyLDQuMywzLjMsMyw1LjUsM2gzDQlMNi41Niw1SDVDNC40NSw1LDQsNS40NSw0LDZ2NWMwLDAuNTUsMC40NSwxLDEsMWg1YzAuNTUsMCwxLTAuNDUsMS0xVjkuNTJMMTMsNy41MnogTTEzLjUsMmgtNEM5LjIyLDIsOS4xNiwyLjE2LDkuMzUsMi4zNQ0JbDEuMDksMS4wOUw3LjMyLDYuNTZjLTAuMTksMC4xOS0wLjE5LDAuNTEsMCwwLjcxbDEuNDEsMS40MWMwLjE5LDAuMTksMC41MSwwLjE5LDAuNzEsMGwzLjEyLTMuMTJsMS4wOSwxLjA5DQlDMTMuODQsNi44NCwxNCw2Ljc3LDE0LDYuNXYtNEMxNCwyLjIyLDEzLjc4LDIsMTMuNSwyeiIvPg08L3N2Zz4N"},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function u(e){var t=e.color,o=e.selected,n=e.callback,a=(0,b.classNames)("cs-web-dashboard-text-note-config__colors--frame",s({},"cs-web-dashboard-text-note-config__colors--selected",o));return d.default.createElement("div",{className:a},d.default.createElement("div",{className:"cs-web-dashboard-text-note-config__colors--color"+t,onClick:function(){return n(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(1),d=n(l),p=o(6),f=n(p),b=o(2),y=o(0),m=o(3),h=o(5),g=n(h);u.propTypes={color:b.PropTypes.number.isRequired,selected:b.PropTypes.bool.isRequired,callback:b.PropTypes.func.isRequired};var M=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={showConfig:!1},o.defaultTitle=(0,m.formatStr)("text_no_title"),o.configTitle=(0,m.formatStr)("text_config"),o.openConfig=o.openConfig.bind(o),o.cancelConfig=o.cancelConfig.bind(o),o.saveConfig=o.saveConfig.bind(o),o.handleTitleChange=o.handleTitleChange.bind(o),o.handleContentChange=o.handleContentChange.bind(o),o.handleColorChange=o.handleColorChange.bind(o),o}return i(t,e),c(t,[{key:"openConfig",value:function(){var e=this.props.item;this.setState({showConfig:!0,title:e.getIn(["settings","title"],""),content:e.getIn(["settings","content"],""),color:e.getIn(["settings","color"],0)})}},{key:"cancelConfig",value:function(){this.setState({showConfig:!1})}},{key:"saveConfig",value:function(){var e=this.props,t=e.item,o=e.setSettings,n=this.state,a=n.title,r=n.content,i=n.color;this.setState({showConfig:!1}),o(t,{title:a,content:r,color:i})}},{key:"handleTitleChange",value:function(e){this.setState({title:e})}},{key:"handleContentChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleColorChange",value:function(e){this.setState({color:e})}},{key:"renderConfigurationDialog",value:function(){var e=this;return this.state.showConfig?d.default.createElement(y.Dialog.Dialog,{title:this.configTitle,buttons:[d.default.createElement(y.Dialog.Buttons.Save,{key:"save",onClick:this.saveConfig}),d.default.createElement(y.Dialog.Buttons.Cancel,{key:"cancel",onClick:this.cancelConfig})],showCancel:!0,onHide:this.cancelConfig},d.default.createElement(y.FormControl.TextInput,{name:"title_input",label:"Titel",value:this.state.title,onValueChange:this.handleTitleChange}),d.default.createElement(y.FormControl.TextArea,{name:"content_input",label:"Inhalt",value:this.state.content,onChange:this.handleContentChange,rows:6}),d.default.createElement("div",{className:"cs-web-dashboard-text-note-config__colors"},f.default.Range(0,6).map(function(t){return d.default.createElement(u,{key:t,color:t,selected:e.state.color===t,callback:e.handleColorChange})}))):null}},{key:"render",value:function(){var e=this.props.item,t=(0,b.classNames)("cs-web-dashboard-text-note-content","cs-web-dashboard-text-note-content--color"+e.getIn(["settings","color"],0));return d.default.createElement(g.default,{item:e,title:e.getIn(["settings","title"],this.defaultTitle),configCallback:this.openConfig},d.default.createElement("div",{className:t},e.getIn(["settings","content"],"")),this.renderConfigurationDialog())}}]),t}(d.default.Component);t.default=M,M.propTypes={item:b.ImmutablePropTypes.map.isRequired,setSettings:b.PropTypes.func.isRequired}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var o=t.item,n=o.getIn(["settings","contextObjectId"]);return{contextObjectId:n,contextObject:void 0===n?void 0:e.objectsById.get(n)}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(1),l=n(c),d=o(0),p=o(2),f=o(3),b=o(5),y=n(b),m=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={tileComponent:void 0,showConfig:!1,tempValue:null},o.openConfig=o.openConfig.bind(o),o.cancelConfig=o.cancelConfig.bind(o),o.saveConfig=o.saveConfig.bind(o),o.onSelectItem=o.onSelectItem.bind(o),o}return i(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.contextObjectId,o=e.contextObject,n=e.fetchObject;void 0!==t&&void 0===o&&n(t),void 0!==o&&this.setTile(o)}},{key:"componentWillReceiveProps",value:function(e){this.props.contextObjectId!==e.contextObjectId&&void 0!==e.contextObjectId&&e.fetchObject(e.contextObjectId),this.props.contextObject!==e.contextObject&&(void 0===e.contextObject?this.setState({tileComponent:void 0}):this.setTile(e.contextObject))}},{key:"setTile",value:function(e){var t=e.get("system:classname"),o=(0,d.getPlugin)("class-tile-small",function(e){return e===t},d.Tiles.FallbackTile);this.setState({tileComponent:o})}},{key:"openConfig",value:function(){var e=this.props.contextObjectId;this.setState({showConfig:!0,tempValue:e})}},{key:"cancelConfig",value:function(){this.setState({showConfig:!1})}},{key:"saveConfig",value:function(){var e=this.props,t=e.item,o=e.setSettings;this.setState({showConfig:!1}),o(t,{contextObjectId:this.state.tempValue})}},{key:"onSelectItem",value:function(e){var t=this;this.setState({tempValue:e.get("rest_url")},function(){t.saveConfig()})}},{key:"renderInputDialog",value:function(){var e=this.state.showConfig;return l.default.createElement(d.Dialog.Dialog,{title:(0,f.formatStr)("object_widget_select"),show:e,showCancel:!0,onHide:this.cancelConfig},l.default.createElement(d.ObjectWidgets.ObjectSearch,{id:"object-widget-search",onSelectItem:this.onSelectItem,searchPlaceholder:(0,f.formatStr)("object_widget_search")}))}},{key:"render",value:function(){var e=this.state.tileComponent,t=this.props.contextObject,o=void 0===t?(0,f.formatStr)("object_no_title"):t.get("system:description");return l.default.createElement(y.default,{item:this.props.item,title:o,configCallback:this.openConfig},void 0===e?l.default.createElement(d.Button.TextButton,{buttonStyle:"link",label:(0,f.formatStr)("object_widget_select"),onClick:this.openConfig}):l.default.createElement(e,{contextObject:t}),this.renderInputDialog())}}]),t}(l.default.Component);m.propTypes={item:p.ImmutablePropTypes.map.isRequired,fetchObject:p.PropTypes.func.isRequired,setSettings:p.PropTypes.func.isRequired,contextObjectId:p.PropTypes.string,contextObject:p.ImmutablePropTypes.map},t.default=(0,p.connect)(s,{fetchObject:d.fetchObject})(m)},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),c=n(u),l=o(6),d=n(l),p=o(2),f=o(0),b=o(5),y=n(b),m=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={searchResult:void 0,searchResultMinified:e.collectionURLMinified?void 0:null},o}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,o=t.collectionURL,n=t.collectionURLMinified;(0,f.getJSON)(o).then(function(t){e.setState({searchResult:d.default.fromJS(t)})}),n&&(0,f.getJSON)(n).then(function(t){e.setState({searchResultMinified:d.default.fromJS(t)})})}},{key:"renderContentSmall",value:function(){var e=this.state.searchResultMinified;return null===e?this.renderContentMedium():c.default.createElement(f.TableWrapper,{tableDef:e.get("tabledef"),rowValues:e.get("rows"),table:function(){return f.Table.SimpleTable}})}},{key:"renderContentMedium",value:function(){var e=this.state.searchResult;return c.default.createElement(f.TableWrapper,{tableDef:e.get("tabledef"),rowValues:e.get("rows"),table:function(){return f.Table.SimpleTable}})}},{key:"renderBody",value:function(){var e=this.state,t=e.searchResult,o=e.searchResultMinified;if(void 0===t||void 0===o)return"Loading ...";switch(this.props.columnWidth){case"small":return this.renderContentSmall();default:return this.renderContentMedium()}}},{key:"render",value:function(){var e=this.props,t=e.item,o=e.title;return c.default.createElement(y.default,{item:t,title:o},this.renderBody())}}]),t}(c.default.Component);t.default=m,m.propTypes={item:p.ImmutablePropTypes.map.isRequired,columnWidth:p.PropTypes.oneOf(["small","medium"]).isRequired,setSettings:p.PropTypes.func.isRequired,title:p.PropTypes.string.isRequired,collectionURL:p.PropTypes.string.isRequired,collectionURLMinified:p.PropTypes.string}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),c=n(u),l=o(2),d=o(0),p=o(3),f=o(5),b=n(f),y=0,m=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={showConfig:!1},o.instanceName="cs-web-dashboard-SearchFavouriteWidget-"+ ++y,o.selectedFavourite=null,o.openConfig=o.openConfig.bind(o),o.cancelConfig=o.cancelConfig.bind(o),o.saveConfig=o.saveConfig.bind(o),o}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.item;(0,e.createSearchInstance)(this.instanceName);var o=t.getIn(["settings","favourite"]);this.triggerSearch(o)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.item.getIn(["settings","favourite"]),o=e.item.getIn(["settings","favourite"]);t!==o&&this.triggerSearch(o)}},{key:"triggerSearch",value:function(e){if(void 0!==e){var t=this.props,o=t.initClassSearch,n=t.selectFavourite,a=e.get("classname"),r=e.get("id");a&&(o(a),r&&n(this.instanceName,a,r))}}},{key:"openConfig",value:function(){this.setState({showConfig:!0})}},{key:"cancelConfig",value:function(){this.setState({showConfig:!1})}},{key:"saveConfig",value:function(e,t){var o=this.props,n=o.item,a=o.setSettings;this.setState({showConfig:!1}),a(n,{favourite:{classname:e,id:t}})}},{key:"renderInputDialog",value:function(e){if(!this.state.showConfig)return null;var t=this.props.item;return c.default.createElement(d.SearchApi.FavouriteSelectorDialog,{instanceName:this.instanceName,initialClassname:t.getIn(["settings","favourite","classname"]),initialFavouriteId:t.getIn(["settings","favourite","id"]),title:e,onSave:this.saveConfig,onCancel:this.cancelConfig})}},{key:"render",value:function(){var e=this,t=(0,p.formatStrWithDomain)("select_search_favourite","base");return c.default.createElement(d.SearchApi.SearchByFavourite,{instanceName:this.instanceName},function(o,n){return c.default.createElement(b.default,{item:e.props.item,title:o||t,configCallback:e.openConfig},e.renderInputDialog(t),n?c.default.createElement("div",{className:"cs-web-dashboard-search-favourite"},n):c.default.createElement(d.Button.TextButton,{buttonStyle:"link",label:t,onClick:e.openConfig}))})}}]),t}(c.default.Component);m.propTypes={item:l.ImmutablePropTypes.map.isRequired,setSettings:l.PropTypes.func.isRequired,initClassSearch:l.PropTypes.func.isRequired,createSearchInstance:l.PropTypes.func.isRequired,selectFavourite:l.PropTypes.func.isRequired},t.default=(0,l.connect)(null,d.SearchApi.Actions)(m)},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),c=n(u),l=o(2),d=o(0),p=o(3),f=o(5),b=n(f),y=o(23),m=n(y),h=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={hoverClass:"cs-web-dashboard-onboarding-text-like-link-inactive"},o}return i(t,e),s(t,[{key:"mouseHover",value:function(e){e?this.setState({hoverClass:"cs-web-dashboard-onboarding-text-like-link"}):this.setState({hoverClass:"cs-web-dashboard-onboarding-text-like-link-inactive"})}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"cs-web-dashboard-onboarding-action-link"},c.default.createElement("span",{className:"cs-web-dashboard-onboarding-cursor",onClick:this.props.onClick},c.default.createElement(d.Button.IconButton,{iconName:this.props.iconName,size:this.props.iconSize,buttonStyle:"success"}),c.default.createElement("span",{className:this.state.hoverClass,onMouseEnter:function(){return e.mouseHover(!0)},onMouseLeave:function(){return e.mouseHover(!1)}},this.props.label)))}}]),t}(c.default.Component);h.propTypes={label:l.PropTypes.string.isRequired,iconName:l.PropTypes.string.isRequired,iconSize:l.PropTypes.string.isRequired,onClick:l.PropTypes.func.isRequired};var g=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("div",{className:"cs-web-dashboard-onboarding-side-by-side"},c.default.createElement("img",{src:m.default})),c.default.createElement("div",{className:(0,l.classNames)("cs-web-dashboard-onboarding-side-by-side","cs-web-dashboard-onboarding-explanation")},c.default.createElement("p",null,(0,p.formatStr)("welcome_to")),c.default.createElement("p",null,(0,p.formatStr)("desc")),c.default.createElement("p",{className:"cs-web-dashboard-onboarding-paragraph-padding"},(0,p.formatStr)("change_by")),c.default.createElement("div",null,c.default.createElement(h,{label:(0,p.formatStr)("adding_widget"),iconName:"csweb_add",iconSize:"sm",onClick:this.props.addWidgetFunc}),c.default.createElement(h,{label:(0,p.formatStr)("activate_edit_mode"),iconName:"csweb_edit",iconSize:"sm",onClick:this.props.editModeFunc}))))}}]),t}(c.default.Component);g.defaultProps={addWidgetFunc:function(){},editModeFunc:function(){}},g.propTypes={addWidgetFunc:l.PropTypes.func.isRequired,editModeFunc:l.PropTypes.func.isRequired};var M=function(e){function t(e){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"render",value:function(){return c.default.createElement(b.default,{item:this.props.item,title:(0,p.formatStr)("welcome"),itemCollapsible:!1},c.default.createElement(d.Channel.Listener,{channelName:"dashboardControllingFunctions",channelMapping:{addWidgetFunc:"addWidgetFunc",editModeFunc:"editModeFunc"}},c.default.createElement(g,null)))}}]),t}(c.default.Component);t.default=M,M.propTypes={item:l.ImmutablePropTypes.map.isRequired}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iRWJlbmVfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAyMTguOSAxODcuNyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjE4LjkgMTg3LjciIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGcgaWQ9ImRpc3BsYXlfMl8iPg0KCTxnPg0KCQk8cGF0aCBmaWxsPSIjNzNCOURGIiBkPSJNMjExLjIsMEg3LjhDMy41LDAsMCwzLjUsMCw3Ljh2MTMzYzAsNC4zLDMuNSw3LjgsNy44LDcuOGg4NmMwLDEuNSwwLDMuOSwwLDcuOA0KCQkJYzAsMTUuNi0xNS4zLDE1LjYtMTUuMywxNS42SDQ5LjdjLTEuNSwwLTIuOCwxLjMtMi44LDIuOHYxMi45SDE3MnYtMTIuOWMwLTEuNS0xLjMtMi44LTIuOC0yLjhoLTI4LjVjMCwwLTE1LjYsMC0xNS42LTE1LjYNCgkJCWMwLTMuOSwwLTYuNCwwLTcuOGg4NmM0LjMsMCw3LjgtMy41LDcuOC03LjhWNy44QzIxOSwzLjUsMjE1LjUsMCwyMTEuMiwweiBNMjAzLjQsMTQwLjhoLTcuOFYxMzNoNy44VjE0MC44eiBNMjAzLjQsMTI1LjFIMTUuNg0KCQkJVjE1LjZoMTg3Ljd2MTA5LjVIMjAzLjR6Ii8+DQoJPC9nPg0KPC9nPg0KPGcgaWQ9ImNoYXJ0c18yXyI+DQoJPGc+DQoJCTxwYXRoIGZpbGw9IiM3M0I5REYiIGQ9Ik03MC4zLDg1LjhWNjEuMWMwLTAuNS0wLjQtMC45LTAuOS0wLjloLTYuOGMtMC41LDAtMC45LDAuNC0wLjksMC45djI0LjdINjBWNDkuMmMwLTAuNS0wLjQtMC45LTAuOS0wLjkNCgkJCWgtNi44Yy0wLjUsMC0wLjksMC40LTAuOSwwLjl2MzYuNmgtMS43VjY3LjljMC0wLjUtMC40LTAuOS0wLjktMC45SDQyYy0wLjUsMC0wLjksMC40LTAuOSwwLjl2MTcuOWgtMS43di03LjcNCgkJCWMwLTAuNS0wLjQtMC45LTAuOS0wLjlIMzJjLTAuNSwwLTAuOSwwLjQtMC45LDAuOVY3OXY2LjhoLTMuNHYzLjRoNDZ2LTEuN3YtMS43TDcwLjMsODUuOEw3MC4zLDg1Ljh6Ii8+DQoJPC9nPg0KPC9nPg0KPGcgaWQ9InBpZS1jaGFydF8yXyI+DQoJPGc+DQoJCTxnPg0KCQkJPHBhdGggZmlsbD0iIzczQjlERiIgZD0iTTkwLjgsNjcuOWMwLTEwLjcsOC43LTE5LjQsMTkuNS0xOS40YzUuNCwwLDEwLjIsMi4yLDEzLjcsNS43bC0xMy44LDEzLjd2MTkuNA0KCQkJCUM5OS44LDg3LjMsOTAuOCw3OC42LDkwLjgsNjcuOXoiLz4NCgkJPC9nPg0KCQk8cGF0aCBvcGFjaXR5PSIwLjMiIGZpbGw9IiM3M0I5REYiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgICAgIiBkPSJNMTEzLjgsNjcuOWwxMy43LTEzLjdjNy42LDcuNiw3LjYsMTkuOSwwLDI3LjVMMTEzLjgsNjcuOXoiLz4NCgkJPHBhdGggb3BhY2l0eT0iMC41IiBmaWxsPSIjNzNCOURGIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3ICAgICIgZD0iTTExMS45LDY5LjV2MTkuNGM1LjIsMCw5LjktMS45LDEzLjctNS43TDExMS45LDY5LjV6Ii8+DQoJPC9nPg0KPC9nPg0KPGcgaWQ9ImNvZ3doZWVsXzJfIj4NCgk8Zz4NCgkJPHBhdGggZmlsbD0iIzczQjlERiIgZD0iTTE4OSw3MS41YzAuMS0wLjksMC4yLTEuOCwwLjItMi43YzAtMC45LTAuMS0xLjgtMC4yLTIuN2wtNS42LTEuNGMtMC40LTEuNC0wLjktMi42LTEuNi0zLjhsMy00LjkNCgkJCWMtMS4xLTEuNC0yLjQtMi43LTMuOS0zLjlsLTQuOSwzYy0xLjItMC43LTIuNS0xLjItMy44LTEuNmwtMS40LTUuNmMtMC45LTAuMS0xLjgtMC4yLTIuNy0wLjJzLTEuOCwwLjEtMi43LDAuMmwtMS40LDUuNg0KCQkJYy0xLjQsMC40LTIuNiwwLjktMy44LDEuNmwtNC45LTNjLTEuNCwxLjEtMi43LDIuNC0zLjksMy45bDMsNC45Yy0wLjcsMS4yLTEuMiwyLjUtMS42LDMuOGwtNS42LDEuNGMtMC4xLDAuOS0wLjIsMS44LTAuMiwyLjcNCgkJCWMwLDAuOSwwLjEsMS44LDAuMiwyLjdsNS42LDEuNGMwLjQsMS40LDAuOSwyLjYsMS42LDMuOGwtMyw0LjljMS4xLDEuNCwyLjQsMi43LDMuOSwzLjlsNC45LTNjMS4yLDAuNywyLjUsMS4yLDMuOCwxLjZsMS40LDUuNg0KCQkJYzAuOSwwLjEsMS44LDAuMiwyLjcsMC4yczEuOC0wLjEsMi43LTAuMmwxLjQtNS42YzEuNC0wLjQsMi42LTAuOSwzLjgtMS42bDQuOSwzYzEuNC0xLjEsMi43LTIuNCwzLjgtMy45bC0zLTQuOQ0KCQkJYzAuNy0xLjIsMS4yLTIuNSwxLjYtMy44TDE4OSw3MS41eiBNMTY4LjEsNzYuMWMtNC4xLDAtNy40LTMuMy03LjQtNy40czMuMy03LjQsNy40LTcuNGM0LjEsMCw3LjQsMy4zLDcuNCw3LjQNCgkJCVMxNzIuMSw3Ni4xLDE2OC4xLDc2LjF6Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo="},function(e,t,o){"use strict";function n(e){return{connectDropTarget:e.dropTarget()}}function a(e){return e.connectDropTarget(i.default.createElement("div",{className:"cs-web-dashboard-dashboard__column-drop-area"}))}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r),s=o(2),u=o(7),c=o(4),l={drop:function(){},hover:function(e,t){var o=t.getItem(),n=o.origItem,a=e.column;e.moveItemToColumn(n.get("cdb_object_id"),a)}};a.propTypes={column:s.PropTypes.number.isRequired,moveItemToColumn:s.PropTypes.func.isRequired,connectDropTarget:s.PropTypes.func.isRequired},t.default=(0,s.connect)(void 0,{moveItemToColumn:u.moveItemToColumn})(s.ReactDnD.DropTarget(c.DASHBOARD_ITEM_DND_TYPE,l,n)(a))},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=o(1),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=o(26),l=o(2),d=o(0),p=o(3),f=function(e){function t(e){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={selectedId:void 0},o}return r(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props,o=t.show,n=t.onSelect,a=t.onHide,r=t.widgets,i=this.state.selectedId;return u.default.createElement(d.Dialog.Dialog,{title:(0,p.formatStr)("adding_widget"),buttons:[u.default.createElement(d.Dialog.Buttons.Add,{key:"confirm",label:(0,p.formatStr)("adding_widget"),disabled:void 0===i,onClick:function(){n(r.get(i))}}),u.default.createElement(d.Dialog.Buttons.Cancel,{key:"cancel",onClick:a})],size:d.Dialog.SIZE_SMALL,showCancel:!0,show:o,onHide:a},u.default.createElement("div",{className:"cs-web-dashboard-widget-dialog-body"},u.default.createElement(c.Table,{condensed:!0,bordered:!0,striped:!0,hover:!0},u.default.createElement("tbody",null,r.map(function(t,o){return u.default.createElement("tr",{key:o,className:(0,l.classNames)({selected:o===i})},u.default.createElement("td",{onClick:function(){e.setState({selectedId:o})}},t.get("name")))}))),u.default.createElement("div",{className:"cs-web-dashboard-widget-dialog-body__descr"},r.getIn([i,"description"]))))}}]),t}(u.default.Component);t.default=f,f.propTypes={show:l.PropTypes.bool,onSelect:l.PropTypes.func.isRequired,onHide:l.PropTypes.func.isRequired,widgets:l.ImmutablePropTypes.list.isRequired}},function(e,t){e.exports=a},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e){var t,o=e.layout.get("columns"),n=o.map(function(e){return b.ColumnWidths[e]}).reduce(function(e,t){return e+t},0),a=e.maxColumn<o.size,r=(0,p.classNames)("cs-web-dashboard-layout-symbol--"+n,(t={},i(t,"cs-web-dashboard-layout-symbol--selected",e.selected),i(t,"cs-web-dashboard-layout-symbol--inactive",!a),t));return d.default.createElement("div",{className:"cs-web-dashboard-layout-symbol"},d.default.createElement("div",{className:r,title:a?void 0:(0,y.formatStr)("cant_use_layout"),onClick:a?function(){return e.callback(e.id)}:void 0},o.map(function(e,t){var o=(0,p.classNames)("cs-web-dashboard-layout-symbol__column","cs-web-dashboard-layout-symbol__column--"+e),a=m(b.ColumnWidths[e],n),r=c(a,2),i=r[0],s=r[1],u=i+"/"+s;return d.default.createElement("div",{key:t,className:o},d.default.createElement("div",{className:"cs-web-dashboard-layout-symbol__inner-column"},d.default.createElement("div",{className:"cs-web-dashboard-layout-symbol__caption"},u)))})))}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=function(){function e(e,t){var o=[],n=!0,a=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(o.push(i.value),!t||o.length!==t);n=!0);}catch(e){a=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=o(1),d=function(e){return e&&e.__esModule?e:{default:e}}(l),p=o(2),f=o(0),b=o(4),y=o(3),m=function(e,t){var o=function e(t,o){return o?e(o,t%o):t}(e,t);return[e/o,t/o]};s.propTypes={layout:p.ImmutablePropTypes.map.isRequired,id:p.PropTypes.string.isRequired,maxColumn:p.PropTypes.number.isRequired,selected:p.PropTypes.bool.isRequired,callback:p.PropTypes.func.isRequired};var h=function(e){function t(e){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={selectedId:e.currentLayoutId},o.onCancel=o.onCancel.bind(o),o.layoutClicked=o.layoutClicked.bind(o),o.onOK=o.onOK.bind(o),o}return r(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){this.props.currentLayoutId!==e.currentLayoutId&&this.setState({selectedId:e.currentLayoutId})}},{key:"onOK",value:function(){this.props.onSelect(this.state.selectedId)}},{key:"onCancel",value:function(){var e=this.props,t=e.onHide,o=e.currentLayoutId;t(),this.setState({selectedId:o})}},{key:"layoutClicked",value:function(e){this.setState({selectedId:e})}},{key:"render",value:function(){var e=this;return d.default.createElement(f.Dialog.Dialog,{title:(0,y.formatStr)("set_layout"),buttons:[d.default.createElement(f.Dialog.Buttons.Apply,{key:"apply",onClick:this.onOK}),d.default.createElement(f.Dialog.Buttons.Cancel,{key:"cancel",onClick:this.onCancel})],size:f.Dialog.SIZE_SMALL,showCancel:!0,show:this.props.show,onHide:this.onCancel},d.default.createElement("div",{className:"cs-web-dashboard-layout-selection-body"},b.Layouts.map(function(t,o){return d.default.createElement(s,{key:o,layout:t,id:o,maxColumn:e.props.maxColumn,selected:e.state.selectedId===o,callback:e.layoutClicked})}).toArray()))}}]),t}(d.default.Component);t.default=h,h.propTypes={show:p.PropTypes.bool,currentLayoutId:p.PropTypes.string.isRequired,maxColumn:p.PropTypes.number.isRequired,onSelect:p.PropTypes.func.isRequired,onHide:p.PropTypes.func.isRequired}},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ij4NPGNpcy1uYW1lPnRoPC9jaXMtbmFtZT4NPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiM5OTk5OTkiIGQ9Ik0xMywzLjVDMTMsMy4yMiwxMi43NywzLDEyLjUsM2gtMkMxMC4yMywzLDEwLDMuMjIsMTAsMy41djINCUMxMCw1Ljc4LDEwLjIzLDYsMTAuNSw2aDJDMTIuNzcsNiwxMyw1Ljc4LDEzLDUuNVYzLjV6IE0xMyw3LjVDMTMsNy4yMiwxMi43Nyw3LDEyLjUsN2gtMkMxMC4yMyw3LDEwLDcuMjIsMTAsNy41djINCWMwLDAuMjgsMC4yMywwLjUsMC41LDAuNWgyYzAuMjcsMCwwLjUtMC4yMiwwLjUtMC41VjcuNXogTTEzLDExLjVjMC0wLjI4LTAuMjMtMC41LTAuNS0wLjVoLTJjLTAuMjcsMC0wLjUsMC4yMi0wLjUsMC41djINCWMwLDAuMjgsMC4yMywwLjUsMC41LDAuNWgyYzAuMjcsMCwwLjUtMC4yMiwwLjUtMC41VjExLjV6IE05LDMuNUM5LDMuMjIsOC43NywzLDguNSwzaC0yQzYuMjMsMyw2LDMuMjIsNiwzLjV2Mg0JQzYsNS43OCw2LjIzLDYsNi41LDZoMkM4Ljc3LDYsOSw1Ljc4LDksNS41VjMuNXogTTksNy41QzksNy4yMiw4Ljc3LDcsOC41LDdoLTJDNi4yMyw3LDYsNy4yMiw2LDcuNXYyQzYsOS43OCw2LjIzLDEwLDYuNSwxMGgyDQlDOC43NywxMCw5LDkuNzgsOSw5LjVWNy41eiBNOSwxMS41QzksMTEuMjIsOC43NywxMSw4LjUsMTFoLTJDNi4yMywxMSw2LDExLjIyLDYsMTEuNXYyQzYsMTMuNzgsNi4yMywxNCw2LjUsMTRoMg0JQzguNzcsMTQsOSwxMy43OCw5LDEzLjVWMTEuNXogTTUsMy41QzUsMy4yMiw0Ljc3LDMsNC41LDNoLTJDMi4yMywzLDIsMy4yMiwyLDMuNXYyQzIsNS43OCwyLjIzLDYsMi41LDZoMkM0Ljc3LDYsNSw1Ljc4LDUsNS41VjMuNQ0JeiBNNSw3LjVDNSw3LjIyLDQuNzcsNyw0LjUsN2gtMkMyLjIzLDcsMiw3LjIyLDIsNy41djJDMiw5Ljc4LDIuMjMsMTAsMi41LDEwaDJDNC43NywxMCw1LDkuNzgsNSw5LjVWNy41eiBNNSwxMS41DQlDNSwxMS4yMiw0Ljc3LDExLDQuNSwxMWgtMkMyLjIzLDExLDIsMTEuMjIsMiwxMS41djJDMiwxMy43OCwyLjIzLDE0LDIuNSwxNGgyQzQuNzcsMTQsNSwxMy43OCw1LDEzLjVWMTEuNXoiLz4NPC9zdmc+DQ=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ij4NPGNpcy1uYW1lPm9rPC9jaXMtbmFtZT4NPHBhdGggZmlsbD0iIzk5OTk5OSIgZD0iTTIuNDYsOS42NGMtMC4xLTAuMS0wLjEtMC4yNiwwLTAuMzVsMS43Ny0xLjc3YzAuMS0wLjEsMC4yNi0wLjEsMC4zNSwwbDEuNzEsMS43MWMwLjEsMC4xLDAuMjYsMC4xLDAuMzUsMA0JbDUuNzEtNS43MWMwLjEtMC4xLDAuMjYtMC4xLDAuMzUsMGwxLjc3LDEuNzdjMC4xLDAuMSwwLjEsMC4yNiwwLDAuMzVsLTcuODMsNy44NGMtMC4xLDAuMS0wLjI2LDAuMS0wLjM1LDBMMi40Niw5LjY0eiIvPg08L3N2Zz4N"},function(e,t,o){"use strict";function n(e,t){var o=e.filter(function(e){return e.get("xpos")===t}).valueSeq().sortBy(function(e){return e.get("ypos")}),n=r.default.Range(1,o.size+1);return e.mergeDeep(r.default.Map(o.zipWith(function(e,t){return e.set("ypos",t)},n).map(function(e){return[e.get("cdb_object_id"),e]})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.Actions.SET_DASHBOARD:return e.updateIn(["dashboards"],function(e){return e.mergeDeep(t.payload.dashboards).sortBy(function(e){return e.get("position_index")})});case i.Actions.CREATED_DASHBOARD:var o=e.get("dashboards").set(t.payload.cdb_object_id,r.default.fromJS(t.payload));return e.set("dashboards",o).set("activeIndex",o.size-1);case i.Actions.SWITCH_DASHBOARD:return e.set("activeIndex",t.payload);case i.Actions.SET_EDIT_MODE:return e.set("editMode",t.payload);case i.Actions.SET_LOADING_STATE:return e.set("loadingState",!0);case i.Actions.CREATE_DASHBOARD_FAILED:return e.set("errorOccurred",!0);case i.Actions.DASHBOARD_DELETED:var a=e.get("dashboards").filter(function(e){return e.get("cdb_object_id")!==t.payload.dboard_id}),u=e.set("dashboards",a);return u=u.set("editMode",!1),u=u.set("activeIndex",0);case i.Actions.SWITCH_LAYOUT:var c=e.get("dashboards").get(t.payload.dboard_id).set("layout",t.payload.layout),l=e.get("dashboards").set(t.payload.dboard_id,c);return e.set("dashboards",l);case i.Actions.RENAME_DASHBOARD:var d=e.get("dashboards").get(t.payload.dboard_id).set("name",t.payload.name),p=e.get("dashboards").set(t.payload.dboard_id,d);return e.set("dashboards",p);case i.Actions.INIT_ITEMS:var f=r.default.fromJS(t.payload.items),b=e.get("items").filter(function(e,t){return f.has(t)}).mergeDeep(f);return e.set("items",b).set("loadingState",!1);case i.Actions.CREATE_ITEM:return e.setIn(["items",t.payload.cdb_object_id],r.default.fromJS(t.payload));case i.Actions.CREATED_ITEM:return e.deleteIn(["items",t.meta.tempId]).setIn(["items",t.payload.cdb_object_id],r.default.fromJS(t.payload));case i.Actions.CREATE_ITEM_FAILED:return e.set("errorOccurred",!0).set("loadingState",!1);case i.Actions.DELETE_ITEM:return e.deleteIn(["items",t.payload.get("cdb_object_id")]);case i.Actions.MOVE_ITEM_BEFORE:var y=t.payload,m=y.id,h=y.beforeId,g=e.getIn(["items",h,"xpos"]),M=e.getIn(["items",h,"ypos"]);return e.mergeIn(["items",m],{xpos:g,ypos:M-.5});case i.Actions.REVERT_MOVE_ITEM:var D=t.payload,T={xpos:D.get("xpos"),ypos:D.get("ypos")};return e.mergeIn(["items",D.get("cdb_object_id")],T);case i.Actions.MOVE_ITEM_TO_COLUMN:var E=t.payload,w=E.id,L=E.column,_=e.get("items").filter(function(e){return e.get("xpos")===L}).filter(function(e){return e.get("cdb_object_id")!==w}).map(function(e){return e.get("ypos")}).valueSeq().max(),S={xpos:L,ypos:void 0===_?1:_+1};return e.mergeIn(["items",w],S);case i.Actions.NORMALIZE_POSITIONS:var I=t.payload,C=I.get("xpos"),v=e.getIn(["items",I.get("cdb_object_id"),"xpos"]),j=n(e.get("items"),C);return v!==C&&(j=n(j,v)),e.set("items",j);case i.Actions.SET_SETTINGS:var N=t.payload,A=N.item,O=N.settings;return e.mergeDeepIn(["items",A.get("cdb_object_id"),"settings"],O);case i.Actions.UPDATE_ITEM:var P=t.payload;return e.mergeDeepIn(["items",P.cdb_object_id],P);case i.Actions.SET_ITEM_COLLAPSED:var R=t.payload,x=R.item,k=R.collapsed;return e.setIn(["items",x.get("cdb_object_id"),"collapsed"],k);default:return e}};var a=o(6),r=function(e){return e&&e.__esModule?e:{default:e}}(a),i=o(4),s=r.default.fromJS({dashboards:{},items:{},activeIndex:0,errorOccurred:!1,loadingState:!0})}])});
//# sourceMappingURL=cs-web-dashboard.6dc8cc60b969be27d6cb.js.map