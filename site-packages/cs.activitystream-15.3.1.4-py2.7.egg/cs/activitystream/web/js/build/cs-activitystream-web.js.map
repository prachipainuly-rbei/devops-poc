{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///cs-activitystream-web.js","webpack:///webpack/bootstrap 5d5a4a24ad7719d13070","webpack:///external \"React\"","webpack:///external \"cs-web-components-externals\"","webpack:///webpack/cs-activitystream-web/src/helpers.js","webpack:///external \"cs-web-components-base\"","webpack:///external \"Immutable\"","webpack:///webpack/cs-activitystream-web/src/i18n.js","webpack:///webpack/cs-activitystream-web/src/components/Actions.jsx","webpack:///webpack/cs-activitystream-web/src/constants.js","webpack:///webpack/cs-activitystream-web/src/actions/actions.js","webpack:///webpack/cs-activitystream-web/src/components/PostingList.jsx","webpack:///webpack/cs-activitystream-web/src/components/Channel.jsx","webpack:///webpack/cs-activitystream-web/src/components/Attachments.jsx","webpack:///webpack/cs-activitystream-web/src/components/PostingLayout.jsx","webpack:///webpack/cs-activitystream-web/src/components/ActivityDate.jsx","webpack:///webpack/cs-activitystream-web/src/components/ActivityText.jsx","webpack:///webpack/cs-activitystream-web/src/components/FileViewer.jsx","webpack:///external \"ReactBootstrap\"","webpack:///webpack/cs-activitystream-web/src/components/PostingAuthor.jsx","webpack:///webpack/cs-activitystream-web/src/containers/PageLayout.jsx","webpack:///webpack/cs-activitystream-web/src/components/ReferenceObject.jsx","webpack:///webpack/cs-activitystream-web/src/components/Posting.jsx","webpack:///webpack/cs-activitystream-web/src/components/Topics.jsx","webpack:///webpack/cs-activitystream-web/src/components/CreateForm.jsx","webpack:///webpack/cs-activitystream-web/src/components/ObjectPostings.jsx","webpack:///webpack/cs-activitystream-web/src/index.js","webpack:///external \"moment\"","webpack:///webpack/cs-activitystream-web/src/reducers/reducers.js","webpack:///webpack/cs-activitystream-web/src/containers/App.jsx","webpack:///webpack/cs-activitystream-web/src/containers/AppMain.jsx","webpack:///webpack/cs-activitystream-web/src/components/Sidebar.jsx","webpack:///webpack/cs-activitystream-web/src/components/Channels.jsx","webpack:///webpack/cs-activitystream-web/src/components/Subscriptions.jsx","webpack:///webpack/cs-activitystream-web/src/components/FilterBar.jsx","webpack:///webpack/cs-activitystream-web/src/components/PersonFilter.jsx","webpack:///webpack/cs-activitystream-web/src/components/SystemPosting.jsx","webpack:///webpack/cs-activitystream-web/src/components/PersonPicture.jsx","webpack:///webpack/cs-activitystream-web/src/components/Footer.jsx","webpack:///webpack/cs-activitystream-web/node_modules/autolinker/dist/Autolinker.js","webpack:///webpack/cs-activitystream-web/node_modules/trim-right/index.js","webpack:///webpack/cs-activitystream-web/src/components/UserPosting.jsx","webpack:///webpack/cs-activitystream-web/src/components/Comments.jsx","webpack:///external \"ReactDOM\"","webpack:///webpack/cs-activitystream-web/src/components/Comment.jsx","webpack:///webpack/cs-activitystream-web/src/containers/Thread.jsx","webpack:///webpack/cs-activitystream-web/src/components/ObjectActivities.jsx","webpack:///webpack/cs-activitystream-web/src/components/ObjectActivitiesBlock.jsx","webpack:///webpack/cs-activitystream-web/src/dashboard_widget/DashboardWidget.jsx","webpack:///external \"cs-web-dashboard\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_16__","__WEBPACK_EXTERNAL_MODULE_25__","__WEBPACK_EXTERNAL_MODULE_41__","__WEBPACK_EXTERNAL_MODULE_47__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","obj","default","prefixNS","getReferencedPostings","state","oids","undefined","objectsById","map","ref","filter","formatDate","dateStr","_moment2","moment","ISO_8601","calendar","getPostingURL","postingID","collURL","_csWebComponentsBase","getAppSetup","getIn","byTopicURL","topicID","TOPIC_LINK","getToLink","url","getLocalPathForURL","APPBASE","convertSearchResultItem","item","Immutable","Map","cdb_object_id","description","object_icon","object_id","filterChannels","channels","text","toLowerCase","channel","indexOf","value","_moment","_constants","_immutable","_immutable2","formatStr","Format","i18ndb","makeFormat","makeFormatStr","_objectWithoutProperties","keys","target","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","DateFilter","SystemPostingFilter","AssignTopics","AssignAttachments","Share","Comment","_createClass","defineProperties","props","length","descriptor","key","protoProps","staticProps","_extends","assign","arguments","source","_react","_react2","_i18n","_helpers","_csWebComponentsExternals","_Attachments","_Attachments2","_ReferenceObject","_ReferenceObject2","createElement","Button","IconButton","buttonStyle","size","className","title","iconName","_React$PureComponent","getPrototypeOf","apply","_props","activityEntry","others","shareLink","shareURL","href","React","PureComponent","propTypes","ImmutablePropTypes","isRequired","_React$Component","_this2","showForm","entry","bind","closeForm","submitForm","onSelectItem","onDeleteItem","nextProps","setState","assignAttachments","attachments","find","sItem","newAttchm","setIn","push","idx","delete","dlgClass","Dialog","buttons","Buttons","Select","onClick","Cancel","show","showCancel","onHide","dialogClassName","onDelete","ObjectWidgets","ObjectSearch","id","searchPlaceholder","_props2","TextButton","label","renderDialog","Component","PropTypes","func","_React$Component2","_this3","selected","List","clear","_props3","assignTopics","oldIDs","newIDs","nid","contains","_this4","referenceObject","excludeClasses","EXCLUDE_TOPIC_CLASSES","toArray","_ref","filterState","onChange","FormControl","CheckBox","checked","string","toggleFilterState","prevState","_React$Component3","_this5","dateFormat","_props4","onFilterChange","Calendar","allowExpression","dateConverter","DataType","CalendarSimpleConverter","dateOnlyFormat","displayFormat","valueFormat","onDateChange","onInvalidInput","ignoreInvalidDate","placeholder","STANDALONE_INSTANCE","SUBSCRIPTION_LINK","CHANNLE_LINK","defaultSetups","fromJS","topicURL","excludeTopicClasses","APP_SETUPS","receivedPostings","instanceName","coll","type","RECEIVED_POSTINGS","payload","meta","appendPostings","param","APPEND_POSTINGS","incomingPostings","INCOMING_POSTINGS","postingCreated","posting","POSTING_CREATED","postingRemoved","POSTING_REMOVED","postingUpdating","oID","POSTING_UPDATING","postingUpdated","POSTING_UPDATED","updateConfirmed","confirmedAt","UPDATE_CONFIRMED","receivedChannels","RECEIVED_CHANNELS","receivedSubscriptions","subscriptions","RECEIVED_SUBSCRIPTIONS","fetchPosting","dispatch","fetchObject","fetchPostings","fetchCollection","toJS","data","postings","then","fetchMorePostings","getState","prev","collections","last_comment_date","last_object_id","uploadFiles","files","uploadURL","file_upload_url","makeSequence","callables","file","formData","FormData","append","JSON","stringify","cdbf_original_name","cdbf_name","postForm","catch","error","detail","NetworkError","notifyError","reloadPosting","createPosting","count","attachment_ids","createObject","response","status","Error","createComment","postingURL","comment","topics","postJSON","topic_ids","confirmUpdate","checkNewPostings","since","posting_count","fetchChannels","singleFetch","fetchSubscriptions","sortPostings","dateMap","sortBy","getID","getDate","reverse","getOlderPostings","updatedAt","generateDateMap","mapStateToProps","ownProps","compState","resultComplete","topicDesc","defaultTopic","updatingPosting","mapDispatchToProps","_actions","initDataURL","confirmAt","_Posting","_Posting2","_CreateForm","_CreateForm2","_reactBootstrap","findByID","oid","PostingList","_this","newest","incoming","loadMorePostings","stopChecker","_checker","window","clearTimeout","setTimeout","sorted","updatingID","updatedPosting","updating","equals","nextIDs","showing","add","olderOnes","olderIDs","filterNot","union","newMap","reduce","set","subtract","lastUpdatedAt","_props5","maxBy","_props6","topic","clsname","classNames","Collapse","in","Alert","bsStyle","createEntry","renderPostings","bool","orderedSet","defaultProps","connect","_defineProperty","Channel","location","currentTopic","cid","isActive","to","updateQuery","Navigation","Link","Attachments","attachment","_PersonPicture","_PersonPicture2","_Footer","_Footer2","Title","children","Nav","_ref2","PostingLayout","author","person","Footer","ActivityDate","uiLink","toLink","link","pathname","_toConsumableArray","arr","Array","isArray","arr2","from","isExternal","lower","rootURL","ShowMore","digest","offset","tolerance","end","cutIndex","result","before","slice","after","lineBreaking","parts","keyIdx","forEach","part","splitted","split","_autolinker","_autolinker2","_trimRight","_trimRight2","linker","Autolinker","newWindow","stripPrefix","urls","schemeMatches","wwwMatches","tldMatches","email","phone","twitter","hashtag","protocol","hostname","port","ActivityText","parseActivityText","showMore","digestLength","digestTolerance","activityText","matches","parse","lastIdx","match","getOffset","matched","getMatchedText","substring","getAnchorHref","getAnchorText","_state","showParts","concat","number","getType","Renderer","isVideo","isSupportedVideoType","src","controls","FileViewer","_React$PureComponent2","lightBox","direction","closeLightBox","openLightBox","selectItem","dialogSizes","SIZE_MEDIUM","SIZE_LARGE","selectedIndex","e","imgCls","capCls","dialogCls","hideFooter","sizes","Carousel","activeIndex","onSelect","Item","viewable","isSupportedImageType","renderLightBox","Label","onSubmit","PostingAuthor","PageLayout","noSidebar","embedded","parseInt","parseQuery","appCls","page","_Sidebar2","PageFrame","ApplicationFrame","_Sidebar","ReferenceObject","SVGIconAndLink","Posting","_SystemPosting","_SystemPosting2","_UserPosting","_UserPosting2","_Comments","_Comments2","replyingTo","onComment","onCommentPosting","onCloseForm","refs","expandForm","PostingComponent","isSystemPosting","SystemPosting","UserPosting","replyTo","findCommentToPosting","replyToAuthor","onClose","Topic","icon","descr","clsNames","renderTopics","_Actions","getPreview","FileDropzone","revokePreview","any","calculatorClassName","CreateForm","newEntry","makeNewEntry","expanded","height","submitting","onAddFiles","onDeleteFile","onDeleteAttachment","_form","event","calcEls","getElementsByClassName","els","getElementsByTagName","newHeight","scrollHeight","offsetHeight","clientHeight","addable","items","prevNames","fileList","compactCls","coverCls","areaStl","Throbber","TextArea","rows","style","autoFocus","onDrop","Preview","ButtonGroup","disabled","aria-hidden","TextInput","onFocus","_PostingList","_PostingList2","ObjectPostings","contextObject","_reducers","_App","_App2","_ObjectActivities","_ObjectActivities2","_ObjectActivitiesBlock","_ObjectActivitiesBlock2","_DashboardWidget","_DashboardWidget2","Registry","registerComponent","App","ObjectActivities","ObjectActivitiesBlock","DashboardWidget","registerReducer","combineReducers","links","action","merge","getCollectionInfo","getCollectionUpdateTime","updated","update","curr","mergeIn","prevData","prevCol","OrderedSet","withMutations","predefined","group","col","lastOne","getCollectionTimestamp","_AppMain","_AppMain2","_Thread","_Thread2","postingPath","ReactRouter","Router","history","browserHistory","Switch","Route","path","component","Thread","AppMain","getQuery","_PageLayout","_PageLayout2","_FilterBar","_FilterBar2","query","search","dataURL","_Channels","_Channels2","_Channel","_Channel2","_Subscriptions","_Subscriptions2","Sidebar","setFilter","showAll","onValueChange","withRouter","Channels","getChannels","Collapsible","initialCollapsed","header","Subscriptions","renderEntries","groups","desc","renderGroups","getFilter","_parseQuery","pn","date","systemposting","_PersonFilter","_PersonFilter2","FilterBar","onPersonChange","onFilter","onClearFilter","toggleSystemPostingFilter","_state2","PersonRenderer","orgname","Tiles","Tile","fallbackImg","getIcon","headerAttr","plain","thumbnailSize","normValue","searchURL","TypeAheadText","WithTypeAhead","PersonFilter","hasMore","_searchRequest","ontextChange","onSelectAt","onBlur","cancelRequest","getJSON","fulltextsearch","fetchMatches","hit","TypeAheadItemRenderer","hasMoreMatches","autoSelectFirstMatch","_PostingLayout","_PostingLayout2","_ActivityDate","_ActivityDate2","_Topics","_Topics2","_ActivityText","_ActivityText2","_FileViewer","_FileViewer2","_PostingAuthor","_PostingAuthor2","showAuthor","PersonPicture","picture","f","pictureSrc","pictureComp","Thumbnail","imgSrc","fallbackSrc","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","cfg","version","normalizeUrlsCfg","mention","normalizeStripPrefixCfg","stripTrailingSlash","truncate","normalizeTruncateCfg","replaceFn","context","htmlParser","matchers","tagBuilder","textOrHtml","options","scheme","www","Util","defaults","Number","POSITIVE_INFINITY","getHtmlParser","htmlNodes","anchorTagStackCount","len","node","nodeType","getTagName","isClosing","Math","max","textNodeMatches","parseText","getText","compactMatches","removeUnwantedMatches","sort","a","b","endIdx","splice","remove","getUrlMatchType","getMatchers","numMatchers","textMatches","parseMatches","j","numTextMatches","setOffset","newHtml","lastIndex","createMatchReturnVal","join","replaceFnResult","HtmlTag","toAnchorString","buildTag","HtmlParser","matchersNs","matcher","getTagBuilder","Hashtag","serviceName","Email","Phone","Mention","Url","AnchorTagBuilder","abstractMethod","trimRegex","dest","prop","extend","superclass","superclassProto","F","subclass","subclassProto","ellipsis","str","truncateLen","ellipsisChars","ellipsisLength","element","fn","splitAndCapture","splitRegex","global","exec","index","trim","replace","whitespaceRegex","innerHtml","innerHTML","setTagName","tagName","setAttr","attrName","attrValue","getAttrs","getAttr","setAttrs","attrs","tagAttrs","setClass","cssClass","addClass","newClass","classAttr","getClass","classes","newClasses","shift","removeClass","removeClasses","hasClass","setInnerHtml","html","getInnerHtml","attrsStr","buildAttrsStr","attrsArr","RegexLib","alphaCharsStr","alphaNumericCharsStr","domainNameRegex","RegExp","build","createAttrs","processAnchorText","createCssClass","returnClasses","cssClassSuffixes","getCssClassSuffixes","anchorText","doTruncate","truncateLength","truncateLocation","TruncateSmart","TruncateMiddle","TruncateEnd","htmlRegex","commentTagRegex","tagNameRegex","attrNameRegex","attrValueRegex","nameEqualsValueRegex","htmlCharacterEntitiesRegex","currentResult","textAndEntityNodes","nodes","tagText","commentText","isClosingTag","inBetweenTagsText","parseTextAndEntityNodes","createCommentNode","createElementNode","textAndEntityTokens","textToken","entityToken","createTextNode","createEntityNode","CommentNode","ElementNode","closing","EntityNode","TextNode","HtmlNode","getComment","Match","matchedText","getEmail","getServiceName","getHashtag","plusSign","getNumber","getMention","urlMatchType","protocolUrlMatch","protocolRelativeMatch","schemePrefixRegex","wwwPrefixRegex","protocolRelativeRegex","protocolPrepended","getUrl","stripProtocolRelativePrefix","stripSchemePrefix","stripWwwPrefix","removeTrailingSlash","charAt","tldRegex","Matcher","matcherRegex","alphaNumericChars","emailRegex","nonWordCharRegex","prevChar","test","cleanNumber","matcherRegexes","instagram","schemeRegex","wwwRegex","urlSuffixRegex","wordCharRegExp","openParensRe","closeParensRe","matchStr","schemeUrlMatch","wwwUrlMatch","wwwProtocolRelativeMatch","tldProtocolRelativeMatch","UrlMatchValidator","isValid","substr","matchHasUnbalancedClosingParen","pos","matchHasInvalidCharAfterTld","openParensMatch","closeParensMatch","urlMatch","alphaNumeric","re","res","hasFullProtocolRegex","uriSchemeRegex","hasWordCharAfterProtocolRegex","ipRegex","isValidUriScheme","urlMatchDoesNotHaveProtocolOrDot","urlMatchDoesNotHaveAtLeastOneWordChar","isValidIpAddress","containsMultipleDots","uriSchemeMatch","newRegex","uriScheme","ellipsisLengthBeforeParsing","availableLength","floor","ceil","buildUrl","urlObj","host","fragment","buildSegment","segment","remainingAvailableLength","remainingAvailableLengthHalf","startOffset","endOffset","urlSub","matchQuery","pathAndQuery","tail","_reactDom","_reactDom2","_Comment","_Comment2","findComment","comments","Comments","cID","scrollToTarget","_comments","comp","ReactDOM","findDOMNode","scrollIntoView","commentsAmount","takeLast","ReplyToTitle","showReplyTo","showTarget","hideTarget","navigateToTarget","_replyTarget","preventDefault","onMouseOver","onMouseOut","Overlay","placement","Popover","reloadEntry","onUpload","params","PostingLoader","_ObjectPostings","_ObjectPostings2","toggleSystemPostings","ObjectPostingsBlock","newState","ContentBlock","Header","Body","_csWebDashboard","_csWebDashboard2","counter","postingFilter","DashboardItem"],"mappings":"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","file":"cs-activitystream-web.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"), require(\"cs-web-components-externals\"), require(\"cs-web-components-base\"), require(\"Immutable\"), require(\"ReactBootstrap\"), require(\"moment\"), require(\"ReactDOM\"), require(\"cs-web-dashboard\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\", \"cs-web-components-externals\", \"cs-web-components-base\", \"Immutable\", \"ReactBootstrap\", \"moment\", \"ReactDOM\", \"cs-web-dashboard\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cs-activitystream-web\"] = factory(require(\"React\"), require(\"cs-web-components-externals\"), require(\"cs-web-components-base\"), require(\"Immutable\"), require(\"ReactBootstrap\"), require(\"moment\"), require(\"ReactDOM\"), require(\"cs-web-dashboard\"));\n\telse\n\t\troot[\"cs-activitystream-web\"] = factory(root[\"React\"], root[\"cs-web-components-externals\"], root[\"cs-web-components-base\"], root[\"Immutable\"], root[\"ReactBootstrap\"], root[\"moment\"], root[\"ReactDOM\"], root[\"cs-web-dashboard\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_41__, __WEBPACK_EXTERNAL_MODULE_47__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"), require(\"cs-web-components-externals\"), require(\"cs-web-components-base\"), require(\"Immutable\"), require(\"ReactBootstrap\"), require(\"moment\"), require(\"ReactDOM\"), require(\"cs-web-dashboard\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\", \"cs-web-components-externals\", \"cs-web-components-base\", \"Immutable\", \"ReactBootstrap\", \"moment\", \"ReactDOM\", \"cs-web-dashboard\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cs-activitystream-web\"] = factory(require(\"React\"), require(\"cs-web-components-externals\"), require(\"cs-web-components-base\"), require(\"Immutable\"), require(\"ReactBootstrap\"), require(\"moment\"), require(\"ReactDOM\"), require(\"cs-web-dashboard\"));\n\telse\n\t\troot[\"cs-activitystream-web\"] = factory(root[\"React\"], root[\"cs-web-components-externals\"], root[\"cs-web-components-base\"], root[\"Immutable\"], root[\"ReactBootstrap\"], root[\"moment\"], root[\"ReactDOM\"], root[\"cs-web-dashboard\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_41__, __WEBPACK_EXTERNAL_MODULE_47__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 24);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.APPBASE = undefined;\nexports.prefixNS = prefixNS;\nexports.getReferencedPostings = getReferencedPostings;\nexports.formatDate = formatDate;\nexports.getPostingURL = getPostingURL;\nexports.byTopicURL = byTopicURL;\nexports.getToLink = getToLink;\nexports.convertSearchResultItem = convertSearchResultItem;\nexports.filterChannels = filterChannels;\n\nvar _moment = __webpack_require__(25);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _constants = __webpack_require__(7);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: helpers.js 168151 2017-11-09 14:47:33Z yzh $\"\r\n */\n\nvar APPBASE = exports.APPBASE = (0, _csWebComponentsBase.getAppSetup)().getIn(['appSettings', 'basePath']);\n\nfunction prefixNS(name) {\n    return \"cs-activitystream-web\" + '-' + name;\n}\n\nfunction getReferencedPostings(state, oids) {\n    if (oids === undefined) {\n        return undefined;\n    }\n    if (typeof oids === 'string') {\n        return state.objectsById.get(oids);\n    }\n    var result = oids.map(function (ref) {\n        return state.objectsById.get(ref);\n    }).filter(function (obj) {\n        return obj !== undefined;\n    });\n    return result;\n}\n\nfunction formatDate(dateStr) {\n    return (0, _moment2.default)(dateStr, _moment2.default.ISO_8601).calendar();\n}\n\nfunction getPostingURL(postingID) {\n    var collURL = (0, _csWebComponentsBase.getAppSetup)().getIn([\"cs-activitystream-web\", 'dataURL']);\n    if (postingID === undefined) {\n        return collURL;\n    }\n    return collURL + '/' + postingID;\n}\n\nfunction byTopicURL(topicID) {\n    return _constants.TOPIC_LINK + '/' + topicID;\n}\n\nfunction getToLink(url) {\n    return (0, _csWebComponentsBase.getLocalPathForURL)(url, APPBASE);\n}\n\nfunction convertSearchResultItem(item) {\n    return _immutable2.default.Map({\n        'cdb_object_id': item.get('cdb_object_id'),\n        'description': item.get('title'),\n        'object_icon': item.get('icon'),\n        'object_id': item.get('rest_url')\n        // disable link for search result because\n        // it replaces the dialog by navigating\n        // 'object_ui_link': item.get('ui_link')\n    });\n}\n\nfunction filterChannels(channels, filter) {\n    if (!filter) {\n        return channels;\n    }\n    var text = filter.toLowerCase();\n    return channels.filter(function (channel) {\n        return channel.get('description').toLowerCase().indexOf(text) > -1;\n    });\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatStr = exports.Format = undefined;\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar Format = exports.Format = _csWebComponentsBase.i18ndb.makeFormat('activitystream'); /*\r\n                                                                                         * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                         * All rights reserved.\r\n                                                                                         * http://www.contact-software.com\r\n                                                                                         *\r\n                                                                                         * Revision \"$Id: i18n.js 161425 2017-07-10 06:52:43Z gwe $\"\r\n                                                                                         */\n\nvar formatStr = exports.formatStr = _csWebComponentsBase.i18ndb.makeFormatStr('activitystream');\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.DateFilter = exports.SystemPostingFilter = exports.AssignTopics = exports.AssignAttachments = exports.Share = exports.Comment = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /*\r\n                                                                                                                                                                                                                                                                   * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                   * All rights reserved.\r\n                                                                                                                                                                                                                                                                   * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                   *\r\n                                                                                                                                                                                                                                                                   * Revision \"$Id: Actions.jsx 174199 2018-03-08 08:59:24Z vov $\"\r\n                                                                                                                                                                                                                                                                   */\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _i18n = __webpack_require__(5);\n\nvar _helpers = __webpack_require__(2);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _Attachments = __webpack_require__(11);\n\nvar _Attachments2 = _interopRequireDefault(_Attachments);\n\nvar _ReferenceObject = __webpack_require__(19);\n\nvar _ReferenceObject2 = _interopRequireDefault(_ReferenceObject);\n\nvar _constants = __webpack_require__(7);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Comment = exports.Comment = function Comment(props) {\n    return _react2.default.createElement(_csWebComponentsBase.Button.IconButton, _extends({\n        buttonStyle: 'success',\n        size: 'sm',\n        className: (0, _helpers.prefixNS)('actions-comment'),\n        title: (0, _i18n.formatStr)('answer'),\n        iconName: 'cs_activitystream_web_comment'\n    }, props));\n};\n\nvar Share = exports.Share = function (_React$PureComponent) {\n    _inherits(Share, _React$PureComponent);\n\n    function Share() {\n        _classCallCheck(this, Share);\n\n        return _possibleConstructorReturn(this, (Share.__proto__ || Object.getPrototypeOf(Share)).apply(this, arguments));\n    }\n\n    _createClass(Share, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                activityEntry = _props.activityEntry,\n                others = _objectWithoutProperties(_props, ['activityEntry']);\n\n            var shareLink = (0, _csWebComponentsBase.getAppSetup)().getIn(['cs-sharing-web-share_objects', 'objectsSharing']);\n            var shareURL = shareLink.get('URL') + activityEntry.get('cdb_object_id');\n            return _react2.default.createElement(_csWebComponentsBase.Button.IconButton, _extends({\n                buttonStyle: 'primary',\n                size: 'sm',\n                title: shareLink.get('label'),\n                iconName: shareLink.get('iconName'),\n                className: (0, _helpers.prefixNS)('actions-share')\n            }, others, {\n                href: shareURL,\n                target: '_blank' }));\n        }\n    }]);\n\n    return Share;\n}(_react2.default.PureComponent);\n\nShare.propTypes = {\n    activityEntry: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired\n};\n\nvar AssignAttachments = exports.AssignAttachments = function (_React$Component) {\n    _inherits(AssignAttachments, _React$Component);\n\n    function AssignAttachments(props) {\n        _classCallCheck(this, AssignAttachments);\n\n        var _this2 = _possibleConstructorReturn(this, (AssignAttachments.__proto__ || Object.getPrototypeOf(AssignAttachments)).call(this, props));\n\n        _this2.state = {\n            showForm: false,\n            entry: _immutable2.default.Map(props.activityEntry)\n        };\n        _this2.showForm = _this2.showForm.bind(_this2);\n        _this2.closeForm = _this2.closeForm.bind(_this2);\n        _this2.submitForm = _this2.submitForm.bind(_this2);\n        _this2.onSelectItem = _this2.onSelectItem.bind(_this2);\n        _this2.onDeleteItem = _this2.onDeleteItem.bind(_this2);\n        return _this2;\n    }\n\n    _createClass(AssignAttachments, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.activityEntry !== this.props.activityEntry) {\n                this.setState({ entry: _immutable2.default.Map(nextProps.activityEntry) });\n            }\n        }\n    }, {\n        key: 'showForm',\n        value: function showForm() {\n            this.setState({\n                showForm: true\n            });\n        }\n    }, {\n        key: 'closeForm',\n        value: function closeForm() {\n            this.setState({\n                showForm: false\n            });\n        }\n    }, {\n        key: 'submitForm',\n        value: function submitForm() {\n            var assignAttachments = this.props.assignAttachments;\n\n            if (assignAttachments) {\n                assignAttachments(this.state.entry.getIn(['attachments', 'attachments']));\n            }\n            this.closeForm();\n        }\n    }, {\n        key: 'onSelectItem',\n        value: function onSelectItem(item) {\n            var entry = this.state.entry;\n\n            var attachments = entry.getIn(['attachments', 'attachments']);\n            var found = attachments.find(function (sItem) {\n                return sItem.get('cdb_object_id') === item.get('cdb_object_id');\n            });\n            if (!found) {\n                var newAttchm = (0, _helpers.convertSearchResultItem)(item);\n                this.setState({\n                    entry: entry.setIn(['attachments', 'attachments'], attachments.push(newAttchm))\n                });\n            }\n        }\n    }, {\n        key: 'onDeleteItem',\n        value: function onDeleteItem(item) {\n            var entry = this.state.entry;\n\n            var attachments = entry.getIn(['attachments', 'attachments']);\n            var idx = attachments.indexOf(item);\n            if (idx > -1) {\n                this.setState({\n                    entry: entry.setIn(['attachments', 'attachments'], attachments.delete(idx))\n                });\n            }\n        }\n    }, {\n        key: 'renderDialog',\n        value: function renderDialog() {\n            var entry = this.state.entry;\n\n            var dlgClass = (0, _helpers.prefixNS)('object-search-dialog');\n            return _react2.default.createElement(\n                _csWebComponentsBase.Dialog.Dialog,\n                { title: (0, _i18n.formatStr)('assign-attachments'),\n                    buttons: [_react2.default.createElement(_csWebComponentsBase.Dialog.Buttons.Select, {\n                        key: 'select',\n                        onClick: this.submitForm }), _react2.default.createElement(_csWebComponentsBase.Dialog.Buttons.Cancel, {\n                        key: 'cancel',\n                        onClick: this.closeForm })],\n                    show: true,\n                    showCancel: true,\n                    onHide: this.closeForm,\n                    dialogClassName: dlgClass },\n                _react2.default.createElement(_Attachments2.default, { activityEntry: entry, onDelete: this.onDeleteItem }),\n                _react2.default.createElement(_csWebComponentsBase.ObjectWidgets.ObjectSearch, {\n                    id: (0, _helpers.prefixNS)('attachment-search'),\n                    onSelectItem: this.onSelectItem,\n                    searchPlaceholder: (0, _i18n.formatStr)('search-object') })\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props2 = this.props,\n                activityEntry = _props2.activityEntry,\n                others = _objectWithoutProperties(_props2, ['activityEntry']);\n\n            if (!activityEntry.getIn(['attachments', 'addable'])) {\n                return null;\n            }\n            delete others.assignAttachments;\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('actions-assign-attachments') },\n                _react2.default.createElement(_csWebComponentsBase.Button.TextButton, _extends({\n                    label: (0, _i18n.formatStr)('assign-attachments'),\n                    onClick: this.showForm\n                }, others)),\n                this.state.showForm ? this.renderDialog() : null\n            );\n        }\n    }]);\n\n    return AssignAttachments;\n}(_react2.default.Component);\n\nAssignAttachments.propTypes = {\n    activityEntry: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    assignAttachments: _csWebComponentsExternals.PropTypes.func\n};\n\nvar AssignTopics = exports.AssignTopics = function (_React$Component2) {\n    _inherits(AssignTopics, _React$Component2);\n\n    function AssignTopics(props) {\n        _classCallCheck(this, AssignTopics);\n\n        var _this3 = _possibleConstructorReturn(this, (AssignTopics.__proto__ || Object.getPrototypeOf(AssignTopics)).call(this, props));\n\n        _this3.state = {\n            showForm: false,\n            selected: _immutable2.default.List()\n        };\n        _this3.showForm = _this3.showForm.bind(_this3);\n        _this3.closeForm = _this3.closeForm.bind(_this3);\n        _this3.submitForm = _this3.submitForm.bind(_this3);\n        _this3.onSelectItem = _this3.onSelectItem.bind(_this3);\n        _this3.onDeleteItem = _this3.onDeleteItem.bind(_this3);\n        return _this3;\n    }\n\n    _createClass(AssignTopics, [{\n        key: 'showForm',\n        value: function showForm() {\n            this.setState({\n                showForm: true,\n                selected: this.state.selected.clear()\n            });\n        }\n    }, {\n        key: 'closeForm',\n        value: function closeForm() {\n            this.setState({\n                showForm: false\n            });\n        }\n    }, {\n        key: 'submitForm',\n        value: function submitForm() {\n            var _props3 = this.props,\n                activityEntry = _props3.activityEntry,\n                assignTopics = _props3.assignTopics;\n\n            var selected = this.state.selected.map(function (item) {\n                return item.get('cdb_object_id');\n            });\n            var oldIDs = activityEntry.getIn(['topics', 'topics']).map(function (item) {\n                return item.get('cdb_object_id');\n            });\n            var newIDs = selected.filter(function (nid) {\n                return !oldIDs.contains(nid);\n            });\n            if (assignTopics) {\n                assignTopics(newIDs);\n            }\n            this.closeForm();\n        }\n    }, {\n        key: 'onSelectItem',\n        value: function onSelectItem(item) {\n            var selected = this.state.selected;\n\n            var found = selected.find(function (sItem) {\n                return sItem.get('cdb_object_id') === item.get('cdb_object_id');\n            });\n            if (!found) {\n                this.setState({\n                    selected: selected.push((0, _helpers.convertSearchResultItem)(item))\n                });\n            }\n        }\n    }, {\n        key: 'onDeleteItem',\n        value: function onDeleteItem(item) {\n            var selected = this.state.selected;\n\n            var idx = selected.indexOf(item);\n            if (idx > -1) {\n                this.setState({\n                    selected: selected.delete(idx)\n                });\n            }\n        }\n    }, {\n        key: 'renderDialog',\n        value: function renderDialog() {\n            var _this4 = this;\n\n            var dlgClass = (0, _helpers.prefixNS)('object-search-dialog');\n            var selected = this.state.selected;\n\n            return _react2.default.createElement(\n                _csWebComponentsBase.Dialog.Dialog,\n                { title: (0, _i18n.formatStr)('assign-topics'),\n                    buttons: [_react2.default.createElement(_csWebComponentsBase.Dialog.Buttons.Select, {\n                        key: 'select',\n                        onClick: this.submitForm }), _react2.default.createElement(_csWebComponentsBase.Dialog.Buttons.Cancel, {\n                        key: 'cancel',\n                        onClick: this.closeForm })],\n                    show: true,\n                    showCancel: true,\n                    onHide: this.closeForm,\n                    dialogClassName: dlgClass },\n                selected.map(function (item) {\n                    return _react2.default.createElement(_ReferenceObject2.default, {\n                        key: item.get('cdb_object_id'),\n                        referenceObject: item,\n                        onDelete: _this4.onDeleteItem });\n                }),\n                _react2.default.createElement(_csWebComponentsBase.ObjectWidgets.ObjectSearch, {\n                    id: (0, _helpers.prefixNS)('topic-search'),\n                    onSelectItem: this.onSelectItem,\n                    searchPlaceholder: (0, _i18n.formatStr)('search-object'),\n                    excludeClasses: _constants.EXCLUDE_TOPIC_CLASSES.toArray() })\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var others = _objectWithoutProperties(this.props, []);\n\n            delete others.activityEntry;\n            delete others.assignTopics;\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('actions-assign-topics') },\n                _react2.default.createElement(_csWebComponentsBase.Button.IconButton, _extends({\n                    buttonStyle: 'success',\n                    size: 'sm',\n                    title: (0, _i18n.formatStr)('assign-topics'),\n                    iconName: 'cs_activitystream_web_tags',\n                    onClick: this.showForm\n                }, others)),\n                this.state.showForm ? this.renderDialog() : null\n            );\n        }\n    }]);\n\n    return AssignTopics;\n}(_react2.default.Component);\n\nAssignTopics.propTypes = {\n    activityEntry: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    assignTopics: _csWebComponentsExternals.PropTypes.func\n};\n\nvar SystemPostingFilter = exports.SystemPostingFilter = function SystemPostingFilter(_ref) {\n    var filterState = _ref.filterState,\n        onChange = _ref.onChange;\n    return _react2.default.createElement(\n        'div',\n        { className: (0, _helpers.prefixNS)('systemposting-filter') },\n        _react2.default.createElement(_csWebComponentsBase.FormControl.CheckBox, {\n            checked: filterState !== 'off',\n            onChange: onChange,\n            label: (0, _i18n.formatStr)('systempostings'),\n            name: 'systemPostingFilter' })\n    );\n};\n\nSystemPostingFilter.propTypes = {\n    filterState: _csWebComponentsExternals.PropTypes.string,\n    onChange: _csWebComponentsExternals.PropTypes.func\n};\n\nSystemPostingFilter.toggleFilterState = function (prevState) {\n    return prevState === 'off' ? undefined : 'off';\n};\n\nvar CE_DATEFORMAT = 'DD.MM.YYYY';\n\nvar DateFilter = exports.DateFilter = function (_React$Component3) {\n    _inherits(DateFilter, _React$Component3);\n\n    function DateFilter(props) {\n        _classCallCheck(this, DateFilter);\n\n        var _this5 = _possibleConstructorReturn(this, (DateFilter.__proto__ || Object.getPrototypeOf(DateFilter)).call(this, props));\n\n        _this5.state = {\n            dateFormat: (0, _csWebComponentsBase.getAppSetup)().getIn(['formats', 'dateFormat'])\n        };\n        return _this5;\n    }\n\n    _createClass(DateFilter, [{\n        key: 'ignoreInvalidDate',\n        value: function ignoreInvalidDate() {}\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props4 = this.props,\n                onFilterChange = _props4.onFilterChange,\n                value = _props4.value,\n                others = _objectWithoutProperties(_props4, ['onFilterChange', 'value']);\n\n            return _react2.default.createElement(_csWebComponentsBase.FormControl.Calendar, _extends({}, others, {\n                name: (0, _helpers.prefixNS)('date-filter'),\n                value: value,\n                allowExpression: true,\n                dateConverter: _csWebComponentsBase.DataType.CalendarSimpleConverter,\n                dateOnlyFormat: this.state.dateFormat,\n                displayFormat: this.state.dateFormat,\n                valueFormat: CE_DATEFORMAT,\n                onDateChange: onFilterChange,\n                onInvalidInput: this.ignoreInvalidDate,\n                placeholder: (0, _i18n.formatStr)('filter_by_date') }));\n        }\n    }]);\n\n    return DateFilter;\n}(_react2.default.Component);\n\nDateFilter.propTypes = {\n    value: _csWebComponentsExternals.PropTypes.string,\n    onFilterChange: _csWebComponentsExternals.PropTypes.func\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EXCLUDE_TOPIC_CLASSES = exports.STANDALONE_INSTANCE = exports.TOPIC_LINK = exports.SUBSCRIPTION_LINK = exports.CHANNLE_LINK = undefined;\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: constants.js 164071 2017-08-28 13:01:03Z yzh $\"\r\n */\n\nvar defaultSetups = _immutable2.default.fromJS({\n  topicURL: '/internal/activitystream/topic',\n  excludeTopicClasses: ['cdbblog_posting', 'cdbblog_user_posting', 'cdbblog_system_posting', 'cdbblog_comment']\n});\n\nvar APP_SETUPS = (0, _csWebComponentsBase.getAppSetup)().get(\"cs-activitystream-web\", defaultSetups);\n\nvar CHANNLE_LINK = exports.CHANNLE_LINK = APP_SETUPS.get('channelURL');\n\nvar SUBSCRIPTION_LINK = exports.SUBSCRIPTION_LINK = APP_SETUPS.get('subscriptionURL');\n\nvar TOPIC_LINK = exports.TOPIC_LINK = APP_SETUPS.get('topicURL');\n\nvar STANDALONE_INSTANCE = exports.STANDALONE_INSTANCE = 'standalone';\n\nvar EXCLUDE_TOPIC_CLASSES = exports.EXCLUDE_TOPIC_CLASSES = APP_SETUPS.get('excludeTopicClasses');\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.RECEIVED_SUBSCRIPTIONS = exports.RECEIVED_CHANNELS = exports.UPDATE_CONFIRMED = exports.POSTING_UPDATED = exports.POSTING_UPDATING = exports.POSTING_REMOVED = exports.POSTING_CREATED = exports.INCOMING_POSTINGS = exports.APPEND_POSTINGS = exports.RECEIVED_POSTINGS = undefined;\nexports.fetchPosting = fetchPosting;\nexports.fetchPostings = fetchPostings;\nexports.fetchMorePostings = fetchMorePostings;\nexports.uploadFiles = uploadFiles;\nexports.reloadPosting = reloadPosting;\nexports.createPosting = createPosting;\nexports.createComment = createComment;\nexports.assignTopics = assignTopics;\nexports.confirmUpdate = confirmUpdate;\nexports.checkNewPostings = checkNewPostings;\nexports.fetchChannels = fetchChannels;\nexports.fetchSubscriptions = fetchSubscriptions;\n\nvar _helpers = __webpack_require__(2);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _constants = __webpack_require__(7);\n\nvar _i18n = __webpack_require__(5);\n\n/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: actions.js 168213 2017-11-10 10:00:44Z yzh $\"\r\n */\n\nvar RECEIVED_POSTINGS = exports.RECEIVED_POSTINGS = (0, _helpers.prefixNS)('RECEIVED_POSTINGS');\nvar APPEND_POSTINGS = exports.APPEND_POSTINGS = (0, _helpers.prefixNS)('APPEND_POSTINGS');\nvar INCOMING_POSTINGS = exports.INCOMING_POSTINGS = (0, _helpers.prefixNS)('INCOMING_POSTINGS');\nvar POSTING_CREATED = exports.POSTING_CREATED = (0, _helpers.prefixNS)('POSTING_CREATED');\nvar POSTING_REMOVED = exports.POSTING_REMOVED = (0, _helpers.prefixNS)('POSTING_REMOVED');\nvar POSTING_UPDATING = exports.POSTING_UPDATING = (0, _helpers.prefixNS)('POSTING_UPDATING');\nvar POSTING_UPDATED = exports.POSTING_UPDATED = (0, _helpers.prefixNS)('POSTING_UPDATED');\nvar UPDATE_CONFIRMED = exports.UPDATE_CONFIRMED = (0, _helpers.prefixNS)('UPDATE_CONFIRMED');\nvar RECEIVED_CHANNELS = exports.RECEIVED_CHANNELS = (0, _helpers.prefixNS)('RECEIVED_CHANNELS');\nvar RECEIVED_SUBSCRIPTIONS = exports.RECEIVED_SUBSCRIPTIONS = (0, _helpers.prefixNS)('RECEIVED_SUBSCRIPTIONS');\n\nfunction receivedPostings(instanceName, url, filter, coll) {\n    return {\n        type: RECEIVED_POSTINGS,\n        payload: coll,\n        meta: { url: url, filter: filter, instanceName: instanceName }\n    };\n}\n\nfunction appendPostings(instanceName, url, param, coll) {\n    return {\n        type: APPEND_POSTINGS,\n        payload: coll,\n        meta: { url: url, param: param, instanceName: instanceName }\n    };\n}\n\nfunction incomingPostings(instanceName, url, param, coll) {\n    return {\n        type: INCOMING_POSTINGS,\n        payload: coll,\n        meta: { url: url, param: param, instanceName: instanceName }\n    };\n}\n\nfunction postingCreated(instanceName, posting) {\n    return {\n        type: POSTING_CREATED,\n        payload: posting,\n        meta: { instanceName: instanceName }\n    };\n}\n\nfunction postingRemoved(instanceName, id) {\n    return {\n        type: POSTING_REMOVED,\n        payload: id,\n        meta: { instanceName: instanceName }\n    };\n}\n\nfunction postingUpdating(instanceName, oID) {\n    return {\n        type: POSTING_UPDATING,\n        payload: oID,\n        meta: { instanceName: instanceName }\n    };\n}\n\nfunction postingUpdated(instanceName) {\n    return {\n        type: POSTING_UPDATED,\n        meta: { instanceName: instanceName }\n    };\n}\n\nfunction updateConfirmed(instanceName, confirmedAt) {\n    return {\n        type: UPDATE_CONFIRMED,\n        payload: confirmedAt,\n        meta: { instanceName: instanceName }\n    };\n}\n\nfunction receivedChannels(channels) {\n    return {\n        type: RECEIVED_CHANNELS,\n        payload: channels\n    };\n}\n\nfunction receivedSubscriptions(subscriptions) {\n    return {\n        type: RECEIVED_SUBSCRIPTIONS,\n        payload: subscriptions\n    };\n}\n\nfunction fetchPosting(url) {\n    return function (dispatch) {\n        return dispatch((0, _csWebComponentsBase.fetchObject)(url));\n    };\n}\n\nfunction fetchPostings(instanceName, url, filter) {\n    return function (dispatch) {\n        return dispatch((0, _csWebComponentsBase.fetchCollection)(url, filter.toJS(), function (data) {\n            return data.postings;\n        })).then(function (data) {\n            dispatch(receivedPostings(instanceName, url, filter, data));\n            return data;\n        });\n    };\n}\n\nfunction fetchMorePostings(instanceName, url, filter) {\n    return function (dispatch, getState) {\n        var prev = getState()[\"cs-activitystream-web\"].collections.get(instanceName);\n        var param = Object.assign(filter.toJS(), {\n            last_comment_date: prev.get('lastCommentDate'),\n            last_object_id: prev.get('lastObjectId')\n        });\n        dispatch((0, _csWebComponentsBase.fetchCollection)(url, param, function (data) {\n            return data.postings;\n        })).then(function (data) {\n            return dispatch(appendPostings(instanceName, url, param, data));\n        });\n    };\n}\n\nfunction uploadFiles(posting, files) {\n    return function (dispatch) {\n        var uploadURL = posting.file_upload_url;\n        if (!uploadURL) {\n            return (0, _csWebComponentsBase.makeSequence)([]);\n        }\n        var callables = files.map(function (file) {\n            return function () {\n                var formData = new FormData();\n                formData.append('content', file);\n                formData.append('metadata', JSON.stringify({\n                    'cdbf_original_name': file.name,\n                    'cdbf_name': file.name\n                }));\n                return (0, _csWebComponentsBase.postForm)(uploadURL, formData);\n            };\n        });\n        return (0, _csWebComponentsBase.makeSequence)(callables).catch(function (error) {\n            var detail = error;\n            if (error instanceof _csWebComponentsBase.NetworkError) {\n                detail = new _csWebComponentsBase.NetworkError((0, _i18n.formatStr)('upload-aborted'));\n            }\n            dispatch((0, _csWebComponentsBase.notifyError)(detail, null, (0, _i18n.formatStr)('activities')));\n        }).then(function () {\n            return posting;\n        });\n    };\n}\n\nfunction reloadPosting(instanceName, postingID) {\n    return function (dispatch) {\n        return dispatch(fetchPosting(postingID)).then(function () {\n            return dispatch(postingUpdated(instanceName));\n        });\n    };\n}\n\nfunction createPosting(instanceName, url, text, attachments, files) {\n    return function (dispatch) {\n        var data = { text: text };\n        if (attachments.count()) {\n            data.attachment_ids = attachments.toArray();\n        }\n        return dispatch((0, _csWebComponentsBase.createObject)(url, data)).then(function (posting) {\n            dispatch(postingCreated(instanceName, posting));\n            return posting;\n        }).catch(function (error) {\n            var detail = error;\n            var response = error.response;\n            if (response && response.status === 404 && response.url === url) {\n                detail = new Error((0, _i18n.formatStr)('context-not-found'));\n                detail.response = response;\n            } else if (error instanceof _csWebComponentsBase.NetworkError) {\n                detail = new _csWebComponentsBase.NetworkError((0, _i18n.formatStr)('network-error'));\n            }\n            dispatch((0, _csWebComponentsBase.notifyError)(detail, null, (0, _i18n.formatStr)('activities')));\n            throw detail;\n        }).then(function (posting) {\n            return dispatch(uploadFiles(posting, files));\n        }).then(function (posting) {\n            return dispatch(reloadPosting(instanceName, posting['@id']));\n        });\n    };\n}\n\nfunction createComment(instanceName, url, _ref) {\n    var posting = _ref.posting,\n        text = _ref.text,\n        attachments = _ref.attachments,\n        files = _ref.files;\n\n    return function (dispatch) {\n        var data = { text: text };\n        var postingURL = posting.get('@id');\n        if (attachments.count()) {\n            data.attachment_ids = attachments.toArray();\n        }\n        dispatch(postingUpdating(instanceName, posting.get('cdb_object_id')));\n        return dispatch((0, _csWebComponentsBase.createObject)(url, data)).catch(function (error) {\n            var detail = error;\n            var response = error.response;\n            if (response && response.status === 404 && response.url === url) {\n                detail = new Error((0, _i18n.formatStr)('posting-not-found'));\n                detail.response = response;\n                dispatch((0, _csWebComponentsBase.notifyError)(detail));\n                dispatch(postingUpdated(instanceName));\n                dispatch(postingRemoved(instanceName, postingURL));\n            } else if (error instanceof _csWebComponentsBase.NetworkError) {\n                detail = new _csWebComponentsBase.NetworkError((0, _i18n.formatStr)('network-error'));\n            }\n            dispatch((0, _csWebComponentsBase.notifyError)(detail, null, (0, _i18n.formatStr)('activities')));\n            throw detail;\n        }).then(function (comment) {\n            return dispatch(uploadFiles(comment, files));\n        }).then(\n        // reload posting\n        function () {\n            return dispatch(reloadPosting(instanceName, postingURL));\n        });\n    };\n}\n\nfunction assignTopics(instanceName, posting, topics) {\n    return function (dispatch) {\n        var url = posting.getIn(['topics', '@id']);\n        dispatch(postingUpdating(instanceName, posting.get('cdb_object_id')));\n        (0, _csWebComponentsBase.postJSON)(url, { topic_ids: topics.toArray() }).then(\n        // reload posting\n        function () {\n            return dispatch(reloadPosting(instanceName, posting.get('@id')));\n        });\n    };\n}\n\nfunction confirmUpdate(instanceName, confirmedAt) {\n    return function (dispatch) {\n        return dispatch(updateConfirmed(instanceName, confirmedAt));\n    };\n}\n\nfunction checkNewPostings(instanceName, url, filter) {\n    return function (dispatch, getState) {\n        var prev = getState()[\"cs-activitystream-web\"].collections.get(instanceName);\n        var param = Object.assign(filter.toJS(), {\n            since: prev.get('updatedAt'),\n            posting_count: 99999\n        });\n        dispatch((0, _csWebComponentsBase.fetchCollection)(url, param, function (data) {\n            return data.postings;\n        })).then(function (data) {\n            return dispatch(incomingPostings(instanceName, url, param, data));\n        }).catch(function () {});\n    };\n}\n\nfunction fetchChannels() {\n    return function (dispatch) {\n        return dispatch((0, _csWebComponentsBase.singleFetch)(_constants.CHANNLE_LINK, function (data) {\n            return dispatch(receivedChannels(data));\n        }));\n    };\n}\n\nfunction fetchSubscriptions() {\n    return function (dispatch) {\n        return dispatch((0, _csWebComponentsBase.singleFetch)(_constants.SUBSCRIPTION_LINK, function (data) {\n            return dispatch(receivedSubscriptions(data));\n        }));\n    };\n}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _actions = __webpack_require__(8);\n\nvar _helpers = __webpack_require__(2);\n\nvar _Posting = __webpack_require__(20);\n\nvar _Posting2 = _interopRequireDefault(_Posting);\n\nvar _CreateForm = __webpack_require__(22);\n\nvar _CreateForm2 = _interopRequireDefault(_CreateForm);\n\nvar _i18n = __webpack_require__(5);\n\nvar _reactBootstrap = __webpack_require__(16);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: PostingList.jsx 174894 2018-03-22 14:27:29Z gwe $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar CHECKINTERVAL = 900000; // 15 min.\n\nvar getID = function getID(entry) {\n    return entry.get('cdb_object_id');\n};\nvar findByID = function findByID(coll, oid) {\n    return coll.find(function (entry) {\n        return getID(entry) === oid;\n    });\n};\nvar getDate = function getDate(entry) {\n    return entry.get('last_comment_date');\n};\n\nfunction sortPostings(postings) {\n    var dateMap = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _immutable2.default.Map();\n\n    return postings === undefined ? undefined : postings.sortBy(function (posting) {\n        return dateMap.get(getID(posting), getDate(posting));\n    }).reverse();\n}\n\nfunction getOlderPostings(postings, updatedAt) {\n    if (postings === undefined) {\n        return postings;\n    }\n    return postings.filter(function (posting) {\n        return getDate(posting) <= updatedAt;\n    });\n}\n\nfunction generateDateMap(postings) {\n    if (postings === undefined) {\n        return undefined;\n    }\n    return _immutable2.default.Map(postings.map(function (posting) {\n        return [getID(posting), getDate(posting)];\n    }));\n}\n\nvar PostingList = function (_React$Component) {\n    _inherits(PostingList, _React$Component);\n\n    function PostingList(props) {\n        _classCallCheck(this, PostingList);\n\n        // dateMap supposed to keep the sequence of postings to avoid\n        // flicking due to posting date changes in store\n        var _this = _possibleConstructorReturn(this, (PostingList.__proto__ || Object.getPrototypeOf(PostingList)).call(this, props));\n\n        _this.state = {\n            dateMap: undefined,\n            postings: undefined,\n            newest: props.updatedAt,\n            incoming: false\n        };\n        _this.createPosting = _this.createPosting.bind(_this);\n        _this.loadMorePostings = _this.loadMorePostings.bind(_this);\n        _this.confirmUpdate = _this.confirmUpdate.bind(_this);\n        _this.checkNewPostings = _this.checkNewPostings.bind(_this);\n        _this.stopChecker = _this.stopChecker.bind(_this);\n        _this._checker = null;\n        return _this;\n    }\n\n    _createClass(PostingList, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            var _props = this.props,\n                fetchPostings = _props.fetchPostings,\n                initDataURL = _props.initDataURL,\n                filter = _props.filter;\n\n            fetchPostings(initDataURL, filter);\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.checkNewPostings();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.stopChecker();\n        }\n    }, {\n        key: 'stopChecker',\n        value: function stopChecker() {\n            if (this._checker !== null) {\n                window.clearTimeout(this._checker);\n            }\n            this._checker = null;\n        }\n    }, {\n        key: 'checkNewPostings',\n        value: function checkNewPostings() {\n            var _this2 = this;\n\n            this.stopChecker();\n            this._checker = window.setTimeout(function () {\n                var _props2 = _this2.props,\n                    checkNewPostings = _props2.checkNewPostings,\n                    initDataURL = _props2.initDataURL,\n                    filter = _props2.filter;\n\n                checkNewPostings(initDataURL, filter);\n                _this2.checkNewPostings();\n            }, CHECKINTERVAL);\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            var _this3 = this;\n\n            if (nextProps.initDataURL !== this.props.initDataURL || nextProps.filter !== this.props.filter) {\n                // new fetching required, clean up old stuff\n                this.setState({\n                    dateMap: undefined,\n                    incoming: false\n                });\n                this.stopChecker();\n                nextProps.fetchPostings(nextProps.initDataURL, nextProps.filter).then(this.checkNewPostings);\n            } else if (this.state.dateMap === undefined) {\n                // recreate the posting sequences\n                var sorted = sortPostings(nextProps.postings);\n                this.setState({\n                    postings: sorted,\n                    dateMap: generateDateMap(sorted),\n                    incoming: false\n                });\n            } else if (nextProps.updatedAt !== this.props.updatedAt) {\n                // keep list uptodate\n                this.stopChecker();\n                var _sorted = sortPostings(getOlderPostings(nextProps.postings, nextProps.updatedAt));\n                this.setState({\n                    postings: _sorted,\n                    dateMap: generateDateMap(_sorted),\n                    incoming: nextProps.postings.count() !== _sorted.count()\n                });\n                this.checkNewPostings();\n            } else {\n                var updatingID = nextProps.updatingPosting;\n                var updatingPosting = updatingID ? findByID(this.state.postings, updatingID) : undefined;\n                var updatedPosting = updatingID ? findByID(nextProps.postings, updatingID) : undefined;\n                var updating = updatingPosting !== updatedPosting;\n                if (!nextProps.postings.equals(this.props.postings) || updating) {\n                    var nextIDs = nextProps.postings.map(getID);\n                    var showing = this.state.postings;\n                    // remove obsolete data\n                    showing = showing.filter(function (posting) {\n                        return nextIDs.contains(getID(posting));\n                    });\n                    // local changed posting\n                    // (creating, commenting, assigning topics)\n                    if (updating) {\n                        showing = showing.delete(updatingPosting).add(updatedPosting);\n                    }\n                    // unchanged and newly appended postings e.g. via \"load more\"\n                    var olderOnes = getOlderPostings(nextProps.postings, nextProps.updatedAt);\n                    var olderIDs = olderOnes.map(getID);\n                    // because the props.postings are real time data,\n                    // use them in conflicts.\n                    showing = showing.filterNot(function (posting) {\n                        return olderIDs.contains(getID(posting));\n                    }).union(olderOnes);\n                    // sort list according to cached date to keep sequence\n                    // unchanged\n                    showing = sortPostings(showing, this.state.dateMap);\n                    var newMap = showing.reduce(function (dateMap, posting) {\n                        var oid = getID(posting);\n                        return dateMap.set(oid, _this3.state.dateMap.get(oid, getDate(posting)));\n                    }, _immutable2.default.Map());\n                    this.setState({\n                        postings: showing,\n                        dateMap: newMap,\n                        incoming: nextProps.postings.subtract(showing).count() > 0\n                    });\n                }\n            }\n        }\n    }, {\n        key: 'createPosting',\n        value: function createPosting(text, attachments, files) {\n            var createPosting = this.props.createPosting;\n\n            return createPosting(text, attachments, files);\n        }\n    }, {\n        key: 'loadMorePostings',\n        value: function loadMorePostings() {\n            var _props3 = this.props,\n                initDataURL = _props3.initDataURL,\n                filter = _props3.filter,\n                fetchMorePostings = _props3.fetchMorePostings;\n\n            fetchMorePostings(initDataURL, filter);\n        }\n    }, {\n        key: 'renderPostings',\n        value: function renderPostings() {\n            var _props4 = this.props,\n                instanceName = _props4.instanceName,\n                updatedAt = _props4.updatedAt;\n\n            var postings = this.state.postings;\n            return postings === undefined ? null : postings.map(function (posting) {\n                return _react2.default.createElement(_Posting2.default, {\n                    key: posting.get('cdb_object_id'),\n                    instanceName: instanceName,\n                    posting: posting,\n                    lastUpdatedAt: updatedAt });\n            });\n        }\n    }, {\n        key: 'confirmUpdate',\n        value: function confirmUpdate() {\n            var _props5 = this.props,\n                confirmUpdate = _props5.confirmUpdate,\n                postings = _props5.postings;\n\n            if (confirmUpdate && postings) {\n                confirmUpdate(getDate(postings.maxBy(getDate)));\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props6 = this.props,\n                topicDesc = _props6.topicDesc,\n                defaultTopic = _props6.defaultTopic,\n                resultComplete = _props6.resultComplete,\n                className = _props6.className,\n                showForm = _props6.showForm;\n\n            var topic = topicDesc || defaultTopic;\n            var label = (0, _i18n.formatStr)('new-posting', { topic: topic });\n            var clsname = (0, _csWebComponentsExternals.classNames)(className, (0, _helpers.prefixNS)('posting-list'));\n            return _react2.default.createElement(\n                'div',\n                { className: clsname },\n                _react2.default.createElement(\n                    _reactBootstrap.Collapse,\n                    { 'in': this.state.incoming },\n                    _react2.default.createElement(\n                        _reactBootstrap.Alert,\n                        { bsStyle: 'info' },\n                        _react2.default.createElement(_csWebComponentsBase.Button.TextButton, {\n                            label: (0, _i18n.formatStr)('incoming-postings'),\n                            buttonStyle: 'primary',\n                            onClick: this.confirmUpdate })\n                    )\n                ),\n                showForm ? _react2.default.createElement(_CreateForm2.default, {\n                    label: label,\n                    placeholder: label,\n                    createEntry: this.createPosting }) : null,\n                this.renderPostings(),\n                resultComplete === false ? _react2.default.createElement(_csWebComponentsBase.Button.TextButton, {\n                    label: (0, _i18n.formatStr)('load-more'),\n                    className: (0, _helpers.prefixNS)('load-more'),\n                    buttonStyle: 'primary',\n                    onClick: this.loadMorePostings }) : null\n            );\n        }\n    }]);\n\n    return PostingList;\n}(_react2.default.Component);\n\nPostingList.propTypes = {\n    instanceName: _csWebComponentsExternals.PropTypes.string.isRequired,\n    initDataURL: _csWebComponentsExternals.PropTypes.string.isRequired,\n    resultComplete: _csWebComponentsExternals.PropTypes.bool,\n    topicDesc: _csWebComponentsExternals.PropTypes.string,\n    defaultTopic: _csWebComponentsExternals.PropTypes.string,\n    updatedAt: _csWebComponentsExternals.PropTypes.string,\n    postings: _csWebComponentsExternals.ImmutablePropTypes.orderedSet,\n    filter: _csWebComponentsExternals.ImmutablePropTypes.map,\n    updatingPosting: _csWebComponentsExternals.PropTypes.string,\n    confirmUpdate: _csWebComponentsExternals.PropTypes.func,\n    fetchPostings: _csWebComponentsExternals.PropTypes.func,\n    checkNewPostings: _csWebComponentsExternals.PropTypes.func,\n    createPosting: _csWebComponentsExternals.PropTypes.func,\n    fetchMorePostings: _csWebComponentsExternals.PropTypes.func,\n    className: _csWebComponentsExternals.PropTypes.string,\n    showForm: _csWebComponentsExternals.PropTypes.bool\n};\n\nPostingList.defaultProps = {\n    filter: _immutable2.default.Map()\n};\n\nfunction mapStateToProps(state, ownProps) {\n    var instanceName = ownProps.instanceName;\n\n    var compState = state[\"cs-activitystream-web\"];\n    var postings = compState === undefined ? undefined : (0, _helpers.getReferencedPostings)(state, compState.collections.getIn([instanceName, 'postings']));\n    return {\n        postings: postings,\n        resultComplete: compState.collections.getIn([instanceName, 'result_complete']),\n        topicDesc: compState.collections.getIn([instanceName, 'description']),\n        defaultTopic: compState.collections.getIn([instanceName, 'default_topic']),\n        updatedAt: compState.collections.getIn([instanceName, 'updatedAt']),\n        updatingPosting: compState.collections.getIn([instanceName, 'updatingPosting']),\n        showForm: compState.collections.getIn([instanceName, 'cdb_object_id']) !== 'sharing'\n    };\n}\n\nfunction mapDispatchToProps(dispatch, ownProps) {\n    var instanceName = ownProps.instanceName;\n\n    return {\n        fetchPostings: function fetchPostings(url, filter) {\n            return dispatch((0, _actions.fetchPostings)(instanceName, url, filter));\n        },\n        fetchMorePostings: function fetchMorePostings(url, filter) {\n            return dispatch((0, _actions.fetchMorePostings)(instanceName, url, filter));\n        },\n        checkNewPostings: function checkNewPostings(url, filter) {\n            return dispatch((0, _actions.checkNewPostings)(instanceName, url, filter));\n        },\n        createPosting: function createPosting(text, attachments, files) {\n            return dispatch((0, _actions.createPosting)(instanceName, ownProps.initDataURL, text, attachments, files));\n        },\n        confirmUpdate: function confirmUpdate(confirmAt) {\n            return dispatch((0, _actions.confirmUpdate)(instanceName, confirmAt));\n        }\n    };\n}\n\nexports.default = (0, _csWebComponentsExternals.connect)(mapStateToProps, mapDispatchToProps)(PostingList);\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = Channel;\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; } /*\r\n                                                                                                                                                                                                                   * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                   * All rights reserved.\r\n                                                                                                                                                                                                                   * http://www.contact-software.com\r\n                                                                                                                                                                                                                   *\r\n                                                                                                                                                                                                                   * Revision \"$Id: Channel.jsx 166061 2017-09-28 13:27:35Z yzh $\"\r\n                                                                                                                                                                                                                   */\n\nfunction Channel(props) {\n    var channel = props.channel,\n        location = props.location,\n        currentTopic = props.currentTopic;\n\n    var cid = channel.get('cdb_object_id');\n    var text = channel.get('description');\n    var isActive = currentTopic === cid;\n    var to = (0, _csWebComponentsBase.updateQuery)(location, { topic: cid });\n    var clsname = (0, _csWebComponentsExternals.classNames)(props.className, (0, _helpers.prefixNS)('channel'), _defineProperty({}, (0, _helpers.prefixNS)('channel-active'), isActive));\n    return _react2.default.createElement(\n        _csWebComponentsBase.Navigation.Link,\n        { to: to,\n            title: text,\n            className: clsname },\n        text\n    );\n}\n\nChannel.propTypes = {\n    channel: _csWebComponentsExternals.ImmutablePropTypes.map,\n    className: _csWebComponentsExternals.PropTypes.string,\n    currentTopic: _csWebComponentsExternals.PropTypes.string,\n    location: _csWebComponentsExternals.PropTypes.object\n};\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(2);\n\nvar _ReferenceObject = __webpack_require__(19);\n\nvar _ReferenceObject2 = _interopRequireDefault(_ReferenceObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: Attachments.jsx 164013 2017-08-25 14:50:32Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Attachments = function (_React$PureComponent) {\n    _inherits(Attachments, _React$PureComponent);\n\n    function Attachments() {\n        _classCallCheck(this, Attachments);\n\n        return _possibleConstructorReturn(this, (Attachments.__proto__ || Object.getPrototypeOf(Attachments)).apply(this, arguments));\n    }\n\n    _createClass(Attachments, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                activityEntry = _props.activityEntry,\n                onDelete = _props.onDelete;\n\n            var attachments = activityEntry.get('attachments');\n            return _react2.default.createElement(\n                'ul',\n                { className: (0, _csWebComponentsExternals.classNames)((0, _helpers.prefixNS)('attachments'), 'list-unstyled') },\n                attachments.get('attachments').map(function (attachment) {\n                    return _react2.default.createElement(\n                        'li',\n                        { key: attachment.get('cdb_object_id') },\n                        _react2.default.createElement(_ReferenceObject2.default, { referenceObject: attachment,\n                            onDelete: onDelete })\n                    );\n                })\n            );\n        }\n    }]);\n\n    return Attachments;\n}(_react2.default.PureComponent);\n\nexports.default = Attachments;\n\n\nAttachments.propTypes = {\n    activityEntry: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    onDelete: _csWebComponentsExternals.PropTypes.func\n};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _PersonPicture = __webpack_require__(35);\n\nvar _PersonPicture2 = _interopRequireDefault(_PersonPicture);\n\nvar _Footer = __webpack_require__(36);\n\nvar _Footer2 = _interopRequireDefault(_Footer);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: PostingLayout.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Title = function Title(_ref) {\n    var children = _ref.children;\n    return _react2.default.createElement(\n        'div',\n        { className: (0, _helpers.prefixNS)('posting-title') },\n        children\n    );\n};\n\nvar Nav = function Nav(_ref2) {\n    var children = _ref2.children;\n    return _react2.default.createElement(\n        'nav',\n        { className: (0, _helpers.prefixNS)('posting-nav') },\n        children\n    );\n};\n\nvar PostingLayout = function (_React$Component) {\n    _inherits(PostingLayout, _React$Component);\n\n    function PostingLayout() {\n        _classCallCheck(this, PostingLayout);\n\n        return _possibleConstructorReturn(this, (PostingLayout.__proto__ || Object.getPrototypeOf(PostingLayout)).apply(this, arguments));\n    }\n\n    _createClass(PostingLayout, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                posting = _props.posting,\n                className = _props.className;\n\n            var author = posting.get('author');\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _csWebComponentsExternals.classNames)(className, (0, _helpers.prefixNS)('posting-layout')) },\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _helpers.prefixNS)('posting-icon') },\n                    _react2.default.createElement(_PersonPicture2.default, { person: author })\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _helpers.prefixNS)('posting-detail') },\n                    this.props.children\n                )\n            );\n        }\n    }]);\n\n    return PostingLayout;\n}(_react2.default.Component);\n\nexports.default = PostingLayout;\n\n\nPostingLayout.propTypes = {\n    posting: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    className: _csWebComponentsExternals.PropTypes.string\n};\n\nPostingLayout.Title = Title;\nPostingLayout.Nav = Nav;\nPostingLayout.Footer = _Footer2.default;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = ActivityDate;\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _helpers = __webpack_require__(2);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: ActivityDate.jsx 150838 2016-12-13 15:29:09Z yzh $\"\r\n */\n\nfunction ActivityDate(props) {\n    var activityEntry = props.activityEntry;\n\n    var calendar = (0, _helpers.formatDate)(activityEntry.get('datetime'));\n    var uiLink = activityEntry.get('system:ui_link');\n    if (uiLink) {\n        var toLink = (0, _helpers.getToLink)(uiLink);\n        var link = toLink && uiLink !== toLink ? { pathname: toLink } : uiLink;\n        return _react2.default.createElement(\n            _csWebComponentsBase.Navigation.Link,\n            { to: link, className: 'text-muted' },\n            calendar\n        );\n    }\n    return _react2.default.createElement(\n        'span',\n        { className: 'text-muted' },\n        calendar\n    );\n}\n\nActivityDate.propTypes = {\n    activityEntry: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired\n};\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /*\r\n                                                                                                                                                                                                                                                                   * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                   * All rights reserved.\r\n                                                                                                                                                                                                                                                                   * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                   *\r\n                                                                                                                                                                                                                                                                   * Revision \"$Id: ActivityText.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n                                                                                                                                                                                                                                                                   */\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _autolinker = __webpack_require__(37);\n\nvar _autolinker2 = _interopRequireDefault(_autolinker);\n\nvar _trimRight = __webpack_require__(38);\n\nvar _trimRight2 = _interopRequireDefault(_trimRight);\n\nvar _i18n = __webpack_require__(5);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar linker = new _autolinker2.default({\n    newWindow: true,\n    stripPrefix: false,\n    urls: {\n        schemeMatches: true,\n        wwwMatches: true,\n        tldMatches: false\n    },\n    email: false,\n    phone: false,\n    twitter: false,\n    hashtag: false\n});\n\nvar rootURL = window.location.protocol + '//' + window.location.hostname.toLowerCase() + (window.location.port ? ':' + window.location.port.toLowerCase() : '');\n\nfunction isExternal(url) {\n    var lower = url.toLowerCase();\n    return lower.indexOf('cdb:') !== 0 && lower.indexOf('cdbcmsg:') !== 0 && lower.indexOf(rootURL) === -1;\n}\n\nfunction ShowMore(props) {\n    return _react2.default.createElement(\n        'span',\n        null,\n        _react2.default.createElement(\n            'span',\n            null,\n            '...'\n        ),\n        _react2.default.createElement(_csWebComponentsBase.Button.TextButton, _extends({\n            buttonStyle: 'link',\n            label: (0, _i18n.formatStr)('more')\n        }, props))\n    );\n}\n\nfunction digest(text, offset, length, tolerance) {\n    var end = length - offset;\n    if (end < 0 || text.length < end) {\n        return [text];\n    }\n    var cutIndex = text.indexOf(' ', end);\n    // if no whitespace go maximum tolerance\n    // if whitespace exceeds tolerance, go max tolerance\n    if (cutIndex === -1 || cutIndex - end > tolerance) {\n        cutIndex = end + tolerance;\n    }\n    var result = [];\n    var before = text.slice(0, cutIndex);\n    var after = text.slice(cutIndex);\n    if (before) {\n        result.push(before);\n    }\n    result.push(ShowMore);\n    if (after) {\n        result.push(after);\n    }\n    return result;\n}\n\nfunction lineBreaking(parts) {\n    var result = [];\n    var keyIdx = 0;\n    parts.forEach(function (part) {\n        var splitted = void 0;\n        if (typeof part !== 'string') {\n            splitted = null;\n        } else {\n            splitted = part.split('\\n');\n        }\n        if (splitted === null || splitted.length === 1) {\n            result.push(part);\n        } else {\n            // insert link breaker between lines\n            splitted.forEach(function (text, idx) {\n                if (text !== '') {\n                    result.push(text);\n                }\n                if (idx < splitted.length - 1) {\n                    result.push(_react2.default.createElement('br', { key: keyIdx }));\n                    keyIdx++;\n                }\n            });\n        }\n    });\n    return result;\n}\n\nvar ActivityText = function (_React$Component) {\n    _inherits(ActivityText, _React$Component);\n\n    function ActivityText(props) {\n        _classCallCheck(this, ActivityText);\n\n        var _this = _possibleConstructorReturn(this, (ActivityText.__proto__ || Object.getPrototypeOf(ActivityText)).call(this, props));\n\n        _this.state = {\n            'digest': true,\n            'parts': _this.parseActivityText(props)\n        };\n        _this.showMore = _this.showMore.bind(_this);\n        return _this;\n    }\n\n    _createClass(ActivityText, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.activityEntry !== this.props.activityEntry) {\n                this.setState({\n                    'parts': this.parseActivityText(nextProps)\n                });\n            }\n        }\n    }, {\n        key: 'parseActivityText',\n        value: function parseActivityText(props) {\n            var activityEntry = props.activityEntry,\n                digestLength = props.digestLength,\n                digestTolerance = props.digestTolerance;\n\n            var parts = [];\n            var activityText = (0, _trimRight2.default)(activityEntry.get('text'));\n            var matches = linker.parse(activityText);\n            var lastIdx = 0;\n            if (digestLength === lastIdx) {\n                parts.push(ShowMore);\n            }\n            matches.forEach(function (match, idx) {\n                var offset = match.getOffset();\n                var matched = match.getMatchedText();\n                var before = activityText.substring(lastIdx, offset);\n                if (before !== '') {\n                    parts.push.apply(parts, _toConsumableArray(digest(before, lastIdx, digestLength, digestTolerance)));\n                }\n                var link = match.getAnchorHref();\n                var target = isExternal(link) ? '_extern' : '_blank';\n                parts.push(_react2.default.createElement(\n                    _csWebComponentsBase.Navigation.Link,\n                    {\n                        key: 'link-' + idx,\n                        to: link,\n                        title: link,\n                        target: target },\n                    match.getAnchorText()\n                ));\n                lastIdx = offset + matched.length;\n            });\n            if (lastIdx < activityText.length) {\n                parts.push.apply(parts, _toConsumableArray(digest(activityText.substring(lastIdx), lastIdx, digestLength, digestTolerance)));\n            }\n            return lineBreaking(parts);\n        }\n    }, {\n        key: 'showMore',\n        value: function showMore() {\n            this.setState({\n                digest: false\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _state = this.state,\n                digest = _state.digest,\n                parts = _state.parts;\n\n            var showParts = void 0;\n            if (digest) {\n                var idx = parts.indexOf(ShowMore);\n                if (idx === -1) {\n                    showParts = parts;\n                } else {\n                    showParts = parts.slice(0, idx).concat(_react2.default.createElement(ShowMore, { key: 'showMore', onClick: this.showMore }));\n                }\n            } else {\n                showParts = parts; //.filter((item) => item !== ShowMore);\n            }\n            return _react2.default.createElement(\n                'div',\n                { className: 'cs-activitystream-web-detail-text' },\n                showParts.length ? showParts : null\n            );\n        }\n    }]);\n\n    return ActivityText;\n}(_react2.default.Component);\n\nexports.default = ActivityText;\n\n\nActivityText.propTypes = {\n    activityEntry: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    digestLength: _csWebComponentsExternals.PropTypes.number,\n    digestTolerance: _csWebComponentsExternals.PropTypes.number\n};\n\nActivityText.defaultProps = {\n    digestLength: 300,\n    digestTolerance: 50\n};\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _reactBootstrap = __webpack_require__(16);\n\nvar _helpers = __webpack_require__(2);\n\nvar _i18n = __webpack_require__(5);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: FileViewer.jsx 163928 2017-08-24 12:53:01Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction getType(file) {\n    return file.get('system:content_type');\n}\n\nvar Renderer = function (_React$PureComponent) {\n    _inherits(Renderer, _React$PureComponent);\n\n    function Renderer() {\n        _classCallCheck(this, Renderer);\n\n        return _possibleConstructorReturn(this, (Renderer.__proto__ || Object.getPrototypeOf(Renderer)).apply(this, arguments));\n    }\n\n    _createClass(Renderer, [{\n        key: 'render',\n        value: function render() {\n            var file = this.props.file;\n\n            var isVideo = (0, _csWebComponentsBase.isSupportedVideoType)(getType(file));\n            var src = file.get('@id');\n            if (isVideo) {\n                return _react2.default.createElement('video', { src: src, controls: true });\n            } else {\n                return _react2.default.createElement('img', { src: src });\n            }\n        }\n    }]);\n\n    return Renderer;\n}(_react2.default.PureComponent);\n\nRenderer.propTypes = {\n    file: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired\n};\n\nvar FileViewer = function (_React$PureComponent2) {\n    _inherits(FileViewer, _React$PureComponent2);\n\n    function FileViewer(props) {\n        _classCallCheck(this, FileViewer);\n\n        var _this2 = _possibleConstructorReturn(this, (FileViewer.__proto__ || Object.getPrototypeOf(FileViewer)).call(this, props));\n\n        _this2.state = {\n            lightBox: false,\n            showing: 0,\n            direction: null\n        };\n        _this2.closeLightBox = _this2.closeLightBox.bind(_this2);\n        _this2.openLightBox = _this2.openLightBox.bind(_this2);\n        _this2.selectItem = _this2.selectItem.bind(_this2);\n        _this2.dialogSizes = _immutable2.default.List([_csWebComponentsBase.Dialog.SIZE_MEDIUM, _csWebComponentsBase.Dialog.SIZE_LARGE]);\n        return _this2;\n    }\n\n    _createClass(FileViewer, [{\n        key: 'openLightBox',\n        value: function openLightBox() {\n            this.setState({\n                lightBox: true,\n                showing: 0,\n                direction: null\n            });\n        }\n    }, {\n        key: 'closeLightBox',\n        value: function closeLightBox() {\n            this.setState({\n                lightBox: false\n            });\n        }\n    }, {\n        key: 'selectItem',\n        value: function selectItem(selectedIndex, e) {\n            this.setState({\n                showing: selectedIndex,\n                direction: e.direction\n            });\n        }\n    }, {\n        key: 'renderLightBox',\n        value: function renderLightBox(files) {\n            var imgCls = (0, _helpers.prefixNS)('file-viewer-lightbox__image');\n            var capCls = (0, _helpers.prefixNS)('file-viewer-lightbox__caption');\n            var dialogCls = (0, _csWebComponentsExternals.classNames)((0, _helpers.prefixNS)('file-viewer-lightbox'), _defineProperty({}, (0, _helpers.prefixNS)('file-viewer-lightbox--single'), files.count() <= 1));\n            return _react2.default.createElement(\n                _csWebComponentsBase.Dialog.Dialog,\n                { show: true,\n                    hideFooter: true,\n                    showCancel: true,\n                    sizes: this.dialogSizes,\n                    dialogClassName: dialogCls,\n                    onHide: this.closeLightBox,\n                    title: (0, _i18n.formatStr)('images') },\n                _react2.default.createElement(\n                    _reactBootstrap.Carousel,\n                    { activeIndex: this.state.showing,\n                        direction: this.state.direction,\n                        onSelect: this.selectItem },\n                    files.map(function (file) {\n                        return _react2.default.createElement(\n                            _reactBootstrap.Carousel.Item,\n                            { key: file.get('@id') },\n                            _react2.default.createElement(\n                                'div',\n                                { className: imgCls },\n                                _react2.default.createElement(Renderer, { file: file })\n                            ),\n                            _react2.default.createElement(\n                                'span',\n                                { className: capCls },\n                                file.get('cdbf_name')\n                            )\n                        );\n                    })\n                )\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var activityEntry = this.props.activityEntry;\n\n            var files = activityEntry.getIn(['relship:files', 'targets'], _immutable2.default.List());\n            var viewable = files.filter(function (file) {\n                return (0, _csWebComponentsBase.isSupportedImageType)(getType(file)) || (0, _csWebComponentsBase.isSupportedVideoType)(getType(file));\n            });\n            if (viewable.count() < 1) {\n                return null;\n            }\n            var lightBox = this.state.lightBox ? this.renderLightBox(viewable) : null;\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('file-viewer') },\n                lightBox,\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _helpers.prefixNS)('file-viewer-preview') },\n                    _react2.default.createElement(\n                        'div',\n                        { className: (0, _helpers.prefixNS)('file-viewer-preview-image'),\n                            onClick: this.openLightBox },\n                        _react2.default.createElement(Renderer, { file: viewable.get(0) }),\n                        _react2.default.createElement(\n                            _reactBootstrap.Label,\n                            { bsStyle: 'default',\n                                className: (0, _helpers.prefixNS)('file-viewer-preview-counter') },\n                            (0, _i18n.formatStr)('one-of', { n: viewable.count() })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return FileViewer;\n}(_react2.default.PureComponent);\n\nexports.default = FileViewer;\n\n\nFileViewer.propTypes = {\n    activityEntry: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    onSubmit: _csWebComponentsExternals.PropTypes.func\n};\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = PostingAuthor;\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction PostingAuthor(props) {\n    var posting = props.posting;\n\n    var person = posting.get('author');\n    var link = person.get('system:ui_link');\n    var name = person.get('name');\n    if (link) {\n        return _react2.default.createElement(\n            _csWebComponentsBase.Navigation.Link,\n            { to: link },\n            name\n        );\n    }\n    return _react2.default.createElement(\n        'span',\n        null,\n        name\n    );\n} /*\r\n   * Copyright (C) 2016 CONTACT Software GmbH\r\n   * All rights reserved.\r\n   * http://www.contact-software.com\r\n   *\r\n   * Revision \"$Id: PostingAuthor.jsx 174161 2018-03-07 14:27:13Z yzh $\"\r\n   */\n\nPostingAuthor.propTypes = {\n    posting: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired\n};\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = PageLayout;\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _helpers = __webpack_require__(2);\n\nvar _Sidebar = __webpack_require__(29);\n\nvar _Sidebar2 = _interopRequireDefault(_Sidebar);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; } /*\r\n                                                                                                                                                                                                                   * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                   * All rights reserved.\r\n                                                                                                                                                                                                                   * http://www.contact-software.com\r\n                                                                                                                                                                                                                   *\r\n                                                                                                                                                                                                                   * Revision \"$Id: PageLayout.jsx 162172 2017-07-26 08:22:43Z yzh $\"\r\n                                                                                                                                                                                                                   */\n\nfunction PageLayout(_ref) {\n    var location = _ref.location,\n        noSidebar = _ref.noSidebar,\n        children = _ref.children;\n\n    var embedded = parseInt((0, _csWebComponentsBase.parseQuery)(location).embedded) === 1;\n    var appCls = (0, _csWebComponentsExternals.classNames)((0, _helpers.prefixNS)('app'), _defineProperty({}, (0, _helpers.prefixNS)('embedded'), embedded));\n    var page = _react2.default.createElement(\n        'div',\n        { className: appCls },\n        _react2.default.createElement(\n            'div',\n            { className: (0, _helpers.prefixNS)('app-sidebar') },\n            !noSidebar && !embedded ? _react2.default.createElement(_Sidebar2.default, null) : null\n        ),\n        _react2.default.createElement(\n            'div',\n            { className: (0, _helpers.prefixNS)('app-content') },\n            children\n        )\n    );\n    if (embedded) {\n        return page;\n    }\n    return _react2.default.createElement(\n        _csWebComponentsBase.PageFrame.ApplicationFrame,\n        null,\n        page\n    );\n}\n\nPageLayout.propTypes = {\n    location: _csWebComponentsExternals.PropTypes.object,\n    noSidebar: _csWebComponentsExternals.PropTypes.bool\n};\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(2);\n\nvar _i18n = __webpack_require__(5);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: ReferenceObject.jsx 174199 2018-03-08 08:59:24Z vov $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar ReferenceObject = function (_React$PureComponent) {\n    _inherits(ReferenceObject, _React$PureComponent);\n\n    function ReferenceObject(props) {\n        _classCallCheck(this, ReferenceObject);\n\n        var _this = _possibleConstructorReturn(this, (ReferenceObject.__proto__ || Object.getPrototypeOf(ReferenceObject)).call(this, props));\n\n        _this.onDelete = _this.onDelete.bind(_this);\n        return _this;\n    }\n\n    _createClass(ReferenceObject, [{\n        key: 'onDelete',\n        value: function onDelete() {\n            this.props.onDelete && this.props.onDelete(this.props.referenceObject);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                referenceObject = _props.referenceObject,\n                onDelete = _props.onDelete;\n\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('reference-object'),\n                    title: referenceObject.get('description') },\n                onDelete ? _react2.default.createElement(_csWebComponentsBase.Button.IconButton, {\n                    buttonStyle: 'danger',\n                    size: 'sm',\n                    iconName: 'csweb_cancel',\n                    onClick: this.onDelete,\n                    className: (0, _helpers.prefixNS)('reference-object-delete'),\n                    title: (0, _i18n.formatStr)('delete') }) : null,\n                _react2.default.createElement(_csWebComponentsBase.SVGIconAndLink, {\n                    src: referenceObject.get('object_icon'),\n                    to: referenceObject.get('object_ui_link'),\n                    label: referenceObject.get('description') })\n            );\n        }\n    }]);\n\n    return ReferenceObject;\n}(_react2.default.PureComponent);\n\nexports.default = ReferenceObject;\n\n\nReferenceObject.propTypes = {\n    referenceObject: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    onDelete: _csWebComponentsExternals.PropTypes.func\n};\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Posting = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _SystemPosting = __webpack_require__(34);\n\nvar _SystemPosting2 = _interopRequireDefault(_SystemPosting);\n\nvar _UserPosting = __webpack_require__(39);\n\nvar _UserPosting2 = _interopRequireDefault(_UserPosting);\n\nvar _Comments = __webpack_require__(40);\n\nvar _Comments2 = _interopRequireDefault(_Comments);\n\nvar _CreateForm = __webpack_require__(22);\n\nvar _CreateForm2 = _interopRequireDefault(_CreateForm);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _actions = __webpack_require__(8);\n\nvar _i18n = __webpack_require__(5);\n\nvar _helpers = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: Posting.jsx 168213 2017-11-10 10:00:44Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Posting = exports.Posting = function (_React$Component) {\n    _inherits(Posting, _React$Component);\n\n    function Posting(props) {\n        _classCallCheck(this, Posting);\n\n        var _this = _possibleConstructorReturn(this, (Posting.__proto__ || Object.getPrototypeOf(Posting)).call(this, props));\n\n        _this.state = {\n            replyingTo: null\n        };\n        _this.createComment = _this.createComment.bind(_this);\n        _this.onComment = _this.onComment.bind(_this);\n        _this.onCommentPosting = _this.onCommentPosting.bind(_this);\n        _this.onCloseForm = _this.onCloseForm.bind(_this);\n        return _this;\n    }\n\n    _createClass(Posting, [{\n        key: 'onComment',\n        value: function onComment(entry) {\n            var _this2 = this;\n\n            this.setState({\n                replyingTo: entry ? entry.get('@id') : null\n            }, function () {\n                return _this2.refs['commentForm'].expandForm();\n            });\n        }\n    }, {\n        key: 'onCommentPosting',\n        value: function onCommentPosting() {\n            this.onComment(null);\n        }\n    }, {\n        key: 'onCloseForm',\n        value: function onCloseForm() {\n            this.setState({\n                replyingTo: null\n            });\n        }\n    }, {\n        key: 'createComment',\n        value: function createComment(text, attachments, files) {\n            var _props = this.props,\n                posting = _props.posting,\n                createComment = _props.createComment;\n\n            var replyTo = this.state.replyingTo ? this.state.replyingTo : posting.get('comments').get('@id');\n            return createComment(replyTo, text, attachments, files);\n        }\n    }, {\n        key: 'isSystemPosting',\n        value: function isSystemPosting() {\n            var posting = this.props.posting;\n\n            if (posting === undefined) {\n                return false;\n            }\n            return posting.get('is_system_posting');\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props2 = this.props,\n                posting = _props2.posting,\n                instanceName = _props2.instanceName;\n\n            var PostingComponent = this.isSystemPosting() ? _SystemPosting2.default : _UserPosting2.default;\n            var replyTo = this.state.replyingTo ? (0, _Comments.findCommentToPosting)(posting, this.state.replyingTo) : posting;\n            var replyToAuthor = replyTo.getIn(['author', 'name']);\n            return _react2.default.createElement(\n                PostingComponent,\n                _extends({}, this.props, {\n                    className: (0, _helpers.prefixNS)('posting'),\n                    onComment: this.onCommentPosting }),\n                _react2.default.createElement(_Comments2.default, { posting: posting, onComment: this.onComment, instanceName: instanceName }),\n                _react2.default.createElement(_CreateForm2.default, {\n                    label: (0, _i18n.formatStr)('new-comment', { name: replyToAuthor }),\n                    placeholder: (0, _i18n.formatStr)('write-answer'),\n                    createEntry: this.createComment,\n                    onClose: this.onCloseForm,\n                    ref: 'commentForm' })\n            );\n        }\n    }]);\n\n    return Posting;\n}(_react2.default.Component);\n\nPosting.propTypes = {\n    instanceName: _csWebComponentsExternals.PropTypes.string.isRequired,\n    createComment: _csWebComponentsExternals.PropTypes.func.isRequired,\n    assignTopics: _csWebComponentsExternals.PropTypes.func.isRequired,\n    lastUpdatedAt: _csWebComponentsExternals.PropTypes.string,\n    posting: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired\n};\n\nfunction mapDispatchToProps(dispatch, ownProps) {\n    var instanceName = ownProps.instanceName,\n        posting = ownProps.posting;\n\n    return {\n        createComment: function createComment(url, text, attachments, files) {\n            return dispatch((0, _actions.createComment)(instanceName, url, { posting: posting, text: text, attachments: attachments, files: files }));\n        },\n        assignTopics: function assignTopics(topics) {\n            return dispatch((0, _actions.assignTopics)(instanceName, posting, topics));\n        }\n    };\n}\n\nexports.default = (0, _csWebComponentsExternals.connect)(function () {\n    return {};\n}, mapDispatchToProps)(Posting);\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Topic = Topic;\nexports.default = renderTopics;\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; } /*\r\n                                                                                                                                                                                                                   * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                   * All rights reserved.\r\n                                                                                                                                                                                                                   * http://www.contact-software.com\r\n                                                                                                                                                                                                                   *\r\n                                                                                                                                                                                                                   * Revision \"$Id: Topics.jsx 166061 2017-09-28 13:27:35Z yzh $\"\r\n                                                                                                                                                                                                                   */\n\nfunction Topic(props) {\n    var topic = props.topic;\n\n    var link = topic.get('object_ui_link');\n    var icon = topic.get('object_icon');\n    var descr = topic.get('description');\n    var clsNames = (0, _csWebComponentsExternals.classNames)((0, _helpers.prefixNS)('posting-topics-item'), props.className);\n    return _react2.default.createElement(\n        'div',\n        { className: clsNames, title: descr },\n        _react2.default.createElement(_csWebComponentsBase.SVGIconAndLink, { label: descr,\n            src: icon,\n            to: link })\n    );\n}\n\nTopic.propTypes = {\n    topic: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    className: _csWebComponentsExternals.PropTypes.string\n};\n\nfunction renderTopics(posting) {\n    var topics = posting.getIn(['topics', 'topics']);\n    if (!topics) {\n        return null;\n    }\n    return topics.map(function (topic, idx) {\n        return _react2.default.createElement(Topic, { topic: topic,\n            key: topic.get('cdb_object_id'),\n            className: (0, _csWebComponentsExternals.classNames)(_defineProperty({}, (0, _helpers.prefixNS)('main-topic'), idx === 0)) });\n    });\n}\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(2);\n\nvar _i18n = __webpack_require__(5);\n\nvar _Actions = __webpack_require__(6);\n\nvar _Attachments = __webpack_require__(11);\n\nvar _Attachments2 = _interopRequireDefault(_Attachments);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: CreateForm.jsx 168213 2017-11-10 10:00:44Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Renderer = function (_React$PureComponent) {\n    _inherits(Renderer, _React$PureComponent);\n\n    function Renderer(props) {\n        _classCallCheck(this, Renderer);\n\n        var _this = _possibleConstructorReturn(this, (Renderer.__proto__ || Object.getPrototypeOf(Renderer)).call(this, props));\n\n        _this.state = {\n            src: _this.getPreview(props),\n            isVideo: (0, _csWebComponentsBase.isSupportedVideoType)(props.file.type)\n        };\n        return _this;\n    }\n\n    _createClass(Renderer, [{\n        key: 'getPreview',\n        value: function getPreview(props) {\n            return _csWebComponentsBase.FileDropzone.getPreview(props.file);\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.file !== this.props.file) {\n                this.setState({\n                    src: this.getPreview(nextProps),\n                    isVideo: (0, _csWebComponentsBase.isSupportedVideoType)(nextProps.file.type)\n                });\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _csWebComponentsBase.FileDropzone.revokePreview(this.state.src);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _state = this.state,\n                src = _state.src,\n                isVideo = _state.isVideo;\n\n            if (isVideo) {\n                return _react2.default.createElement('video', { src: src });\n            } else {\n                return _react2.default.createElement('img', { src: src });\n            }\n        }\n    }]);\n\n    return Renderer;\n}(_react2.default.PureComponent);\n\nRenderer.propTypes = {\n    file: _csWebComponentsExternals.PropTypes.any.isRequired\n};\n\nvar calculatorClassName = (0, _helpers.prefixNS)('form__height-calculator');\n\nvar CreateForm = function (_React$Component) {\n    _inherits(CreateForm, _React$Component);\n\n    function CreateForm(props) {\n        _classCallCheck(this, CreateForm);\n\n        var _this2 = _possibleConstructorReturn(this, (CreateForm.__proto__ || Object.getPrototypeOf(CreateForm)).call(this, props));\n\n        _this2.state = {\n            newEntry: _this2.makeNewEntry(),\n            expanded: false,\n            height: null,\n            submitting: false\n        };\n        _this2.onChange = _this2.onChange.bind(_this2);\n        _this2.onSubmit = _this2.onSubmit.bind(_this2);\n        _this2.onClose = _this2.onClose.bind(_this2);\n        _this2.expandForm = _this2.expandForm.bind(_this2);\n        _this2.assignAttachments = _this2.assignAttachments.bind(_this2);\n        _this2.onAddFiles = _this2.onAddFiles.bind(_this2);\n        _this2.onDeleteFile = _this2.onDeleteFile.bind(_this2);\n        _this2.onDeleteAttachment = _this2.onDeleteAttachment.bind(_this2);\n        _this2._form = null;\n        return _this2;\n    }\n\n    _createClass(CreateForm, [{\n        key: 'onChange',\n        value: function onChange(event) {\n            var _this3 = this;\n\n            this.setState({\n                newEntry: this.state.newEntry.set('text', event.target.value)\n            }, function () {\n                if (_this3._form) {\n                    var calcEls = _this3._form.getElementsByClassName(calculatorClassName);\n                    if (calcEls.length) {\n                        var els = calcEls[0].getElementsByTagName('textarea');\n                        if (els.length) {\n                            // offsetHeight - clientHeight = border size!\n                            var newHeight = els[0].scrollHeight + (els[0].offsetHeight - els[0].clientHeight);\n                            _this3.setState({\n                                height: newHeight\n                            });\n                        }\n                    }\n                }\n            });\n        }\n    }, {\n        key: 'makeNewEntry',\n        value: function makeNewEntry() {\n            return _immutable2.default.fromJS({\n                text: '',\n                attachments: {\n                    addable: true,\n                    attachments: []\n                },\n                files: []\n            });\n        }\n    }, {\n        key: 'expandForm',\n        value: function expandForm() {\n            this.setState({\n                expanded: true\n            });\n        }\n    }, {\n        key: 'onAddFiles',\n        value: function onAddFiles(items) {\n            var prev = this.state.newEntry.get('files');\n            var prevNames = prev.map(function (file) {\n                return file.name;\n            });\n            this.setState({\n                newEntry: this.state.newEntry.set('files', prev.concat(_immutable2.default.List(items).filter(function (item) {\n                    return !prevNames.contains(item.name) && ((0, _csWebComponentsBase.isSupportedImageType)(item.type) || (0, _csWebComponentsBase.isSupportedVideoType)(item.type));\n                })))\n            });\n        }\n    }, {\n        key: 'onDeleteFile',\n        value: function onDeleteFile(file) {\n            var prev = this.state.newEntry.get('files');\n            var idx = prev.indexOf(file);\n            if (idx > -1) {\n                this.setState({\n                    newEntry: this.state.newEntry.set('files', prev.delete(idx))\n                });\n            }\n        }\n    }, {\n        key: 'assignAttachments',\n        value: function assignAttachments(attachments) {\n            this.setState({\n                newEntry: this.state.newEntry.setIn(['attachments', 'attachments'], attachments)\n            });\n        }\n    }, {\n        key: 'onDeleteAttachment',\n        value: function onDeleteAttachment(attachment) {\n            var attachments = this.state.newEntry.getIn(['attachments', 'attachments']);\n            var idx = attachments.indexOf(attachment);\n            if (idx > -1) {\n                this.setState({\n                    newEntry: this.state.newEntry.setIn(['attachments', 'attachments'], attachments.delete(idx))\n                });\n            }\n        }\n    }, {\n        key: 'onSubmit',\n        value: function onSubmit() {\n            var _this4 = this;\n\n            this.setState({ submitting: true }, function () {\n                var createEntry = _this4.props.createEntry;\n                var newEntry = _this4.state.newEntry;\n\n                var text = newEntry.get('text', '');\n                var attachments = newEntry.getIn(['attachments', 'attachments']).map(function (obj) {\n                    return obj.get('cdb_object_id');\n                });\n                var files = newEntry.get('files');\n                createEntry(text, attachments, files).then(_this4.onClose).catch(function () {\n                    _this4.setState({ submitting: false });\n                });\n            });\n        }\n    }, {\n        key: 'onClose',\n        value: function onClose() {\n            this.setState({\n                expanded: false,\n                height: null,\n                newEntry: this.makeNewEntry(),\n                submitting: false\n            });\n            var onClose = this.props.onClose;\n\n            if (onClose) {\n                onClose();\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this5 = this;\n\n            var _props = this.props,\n                label = _props.label,\n                placeholder = _props.placeholder;\n\n            var text = this.state.newEntry.get('text');\n            var fileList = this.state.newEntry.get('files');\n            var compactCls = (0, _csWebComponentsExternals.classNames)((0, _helpers.prefixNS)('form'), (0, _helpers.prefixNS)('form--compact'));\n            var coverCls = (0, _csWebComponentsExternals.classNames)((0, _helpers.prefixNS)('form__cover'), _defineProperty({}, (0, _helpers.prefixNS)('form__cover--submitting'), this.state.submitting));\n            var areaStl = this.state.height ? { height: this.state.height } : undefined;\n            return this.state.expanded ? _react2.default.createElement(\n                'form',\n                { className: (0, _helpers.prefixNS)('form'),\n                    ref: function ref(c) {\n                        return _this5._form = c;\n                    } },\n                _react2.default.createElement(\n                    'div',\n                    { className: coverCls },\n                    _react2.default.createElement(_csWebComponentsBase.Throbber, null)\n                ),\n                _react2.default.createElement(_csWebComponentsBase.FormControl.TextArea, {\n                    label: label,\n                    value: text,\n                    onChange: this.onChange,\n                    name: 'newActivity',\n                    rows: 3,\n                    style: areaStl,\n                    autoFocus: true\n                }),\n                _react2.default.createElement(\n                    _csWebComponentsBase.FileDropzone,\n                    { className: (0, _helpers.prefixNS)('form-upload-margin'), onDrop: this.onAddFiles },\n                    _react2.default.createElement(_csWebComponentsBase.FileDropzone.Preview, { files: fileList,\n                        onDelete: this.onDeleteFile,\n                        Renderer: Renderer }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: (0, _helpers.prefixNS)('form-upload-placeholder') },\n                        (0, _i18n.formatStr)('file-drop-text')\n                    )\n                ),\n                _react2.default.createElement(_Attachments2.default, { activityEntry: this.state.newEntry,\n                    onDelete: this.onDeleteAttachment }),\n                _react2.default.createElement(\n                    _csWebComponentsBase.ButtonGroup,\n                    null,\n                    _react2.default.createElement(_csWebComponentsBase.Button.TextButton, {\n                        label: (0, _i18n.formatStr)('publish'),\n                        onClick: this.onSubmit,\n                        buttonStyle: 'primary',\n                        disabled: text === '' }),\n                    _react2.default.createElement(_csWebComponentsBase.Button.TextButton, {\n                        label: (0, _i18n.formatStr)('cancel'),\n                        onClick: this.onClose })\n                ),\n                _react2.default.createElement(\n                    _csWebComponentsBase.ButtonGroup,\n                    null,\n                    _react2.default.createElement(_Actions.AssignAttachments, {\n                        activityEntry: this.state.newEntry,\n                        assignAttachments: this.assignAttachments })\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: calculatorClassName, 'aria-hidden': true },\n                    _react2.default.createElement(_csWebComponentsBase.FormControl.TextArea, {\n                        value: text,\n                        name: 'heightCalculator',\n                        rows: 3\n                    })\n                )\n            ) : _react2.default.createElement(\n                'form',\n                { className: compactCls },\n                _react2.default.createElement(_csWebComponentsBase.FormControl.TextInput, {\n                    name: 'formTrigger',\n                    placeholder: placeholder,\n                    onFocus: this.expandForm })\n            );\n        }\n    }]);\n\n    return CreateForm;\n}(_react2.default.Component);\n\nexports.default = CreateForm;\n\n\nCreateForm.propTypes = {\n    label: _csWebComponentsExternals.PropTypes.string,\n    placeholder: _csWebComponentsExternals.PropTypes.string,\n    createEntry: _csWebComponentsExternals.PropTypes.func.isRequired,\n    onClose: _csWebComponentsExternals.PropTypes.func\n};\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _PostingList = __webpack_require__(9);\n\nvar _PostingList2 = _interopRequireDefault(_PostingList);\n\nvar _constants = __webpack_require__(7);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ObjectPostings = function ObjectPostings(_ref) {\n    var contextObject = _ref.contextObject,\n        instanceName = _ref.instanceName,\n        filter = _ref.filter;\n\n    if (contextObject === undefined) {\n        return null;\n    }\n    var url = _constants.TOPIC_LINK + '/' + contextObject.get('cdb_object_id');\n    return _react2.default.createElement(_PostingList2.default, { instanceName: instanceName, initDataURL: url, filter: filter });\n}; /*\r\n    * Copyright (C) 2016 CONTACT Software GmbH\r\n    * All rights reserved.\r\n    * http://www.contact-software.com\r\n    *\r\n    * Revision \"$Id: ObjectPostings.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n    */\n\nObjectPostings.propTypes = {\n    instanceName: _csWebComponentsExternals.PropTypes.string.isRequired,\n    contextObject: _csWebComponentsExternals.ImmutablePropTypes.map,\n    filter: _csWebComponentsExternals.ImmutablePropTypes.map\n};\n\nObjectPostings.defaultProps = {\n    filter: _immutable2.default.Map()\n};\n\nexports.default = ObjectPostings;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _helpers = __webpack_require__(2);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _reducers = __webpack_require__(26);\n\nvar _App = __webpack_require__(27);\n\nvar _App2 = _interopRequireDefault(_App);\n\nvar _PostingList = __webpack_require__(9);\n\nvar _PostingList2 = _interopRequireDefault(_PostingList);\n\nvar _ObjectActivities = __webpack_require__(44);\n\nvar _ObjectActivities2 = _interopRequireDefault(_ObjectActivities);\n\nvar _ObjectActivitiesBlock = __webpack_require__(45);\n\nvar _ObjectActivitiesBlock2 = _interopRequireDefault(_ObjectActivitiesBlock);\n\nvar _DashboardWidget = __webpack_require__(46);\n\nvar _DashboardWidget2 = _interopRequireDefault(_DashboardWidget);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_csWebComponentsBase.Registry.registerComponent((0, _helpers.prefixNS)('App'), _App2.default); /*\r\n                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                * All rights reserved.\r\n                                                                                                * http://www.contact-software.com\r\n                                                                                                *\r\n                                                                                                * Revision \"$Id: index.js 157065 2017-04-13 09:39:19Z gwe $\"\r\n                                                                                                */\n\n_csWebComponentsBase.Registry.registerComponent((0, _helpers.prefixNS)('PostingList'), _PostingList2.default);\n_csWebComponentsBase.Registry.registerComponent((0, _helpers.prefixNS)('ObjectActivities'), _ObjectActivities2.default);\n_csWebComponentsBase.Registry.registerComponent((0, _helpers.prefixNS)('ObjectActivitiesBlock'), _ObjectActivitiesBlock2.default);\n_csWebComponentsBase.Registry.registerComponent((0, _helpers.prefixNS)('DashboardWidget'), _DashboardWidget2.default);\n_csWebComponentsBase.Registry.registerReducer(\"cs-activitystream-web\", (0, _csWebComponentsExternals.combineReducers)({ collections: _reducers.collections, channels: _reducers.channels, subscriptions: _reducers.subscriptions, links: _reducers.links }));\n\nexports.default = {\n    App: _App2.default,\n    PostingList: _PostingList2.default,\n    ObjectActivities: _ObjectActivities2.default,\n    ObjectActivitiesBlock: _ObjectActivitiesBlock2.default\n};\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_25__;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.collections = collections;\nexports.channels = channels;\nexports.subscriptions = subscriptions;\nexports.links = links;\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _actions = __webpack_require__(8);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: reducers.js 164019 2017-08-25 15:37:23Z yzh $\"\r\n */\n\nvar getCollectionInfo = function getCollectionInfo(col) {\n    var result = _immutable2.default.Map({});\n    var postings = col.postings;\n    var oids = _immutable2.default.OrderedSet(postings.map(function (o) {\n        return o['@id'];\n    }));\n    result = result.set('postings', oids).set('result_complete', col['result_complete']);\n    if (postings.length > 0) {\n        var lastOne = postings[postings.length - 1];\n        result = result.set('lastCommentDate', lastOne['last_comment_date']).set('lastObjectId', lastOne['cdb_object_id']);\n    }\n    return result;\n};\n\nvar getCollectionTimestamp = function getCollectionTimestamp(col) {\n    var postings = col.postings;\n    if (postings.length > 0) {\n        var firstOne = postings[0];\n        return firstOne['last_comment_date'];\n    }\n    return undefined;\n};\n\nvar getCollectionUpdateTime = function getCollectionUpdateTime(col) {\n    var result = _immutable2.default.Map({});\n    var updatedAt = getCollectionTimestamp(col);\n    if (updatedAt) {\n        result = result.set('updatedAt', updatedAt);\n    }\n    return result;\n};\n\nfunction collections() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _immutable2.default.Map();\n    var action = arguments[1];\n\n    var instanceName = action.meta && action.meta.instanceName;\n    if (action.type === _actions.RECEIVED_POSTINGS) {\n        return state.set(instanceName, _immutable2.default.Map(action.payload).merge(getCollectionInfo(action.payload)).merge(getCollectionUpdateTime(action.payload)));\n    } else if (instanceName && state.get(instanceName) === undefined) {\n        return state;\n    }\n    switch (action.type) {\n        case _actions.APPEND_POSTINGS:\n            {\n                var prev = state.getIn([instanceName, 'postings']);\n                var updated = getCollectionInfo(action.payload).update('postings', function (curr) {\n                    return prev.union(curr);\n                });\n                return state.mergeIn([instanceName], updated);\n            }\n        case _actions.INCOMING_POSTINGS:\n            {\n                var incoming = getCollectionInfo(action.payload);\n                return state.update(instanceName, function (prevData) {\n                    return prevData.update('postings', function (prevCol) {\n                        return incoming.get('postings').union(prevCol);\n                    });\n                });\n            }\n        case _actions.POSTING_CREATED:\n            {\n                var posting = action.payload;\n                return state.update(instanceName, function (prevData) {\n                    return prevData.update('postings', function (prevCol) {\n                        return _immutable2.default.OrderedSet([posting['@id']]).union(prevCol);\n                    }).set('updatingPosting', posting['cdb_object_id']);\n                });\n            }\n        case _actions.POSTING_REMOVED:\n            {\n                var postingURL = action.payload;\n                return state.update(instanceName, function (prevData) {\n                    return prevData.update('postings', function (prevCol) {\n                        return prevCol.delete(postingURL);\n                    });\n                });\n            }\n        case _actions.POSTING_UPDATING:\n            return state.update(instanceName, function (prevData) {\n                return prevData.set('updatingPosting', action.payload);\n            });\n        case _actions.POSTING_UPDATED:\n            return state.update(instanceName, function (prevData) {\n                return prevData.set('updatingPosting', undefined);\n            });\n        case _actions.UPDATE_CONFIRMED:\n            return state.update(instanceName, function (prevData) {\n                return prevData.set('updatedAt', action.payload).set('updatingPosting', undefined);\n            });\n        default:\n            return state;\n    }\n}\n\nfunction channels() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _immutable2.default.Map();\n    var action = arguments[1];\n\n    switch (action.type) {\n        case _actions.RECEIVED_CHANNELS:\n            return _immutable2.default.fromJS(action.payload);\n        default:\n            return state;\n    }\n}\n\nfunction subscriptions() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _immutable2.default.Map();\n    var action = arguments[1];\n\n    switch (action.type) {\n        case _actions.RECEIVED_SUBSCRIPTIONS:\n            return _immutable2.default.fromJS(action.payload);\n        default:\n            return state;\n    }\n}\n\nfunction links() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _immutable2.default.Map();\n    var action = arguments[1];\n\n    switch (action.type) {\n        case _actions.RECEIVED_CHANNELS:\n            return state.withMutations(function (prev) {\n                if (action.payload.predefined) {\n                    action.payload.predefined.forEach(function (channel) {\n                        return prev.set(channel['cdb_object_id'], channel['@id']);\n                    });\n                }\n                if (action.payload.channels) {\n                    action.payload.channels.forEach(function (channel) {\n                        return prev.set(channel['cdb_object_id'], channel['@id']);\n                    });\n                }\n            });\n        case _actions.RECEIVED_SUBSCRIPTIONS:\n            return state.withMutations(function (prev) {\n                if (action.payload.subscriptions) {\n                    action.payload.subscriptions.forEach(function (group) {\n                        if (group.subscriptions) {\n                            group.subscriptions.forEach(function (channel) {\n                                return prev.set(channel['cdb_object_id'], channel['@id']);\n                            });\n                        }\n                    });\n                }\n            });\n        default:\n            return state;\n    }\n}\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _AppMain = __webpack_require__(28);\n\nvar _AppMain2 = _interopRequireDefault(_AppMain);\n\nvar _Thread = __webpack_require__(43);\n\nvar _Thread2 = _interopRequireDefault(_Thread);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: App.jsx 162172 2017-07-26 08:22:43Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar App = function (_React$Component) {\n    _inherits(App, _React$Component);\n\n    function App() {\n        _classCallCheck(this, App);\n\n        return _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).apply(this, arguments));\n    }\n\n    _createClass(App, [{\n        key: 'render',\n        value: function render() {\n            var postingPath = _helpers.APPBASE + '/posting/:postingID';\n            return _react2.default.createElement(\n                _csWebComponentsExternals.ReactRouter.Router,\n                { history: _csWebComponentsExternals.browserHistory },\n                _react2.default.createElement(\n                    _csWebComponentsExternals.ReactRouter.Switch,\n                    null,\n                    _react2.default.createElement(_csWebComponentsExternals.ReactRouter.Route, { path: postingPath, component: _Thread2.default }),\n                    _react2.default.createElement(_csWebComponentsExternals.ReactRouter.Route, { component: _AppMain2.default })\n                )\n            );\n        }\n    }]);\n\n    return App;\n}(_react2.default.Component);\n\nexports.default = App;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _PageLayout = __webpack_require__(18);\n\nvar _PageLayout2 = _interopRequireDefault(_PageLayout);\n\nvar _FilterBar = __webpack_require__(32);\n\nvar _FilterBar2 = _interopRequireDefault(_FilterBar);\n\nvar _PostingList = __webpack_require__(9);\n\nvar _PostingList2 = _interopRequireDefault(_PostingList);\n\nvar _helpers = __webpack_require__(2);\n\nvar _constants = __webpack_require__(7);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: AppMain.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction getQuery(location) {\n    return _immutable2.default.Map((0, _csWebComponentsBase.parseQuery)(location));\n}\n\nvar AppMain = function (_React$Component) {\n    _inherits(AppMain, _React$Component);\n\n    function AppMain(props) {\n        _classCallCheck(this, AppMain);\n\n        var _this = _possibleConstructorReturn(this, (AppMain.__proto__ || Object.getPrototypeOf(AppMain)).call(this, props));\n\n        _this.state = {\n            query: getQuery(props.location)\n        };\n        return _this;\n    }\n\n    _createClass(AppMain, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.location.search !== this.props.location.search) {\n                this.setState({\n                    query: getQuery(nextProps.location)\n                });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                links = _props.links,\n                location = _props.location;\n\n            var topic = this.state.query.get('topic');\n            var dataURL = topic === undefined ? (0, _helpers.getPostingURL)() : links.get(topic, (0, _helpers.byTopicURL)(topic));\n            return _react2.default.createElement(\n                _PageLayout2.default,\n                { location: location },\n                _react2.default.createElement(_FilterBar2.default, null),\n                _react2.default.createElement(_PostingList2.default, {\n                    instanceName: _constants.STANDALONE_INSTANCE,\n                    initDataURL: dataURL,\n                    filter: this.state.query })\n            );\n        }\n    }]);\n\n    return AppMain;\n}(_react2.default.Component);\n\nfunction mapStateToProps(state) {\n    return { links: state[\"cs-activitystream-web\"].links };\n}\n\nAppMain.propTypes = {\n    links: _csWebComponentsExternals.ImmutablePropTypes.map,\n    location: _csWebComponentsExternals.PropTypes.object\n};\n\nexports.default = (0, _csWebComponentsExternals.connect)(mapStateToProps)(AppMain);\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Channels = __webpack_require__(30);\n\nvar _Channels2 = _interopRequireDefault(_Channels);\n\nvar _Channel = __webpack_require__(10);\n\nvar _Channel2 = _interopRequireDefault(_Channel);\n\nvar _Subscriptions = __webpack_require__(31);\n\nvar _Subscriptions2 = _interopRequireDefault(_Subscriptions);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _i18n = __webpack_require__(5);\n\nvar _helpers = __webpack_require__(2);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: Sidebar.jsx 168430 2017-11-14 13:52:36Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Sidebar = function (_React$PureComponent) {\n    _inherits(Sidebar, _React$PureComponent);\n\n    function Sidebar(props) {\n        _classCallCheck(this, Sidebar);\n\n        var _this = _possibleConstructorReturn(this, (Sidebar.__proto__ || Object.getPrototypeOf(Sidebar)).call(this, props));\n\n        _this.state = {\n            filter: ''\n        };\n        _this.setFilter = _this.setFilter.bind(_this);\n        return _this;\n    }\n\n    _createClass(Sidebar, [{\n        key: 'setFilter',\n        value: function setFilter(value) {\n            this.setState({\n                filter: value\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var location = this.props.location;\n\n            var showAll = _immutable2.default.Map({\n                cdb_object_id: undefined,\n                description: (0, _i18n.formatStr)('all')\n            });\n            var currentTopic = (0, _csWebComponentsBase.parseQuery)(location).topic;\n            var filter = this.state.filter;\n\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('sidebar-navigations') },\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _helpers.prefixNS)('filter-bar') },\n                    _react2.default.createElement(\n                        'div',\n                        { className: (0, _helpers.prefixNS)('filter-bar-filter') },\n                        _react2.default.createElement(_csWebComponentsBase.FormControl.TextInput, {\n                            name: (0, _helpers.prefixNS)('channel-filter'),\n                            placeholder: (0, _i18n.formatStr)('filter_by_channel'),\n                            value: filter,\n                            onValueChange: this.setFilter })\n                    )\n                ),\n                _react2.default.createElement('div', { className: 'clearfix' }),\n                _react2.default.createElement(_Channel2.default, {\n                    className: (0, _helpers.prefixNS)('channel-show-all'),\n                    channel: showAll,\n                    currentTopic: currentTopic,\n                    location: location }),\n                _react2.default.createElement(_Channels2.default, { location: location,\n                    currentTopic: currentTopic,\n                    filter: filter }),\n                _react2.default.createElement(_Subscriptions2.default, { location: location,\n                    currentTopic: currentTopic,\n                    filter: filter })\n            );\n        }\n    }]);\n\n    return Sidebar;\n}(_react2.default.PureComponent);\n\nSidebar.propTypes = {\n    location: _csWebComponentsExternals.PropTypes.object\n};\n\nexports.default = _csWebComponentsExternals.ReactRouter.withRouter(Sidebar);\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _i18n = __webpack_require__(5);\n\nvar _helpers = __webpack_require__(2);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _actions = __webpack_require__(8);\n\nvar _Channel = __webpack_require__(10);\n\nvar _Channel2 = _interopRequireDefault(_Channel);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: Channels.jsx 168151 2017-11-09 14:47:33Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Channels = function (_React$PureComponent) {\n    _inherits(Channels, _React$PureComponent);\n\n    function Channels(props) {\n        _classCallCheck(this, Channels);\n\n        var _this = _possibleConstructorReturn(this, (Channels.__proto__ || Object.getPrototypeOf(Channels)).call(this, props));\n\n        _this.state = {\n            channels: _this.getChannels(props)\n        };\n        return _this;\n    }\n\n    _createClass(Channels, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.props.fetchChannels();\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.filter !== this.props.filter || nextProps.channels !== this.props.channels) {\n                this.setState({ channels: this.getChannels(nextProps) });\n            }\n        }\n    }, {\n        key: 'getChannels',\n        value: function getChannels(props) {\n            var channels = props.channels,\n                filter = props.filter;\n\n            var result = _immutable2.default.OrderedSet();\n            if (!channels) {\n                return result;\n            }\n            var predefined = channels.get('predefined');\n            if (predefined) {\n                result = result.union(predefined);\n            }\n            var others = channels.get('channels');\n            if (others) {\n                result = result.union(others);\n            }\n            return (0, _helpers.filterChannels)(result, filter);\n        }\n    }, {\n        key: 'renderPredefined',\n        value: function renderPredefined() {\n            var channels = this.props.channels;\n\n            if (!channels) {\n                return null;\n            }\n            var predefined = channels.get('predefined');\n            if (!predefined) {\n                return null;\n            }\n            return predefined.map(function (channel) {\n                return _react2.default.createElement(_Channel2.default, {\n                    key: channel.get('cdb_object_id'),\n                    channel: channel });\n            });\n        }\n    }, {\n        key: 'renderOthers',\n        value: function renderOthers() {\n            var channels = this.props.channels;\n\n            if (!channels) {\n                return null;\n            }\n            var others = channels.get('channels');\n            if (!others) {\n                return null;\n            }\n            return others.map(function (channel) {\n                return _react2.default.createElement(_Channel2.default, {\n                    key: channel.get('cdb_object_id'),\n                    channel: channel });\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                location = _props.location,\n                currentTopic = _props.currentTopic,\n                filter = _props.filter;\n            var channels = this.state.channels;\n\n            var isActive = filter || channels.find(function (channel) {\n                return channel.get('cdb_object_id') === currentTopic;\n            });\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('channels') },\n                _react2.default.createElement(\n                    _csWebComponentsBase.Collapsible,\n                    { initialCollapsed: !isActive,\n                        header: (0, _i18n.formatStr)('channels') },\n                    channels.map(function (channel) {\n                        return _react2.default.createElement(_Channel2.default, {\n                            key: channel.get('cdb_object_id'),\n                            channel: channel,\n                            currentTopic: currentTopic,\n                            location: location });\n                    })\n                )\n            );\n        }\n    }]);\n\n    return Channels;\n}(_react2.default.PureComponent);\n\nChannels.propTypes = {\n    channels: _csWebComponentsExternals.ImmutablePropTypes.map,\n    fetchChannels: _csWebComponentsExternals.PropTypes.func,\n    currentTopic: _csWebComponentsExternals.PropTypes.string,\n    location: _csWebComponentsExternals.PropTypes.object,\n    filter: _csWebComponentsExternals.PropTypes.string\n};\n\nfunction mapStateToProps(state) {\n    var channels = state[\"cs-activitystream-web\"].channels;\n    return { channels: channels };\n}\n\nexports.default = (0, _csWebComponentsExternals.connect)(mapStateToProps, { fetchChannels: _actions.fetchChannels })(Channels);\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _helpers = __webpack_require__(2);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _actions = __webpack_require__(8);\n\nvar _Channel = __webpack_require__(10);\n\nvar _Channel2 = _interopRequireDefault(_Channel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: Subscriptions.jsx 168151 2017-11-09 14:47:33Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Subscriptions = function (_React$Component) {\n    _inherits(Subscriptions, _React$Component);\n\n    function Subscriptions(props) {\n        _classCallCheck(this, Subscriptions);\n\n        var _this = _possibleConstructorReturn(this, (Subscriptions.__proto__ || Object.getPrototypeOf(Subscriptions)).call(this, props));\n\n        _this.renderEntries = _this.renderEntries.bind(_this);\n        return _this;\n    }\n\n    _createClass(Subscriptions, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.props.fetchSubscriptions();\n        }\n    }, {\n        key: 'renderGroups',\n        value: function renderGroups() {\n            var subscriptions = this.props.subscriptions;\n\n            if (!subscriptions) {\n                return null;\n            }\n            var groups = subscriptions.get('subscriptions');\n            if (!groups) {\n                return null;\n            }\n            return groups.map(this.renderEntries);\n        }\n    }, {\n        key: 'renderEntries',\n        value: function renderEntries(group) {\n            var _props = this.props,\n                currentTopic = _props.currentTopic,\n                location = _props.location,\n                filter = _props.filter;\n\n            var channels = group.get('subscriptions');\n            if (!channels) {\n                return null;\n            }\n            channels = (0, _helpers.filterChannels)(channels, filter);\n            var isActive = filter || channels.find(function (channel) {\n                return channel.get('cdb_object_id') === currentTopic;\n            });\n            var desc = group.get('description');\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('subscriptions-group'),\n                    key: desc },\n                _react2.default.createElement(\n                    _csWebComponentsBase.Collapsible,\n                    {\n                        initialCollapsed: !isActive,\n                        header: desc },\n                    channels.map(function (channel) {\n                        return _react2.default.createElement(_Channel2.default, {\n                            key: channel.get('cdb_object_id'),\n                            channel: channel,\n                            currentTopic: currentTopic,\n                            location: location });\n                    })\n                )\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('subscriptions') },\n                this.renderGroups()\n            );\n        }\n    }]);\n\n    return Subscriptions;\n}(_react2.default.Component);\n\nSubscriptions.propTypes = {\n    fetchSubscriptions: _csWebComponentsExternals.PropTypes.func,\n    subscriptions: _csWebComponentsExternals.ImmutablePropTypes.map,\n    currentTopic: _csWebComponentsExternals.PropTypes.string,\n    location: _csWebComponentsExternals.PropTypes.object,\n    filter: _csWebComponentsExternals.PropTypes.string\n};\n\nfunction mapStateToProps(state) {\n    var subscriptions = state[\"cs-activitystream-web\"].subscriptions;\n    return { subscriptions: subscriptions };\n}\n\nexports.default = (0, _csWebComponentsExternals.connect)(mapStateToProps, { fetchSubscriptions: _actions.fetchSubscriptions })(Subscriptions);\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _helpers = __webpack_require__(2);\n\nvar _i18n = __webpack_require__(5);\n\nvar _Actions = __webpack_require__(6);\n\nvar _PersonFilter = __webpack_require__(33);\n\nvar _PersonFilter2 = _interopRequireDefault(_PersonFilter);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: FilterBar.jsx 168430 2017-11-14 13:52:36Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction getFilter(location) {\n    var _parseQuery = (0, _csWebComponentsBase.parseQuery)(location),\n        author = _parseQuery.author,\n        pn = _parseQuery.pn,\n        date = _parseQuery.date,\n        systemposting = _parseQuery.systemposting;\n\n    return { author: author, pn: pn, date: date, systemposting: systemposting };\n}\n\nvar FilterBar = function (_React$Component) {\n    _inherits(FilterBar, _React$Component);\n\n    function FilterBar(props) {\n        _classCallCheck(this, FilterBar);\n\n        var _this = _possibleConstructorReturn(this, (FilterBar.__proto__ || Object.getPrototypeOf(FilterBar)).call(this, props));\n\n        _this.state = getFilter(props.location);\n        _this.onPersonChange = _this.onPersonChange.bind(_this);\n        _this.onDateChange = _this.onDateChange.bind(_this);\n        _this.onFilter = _this.onFilter.bind(_this);\n        _this.onClearFilter = _this.onClearFilter.bind(_this);\n        _this.toggleSystemPostingFilter = _this.toggleSystemPostingFilter.bind(_this);\n        return _this;\n    }\n\n    _createClass(FilterBar, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.location.search !== this.props.location.search) {\n                this.setState(getFilter(nextProps.location));\n            }\n        }\n    }, {\n        key: 'onPersonChange',\n        value: function onPersonChange(_ref) {\n            var author = _ref.author,\n                pn = _ref.pn;\n\n            this.setState({\n                author: author, pn: pn\n            });\n        }\n    }, {\n        key: 'onDateChange',\n        value: function onDateChange(date) {\n            this.setState({ date: date ? date : undefined });\n        }\n    }, {\n        key: 'toggleSystemPostingFilter',\n        value: function toggleSystemPostingFilter() {\n            this.setState({\n                systemposting: _Actions.SystemPostingFilter.toggleFilterState(this.state.systemposting)\n            }, this.onFilter);\n        }\n    }, {\n        key: 'onFilter',\n        value: function onFilter() {\n            var _props = this.props,\n                location = _props.location,\n                history = _props.history;\n            var _state = this.state,\n                author = _state.author,\n                pn = _state.pn,\n                date = _state.date,\n                systemposting = _state.systemposting;\n\n            var to = (0, _csWebComponentsBase.updateQuery)(location, { author: author, pn: pn, date: date, systemposting: systemposting });\n            history.push(to);\n        }\n    }, {\n        key: 'onClearFilter',\n        value: function onClearFilter() {\n            this.setState({\n                author: undefined,\n                pn: undefined,\n                date: undefined,\n                systemposting: undefined\n            }, this.onFilter);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _state2 = this.state,\n                author = _state2.author,\n                date = _state2.date,\n                systemposting = _state2.systemposting;\n\n            var disabled = !author && !date;\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('filter-bar') },\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _helpers.prefixNS)('filter-bar-filter') },\n                    _react2.default.createElement(_PersonFilter2.default, { onFilterChange: this.onPersonChange,\n                        value: author })\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _helpers.prefixNS)('filter-bar-filter') },\n                    _react2.default.createElement(_Actions.DateFilter, { onFilterChange: this.onDateChange,\n                        value: date })\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _helpers.prefixNS)('filter-bar-systemposting') },\n                    _react2.default.createElement(_Actions.SystemPostingFilter, {\n                        filterState: systemposting,\n                        onChange: this.toggleSystemPostingFilter })\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _helpers.prefixNS)('filter-bar-buttons') },\n                    _react2.default.createElement(_csWebComponentsBase.Button.TextButton, { title: (0, _i18n.formatStr)('filter'),\n                        buttonStyle: 'primary',\n                        onClick: this.onFilter,\n                        disabled: disabled }),\n                    _react2.default.createElement(_csWebComponentsBase.Button.TextButton, { title: (0, _i18n.formatStr)('reset'),\n                        buttonStyle: 'warning',\n                        onClick: this.onClearFilter })\n                )\n            );\n        }\n    }]);\n\n    return FilterBar;\n}(_react2.default.Component);\n\nFilterBar.propTypes = {\n    location: _csWebComponentsExternals.PropTypes.object,\n    history: _csWebComponentsExternals.PropTypes.object\n};\n\nexports.default = _csWebComponentsExternals.ReactRouter.withRouter(FilterBar);\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _helpers = __webpack_require__(2);\n\nvar _i18n = __webpack_require__(5);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: PersonFilter.jsx 174161 2018-03-07 14:27:13Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar searchURL = (0, _csWebComponentsBase.getAppSetup)().getIn([\"cs-activitystream-web\", 'personSearchURL']);\nvar TypeAheadText = _csWebComponentsBase.FormControl.WithTypeAhead(_csWebComponentsBase.FormControl.TextInput);\nvar SEARCH_DELAY = 250;\n\nfunction PersonRenderer(_ref) {\n    var item = _ref.item;\n\n    var contextObject = item.get('cs_activitystream_data');\n    var orgname = contextObject.get('orgname');\n    return _react2.default.createElement(\n        'div',\n        { className: (0, _helpers.prefixNS)('person-filter-tile') },\n        _react2.default.createElement(\n            _csWebComponentsBase.Tiles.Tile,\n            { contextObject: contextObject,\n                fallbackImg: (0, _csWebComponentsBase.getIcon)('csweb_person_fallback'),\n                headerAttr: 'name',\n                plain: true,\n                thumbnailSize: 'lg' },\n            _react2.default.createElement(\n                'div',\n                { title: orgname },\n                orgname\n            )\n        )\n    );\n}\n\nPersonRenderer.propTypes = {\n    item: _csWebComponentsExternals.ImmutablePropTypes.map\n};\n\nfunction normValue(value) {\n    return value === undefined ? '' : value;\n}\n\nvar PersonFilter = function (_React$Component) {\n    _inherits(PersonFilter, _React$Component);\n\n    function PersonFilter(props) {\n        _classCallCheck(this, PersonFilter);\n\n        var _this = _possibleConstructorReturn(this, (PersonFilter.__proto__ || Object.getPrototypeOf(PersonFilter)).call(this, props));\n\n        _this.state = {\n            text: normValue(props.value),\n            matches: _immutable2.default.List(),\n            hasMore: false\n        };\n        _this._searchRequest = null;\n        _this.ontextChange = _this.ontextChange.bind(_this);\n        _this.onSelectAt = _this.onSelectAt.bind(_this);\n        _this.onBlur = _this.onBlur.bind(_this);\n        return _this;\n    }\n\n    _createClass(PersonFilter, [{\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.cancelRequest();\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.value !== this.props.value) {\n                this.setState({\n                    text: normValue(nextProps.value)\n                });\n            }\n        }\n    }, {\n        key: 'cancelRequest',\n        value: function cancelRequest() {\n            if (this._searchRequest !== null) {\n                clearTimeout(this._searchRequest);\n            }\n        }\n    }, {\n        key: 'fetchMatches',\n        value: function fetchMatches() {\n            var _this2 = this;\n\n            var value = this.state.text;\n            this.cancelRequest();\n            if (!value) {\n                this.setState({\n                    matches: _immutable2.default.List(),\n                    hasMore: false\n                });\n                return;\n            }\n            this._searchRequest = setTimeout(function () {\n                (0, _csWebComponentsBase.getJSON)(searchURL, { fulltextsearch: value + '*' }).then(function (data) {\n                    _this2._searchRequest = null;\n                    _this2.setState({\n                        matches: _immutable2.default.fromJS(data.result.result),\n                        hasMore: data.result.links.length > 0\n                    });\n                });\n            }, SEARCH_DELAY);\n        }\n    }, {\n        key: 'ontextChange',\n        value: function ontextChange(value) {\n            this.setState({\n                text: value\n            }, this.fetchMatches);\n            if (!value) {\n                this.props.onFilterChange && this.props.onFilterChange({});\n            }\n        }\n    }, {\n        key: 'onSelectAt',\n        value: function onSelectAt(idx) {\n            var hit = this.state.matches.get(idx);\n            this.setState({\n                text: hit.getIn(['cs_activitystream_data', 'name']),\n                matches: this.state.matches.clear().push(hit),\n                hasMore: false\n            });\n            this.props.onFilterChange && this.props.onFilterChange({\n                pn: hit.getIn(['cs_activitystream_data', 'personalnummer']),\n                author: hit.getIn(['cs_activitystream_data', 'name'])\n            });\n        }\n    }, {\n        key: 'onBlur',\n        value: function onBlur() {\n            var value = normValue(this.props.value);\n            if (this.state.text !== value) {\n                this.setState({ text: value });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(TypeAheadText, {\n                name: (0, _helpers.prefixNS)('person-filter'),\n                className: (0, _helpers.prefixNS)('person-filter'),\n                TypeAheadItemRenderer: PersonRenderer,\n                value: this.state.text,\n                matched: this.state.matches,\n                onValueChange: this.ontextChange,\n                onSelectAt: this.onSelectAt,\n                hasMoreMatches: this.state.hasMore,\n                placeholder: (0, _i18n.formatStr)('filter_by_person'),\n                onBlur: this.onBlur,\n                autoSelectFirstMatch: true });\n        }\n    }]);\n\n    return PersonFilter;\n}(_react2.default.Component);\n\nexports.default = PersonFilter;\n\n\nPersonFilter.propTypes = {\n    value: _csWebComponentsExternals.PropTypes.string,\n    onFilterChange: _csWebComponentsExternals.PropTypes.func\n};\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _PostingLayout = __webpack_require__(12);\n\nvar _PostingLayout2 = _interopRequireDefault(_PostingLayout);\n\nvar _helpers = __webpack_require__(2);\n\nvar _Actions = __webpack_require__(6);\n\nvar _ActivityDate = __webpack_require__(13);\n\nvar _ActivityDate2 = _interopRequireDefault(_ActivityDate);\n\nvar _Topics = __webpack_require__(21);\n\nvar _Topics2 = _interopRequireDefault(_Topics);\n\nvar _ActivityText = __webpack_require__(14);\n\nvar _ActivityText2 = _interopRequireDefault(_ActivityText);\n\nvar _FileViewer = __webpack_require__(15);\n\nvar _FileViewer2 = _interopRequireDefault(_FileViewer);\n\nvar _PostingAuthor = __webpack_require__(17);\n\nvar _PostingAuthor2 = _interopRequireDefault(_PostingAuthor);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: SystemPosting.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar SystemPosting = function (_React$Component) {\n    _inherits(SystemPosting, _React$Component);\n\n    function SystemPosting() {\n        _classCallCheck(this, SystemPosting);\n\n        return _possibleConstructorReturn(this, (SystemPosting.__proto__ || Object.getPrototypeOf(SystemPosting)).apply(this, arguments));\n    }\n\n    _createClass(SystemPosting, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                posting = _props.posting,\n                onComment = _props.onComment,\n                assignTopics = _props.assignTopics,\n                className = _props.className;\n\n            var topics = (0, _Topics2.default)(posting);\n            return _react2.default.createElement(\n                _PostingLayout2.default,\n                _extends({}, this.props, {\n                    showAuthor: true,\n                    className: (0, _csWebComponentsExternals.classNames)(className, (0, _helpers.prefixNS)('system-posting')) }),\n                _react2.default.createElement(\n                    _PostingLayout2.default.Title,\n                    null,\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        this.props.posting.get('title')\n                    )\n                ),\n                _react2.default.createElement(\n                    _PostingLayout2.default.Nav,\n                    null,\n                    _react2.default.createElement(_PostingAuthor2.default, { posting: posting }),\n                    _react2.default.createElement(_ActivityDate2.default, { activityEntry: posting, className: 'text-muted' }),\n                    topics,\n                    _react2.default.createElement(_Actions.AssignTopics, { activityEntry: posting,\n                        assignTopics: assignTopics })\n                ),\n                _react2.default.createElement(_ActivityText2.default, { activityEntry: posting }),\n                _react2.default.createElement(_FileViewer2.default, { activityEntry: posting }),\n                _react2.default.createElement(\n                    _PostingLayout2.default.Footer,\n                    { activityEntry: posting },\n                    _react2.default.createElement(_Actions.Comment, { onClick: onComment }),\n                    _react2.default.createElement(_Actions.Share, { activityEntry: posting })\n                ),\n                this.props.children\n            );\n        }\n    }]);\n\n    return SystemPosting;\n}(_react2.default.Component);\n\nexports.default = SystemPosting;\n\n\nSystemPosting.propTypes = {\n    posting: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    onComment: _csWebComponentsExternals.PropTypes.func,\n    assignTopics: _csWebComponentsExternals.PropTypes.func,\n    className: _csWebComponentsExternals.PropTypes.string\n};\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = PersonPicture;\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction PersonPicture(props) {\n    var person = props.person;\n\n    var link = person.get('system:ui_link');\n    var picture = person.getIn(['relship:files', 'targets']).find(function (f) {\n        return f.get('cdbf_primary') === '1';\n    });\n    var pictureSrc = picture ? picture.get('@id') : null;\n    var pictureComp = _react2.default.createElement(_csWebComponentsBase.Thumbnail, { imgSrc: pictureSrc,\n        fallbackSrc: (0, _csWebComponentsBase.getIcon)('csweb_person_fallback'),\n        size: 'md' });\n    if (link) {\n        return _react2.default.createElement(\n            _csWebComponentsBase.Navigation.Link,\n            { to: link, className: 'cs-activitystream-web-picture' },\n            pictureComp\n        );\n    }\n    return pictureComp;\n} /*\r\n   * Copyright (C) 2016 CONTACT Software GmbH\r\n   * All rights reserved.\r\n   * http://www.contact-software.com\r\n   *\r\n   * Revision \"$Id: PersonPicture.jsx 172891 2018-02-05 16:14:08Z vov $\"\r\n   */\n\nPersonPicture.propTypes = {\n    person: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired\n};\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Attachments = __webpack_require__(11);\n\nvar _Attachments2 = _interopRequireDefault(_Attachments);\n\nvar _helpers = __webpack_require__(2);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: Footer.jsx 160417 2017-06-16 12:09:10Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Footer = function (_React$PureComponent) {\n    _inherits(Footer, _React$PureComponent);\n\n    function Footer() {\n        _classCallCheck(this, Footer);\n\n        return _possibleConstructorReturn(this, (Footer.__proto__ || Object.getPrototypeOf(Footer)).apply(this, arguments));\n    }\n\n    _createClass(Footer, [{\n        key: 'render',\n        value: function render() {\n            var activityEntry = this.props.activityEntry;\n\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('footer') },\n                _react2.default.createElement(_Attachments2.default, { activityEntry: activityEntry }),\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _helpers.prefixNS)('footer-actions') },\n                    this.props.children\n                )\n            );\n        }\n    }]);\n\n    return Footer;\n}(_react2.default.PureComponent);\n\nexports.default = Footer;\n\n\nFooter.propTypes = {\n    activityEntry: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired\n};\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * Autolinker.js\n * 1.4.2\n *\n * Copyright(c) 2017 Gregory Jacobs <greg@greg-jacobs.com>\n * MIT License\n *\n * https://github.com/gregjacobs/Autolinker.js\n */\n;(function(root, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.Autolinker = factory();\n  }\n}(this, function() {\n/**\n * @class Autolinker\n * @extends Object\n *\n * Utility class used to process a given string of text, and wrap the matches in\n * the appropriate anchor (&lt;a&gt;) tags to turn them into links.\n *\n * Any of the configuration options may be provided in an Object (map) provided\n * to the Autolinker constructor, which will configure how the {@link #link link()}\n * method will process the links.\n *\n * For example:\n *\n *     var autolinker = new Autolinker( {\n *         newWindow : false,\n *         truncate  : 30\n *     } );\n *\n *     var html = autolinker.link( \"Joe went to www.yahoo.com\" );\n *     // produces: 'Joe went to <a href=\"http://www.yahoo.com\">yahoo.com</a>'\n *\n *\n * The {@link #static-link static link()} method may also be used to inline\n * options into a single call, which may be more convenient for one-off uses.\n * For example:\n *\n *     var html = Autolinker.link( \"Joe went to www.yahoo.com\", {\n *         newWindow : false,\n *         truncate  : 30\n *     } );\n *     // produces: 'Joe went to <a href=\"http://www.yahoo.com\">yahoo.com</a>'\n *\n *\n * ## Custom Replacements of Links\n *\n * If the configuration options do not provide enough flexibility, a {@link #replaceFn}\n * may be provided to fully customize the output of Autolinker. This function is\n * called once for each URL/Email/Phone#/Hashtag/Mention (Twitter, Instagram)\n * match that is encountered.\n *\n * For example:\n *\n *     var input = \"...\";  // string with URLs, Email Addresses, Phone #s, Hashtags, and Mentions (Twitter, Instagram)\n *\n *     var linkedText = Autolinker.link( input, {\n *         replaceFn : function( match ) {\n *             console.log( \"href = \", match.getAnchorHref() );\n *             console.log( \"text = \", match.getAnchorText() );\n *\n *             switch( match.getType() ) {\n *                 case 'url' :\n *                     console.log( \"url: \", match.getUrl() );\n *\n *                     if( match.getUrl().indexOf( 'mysite.com' ) === -1 ) {\n *                         var tag = match.buildTag();  // returns an `Autolinker.HtmlTag` instance, which provides mutator methods for easy changes\n *                         tag.setAttr( 'rel', 'nofollow' );\n *                         tag.addClass( 'external-link' );\n *\n *                         return tag;\n *\n *                     } else {\n *                         return true;  // let Autolinker perform its normal anchor tag replacement\n *                     }\n *\n *                 case 'email' :\n *                     var email = match.getEmail();\n *                     console.log( \"email: \", email );\n *\n *                     if( email === \"my@own.address\" ) {\n *                         return false;  // don't auto-link this particular email address; leave as-is\n *                     } else {\n *                         return;  // no return value will have Autolinker perform its normal anchor tag replacement (same as returning `true`)\n *                     }\n *\n *                 case 'phone' :\n *                     var phoneNumber = match.getPhoneNumber();\n *                     console.log( phoneNumber );\n *\n *                     return '<a href=\"http://newplace.to.link.phone.numbers.to/\">' + phoneNumber + '</a>';\n *\n *                 case 'hashtag' :\n *                     var hashtag = match.getHashtag();\n *                     console.log( hashtag );\n *\n *                     return '<a href=\"http://newplace.to.link.hashtag.handles.to/\">' + hashtag + '</a>';\n *\n *                 case 'mention' :\n *                     var mention = match.getMention();\n *                     console.log( mention );\n *\n *                     return '<a href=\"http://newplace.to.link.mention.to/\">' + mention + '</a>';\n *             }\n *         }\n *     } );\n *\n *\n * The function may return the following values:\n *\n * - `true` (Boolean): Allow Autolinker to replace the match as it normally\n *   would.\n * - `false` (Boolean): Do not replace the current match at all - leave as-is.\n * - Any String: If a string is returned from the function, the string will be\n *   used directly as the replacement HTML for the match.\n * - An {@link Autolinker.HtmlTag} instance, which can be used to build/modify\n *   an HTML tag before writing out its HTML text.\n *\n * @constructor\n * @param {Object} [cfg] The configuration options for the Autolinker instance,\n *   specified in an Object (map).\n */\nvar Autolinker = function( cfg ) {\n\tcfg = cfg || {};\n\n\tthis.version = Autolinker.version;\n\n\tthis.urls = this.normalizeUrlsCfg( cfg.urls );\n\tthis.email = typeof cfg.email === 'boolean' ? cfg.email : true;\n\tthis.phone = typeof cfg.phone === 'boolean' ? cfg.phone : true;\n\tthis.hashtag = cfg.hashtag || false;\n\tthis.mention = cfg.mention || false;\n\tthis.newWindow = typeof cfg.newWindow === 'boolean' ? cfg.newWindow : true;\n\tthis.stripPrefix = this.normalizeStripPrefixCfg( cfg.stripPrefix );\n\tthis.stripTrailingSlash = typeof cfg.stripTrailingSlash === 'boolean' ? cfg.stripTrailingSlash : true;\n\n\t// Validate the value of the `mention` cfg\n\tvar mention = this.mention;\n\tif( mention !== false && mention !== 'twitter' && mention !== 'instagram' ) {\n\t\tthrow new Error( \"invalid `mention` cfg - see docs\" );\n\t}\n\n\t// Validate the value of the `hashtag` cfg\n\tvar hashtag = this.hashtag;\n\tif( hashtag !== false && hashtag !== 'twitter' && hashtag !== 'facebook' && hashtag !== 'instagram' ) {\n\t\tthrow new Error( \"invalid `hashtag` cfg - see docs\" );\n\t}\n\n\tthis.truncate = this.normalizeTruncateCfg( cfg.truncate );\n\tthis.className = cfg.className || '';\n\tthis.replaceFn = cfg.replaceFn || null;\n\tthis.context = cfg.context || this;\n\n\tthis.htmlParser = null;\n\tthis.matchers = null;\n\tthis.tagBuilder = null;\n};\n\n\n\n/**\n * Automatically links URLs, Email addresses, Phone Numbers, Twitter handles,\n * Hashtags, and Mentions found in the given chunk of HTML. Does not link URLs\n * found within HTML tags.\n *\n * For instance, if given the text: `You should go to http://www.yahoo.com`,\n * then the result will be `You should go to &lt;a href=\"http://www.yahoo.com\"&gt;http://www.yahoo.com&lt;/a&gt;`\n *\n * Example:\n *\n *     var linkedText = Autolinker.link( \"Go to google.com\", { newWindow: false } );\n *     // Produces: \"Go to <a href=\"http://google.com\">google.com</a>\"\n *\n * @static\n * @param {String} textOrHtml The HTML or text to find matches within (depending\n *   on if the {@link #urls}, {@link #email}, {@link #phone}, {@link #mention},\n *   {@link #hashtag}, and {@link #mention} options are enabled).\n * @param {Object} [options] Any of the configuration options for the Autolinker\n *   class, specified in an Object (map). See the class description for an\n *   example call.\n * @return {String} The HTML text, with matches automatically linked.\n */\nAutolinker.link = function( textOrHtml, options ) {\n\tvar autolinker = new Autolinker( options );\n\treturn autolinker.link( textOrHtml );\n};\n\n\n\n/**\n * Parses the input `textOrHtml` looking for URLs, email addresses, phone\n * numbers, username handles, and hashtags (depending on the configuration\n * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n * objects describing those matches (without making any replacements).\n *\n * Note that if parsing multiple pieces of text, it is slightly more efficient\n * to create an Autolinker instance, and use the instance-level {@link #parse}\n * method.\n *\n * Example:\n *\n *     var matches = Autolinker.parse( \"Hello google.com, I am asdf@asdf.com\", {\n *         urls: true,\n *         email: true\n *     } );\n *\n *     console.log( matches.length );           // 2\n *     console.log( matches[ 0 ].getType() );   // 'url'\n *     console.log( matches[ 0 ].getUrl() );    // 'google.com'\n *     console.log( matches[ 1 ].getType() );   // 'email'\n *     console.log( matches[ 1 ].getEmail() );  // 'asdf@asdf.com'\n *\n * @static\n * @param {String} textOrHtml The HTML or text to find matches within\n *   (depending on if the {@link #urls}, {@link #email}, {@link #phone},\n *   {@link #hashtag}, and {@link #mention} options are enabled).\n * @param {Object} [options] Any of the configuration options for the Autolinker\n *   class, specified in an Object (map). See the class description for an\n *   example call.\n * @return {Autolinker.match.Match[]} The array of Matches found in the\n *   given input `textOrHtml`.\n */\nAutolinker.parse = function( textOrHtml, options ) {\n\tvar autolinker = new Autolinker( options );\n\treturn autolinker.parse( textOrHtml );\n};\n\n\n/**\n * @static\n * @property {String} version (readonly)\n *\n * The Autolinker version number in the form major.minor.patch\n *\n * Ex: 0.25.1\n */\nAutolinker.version = '1.4.2';\n\n\nAutolinker.prototype = {\n\tconstructor : Autolinker,  // fix constructor property\n\n\t/**\n\t * @cfg {Boolean/Object} [urls]\n\t *\n\t * `true` if URLs should be automatically linked, `false` if they should not\n\t * be. Defaults to `true`.\n\t *\n\t * Examples:\n\t *\n\t *     urls: true\n\t *\n\t *     // or\n\t *\n\t *     urls: {\n\t *         schemeMatches : true,\n\t *         wwwMatches    : true,\n\t *         tldMatches    : true\n\t *     }\n\t *\n\t * As shown above, this option also accepts an Object form with 3 properties\n\t * to allow for more customization of what exactly gets linked. All default\n\t * to `true`:\n\t *\n\t * @cfg {Boolean} [urls.schemeMatches] `true` to match URLs found prefixed\n\t *   with a scheme, i.e. `http://google.com`, or `other+scheme://google.com`,\n\t *   `false` to prevent these types of matches.\n\t * @cfg {Boolean} [urls.wwwMatches] `true` to match urls found prefixed with\n\t *   `'www.'`, i.e. `www.google.com`. `false` to prevent these types of\n\t *   matches. Note that if the URL had a prefixed scheme, and\n\t *   `schemeMatches` is true, it will still be linked.\n\t * @cfg {Boolean} [urls.tldMatches] `true` to match URLs with known top\n\t *   level domains (.com, .net, etc.) that are not prefixed with a scheme or\n\t *   `'www.'`. This option attempts to match anything that looks like a URL\n\t *   in the given text. Ex: `google.com`, `asdf.org/?page=1`, etc. `false`\n\t *   to prevent these types of matches.\n\t */\n\n\t/**\n\t * @cfg {Boolean} [email=true]\n\t *\n\t * `true` if email addresses should be automatically linked, `false` if they\n\t * should not be.\n\t */\n\n\t/**\n\t * @cfg {Boolean} [phone=true]\n\t *\n\t * `true` if Phone numbers (\"(555)555-5555\") should be automatically linked,\n\t * `false` if they should not be.\n\t */\n\n\t/**\n\t * @cfg {Boolean/String} [hashtag=false]\n\t *\n\t * A string for the service name to have hashtags (ex: \"#myHashtag\")\n\t * auto-linked to. The currently-supported values are:\n\t *\n\t * - 'twitter'\n\t * - 'facebook'\n\t * - 'instagram'\n\t *\n\t * Pass `false` to skip auto-linking of hashtags.\n\t */\n\n\t/**\n\t * @cfg {String/Boolean} [mention=false]\n\t *\n\t * A string for the service name to have mentions (ex: \"@myuser\")\n\t * auto-linked to. The currently supported values are:\n\t *\n\t * - 'twitter'\n\t * - 'instagram'\n\t *\n\t * Defaults to `false` to skip auto-linking of mentions.\n\t */\n\n\t/**\n\t * @cfg {Boolean} [newWindow=true]\n\t *\n\t * `true` if the links should open in a new window, `false` otherwise.\n\t */\n\n\t/**\n\t * @cfg {Boolean/Object} [stripPrefix]\n\t *\n\t * `true` if 'http://' (or 'https://') and/or the 'www.' should be stripped\n\t * from the beginning of URL links' text, `false` otherwise. Defaults to\n\t * `true`.\n\t *\n\t * Examples:\n\t *\n\t *     stripPrefix: true\n\t *\n\t *     // or\n\t *\n\t *     stripPrefix: {\n\t *         scheme : true,\n\t *         www    : true\n\t *     }\n\t *\n\t * As shown above, this option also accepts an Object form with 2 properties\n\t * to allow for more customization of what exactly is prevented from being\n\t * displayed. Both default to `true`:\n\t *\n\t * @cfg {Boolean} [stripPrefix.scheme] `true` to prevent the scheme part of\n\t *   a URL match from being displayed to the user. Example:\n\t *   `'http://google.com'` will be displayed as `'google.com'`. `false` to\n\t *   not strip the scheme. NOTE: Only an `'http://'` or `'https://'` scheme\n\t *   will be removed, so as not to remove a potentially dangerous scheme\n\t *   (such as `'file://'` or `'javascript:'`)\n\t * @cfg {Boolean} [stripPrefix.www] www (Boolean): `true` to prevent the\n\t *   `'www.'` part of a URL match from being displayed to the user. Ex:\n\t *   `'www.google.com'` will be displayed as `'google.com'`. `false` to not\n\t *   strip the `'www'`.\n\t */\n\n\t/**\n\t * @cfg {Boolean} [stripTrailingSlash=true]\n\t *\n\t * `true` to remove the trailing slash from URL matches, `false` to keep\n\t *  the trailing slash.\n\t *\n\t *  Example when `true`: `http://google.com/` will be displayed as\n\t *  `http://google.com`.\n\t */\n\n\t/**\n\t * @cfg {Number/Object} [truncate=0]\n\t *\n\t * ## Number Form\n\t *\n\t * A number for how many characters matched text should be truncated to\n\t * inside the text of a link. If the matched text is over this number of\n\t * characters, it will be truncated to this length by adding a two period\n\t * ellipsis ('..') to the end of the string.\n\t *\n\t * For example: A url like 'http://www.yahoo.com/some/long/path/to/a/file'\n\t * truncated to 25 characters might look something like this:\n\t * 'yahoo.com/some/long/pat..'\n\t *\n\t * Example Usage:\n\t *\n\t *     truncate: 25\n\t *\n\t *\n\t *  Defaults to `0` for \"no truncation.\"\n\t *\n\t *\n\t * ## Object Form\n\t *\n\t * An Object may also be provided with two properties: `length` (Number) and\n\t * `location` (String). `location` may be one of the following: 'end'\n\t * (default), 'middle', or 'smart'.\n\t *\n\t * Example Usage:\n\t *\n\t *     truncate: { length: 25, location: 'middle' }\n\t *\n\t * @cfg {Number} [truncate.length=0] How many characters to allow before\n\t *   truncation will occur. Defaults to `0` for \"no truncation.\"\n\t * @cfg {\"end\"/\"middle\"/\"smart\"} [truncate.location=\"end\"]\n\t *\n\t * - 'end' (default): will truncate up to the number of characters, and then\n\t *   add an ellipsis at the end. Ex: 'yahoo.com/some/long/pat..'\n\t * - 'middle': will truncate and add the ellipsis in the middle. Ex:\n\t *   'yahoo.com/s..th/to/a/file'\n\t * - 'smart': for URLs where the algorithm attempts to strip out unnecessary\n\t *   parts first (such as the 'www.', then URL scheme, hash, etc.),\n\t *   attempting to make the URL human-readable before looking for a good\n\t *   point to insert the ellipsis if it is still too long. Ex:\n\t *   'yahoo.com/some..to/a/file'. For more details, see\n\t *   {@link Autolinker.truncate.TruncateSmart}.\n\t */\n\n\t/**\n\t * @cfg {String} className\n\t *\n\t * A CSS class name to add to the generated links. This class will be added\n\t * to all links, as well as this class plus match suffixes for styling\n\t * url/email/phone/hashtag/mention links differently.\n\t *\n\t * For example, if this config is provided as \"myLink\", then:\n\t *\n\t * - URL links will have the CSS classes: \"myLink myLink-url\"\n\t * - Email links will have the CSS classes: \"myLink myLink-email\", and\n\t * - Phone links will have the CSS classes: \"myLink myLink-phone\"\n\t * - Hashtag links will have the CSS classes: \"myLink myLink-hashtag\"\n\t * - Mention links will have the CSS classes: \"myLink myLink-mention myLink-[type]\"\n\t *   where [type] is either \"instagram\" or \"twitter\"\n\t */\n\n\t/**\n\t * @cfg {Function} replaceFn\n\t *\n\t * A function to individually process each match found in the input string.\n\t *\n\t * See the class's description for usage.\n\t *\n\t * The `replaceFn` can be called with a different context object (`this`\n\t * reference) using the {@link #context} cfg.\n\t *\n\t * This function is called with the following parameter:\n\t *\n\t * @cfg {Autolinker.match.Match} replaceFn.match The Match instance which\n\t *   can be used to retrieve information about the match that the `replaceFn`\n\t *   is currently processing. See {@link Autolinker.match.Match} subclasses\n\t *   for details.\n\t */\n\n\t/**\n\t * @cfg {Object} context\n\t *\n\t * The context object (`this` reference) to call the `replaceFn` with.\n\t *\n\t * Defaults to this Autolinker instance.\n\t */\n\n\n\t/**\n\t * @property {String} version (readonly)\n\t *\n\t * The Autolinker version number in the form major.minor.patch\n\t *\n\t * Ex: 0.25.1\n\t */\n\n\t/**\n\t * @private\n\t * @property {Autolinker.htmlParser.HtmlParser} htmlParser\n\t *\n\t * The HtmlParser instance used to skip over HTML tags, while finding text\n\t * nodes to process. This is lazily instantiated in the {@link #getHtmlParser}\n\t * method.\n\t */\n\n\t/**\n\t * @private\n\t * @property {Autolinker.matcher.Matcher[]} matchers\n\t *\n\t * The {@link Autolinker.matcher.Matcher} instances for this Autolinker\n\t * instance.\n\t *\n\t * This is lazily created in {@link #getMatchers}.\n\t */\n\n\t/**\n\t * @private\n\t * @property {Autolinker.AnchorTagBuilder} tagBuilder\n\t *\n\t * The AnchorTagBuilder instance used to build match replacement anchor tags.\n\t * Note: this is lazily instantiated in the {@link #getTagBuilder} method.\n\t */\n\n\n\t/**\n\t * Normalizes the {@link #urls} config into an Object with 3 properties:\n\t * `schemeMatches`, `wwwMatches`, and `tldMatches`, all Booleans.\n\t *\n\t * See {@link #urls} config for details.\n\t *\n\t * @private\n\t * @param {Boolean/Object} urls\n\t * @return {Object}\n\t */\n\tnormalizeUrlsCfg : function( urls ) {\n\t\tif( urls == null ) urls = true;  // default to `true`\n\n\t\tif( typeof urls === 'boolean' ) {\n\t\t\treturn { schemeMatches: urls, wwwMatches: urls, tldMatches: urls };\n\n\t\t} else {  // object form\n\t\t\treturn {\n\t\t\t\tschemeMatches : typeof urls.schemeMatches === 'boolean' ? urls.schemeMatches : true,\n\t\t\t\twwwMatches    : typeof urls.wwwMatches === 'boolean'    ? urls.wwwMatches    : true,\n\t\t\t\ttldMatches    : typeof urls.tldMatches === 'boolean'    ? urls.tldMatches    : true\n\t\t\t};\n\t\t}\n\t},\n\n\n\t/**\n\t * Normalizes the {@link #stripPrefix} config into an Object with 2\n\t * properties: `scheme`, and `www` - both Booleans.\n\t *\n\t * See {@link #stripPrefix} config for details.\n\t *\n\t * @private\n\t * @param {Boolean/Object} stripPrefix\n\t * @return {Object}\n\t */\n\tnormalizeStripPrefixCfg : function( stripPrefix ) {\n\t\tif( stripPrefix == null ) stripPrefix = true;  // default to `true`\n\n\t\tif( typeof stripPrefix === 'boolean' ) {\n\t\t\treturn { scheme: stripPrefix, www: stripPrefix };\n\n\t\t} else {  // object form\n\t\t\treturn {\n\t\t\t\tscheme : typeof stripPrefix.scheme === 'boolean' ? stripPrefix.scheme : true,\n\t\t\t\twww    : typeof stripPrefix.www === 'boolean'    ? stripPrefix.www    : true\n\t\t\t};\n\t\t}\n\t},\n\n\n\t/**\n\t * Normalizes the {@link #truncate} config into an Object with 2 properties:\n\t * `length` (Number), and `location` (String).\n\t *\n\t * See {@link #truncate} config for details.\n\t *\n\t * @private\n\t * @param {Number/Object} truncate\n\t * @return {Object}\n\t */\n\tnormalizeTruncateCfg : function( truncate ) {\n\t\tif( typeof truncate === 'number' ) {\n\t\t\treturn { length: truncate, location: 'end' };\n\n\t\t} else {  // object, or undefined/null\n\t\t\treturn Autolinker.Util.defaults( truncate || {}, {\n\t\t\t\tlength   : Number.POSITIVE_INFINITY,\n\t\t\t\tlocation : 'end'\n\t\t\t} );\n\t\t}\n\t},\n\n\n\t/**\n\t * Parses the input `textOrHtml` looking for URLs, email addresses, phone\n\t * numbers, username handles, and hashtags (depending on the configuration\n\t * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n\t * objects describing those matches (without making any replacements).\n\t *\n\t * This method is used by the {@link #link} method, but can also be used to\n\t * simply do parsing of the input in order to discover what kinds of links\n\t * there are and how many.\n\t *\n\t * Example usage:\n\t *\n\t *     var autolinker = new Autolinker( {\n\t *         urls: true,\n\t *         email: true\n\t *     } );\n\t *\n\t *     var matches = autolinker.parse( \"Hello google.com, I am asdf@asdf.com\" );\n\t *\n\t *     console.log( matches.length );           // 2\n\t *     console.log( matches[ 0 ].getType() );   // 'url'\n\t *     console.log( matches[ 0 ].getUrl() );    // 'google.com'\n\t *     console.log( matches[ 1 ].getType() );   // 'email'\n\t *     console.log( matches[ 1 ].getEmail() );  // 'asdf@asdf.com'\n\t *\n\t * @param {String} textOrHtml The HTML or text to find matches within\n\t *   (depending on if the {@link #urls}, {@link #email}, {@link #phone},\n\t *   {@link #hashtag}, and {@link #mention} options are enabled).\n\t * @return {Autolinker.match.Match[]} The array of Matches found in the\n\t *   given input `textOrHtml`.\n\t */\n\tparse : function( textOrHtml ) {\n\t\tvar htmlParser = this.getHtmlParser(),\n\t\t    htmlNodes = htmlParser.parse( textOrHtml ),\n\t\t    anchorTagStackCount = 0,  // used to only process text around anchor tags, and any inner text/html they may have;\n\t\t    matches = [];\n\n\t\t// Find all matches within the `textOrHtml` (but not matches that are\n\t\t// already nested within <a> tags)\n\t\tfor( var i = 0, len = htmlNodes.length; i < len; i++ ) {\n\t\t\tvar node = htmlNodes[ i ],\n\t\t\t    nodeType = node.getType();\n\n\t\t\tif( nodeType === 'element' && node.getTagName() === 'a' ) {  // Process HTML anchor element nodes in the input `textOrHtml` to find out when we're within an <a> tag\n\t\t\t\tif( !node.isClosing() ) {  // it's the start <a> tag\n\t\t\t\t\tanchorTagStackCount++;\n\t\t\t\t} else {  // it's the end </a> tag\n\t\t\t\t\tanchorTagStackCount = Math.max( anchorTagStackCount - 1, 0 );  // attempt to handle extraneous </a> tags by making sure the stack count never goes below 0\n\t\t\t\t}\n\n\t\t\t} else if( nodeType === 'text' && anchorTagStackCount === 0 ) {  // Process text nodes that are not within an <a> tag\n\t\t\t\tvar textNodeMatches = this.parseText( node.getText(), node.getOffset() );\n\n\t\t\t\tmatches.push.apply( matches, textNodeMatches );\n\t\t\t}\n\t\t}\n\n\n\t\t// After we have found all matches, remove subsequent matches that\n\t\t// overlap with a previous match. This can happen for instance with URLs,\n\t\t// where the url 'google.com/#link' would match '#link' as a hashtag.\n\t\tmatches = this.compactMatches( matches );\n\n\t\t// And finally, remove matches for match types that have been turned\n\t\t// off. We needed to have all match types turned on initially so that\n\t\t// things like hashtags could be filtered out if they were really just\n\t\t// part of a URL match (for instance, as a named anchor).\n\t\tmatches = this.removeUnwantedMatches( matches );\n\n\t\treturn matches;\n\t},\n\n\n\t/**\n\t * After we have found all matches, we need to remove subsequent matches\n\t * that overlap with a previous match. This can happen for instance with\n\t * URLs, where the url 'google.com/#link' would match '#link' as a hashtag.\n\t *\n\t * @private\n\t * @param {Autolinker.match.Match[]} matches\n\t * @return {Autolinker.match.Match[]}\n\t */\n\tcompactMatches : function( matches ) {\n\t\t// First, the matches need to be sorted in order of offset\n\t\tmatches.sort( function( a, b ) { return a.getOffset() - b.getOffset(); } );\n\n\t\tfor( var i = 0; i < matches.length - 1; i++ ) {\n\t\t\tvar match = matches[ i ],\n\t\t\t    endIdx = match.getOffset() + match.getMatchedText().length;\n\n\t\t\t// Remove subsequent matches that overlap with the current match\n\t\t\twhile( i + 1 < matches.length && matches[ i + 1 ].getOffset() <= endIdx ) {\n\t\t\t\tmatches.splice( i + 1, 1 );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\n\t/**\n\t * Removes matches for matchers that were turned off in the options. For\n\t * example, if {@link #hashtag hashtags} were not to be matched, we'll\n\t * remove them from the `matches` array here.\n\t *\n\t * @private\n\t * @param {Autolinker.match.Match[]} matches The array of matches to remove\n\t *   the unwanted matches from. Note: this array is mutated for the\n\t *   removals.\n\t * @return {Autolinker.match.Match[]} The mutated input `matches` array.\n\t */\n\tremoveUnwantedMatches : function( matches ) {\n\t\tvar remove = Autolinker.Util.remove;\n\n\t\tif( !this.hashtag ) remove( matches, function( match ) { return match.getType() === 'hashtag'; } );\n\t\tif( !this.email )   remove( matches, function( match ) { return match.getType() === 'email'; } );\n\t\tif( !this.phone )   remove( matches, function( match ) { return match.getType() === 'phone'; } );\n\t\tif( !this.mention ) remove( matches, function( match ) { return match.getType() === 'mention'; } );\n\t\tif( !this.urls.schemeMatches ) {\n\t\t\tremove( matches, function( m ) { return m.getType() === 'url' && m.getUrlMatchType() === 'scheme'; } );\n\t\t}\n\t\tif( !this.urls.wwwMatches ) {\n\t\t\tremove( matches, function( m ) { return m.getType() === 'url' && m.getUrlMatchType() === 'www'; } );\n\t\t}\n\t\tif( !this.urls.tldMatches ) {\n\t\t\tremove( matches, function( m ) { return m.getType() === 'url' && m.getUrlMatchType() === 'tld'; } );\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\n\t/**\n\t * Parses the input `text` looking for URLs, email addresses, phone\n\t * numbers, username handles, and hashtags (depending on the configuration\n\t * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n\t * objects describing those matches.\n\t *\n\t * This method processes a **non-HTML string**, and is used to parse and\n\t * match within the text nodes of an HTML string. This method is used\n\t * internally by {@link #parse}.\n\t *\n\t * @private\n\t * @param {String} text The text to find matches within (depending on if the\n\t *   {@link #urls}, {@link #email}, {@link #phone},\n\t *   {@link #hashtag}, and {@link #mention} options are enabled). This must be a non-HTML string.\n\t * @param {Number} [offset=0] The offset of the text node within the\n\t *   original string. This is used when parsing with the {@link #parse}\n\t *   method to generate correct offsets within the {@link Autolinker.match.Match}\n\t *   instances, but may be omitted if calling this method publicly.\n\t * @return {Autolinker.match.Match[]} The array of Matches found in the\n\t *   given input `text`.\n\t */\n\tparseText : function( text, offset ) {\n\t\toffset = offset || 0;\n\t\tvar matchers = this.getMatchers(),\n\t\t    matches = [];\n\n\t\tfor( var i = 0, numMatchers = matchers.length; i < numMatchers; i++ ) {\n\t\t\tvar textMatches = matchers[ i ].parseMatches( text );\n\n\t\t\t// Correct the offset of each of the matches. They are originally\n\t\t\t// the offset of the match within the provided text node, but we\n\t\t\t// need to correct them to be relative to the original HTML input\n\t\t\t// string (i.e. the one provided to #parse).\n\t\t\tfor( var j = 0, numTextMatches = textMatches.length; j < numTextMatches; j++ ) {\n\t\t\t\ttextMatches[ j ].setOffset( offset + textMatches[ j ].getOffset() );\n\t\t\t}\n\n\t\t\tmatches.push.apply( matches, textMatches );\n\t\t}\n\t\treturn matches;\n\t},\n\n\n\t/**\n\t * Automatically links URLs, Email addresses, Phone numbers, Hashtags,\n\t * and Mentions (Twitter, Instagram) found in the given chunk of HTML. Does not link\n\t * URLs found within HTML tags.\n\t *\n\t * For instance, if given the text: `You should go to http://www.yahoo.com`,\n\t * then the result will be `You should go to\n\t * &lt;a href=\"http://www.yahoo.com\"&gt;http://www.yahoo.com&lt;/a&gt;`\n\t *\n\t * This method finds the text around any HTML elements in the input\n\t * `textOrHtml`, which will be the text that is processed. Any original HTML\n\t * elements will be left as-is, as well as the text that is already wrapped\n\t * in anchor (&lt;a&gt;) tags.\n\t *\n\t * @param {String} textOrHtml The HTML or text to autolink matches within\n\t *   (depending on if the {@link #urls}, {@link #email}, {@link #phone}, {@link #hashtag}, and {@link #mention} options are enabled).\n\t * @return {String} The HTML, with matches automatically linked.\n\t */\n\tlink : function( textOrHtml ) {\n\t\tif( !textOrHtml ) { return \"\"; }  // handle `null` and `undefined`\n\n\t\tvar matches = this.parse( textOrHtml ),\n\t\t\tnewHtml = [],\n\t\t\tlastIndex = 0;\n\n\t\tfor( var i = 0, len = matches.length; i < len; i++ ) {\n\t\t\tvar match = matches[ i ];\n\n\t\t\tnewHtml.push( textOrHtml.substring( lastIndex, match.getOffset() ) );\n\t\t\tnewHtml.push( this.createMatchReturnVal( match ) );\n\n\t\t\tlastIndex = match.getOffset() + match.getMatchedText().length;\n\t\t}\n\t\tnewHtml.push( textOrHtml.substring( lastIndex ) );  // handle the text after the last match\n\n\t\treturn newHtml.join( '' );\n\t},\n\n\n\t/**\n\t * Creates the return string value for a given match in the input string.\n\t *\n\t * This method handles the {@link #replaceFn}, if one was provided.\n\t *\n\t * @private\n\t * @param {Autolinker.match.Match} match The Match object that represents\n\t *   the match.\n\t * @return {String} The string that the `match` should be replaced with.\n\t *   This is usually the anchor tag string, but may be the `matchStr` itself\n\t *   if the match is not to be replaced.\n\t */\n\tcreateMatchReturnVal : function( match ) {\n\t\t// Handle a custom `replaceFn` being provided\n\t\tvar replaceFnResult;\n\t\tif( this.replaceFn ) {\n\t\t\treplaceFnResult = this.replaceFn.call( this.context, match );  // Autolinker instance is the context\n\t\t}\n\n\t\tif( typeof replaceFnResult === 'string' ) {\n\t\t\treturn replaceFnResult;  // `replaceFn` returned a string, use that\n\n\t\t} else if( replaceFnResult === false ) {\n\t\t\treturn match.getMatchedText();  // no replacement for the match\n\n\t\t} else if( replaceFnResult instanceof Autolinker.HtmlTag ) {\n\t\t\treturn replaceFnResult.toAnchorString();\n\n\t\t} else {  // replaceFnResult === true, or no/unknown return value from function\n\t\t\t// Perform Autolinker's default anchor tag generation\n\t\t\tvar anchorTag = match.buildTag();  // returns an Autolinker.HtmlTag instance\n\n\t\t\treturn anchorTag.toAnchorString();\n\t\t}\n\t},\n\n\n\t/**\n\t * Lazily instantiates and returns the {@link #htmlParser} instance for this\n\t * Autolinker instance.\n\t *\n\t * @protected\n\t * @return {Autolinker.htmlParser.HtmlParser}\n\t */\n\tgetHtmlParser : function() {\n\t\tvar htmlParser = this.htmlParser;\n\n\t\tif( !htmlParser ) {\n\t\t\thtmlParser = this.htmlParser = new Autolinker.htmlParser.HtmlParser();\n\t\t}\n\n\t\treturn htmlParser;\n\t},\n\n\n\t/**\n\t * Lazily instantiates and returns the {@link Autolinker.matcher.Matcher}\n\t * instances for this Autolinker instance.\n\t *\n\t * @protected\n\t * @return {Autolinker.matcher.Matcher[]}\n\t */\n\tgetMatchers : function() {\n\t\tif( !this.matchers ) {\n\t\t\tvar matchersNs = Autolinker.matcher,\n\t\t\t    tagBuilder = this.getTagBuilder();\n\n\t\t\tvar matchers = [\n\t\t\t\tnew matchersNs.Hashtag( { tagBuilder: tagBuilder, serviceName: this.hashtag } ),\n\t\t\t\tnew matchersNs.Email( { tagBuilder: tagBuilder } ),\n\t\t\t\tnew matchersNs.Phone( { tagBuilder: tagBuilder } ),\n\t\t\t\tnew matchersNs.Mention( { tagBuilder: tagBuilder, serviceName: this.mention } ),\n\t\t\t\tnew matchersNs.Url( { tagBuilder: tagBuilder, stripPrefix: this.stripPrefix, stripTrailingSlash: this.stripTrailingSlash } )\n\t\t\t];\n\n\t\t\treturn ( this.matchers = matchers );\n\n\t\t} else {\n\t\t\treturn this.matchers;\n\t\t}\n\t},\n\n\n\t/**\n\t * Returns the {@link #tagBuilder} instance for this Autolinker instance, lazily instantiating it\n\t * if it does not yet exist.\n\t *\n\t * This method may be used in a {@link #replaceFn} to generate the {@link Autolinker.HtmlTag HtmlTag} instance that\n\t * Autolinker would normally generate, and then allow for modifications before returning it. For example:\n\t *\n\t *     var html = Autolinker.link( \"Test google.com\", {\n\t *         replaceFn : function( match ) {\n\t *             var tag = match.buildTag();  // returns an {@link Autolinker.HtmlTag} instance\n\t *             tag.setAttr( 'rel', 'nofollow' );\n\t *\n\t *             return tag;\n\t *         }\n\t *     } );\n\t *\n\t *     // generated html:\n\t *     //   Test <a href=\"http://google.com\" target=\"_blank\" rel=\"nofollow\">google.com</a>\n\t *\n\t * @return {Autolinker.AnchorTagBuilder}\n\t */\n\tgetTagBuilder : function() {\n\t\tvar tagBuilder = this.tagBuilder;\n\n\t\tif( !tagBuilder ) {\n\t\t\ttagBuilder = this.tagBuilder = new Autolinker.AnchorTagBuilder( {\n\t\t\t\tnewWindow   : this.newWindow,\n\t\t\t\ttruncate    : this.truncate,\n\t\t\t\tclassName   : this.className\n\t\t\t} );\n\t\t}\n\n\t\treturn tagBuilder;\n\t}\n\n};\n\n\n// Autolinker Namespaces\n\nAutolinker.match = {};\nAutolinker.matcher = {};\nAutolinker.htmlParser = {};\nAutolinker.truncate = {};\n\n/*global Autolinker */\n/*jshint eqnull:true, boss:true */\n/**\n * @class Autolinker.Util\n * @singleton\n *\n * A few utility methods for Autolinker.\n */\nAutolinker.Util = {\n\n\t/**\n\t * @property {Function} abstractMethod\n\t *\n\t * A function object which represents an abstract method.\n\t */\n\tabstractMethod : function() { throw \"abstract\"; },\n\n\n\t/**\n\t * @private\n\t * @property {RegExp} trimRegex\n\t *\n\t * The regular expression used to trim the leading and trailing whitespace\n\t * from a string.\n\t */\n\ttrimRegex : /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\n\n\n\t/**\n\t * Assigns (shallow copies) the properties of `src` onto `dest`.\n\t *\n\t * @param {Object} dest The destination object.\n\t * @param {Object} src The source object.\n\t * @return {Object} The destination object (`dest`)\n\t */\n\tassign : function( dest, src ) {\n\t\tfor( var prop in src ) {\n\t\t\tif( src.hasOwnProperty( prop ) ) {\n\t\t\t\tdest[ prop ] = src[ prop ];\n\t\t\t}\n\t\t}\n\n\t\treturn dest;\n\t},\n\n\n\t/**\n\t * Assigns (shallow copies) the properties of `src` onto `dest`, if the\n\t * corresponding property on `dest` === `undefined`.\n\t *\n\t * @param {Object} dest The destination object.\n\t * @param {Object} src The source object.\n\t * @return {Object} The destination object (`dest`)\n\t */\n\tdefaults : function( dest, src ) {\n\t\tfor( var prop in src ) {\n\t\t\tif( src.hasOwnProperty( prop ) && dest[ prop ] === undefined ) {\n\t\t\t\tdest[ prop ] = src[ prop ];\n\t\t\t}\n\t\t}\n\n\t\treturn dest;\n\t},\n\n\n\t/**\n\t * Extends `superclass` to create a new subclass, adding the `protoProps` to the new subclass's prototype.\n\t *\n\t * @param {Function} superclass The constructor function for the superclass.\n\t * @param {Object} protoProps The methods/properties to add to the subclass's prototype. This may contain the\n\t *   special property `constructor`, which will be used as the new subclass's constructor function.\n\t * @return {Function} The new subclass function.\n\t */\n\textend : function( superclass, protoProps ) {\n\t\tvar superclassProto = superclass.prototype;\n\n\t\tvar F = function() {};\n\t\tF.prototype = superclassProto;\n\n\t\tvar subclass;\n\t\tif( protoProps.hasOwnProperty( 'constructor' ) ) {\n\t\t\tsubclass = protoProps.constructor;\n\t\t} else {\n\t\t\tsubclass = function() { superclassProto.constructor.apply( this, arguments ); };\n\t\t}\n\n\t\tvar subclassProto = subclass.prototype = new F();  // set up prototype chain\n\t\tsubclassProto.constructor = subclass;  // fix constructor property\n\t\tsubclassProto.superclass = superclassProto;\n\n\t\tdelete protoProps.constructor;  // don't re-assign constructor property to the prototype, since a new function may have been created (`subclass`), which is now already there\n\t\tAutolinker.Util.assign( subclassProto, protoProps );\n\n\t\treturn subclass;\n\t},\n\n\n\t/**\n\t * Truncates the `str` at `len - ellipsisChars.length`, and adds the `ellipsisChars` to the\n\t * end of the string (by default, two periods: '..'). If the `str` length does not exceed\n\t * `len`, the string will be returned unchanged.\n\t *\n\t * @param {String} str The string to truncate and add an ellipsis to.\n\t * @param {Number} truncateLen The length to truncate the string at.\n\t * @param {String} [ellipsisChars=...] The ellipsis character(s) to add to the end of `str`\n\t *   when truncated. Defaults to '...'\n\t */\n\tellipsis : function( str, truncateLen, ellipsisChars ) {\n\t\tvar ellipsisLength;\n\n\t\tif( str.length > truncateLen ) {\n\t\t\tif(ellipsisChars == null) {\n\t\t\t  ellipsisChars = '&hellip;';\n\t\t\t  ellipsisLength = 3;\n\t\t\t} else {\n\t\t\t  ellipsisLength = ellipsisChars.length;\n\t\t\t}\n\n\t\t\tstr = str.substring( 0, truncateLen - ellipsisLength ) + ellipsisChars;\n\t\t}\n\t\treturn str;\n\t},\n\n\n\t/**\n\t * Supports `Array.prototype.indexOf()` functionality for old IE (IE8 and below).\n\t *\n\t * @param {Array} arr The array to find an element of.\n\t * @param {*} element The element to find in the array, and return the index of.\n\t * @return {Number} The index of the `element`, or -1 if it was not found.\n\t */\n\tindexOf : function( arr, element ) {\n\t\tif( Array.prototype.indexOf ) {\n\t\t\treturn arr.indexOf( element );\n\n\t\t} else {\n\t\t\tfor( var i = 0, len = arr.length; i < len; i++ ) {\n\t\t\t\tif( arr[ i ] === element ) return i;\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\t},\n\n\n\t/**\n\t * Removes array elements based on a filtering function. Mutates the input\n\t * array.\n\t *\n\t * Using this instead of the ES5 Array.prototype.filter() function, to allow\n\t * Autolinker compatibility with IE8, and also to prevent creating many new\n\t * arrays in memory for filtering.\n\t *\n\t * @param {Array} arr The array to remove elements from. This array is\n\t *   mutated.\n\t * @param {Function} fn A function which should return `true` to\n\t *   remove an element.\n\t * @return {Array} The mutated input `arr`.\n\t */\n\tremove : function( arr, fn ) {\n\t\tfor( var i = arr.length - 1; i >= 0; i-- ) {\n\t\t\tif( fn( arr[ i ] ) === true ) {\n\t\t\t\tarr.splice( i, 1 );\n\t\t\t}\n\t\t}\n\t},\n\n\n\t/**\n\t * Performs the functionality of what modern browsers do when `String.prototype.split()` is called\n\t * with a regular expression that contains capturing parenthesis.\n\t *\n\t * For example:\n\t *\n\t *     // Modern browsers:\n\t *     \"a,b,c\".split( /(,)/ );  // --> [ 'a', ',', 'b', ',', 'c' ]\n\t *\n\t *     // Old IE (including IE8):\n\t *     \"a,b,c\".split( /(,)/ );  // --> [ 'a', 'b', 'c' ]\n\t *\n\t * This method emulates the functionality of modern browsers for the old IE case.\n\t *\n\t * @param {String} str The string to split.\n\t * @param {RegExp} splitRegex The regular expression to split the input `str` on. The splitting\n\t *   character(s) will be spliced into the array, as in the \"modern browsers\" example in the\n\t *   description of this method.\n\t *   Note #1: the supplied regular expression **must** have the 'g' flag specified.\n\t *   Note #2: for simplicity's sake, the regular expression does not need\n\t *   to contain capturing parenthesis - it will be assumed that any match has them.\n\t * @return {String[]} The split array of strings, with the splitting character(s) included.\n\t */\n\tsplitAndCapture : function( str, splitRegex ) {\n\t\tif( !splitRegex.global ) throw new Error( \"`splitRegex` must have the 'g' flag set\" );\n\n\t\tvar result = [],\n\t\t    lastIdx = 0,\n\t\t    match;\n\n\t\twhile( match = splitRegex.exec( str ) ) {\n\t\t\tresult.push( str.substring( lastIdx, match.index ) );\n\t\t\tresult.push( match[ 0 ] );  // push the splitting char(s)\n\n\t\t\tlastIdx = match.index + match[ 0 ].length;\n\t\t}\n\t\tresult.push( str.substring( lastIdx ) );\n\n\t\treturn result;\n\t},\n\n\n\t/**\n\t * Trims the leading and trailing whitespace from a string.\n\t *\n\t * @param {String} str The string to trim.\n\t * @return {String}\n\t */\n\ttrim : function( str ) {\n\t\treturn str.replace( this.trimRegex, '' );\n\t}\n\n};\n\n/*global Autolinker */\n/*jshint boss:true */\n/**\n * @class Autolinker.HtmlTag\n * @extends Object\n *\n * Represents an HTML tag, which can be used to easily build/modify HTML tags programmatically.\n *\n * Autolinker uses this abstraction to create HTML tags, and then write them out as strings. You may also use\n * this class in your code, especially within a {@link Autolinker#replaceFn replaceFn}.\n *\n * ## Examples\n *\n * Example instantiation:\n *\n *     var tag = new Autolinker.HtmlTag( {\n *         tagName : 'a',\n *         attrs   : { 'href': 'http://google.com', 'class': 'external-link' },\n *         innerHtml : 'Google'\n *     } );\n *\n *     tag.toAnchorString();  // <a href=\"http://google.com\" class=\"external-link\">Google</a>\n *\n *     // Individual accessor methods\n *     tag.getTagName();                 // 'a'\n *     tag.getAttr( 'href' );            // 'http://google.com'\n *     tag.hasClass( 'external-link' );  // true\n *\n *\n * Using mutator methods (which may be used in combination with instantiation config properties):\n *\n *     var tag = new Autolinker.HtmlTag();\n *     tag.setTagName( 'a' );\n *     tag.setAttr( 'href', 'http://google.com' );\n *     tag.addClass( 'external-link' );\n *     tag.setInnerHtml( 'Google' );\n *\n *     tag.getTagName();                 // 'a'\n *     tag.getAttr( 'href' );            // 'http://google.com'\n *     tag.hasClass( 'external-link' );  // true\n *\n *     tag.toAnchorString();  // <a href=\"http://google.com\" class=\"external-link\">Google</a>\n *\n *\n * ## Example use within a {@link Autolinker#replaceFn replaceFn}\n *\n *     var html = Autolinker.link( \"Test google.com\", {\n *         replaceFn : function( match ) {\n *             var tag = match.buildTag();  // returns an {@link Autolinker.HtmlTag} instance, configured with the Match's href and anchor text\n *             tag.setAttr( 'rel', 'nofollow' );\n *\n *             return tag;\n *         }\n *     } );\n *\n *     // generated html:\n *     //   Test <a href=\"http://google.com\" target=\"_blank\" rel=\"nofollow\">google.com</a>\n *\n *\n * ## Example use with a new tag for the replacement\n *\n *     var html = Autolinker.link( \"Test google.com\", {\n *         replaceFn : function( match ) {\n *             var tag = new Autolinker.HtmlTag( {\n *                 tagName : 'button',\n *                 attrs   : { 'title': 'Load URL: ' + match.getAnchorHref() },\n *                 innerHtml : 'Load URL: ' + match.getAnchorText()\n *             } );\n *\n *             return tag;\n *         }\n *     } );\n *\n *     // generated html:\n *     //   Test <button title=\"Load URL: http://google.com\">Load URL: google.com</button>\n */\nAutolinker.HtmlTag = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @cfg {String} tagName\n\t *\n\t * The tag name. Ex: 'a', 'button', etc.\n\t *\n\t * Not required at instantiation time, but should be set using {@link #setTagName} before {@link #toAnchorString}\n\t * is executed.\n\t */\n\n\t/**\n\t * @cfg {Object.<String, String>} attrs\n\t *\n\t * An key/value Object (map) of attributes to create the tag with. The keys are the attribute names, and the\n\t * values are the attribute values.\n\t */\n\n\t/**\n\t * @cfg {String} innerHtml\n\t *\n\t * The inner HTML for the tag.\n\t *\n\t * Note the camel case name on `innerHtml`. Acronyms are camelCased in this utility (such as not to run into the acronym\n\t * naming inconsistency that the DOM developers created with `XMLHttpRequest`). You may alternatively use {@link #innerHTML}\n\t * if you prefer, but this one is recommended.\n\t */\n\n\t/**\n\t * @cfg {String} innerHTML\n\t *\n\t * Alias of {@link #innerHtml}, accepted for consistency with the browser DOM api, but prefer the camelCased version\n\t * for acronym names.\n\t */\n\n\n\t/**\n\t * @protected\n\t * @property {RegExp} whitespaceRegex\n\t *\n\t * Regular expression used to match whitespace in a string of CSS classes.\n\t */\n\twhitespaceRegex : /\\s+/,\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} [cfg] The configuration properties for this class, in an Object (map)\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.Util.assign( this, cfg );\n\n\t\tthis.innerHtml = this.innerHtml || this.innerHTML;  // accept either the camelCased form or the fully capitalized acronym\n\t},\n\n\n\t/**\n\t * Sets the tag name that will be used to generate the tag with.\n\t *\n\t * @param {String} tagName\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tsetTagName : function( tagName ) {\n\t\tthis.tagName = tagName;\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Retrieves the tag name.\n\t *\n\t * @return {String}\n\t */\n\tgetTagName : function() {\n\t\treturn this.tagName || \"\";\n\t},\n\n\n\t/**\n\t * Sets an attribute on the HtmlTag.\n\t *\n\t * @param {String} attrName The attribute name to set.\n\t * @param {String} attrValue The attribute value to set.\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tsetAttr : function( attrName, attrValue ) {\n\t\tvar tagAttrs = this.getAttrs();\n\t\ttagAttrs[ attrName ] = attrValue;\n\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Retrieves an attribute from the HtmlTag. If the attribute does not exist, returns `undefined`.\n\t *\n\t * @param {String} attrName The attribute name to retrieve.\n\t * @return {String} The attribute's value, or `undefined` if it does not exist on the HtmlTag.\n\t */\n\tgetAttr : function( attrName ) {\n\t\treturn this.getAttrs()[ attrName ];\n\t},\n\n\n\t/**\n\t * Sets one or more attributes on the HtmlTag.\n\t *\n\t * @param {Object.<String, String>} attrs A key/value Object (map) of the attributes to set.\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tsetAttrs : function( attrs ) {\n\t\tvar tagAttrs = this.getAttrs();\n\t\tAutolinker.Util.assign( tagAttrs, attrs );\n\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Retrieves the attributes Object (map) for the HtmlTag.\n\t *\n\t * @return {Object.<String, String>} A key/value object of the attributes for the HtmlTag.\n\t */\n\tgetAttrs : function() {\n\t\treturn this.attrs || ( this.attrs = {} );\n\t},\n\n\n\t/**\n\t * Sets the provided `cssClass`, overwriting any current CSS classes on the HtmlTag.\n\t *\n\t * @param {String} cssClass One or more space-separated CSS classes to set (overwrite).\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tsetClass : function( cssClass ) {\n\t\treturn this.setAttr( 'class', cssClass );\n\t},\n\n\n\t/**\n\t * Convenience method to add one or more CSS classes to the HtmlTag. Will not add duplicate CSS classes.\n\t *\n\t * @param {String} cssClass One or more space-separated CSS classes to add.\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\taddClass : function( cssClass ) {\n\t\tvar classAttr = this.getClass(),\n\t\t    whitespaceRegex = this.whitespaceRegex,\n\t\t    indexOf = Autolinker.Util.indexOf,  // to support IE8 and below\n\t\t    classes = ( !classAttr ) ? [] : classAttr.split( whitespaceRegex ),\n\t\t    newClasses = cssClass.split( whitespaceRegex ),\n\t\t    newClass;\n\n\t\twhile( newClass = newClasses.shift() ) {\n\t\t\tif( indexOf( classes, newClass ) === -1 ) {\n\t\t\t\tclasses.push( newClass );\n\t\t\t}\n\t\t}\n\n\t\tthis.getAttrs()[ 'class' ] = classes.join( \" \" );\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Convenience method to remove one or more CSS classes from the HtmlTag.\n\t *\n\t * @param {String} cssClass One or more space-separated CSS classes to remove.\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tremoveClass : function( cssClass ) {\n\t\tvar classAttr = this.getClass(),\n\t\t    whitespaceRegex = this.whitespaceRegex,\n\t\t    indexOf = Autolinker.Util.indexOf,  // to support IE8 and below\n\t\t    classes = ( !classAttr ) ? [] : classAttr.split( whitespaceRegex ),\n\t\t    removeClasses = cssClass.split( whitespaceRegex ),\n\t\t    removeClass;\n\n\t\twhile( classes.length && ( removeClass = removeClasses.shift() ) ) {\n\t\t\tvar idx = indexOf( classes, removeClass );\n\t\t\tif( idx !== -1 ) {\n\t\t\t\tclasses.splice( idx, 1 );\n\t\t\t}\n\t\t}\n\n\t\tthis.getAttrs()[ 'class' ] = classes.join( \" \" );\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Convenience method to retrieve the CSS class(es) for the HtmlTag, which will each be separated by spaces when\n\t * there are multiple.\n\t *\n\t * @return {String}\n\t */\n\tgetClass : function() {\n\t\treturn this.getAttrs()[ 'class' ] || \"\";\n\t},\n\n\n\t/**\n\t * Convenience method to check if the tag has a CSS class or not.\n\t *\n\t * @param {String} cssClass The CSS class to check for.\n\t * @return {Boolean} `true` if the HtmlTag has the CSS class, `false` otherwise.\n\t */\n\thasClass : function( cssClass ) {\n\t\treturn ( ' ' + this.getClass() + ' ' ).indexOf( ' ' + cssClass + ' ' ) !== -1;\n\t},\n\n\n\t/**\n\t * Sets the inner HTML for the tag.\n\t *\n\t * @param {String} html The inner HTML to set.\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tsetInnerHtml : function( html ) {\n\t\tthis.innerHtml = html;\n\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Retrieves the inner HTML for the tag.\n\t *\n\t * @return {String}\n\t */\n\tgetInnerHtml : function() {\n\t\treturn this.innerHtml || \"\";\n\t},\n\n\n\t/**\n\t * Override of superclass method used to generate the HTML string for the tag.\n\t *\n\t * @return {String}\n\t */\n\ttoAnchorString : function() {\n\t\tvar tagName = this.getTagName(),\n\t\t    attrsStr = this.buildAttrsStr();\n\n\t\tattrsStr = ( attrsStr ) ? ' ' + attrsStr : '';  // prepend a space if there are actually attributes\n\n\t\treturn [ '<', tagName, attrsStr, '>', this.getInnerHtml(), '</', tagName, '>' ].join( \"\" );\n\t},\n\n\n\t/**\n\t * Support method for {@link #toAnchorString}, returns the string space-separated key=\"value\" pairs, used to populate\n\t * the stringified HtmlTag.\n\t *\n\t * @protected\n\t * @return {String} Example return: `attr1=\"value1\" attr2=\"value2\"`\n\t */\n\tbuildAttrsStr : function() {\n\t\tif( !this.attrs ) return \"\";  // no `attrs` Object (map) has been set, return empty string\n\n\t\tvar attrs = this.getAttrs(),\n\t\t    attrsArr = [];\n\n\t\tfor( var prop in attrs ) {\n\t\t\tif( attrs.hasOwnProperty( prop ) ) {\n\t\t\t\tattrsArr.push( prop + '=\"' + attrs[ prop ] + '\"' );\n\t\t\t}\n\t\t}\n\t\treturn attrsArr.join( \" \" );\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.RegexLib\n * @singleton\n *\n * Builds and stores a library of the common regular expressions used by the\n * Autolinker utility.\n *\n * Other regular expressions may exist ad-hoc, but these are generally the\n * regular expressions that are shared between source files.\n */\nAutolinker.RegexLib = (function() {\n\n\t/**\n\t * The string form of a regular expression that would match all of the\n\t * alphabetic (\"letter\") chars in the unicode character set when placed in a\n\t * RegExp character class (`[]`). This includes all international alphabetic\n\t * characters.\n\t *\n\t * These would be the characters matched by unicode regex engines `\\p{L}`\n\t * escape (\"all letters\").\n\t *\n\t * Taken from the XRegExp library: http://xregexp.com/\n\t * Specifically: http://xregexp.com/v/3.0.0/unicode-categories.js\n\t *\n\t * @private\n\t * @type {String}\n\t */\n\tvar alphaCharsStr = 'A-Za-z\\\\xAA\\\\xB5\\\\xBA\\\\xC0-\\\\xD6\\\\xD8-\\\\xF6\\\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC';\n\n\t/**\n\t * The string form of a regular expression that would match all of the\n\t * decimal number chars in the unicode character set when placed in a RegExp\n\t * character class (`[]`).\n\t *\n\t * These would be the characters matched by unicode regex engines `\\p{Nd}`\n\t * escape (\"all decimal numbers\")\n\t *\n\t * Taken from the XRegExp library: http://xregexp.com/\n\t * Specifically: http://xregexp.com/v/3.0.0/unicode-categories.js\n\t *\n\t * @private\n\t * @type {String}\n\t */\n\tvar decimalNumbersStr = '0-9\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19';\n\n\n\t// See documentation below\n\tvar alphaNumericCharsStr = alphaCharsStr + decimalNumbersStr;\n\n\n\t// See documentation below\n\tvar domainNameRegex = new RegExp( '[' + alphaNumericCharsStr + '.\\\\-]*[' + alphaNumericCharsStr + '\\\\-]' );\n\n\treturn {\n\n\t\t/**\n\t\t * The string form of a regular expression that would match all of the\n\t\t * letters and decimal number chars in the unicode character set when placed\n\t\t * in a RegExp character class (`[]`).\n\t\t *\n\t\t * These would be the characters matched by unicode regex engines `[\\p{L}\\p{Nd}]`\n\t\t * escape (\"all letters and decimal numbers\")\n\t\t *\n\t\t * @property {String} alphaNumericCharsStr\n\t\t */\n\t\talphaNumericCharsStr : alphaNumericCharsStr,\n\n\t\t/**\n\t\t * The string form of a regular expression that would match all of the\n\t\t * letters and in the unicode character set when placed\n\t\t * in a RegExp character class (`[]`).\n\t\t *\n\t\t * These would be the characters matched by unicode regex engines `[\\p{L}]`\n\t\t * escape (\"all letters\")\n\t\t *\n\t\t * @property {String} alphaCharsStr\n\t\t */\n\t\talphaCharsStr : alphaCharsStr,\n\n\t\t/**\n\t\t * A regular expression to match domain names of a URL or email address.\n\t\t * Ex: 'google', 'yahoo', 'some-other-company', etc.\n\t\t *\n\t\t * @property {RegExp} domainNameRegex\n\t\t */\n\t\tdomainNameRegex : domainNameRegex,\n\n\t};\n\n\n}() );\n\n/*global Autolinker */\n/*jshint sub:true */\n/**\n * @protected\n * @class Autolinker.AnchorTagBuilder\n * @extends Object\n *\n * Builds anchor (&lt;a&gt;) tags for the Autolinker utility when a match is\n * found.\n *\n * Normally this class is instantiated, configured, and used internally by an\n * {@link Autolinker} instance, but may actually be used indirectly in a\n * {@link Autolinker#replaceFn replaceFn} to create {@link Autolinker.HtmlTag HtmlTag}\n * instances which may be modified before returning from the\n * {@link Autolinker#replaceFn replaceFn}. For example:\n *\n *     var html = Autolinker.link( \"Test google.com\", {\n *         replaceFn : function( match ) {\n *             var tag = match.buildTag();  // returns an {@link Autolinker.HtmlTag} instance\n *             tag.setAttr( 'rel', 'nofollow' );\n *\n *             return tag;\n *         }\n *     } );\n *\n *     // generated html:\n *     //   Test <a href=\"http://google.com\" target=\"_blank\" rel=\"nofollow\">google.com</a>\n */\nAutolinker.AnchorTagBuilder = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @cfg {Boolean} newWindow\n\t * @inheritdoc Autolinker#newWindow\n\t */\n\n\t/**\n\t * @cfg {Object} truncate\n\t * @inheritdoc Autolinker#truncate\n\t */\n\n\t/**\n\t * @cfg {String} className\n\t * @inheritdoc Autolinker#className\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} [cfg] The configuration options for the AnchorTagBuilder instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tcfg = cfg || {};\n\n\t\tthis.newWindow = cfg.newWindow;\n\t\tthis.truncate = cfg.truncate;\n\t\tthis.className = cfg.className;\n\t},\n\n\n\t/**\n\t * Generates the actual anchor (&lt;a&gt;) tag to use in place of the\n\t * matched text, via its `match` object.\n\t *\n\t * @param {Autolinker.match.Match} match The Match instance to generate an\n\t *   anchor tag from.\n\t * @return {Autolinker.HtmlTag} The HtmlTag instance for the anchor tag.\n\t */\n\tbuild : function( match ) {\n\t\treturn new Autolinker.HtmlTag( {\n\t\t\ttagName   : 'a',\n\t\t\tattrs     : this.createAttrs( match ),\n\t\t\tinnerHtml : this.processAnchorText( match.getAnchorText() )\n\t\t} );\n\t},\n\n\n\t/**\n\t * Creates the Object (map) of the HTML attributes for the anchor (&lt;a&gt;)\n\t *   tag being generated.\n\t *\n\t * @protected\n\t * @param {Autolinker.match.Match} match The Match instance to generate an\n\t *   anchor tag from.\n\t * @return {Object} A key/value Object (map) of the anchor tag's attributes.\n\t */\n\tcreateAttrs : function( match ) {\n\t\tvar attrs = {\n\t\t\t'href' : match.getAnchorHref()  // we'll always have the `href` attribute\n\t\t};\n\n\t\tvar cssClass = this.createCssClass( match );\n\t\tif( cssClass ) {\n\t\t\tattrs[ 'class' ] = cssClass;\n\t\t}\n\t\tif( this.newWindow ) {\n\t\t\tattrs[ 'target' ] = \"_blank\";\n\t\t\tattrs[ 'rel' ] = \"noopener noreferrer\";\n\t\t}\n\n\t\tif( this.truncate ) {\n\t\t\tif( this.truncate.length && this.truncate.length < match.getAnchorText().length ) {\n\t\t\t\tattrs[ 'title' ] = match.getAnchorHref();\n\t\t\t}\n\t\t}\n\n\t\treturn attrs;\n\t},\n\n\n\t/**\n\t * Creates the CSS class that will be used for a given anchor tag, based on\n\t * the `matchType` and the {@link #className} config.\n\t *\n\t * Example returns:\n\t *\n\t * - \"\"                                      // no {@link #className}\n\t * - \"myLink myLink-url\"                     // url match\n\t * - \"myLink myLink-email\"                   // email match\n\t * - \"myLink myLink-phone\"                   // phone match\n\t * - \"myLink myLink-hashtag\"                 // hashtag match\n\t * - \"myLink myLink-mention myLink-twitter\"  // mention match with Twitter service\n\t *\n\t * @private\n\t * @param {Autolinker.match.Match} match The Match instance to generate an\n\t *   anchor tag from.\n\t * @return {String} The CSS class string for the link. Example return:\n\t *   \"myLink myLink-url\". If no {@link #className} was configured, returns\n\t *   an empty string.\n\t */\n\tcreateCssClass : function( match ) {\n\t\tvar className = this.className;\n\n\t\tif( !className ) {\n\t\t\treturn \"\";\n\n\t\t} else {\n\t\t\tvar returnClasses = [ className ],\n\t\t\t\tcssClassSuffixes = match.getCssClassSuffixes();\n\n\t\t\tfor( var i = 0, len = cssClassSuffixes.length; i < len; i++ ) {\n\t\t\t\treturnClasses.push( className + '-' + cssClassSuffixes[ i ] );\n\t\t\t}\n\t\t\treturn returnClasses.join( ' ' );\n\t\t}\n\t},\n\n\n\t/**\n\t * Processes the `anchorText` by truncating the text according to the\n\t * {@link #truncate} config.\n\t *\n\t * @private\n\t * @param {String} anchorText The anchor tag's text (i.e. what will be\n\t *   displayed).\n\t * @return {String} The processed `anchorText`.\n\t */\n\tprocessAnchorText : function( anchorText ) {\n\t\tanchorText = this.doTruncate( anchorText );\n\n\t\treturn anchorText;\n\t},\n\n\n\t/**\n\t * Performs the truncation of the `anchorText` based on the {@link #truncate}\n\t * option. If the `anchorText` is longer than the length specified by the\n\t * {@link #truncate} option, the truncation is performed based on the\n\t * `location` property. See {@link #truncate} for details.\n\t *\n\t * @private\n\t * @param {String} anchorText The anchor tag's text (i.e. what will be\n\t *   displayed).\n\t * @return {String} The truncated anchor text.\n\t */\n\tdoTruncate : function( anchorText ) {\n\t\tvar truncate = this.truncate;\n\t\tif( !truncate || !truncate.length ) return anchorText;\n\n\t\tvar truncateLength = truncate.length,\n\t\t\ttruncateLocation = truncate.location;\n\n\t\tif( truncateLocation === 'smart' ) {\n\t\t\treturn Autolinker.truncate.TruncateSmart( anchorText, truncateLength );\n\n\t\t} else if( truncateLocation === 'middle' ) {\n\t\t\treturn Autolinker.truncate.TruncateMiddle( anchorText, truncateLength );\n\n\t\t} else {\n\t\t\treturn Autolinker.truncate.TruncateEnd( anchorText, truncateLength );\n\t\t}\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.htmlParser.HtmlParser\n * @extends Object\n *\n * An HTML parser implementation which simply walks an HTML string and returns an array of\n * {@link Autolinker.htmlParser.HtmlNode HtmlNodes} that represent the basic HTML structure of the input string.\n *\n * Autolinker uses this to only link URLs/emails/mentions within text nodes, effectively ignoring / \"walking\n * around\" HTML tags.\n */\nAutolinker.htmlParser.HtmlParser = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @private\n\t * @property {RegExp} htmlRegex\n\t *\n\t * The regular expression used to pull out HTML tags from a string. Handles namespaced HTML tags and\n\t * attribute names, as specified by http://www.w3.org/TR/html-markup/syntax.html.\n\t *\n\t * Capturing groups:\n\t *\n\t * 1. The \"!DOCTYPE\" tag name, if a tag is a &lt;!DOCTYPE&gt; tag.\n\t * 2. If it is an end tag, this group will have the '/'.\n\t * 3. If it is a comment tag, this group will hold the comment text (i.e.\n\t *    the text inside the `&lt;!--` and `--&gt;`.\n\t * 4. The tag name for a tag without attributes (other than the &lt;!DOCTYPE&gt; tag)\n\t * 5. The tag name for a tag with attributes (other than the &lt;!DOCTYPE&gt; tag)\n\t */\n\thtmlRegex : (function() {\n\t\tvar commentTagRegex = /!--([\\s\\S]+?)--/,\n\t\t    tagNameRegex = /[0-9a-zA-Z][0-9a-zA-Z:]*/,\n\t\t    attrNameRegex = /[^\\s\"'>\\/=\\x00-\\x1F\\x7F]+/,   // the unicode range accounts for excluding control chars, and the delete char\n\t\t    attrValueRegex = /(?:\"[^\"]*?\"|'[^']*?'|[^'\"=<>`\\s]+)/, // double quoted, single quoted, or unquoted attribute values\n\t\t    nameEqualsValueRegex = attrNameRegex.source + '(?:\\\\s*=\\\\s*' + attrValueRegex.source + ')?';  // optional '=[value]'\n\n\t\treturn new RegExp( [\n\t\t\t// for <!DOCTYPE> tag. Ex: <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">)\n\t\t\t'(?:',\n\t\t\t\t'<(!DOCTYPE)',  // *** Capturing Group 1 - If it's a doctype tag\n\n\t\t\t\t\t// Zero or more attributes following the tag name\n\t\t\t\t\t'(?:',\n\t\t\t\t\t\t'\\\\s+',  // one or more whitespace chars before an attribute\n\n\t\t\t\t\t\t// Either:\n\t\t\t\t\t\t// A. attr=\"value\", or\n\t\t\t\t\t\t// B. \"value\" alone (To cover example doctype tag: <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">)\n\t\t\t\t\t\t'(?:', nameEqualsValueRegex, '|', attrValueRegex.source + ')',\n\t\t\t\t\t')*',\n\t\t\t\t'>',\n\t\t\t')',\n\n\t\t\t'|',\n\n\t\t\t// All other HTML tags (i.e. tags that are not <!DOCTYPE>)\n\t\t\t'(?:',\n\t\t\t\t'<(/)?',  // Beginning of a tag or comment. Either '<' for a start tag, or '</' for an end tag.\n\t\t\t\t          // *** Capturing Group 2: The slash or an empty string. Slash ('/') for end tag, empty string for start or self-closing tag.\n\n\t\t\t\t\t'(?:',\n\t\t\t\t\t\tcommentTagRegex.source,  // *** Capturing Group 3 - A Comment Tag's Text\n\n\t\t\t\t\t\t'|',\n\n\t\t\t\t\t\t// Handle tag without attributes.\n\t\t\t\t\t\t// Doing this separately from a tag that has attributes\n\t\t\t\t\t\t// to fix a regex time complexity issue seen with the\n\t\t\t\t\t\t// example in https://github.com/gregjacobs/Autolinker.js/issues/172\n\t\t\t\t\t\t'(?:',\n\t\t\t\t\t\t\t// *** Capturing Group 4 - The tag name for a tag without attributes\n\t\t\t\t\t\t\t'(' + tagNameRegex.source + ')',\n\n\t\t\t\t\t\t\t'\\\\s*/?',  // any trailing spaces and optional '/' before the closing '>'\n\t\t\t\t\t\t')',\n\n\t\t\t\t\t\t'|',\n\n\t\t\t\t\t\t// Handle tag with attributes\n\t\t\t\t\t\t// Doing this separately from a tag with no attributes\n\t\t\t\t\t\t// to fix a regex time complexity issue seen with the\n\t\t\t\t\t\t// example in https://github.com/gregjacobs/Autolinker.js/issues/172\n\t\t\t\t\t\t'(?:',\n\t\t\t\t\t\t\t// *** Capturing Group 5 - The tag name for a tag with attributes\n\t\t\t\t\t\t\t'(' + tagNameRegex.source + ')',\n\n\t\t\t\t\t\t\t'\\\\s+',  // must have at least one space after the tag name to prevent ReDoS issue (issue #172)\n\n\t\t\t\t\t\t\t// Zero or more attributes following the tag name\n\t\t\t\t\t\t\t'(?:',\n\t\t\t\t\t\t\t\t'(?:\\\\s+|\\\\b)',        // any number of whitespace chars before an attribute. NOTE: Using \\s* here throws Chrome into an infinite loop for some reason, so using \\s+|\\b instead\n\t\t\t\t\t\t\t\tnameEqualsValueRegex,  // attr=\"value\" (with optional =\"value\" part)\n\t\t\t\t\t\t\t')*',\n\n\t\t\t\t\t\t\t'\\\\s*/?',  // any trailing spaces and optional '/' before the closing '>'\n\t\t\t\t\t\t')',\n\t\t\t\t\t')',\n\t\t\t\t'>',\n\t\t\t')'\n\t\t].join( \"\" ), 'gi' );\n\t} )(),\n\n\t/**\n\t * @private\n\t * @property {RegExp} htmlCharacterEntitiesRegex\n\t *\n\t * The regular expression that matches common HTML character entities.\n\t *\n\t * Ignoring &amp; as it could be part of a query string -- handling it separately.\n\t */\n\thtmlCharacterEntitiesRegex: /(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,\n\n\n\t/**\n\t * Parses an HTML string and returns a simple array of {@link Autolinker.htmlParser.HtmlNode HtmlNodes}\n\t * to represent the HTML structure of the input string.\n\t *\n\t * @param {String} html The HTML to parse.\n\t * @return {Autolinker.htmlParser.HtmlNode[]}\n\t */\n\tparse : function( html ) {\n\t\tvar htmlRegex = this.htmlRegex,\n\t\t    currentResult,\n\t\t    lastIndex = 0,\n\t\t    textAndEntityNodes,\n\t\t    nodes = [];  // will be the result of the method\n\n\t\twhile( ( currentResult = htmlRegex.exec( html ) ) !== null ) {\n\t\t\tvar tagText = currentResult[ 0 ],\n\t\t\t    commentText = currentResult[ 3 ], // if we've matched a comment\n\t\t\t    tagName = currentResult[ 1 ] || currentResult[ 4 ] || currentResult[ 5 ],  // The <!DOCTYPE> tag (ex: \"!DOCTYPE\"), or another tag (ex: \"a\" or \"img\")\n\t\t\t    isClosingTag = !!currentResult[ 2 ],\n\t\t\t    offset = currentResult.index,\n\t\t\t    inBetweenTagsText = html.substring( lastIndex, offset );\n\n\t\t\t// Push TextNodes and EntityNodes for any text found between tags\n\t\t\tif( inBetweenTagsText ) {\n\t\t\t\ttextAndEntityNodes = this.parseTextAndEntityNodes( lastIndex, inBetweenTagsText );\n\t\t\t\tnodes.push.apply( nodes, textAndEntityNodes );\n\t\t\t}\n\n\t\t\t// Push the CommentNode or ElementNode\n\t\t\tif( commentText ) {\n\t\t\t\tnodes.push( this.createCommentNode( offset, tagText, commentText ) );\n\t\t\t} else {\n\t\t\t\tnodes.push( this.createElementNode( offset, tagText, tagName, isClosingTag ) );\n\t\t\t}\n\n\t\t\tlastIndex = offset + tagText.length;\n\t\t}\n\n\t\t// Process any remaining text after the last HTML element. Will process all of the text if there were no HTML elements.\n\t\tif( lastIndex < html.length ) {\n\t\t\tvar text = html.substring( lastIndex );\n\n\t\t\t// Push TextNodes and EntityNodes for any text found between tags\n\t\t\tif( text ) {\n\t\t\t\ttextAndEntityNodes = this.parseTextAndEntityNodes( lastIndex, text );\n\n\t\t\t\t// Note: the following 3 lines were previously:\n\t\t\t\t//   nodes.push.apply( nodes, textAndEntityNodes );\n\t\t\t\t// but this was causing a \"Maximum Call Stack Size Exceeded\"\n\t\t\t\t// error on inputs with a large number of html entities.\n\t\t\t\ttextAndEntityNodes.forEach( function( node ) {\n\t\t\t\t\tnodes.push( node );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\treturn nodes;\n\t},\n\n\n\t/**\n\t * Parses text and HTML entity nodes from a given string. The input string\n\t * should not have any HTML tags (elements) within it.\n\t *\n\t * @private\n\t * @param {Number} offset The offset of the text node match within the\n\t *   original HTML string.\n\t * @param {String} text The string of text to parse. This is from an HTML\n\t *   text node.\n\t * @return {Autolinker.htmlParser.HtmlNode[]} An array of HtmlNodes to\n\t *   represent the {@link Autolinker.htmlParser.TextNode TextNodes} and\n\t *   {@link Autolinker.htmlParser.EntityNode EntityNodes} found.\n\t */\n\tparseTextAndEntityNodes : function( offset, text ) {\n\t\tvar nodes = [],\n\t\t    textAndEntityTokens = Autolinker.Util.splitAndCapture( text, this.htmlCharacterEntitiesRegex );  // split at HTML entities, but include the HTML entities in the results array\n\n\t\t// Every even numbered token is a TextNode, and every odd numbered token is an EntityNode\n\t\t// For example: an input `text` of \"Test &quot;this&quot; today\" would turn into the\n\t\t//   `textAndEntityTokens`: [ 'Test ', '&quot;', 'this', '&quot;', ' today' ]\n\t\tfor( var i = 0, len = textAndEntityTokens.length; i < len; i += 2 ) {\n\t\t\tvar textToken = textAndEntityTokens[ i ],\n\t\t\t    entityToken = textAndEntityTokens[ i + 1 ];\n\n\t\t\tif( textToken ) {\n\t\t\t\tnodes.push( this.createTextNode( offset, textToken ) );\n\t\t\t\toffset += textToken.length;\n\t\t\t}\n\t\t\tif( entityToken ) {\n\t\t\t\tnodes.push( this.createEntityNode( offset, entityToken ) );\n\t\t\t\toffset += entityToken.length;\n\t\t\t}\n\t\t}\n\t\treturn nodes;\n\t},\n\n\n\t/**\n\t * Factory method to create an {@link Autolinker.htmlParser.CommentNode CommentNode}.\n\t *\n\t * @private\n\t * @param {Number} offset The offset of the match within the original HTML\n\t *   string.\n\t * @param {String} tagText The full text of the tag (comment) that was\n\t *   matched, including its &lt;!-- and --&gt;.\n\t * @param {String} commentText The full text of the comment that was matched.\n\t */\n\tcreateCommentNode : function( offset, tagText, commentText ) {\n\t\treturn new Autolinker.htmlParser.CommentNode( {\n\t\t\toffset : offset,\n\t\t\ttext   : tagText,\n\t\t\tcomment: Autolinker.Util.trim( commentText )\n\t\t} );\n\t},\n\n\n\t/**\n\t * Factory method to create an {@link Autolinker.htmlParser.ElementNode ElementNode}.\n\t *\n\t * @private\n\t * @param {Number} offset The offset of the match within the original HTML\n\t *   string.\n\t * @param {String} tagText The full text of the tag (element) that was\n\t *   matched, including its attributes.\n\t * @param {String} tagName The name of the tag. Ex: An &lt;img&gt; tag would\n\t *   be passed to this method as \"img\".\n\t * @param {Boolean} isClosingTag `true` if it's a closing tag, false\n\t *   otherwise.\n\t * @return {Autolinker.htmlParser.ElementNode}\n\t */\n\tcreateElementNode : function( offset, tagText, tagName, isClosingTag ) {\n\t\treturn new Autolinker.htmlParser.ElementNode( {\n\t\t\toffset  : offset,\n\t\t\ttext    : tagText,\n\t\t\ttagName : tagName.toLowerCase(),\n\t\t\tclosing : isClosingTag\n\t\t} );\n\t},\n\n\n\t/**\n\t * Factory method to create a {@link Autolinker.htmlParser.EntityNode EntityNode}.\n\t *\n\t * @private\n\t * @param {Number} offset The offset of the match within the original HTML\n\t *   string.\n\t * @param {String} text The text that was matched for the HTML entity (such\n\t *   as '&amp;nbsp;').\n\t * @return {Autolinker.htmlParser.EntityNode}\n\t */\n\tcreateEntityNode : function( offset, text ) {\n\t\treturn new Autolinker.htmlParser.EntityNode( { offset: offset, text: text } );\n\t},\n\n\n\t/**\n\t * Factory method to create a {@link Autolinker.htmlParser.TextNode TextNode}.\n\t *\n\t * @private\n\t * @param {Number} offset The offset of the match within the original HTML\n\t *   string.\n\t * @param {String} text The text that was matched.\n\t * @return {Autolinker.htmlParser.TextNode}\n\t */\n\tcreateTextNode : function( offset, text ) {\n\t\treturn new Autolinker.htmlParser.TextNode( { offset: offset, text: text } );\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @abstract\n * @class Autolinker.htmlParser.HtmlNode\n *\n * Represents an HTML node found in an input string. An HTML node is one of the\n * following:\n *\n * 1. An {@link Autolinker.htmlParser.ElementNode ElementNode}, which represents\n *    HTML tags.\n * 2. A {@link Autolinker.htmlParser.CommentNode CommentNode}, which represents\n *    HTML comments.\n * 3. A {@link Autolinker.htmlParser.TextNode TextNode}, which represents text\n *    outside or within HTML tags.\n * 4. A {@link Autolinker.htmlParser.EntityNode EntityNode}, which represents\n *    one of the known HTML entities that Autolinker looks for. This includes\n *    common ones such as &amp;quot; and &amp;nbsp;\n */\nAutolinker.htmlParser.HtmlNode = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @cfg {Number} offset (required)\n\t *\n\t * The offset of the HTML node in the original text that was parsed.\n\t */\n\toffset : undefined,\n\n\t/**\n\t * @cfg {String} text (required)\n\t *\n\t * The text that was matched for the HtmlNode.\n\t *\n\t * - In the case of an {@link Autolinker.htmlParser.ElementNode ElementNode},\n\t *   this will be the tag's text.\n\t * - In the case of an {@link Autolinker.htmlParser.CommentNode CommentNode},\n\t *   this will be the comment's text.\n\t * - In the case of a {@link Autolinker.htmlParser.TextNode TextNode}, this\n\t *   will be the text itself.\n\t * - In the case of a {@link Autolinker.htmlParser.EntityNode EntityNode},\n\t *   this will be the text of the HTML entity.\n\t */\n\ttext : undefined,\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match instance,\n\t * specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.Util.assign( this, cfg );\n\n\t\tif( this.offset == null ) throw new Error( '`offset` cfg required' );\n\t\tif( this.text == null ) throw new Error( '`text` cfg required' );\n\t},\n\n\n\t/**\n\t * Returns a string name for the type of node that this class represents.\n\t *\n\t * @abstract\n\t * @return {String}\n\t */\n\tgetType : Autolinker.Util.abstractMethod,\n\n\n\t/**\n\t * Retrieves the {@link #offset} of the HtmlNode. This is the offset of the\n\t * HTML node in the original string that was parsed.\n\t *\n\t * @return {Number}\n\t */\n\tgetOffset : function() {\n\t\treturn this.offset;\n\t},\n\n\n\t/**\n\t * Retrieves the {@link #text} for the HtmlNode.\n\t *\n\t * @return {String}\n\t */\n\tgetText : function() {\n\t\treturn this.text;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.htmlParser.CommentNode\n * @extends Autolinker.htmlParser.HtmlNode\n *\n * Represents an HTML comment node that has been parsed by the\n * {@link Autolinker.htmlParser.HtmlParser}.\n *\n * See this class's superclass ({@link Autolinker.htmlParser.HtmlNode}) for more\n * details.\n */\nAutolinker.htmlParser.CommentNode = Autolinker.Util.extend( Autolinker.htmlParser.HtmlNode, {\n\n\t/**\n\t * @cfg {String} comment (required)\n\t *\n\t * The text inside the comment tag. This text is stripped of any leading or\n\t * trailing whitespace.\n\t */\n\tcomment : '',\n\n\n\t/**\n\t * Returns a string name for the type of node that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'comment';\n\t},\n\n\n\t/**\n\t * Returns the comment inside the comment tag.\n\t *\n\t * @return {String}\n\t */\n\tgetComment : function() {\n\t\treturn this.comment;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.htmlParser.ElementNode\n * @extends Autolinker.htmlParser.HtmlNode\n *\n * Represents an HTML element node that has been parsed by the {@link Autolinker.htmlParser.HtmlParser}.\n *\n * See this class's superclass ({@link Autolinker.htmlParser.HtmlNode}) for more\n * details.\n */\nAutolinker.htmlParser.ElementNode = Autolinker.Util.extend( Autolinker.htmlParser.HtmlNode, {\n\n\t/**\n\t * @cfg {String} tagName (required)\n\t *\n\t * The name of the tag that was matched.\n\t */\n\ttagName : '',\n\n\t/**\n\t * @cfg {Boolean} closing (required)\n\t *\n\t * `true` if the element (tag) is a closing tag, `false` if its an opening\n\t * tag.\n\t */\n\tclosing : false,\n\n\n\t/**\n\t * Returns a string name for the type of node that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'element';\n\t},\n\n\n\t/**\n\t * Returns the HTML element's (tag's) name. Ex: for an &lt;img&gt; tag,\n\t * returns \"img\".\n\t *\n\t * @return {String}\n\t */\n\tgetTagName : function() {\n\t\treturn this.tagName;\n\t},\n\n\n\t/**\n\t * Determines if the HTML element (tag) is a closing tag. Ex: &lt;div&gt;\n\t * returns `false`, while &lt;/div&gt; returns `true`.\n\t *\n\t * @return {Boolean}\n\t */\n\tisClosing : function() {\n\t\treturn this.closing;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.htmlParser.EntityNode\n * @extends Autolinker.htmlParser.HtmlNode\n *\n * Represents a known HTML entity node that has been parsed by the {@link Autolinker.htmlParser.HtmlParser}.\n * Ex: '&amp;nbsp;', or '&amp#160;' (which will be retrievable from the {@link #getText}\n * method.\n *\n * Note that this class will only be returned from the HtmlParser for the set of\n * checked HTML entity nodes  defined by the {@link Autolinker.htmlParser.HtmlParser#htmlCharacterEntitiesRegex}.\n *\n * See this class's superclass ({@link Autolinker.htmlParser.HtmlNode}) for more\n * details.\n */\nAutolinker.htmlParser.EntityNode = Autolinker.Util.extend( Autolinker.htmlParser.HtmlNode, {\n\n\t/**\n\t * Returns a string name for the type of node that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'entity';\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.htmlParser.TextNode\n * @extends Autolinker.htmlParser.HtmlNode\n *\n * Represents a text node that has been parsed by the {@link Autolinker.htmlParser.HtmlParser}.\n *\n * See this class's superclass ({@link Autolinker.htmlParser.HtmlNode}) for more\n * details.\n */\nAutolinker.htmlParser.TextNode = Autolinker.Util.extend( Autolinker.htmlParser.HtmlNode, {\n\n\t/**\n\t * Returns a string name for the type of node that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'text';\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @abstract\n * @class Autolinker.match.Match\n *\n * Represents a match found in an input string which should be Autolinked. A Match object is what is provided in a\n * {@link Autolinker#replaceFn replaceFn}, and may be used to query for details about the match.\n *\n * For example:\n *\n *     var input = \"...\";  // string with URLs, Email Addresses, and Mentions (Twitter, Instagram)\n *\n *     var linkedText = Autolinker.link( input, {\n *         replaceFn : function( match ) {\n *             console.log( \"href = \", match.getAnchorHref() );\n *             console.log( \"text = \", match.getAnchorText() );\n *\n *             switch( match.getType() ) {\n *                 case 'url' :\n *                     console.log( \"url: \", match.getUrl() );\n *\n *                 case 'email' :\n *                     console.log( \"email: \", match.getEmail() );\n *\n *                 case 'mention' :\n *                     console.log( \"mention: \", match.getMention() );\n *             }\n *         }\n *     } );\n *\n * See the {@link Autolinker} class for more details on using the {@link Autolinker#replaceFn replaceFn}.\n */\nAutolinker.match.Match = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @cfg {Autolinker.AnchorTagBuilder} tagBuilder (required)\n\t *\n\t * Reference to the AnchorTagBuilder instance to use to generate an anchor\n\t * tag for the Match.\n\t */\n\n\t/**\n\t * @cfg {String} matchedText (required)\n\t *\n\t * The original text that was matched by the {@link Autolinker.matcher.Matcher}.\n\t */\n\n\t/**\n\t * @cfg {Number} offset (required)\n\t *\n\t * The offset of where the match was made in the input string.\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tif( cfg.tagBuilder == null ) throw new Error( '`tagBuilder` cfg required' );\n\t\tif( cfg.matchedText == null ) throw new Error( '`matchedText` cfg required' );\n\t\tif( cfg.offset == null ) throw new Error( '`offset` cfg required' );\n\n\t\tthis.tagBuilder = cfg.tagBuilder;\n\t\tthis.matchedText = cfg.matchedText;\n\t\tthis.offset = cfg.offset;\n\t},\n\n\n\t/**\n\t * Returns a string name for the type of match that this class represents.\n\t *\n\t * @abstract\n\t * @return {String}\n\t */\n\tgetType : Autolinker.Util.abstractMethod,\n\n\n\t/**\n\t * Returns the original text that was matched.\n\t *\n\t * @return {String}\n\t */\n\tgetMatchedText : function() {\n\t\treturn this.matchedText;\n\t},\n\n\n\t/**\n\t * Sets the {@link #offset} of where the match was made in the input string.\n\t *\n\t * A {@link Autolinker.matcher.Matcher} will be fed only HTML text nodes,\n\t * and will therefore set an original offset that is relative to the HTML\n\t * text node itself. However, we want this offset to be relative to the full\n\t * HTML input string, and thus if using {@link Autolinker#parse} (rather\n\t * than calling a {@link Autolinker.matcher.Matcher} directly), then this\n\t * offset is corrected after the Matcher itself has done its job.\n\t *\n\t * @param {Number} offset\n\t */\n\tsetOffset : function( offset ) {\n\t\tthis.offset = offset;\n\t},\n\n\n\t/**\n\t * Returns the offset of where the match was made in the input string. This\n\t * is the 0-based index of the match.\n\t *\n\t * @return {Number}\n\t */\n\tgetOffset : function() {\n\t\treturn this.offset;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @abstract\n\t * @return {String}\n\t */\n\tgetAnchorHref : Autolinker.Util.abstractMethod,\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @abstract\n\t * @return {String}\n\t */\n\tgetAnchorText : Autolinker.Util.abstractMethod,\n\n\n\t/**\n\t * Returns the CSS class suffix(es) for this match.\n\t *\n\t * A CSS class suffix is appended to the {@link Autolinker#className} in\n\t * the {@link Autolinker.AnchorTagBuilder} when a match is translated into\n\t * an anchor tag.\n\t *\n\t * For example, if {@link Autolinker#className} was configured as 'myLink',\n\t * and this method returns `[ 'url' ]`, the final class name of the element\n\t * will become: 'myLink myLink-url'.\n\t *\n\t * The match may provide multiple CSS class suffixes to be appended to the\n\t * {@link Autolinker#className} in order to facilitate better styling\n\t * options for different match criteria. See {@link Autolinker.match.Mention}\n\t * for an example.\n\t *\n\t * By default, this method returns a single array with the match's\n\t * {@link #getType type} name, but may be overridden by subclasses.\n\t *\n\t * @return {String[]}\n\t */\n\tgetCssClassSuffixes : function() {\n\t\treturn [ this.getType() ];\n\t},\n\n\n\t/**\n\t * Builds and returns an {@link Autolinker.HtmlTag} instance based on the\n\t * Match.\n\t *\n\t * This can be used to easily generate anchor tags from matches, and either\n\t * return their HTML string, or modify them before doing so.\n\t *\n\t * Example Usage:\n\t *\n\t *     var tag = match.buildTag();\n\t *     tag.addClass( 'cordova-link' );\n\t *     tag.setAttr( 'target', '_system' );\n\t *\n\t *     tag.toAnchorString();  // <a href=\"http://google.com\" class=\"cordova-link\" target=\"_system\">Google</a>\n\t */\n\tbuildTag : function() {\n\t\treturn this.tagBuilder.build( this );\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.match.Email\n * @extends Autolinker.match.Match\n *\n * Represents a Email match found in an input string which should be Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more details.\n */\nAutolinker.match.Email = Autolinker.Util.extend( Autolinker.match.Match, {\n\n\t/**\n\t * @cfg {String} email (required)\n\t *\n\t * The email address that was matched.\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.match.Match.prototype.constructor.call( this, cfg );\n\n\t\tif( !cfg.email ) throw new Error( '`email` cfg required' );\n\n\t\tthis.email = cfg.email;\n\t},\n\n\n\t/**\n\t * Returns a string name for the type of match that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'email';\n\t},\n\n\n\t/**\n\t * Returns the email address that was matched.\n\t *\n\t * @return {String}\n\t */\n\tgetEmail : function() {\n\t\treturn this.email;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorHref : function() {\n\t\treturn 'mailto:' + this.email;\n\t},\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorText : function() {\n\t\treturn this.email;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.match.Hashtag\n * @extends Autolinker.match.Match\n *\n * Represents a Hashtag match found in an input string which should be\n * Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more\n * details.\n */\nAutolinker.match.Hashtag = Autolinker.Util.extend( Autolinker.match.Match, {\n\n\t/**\n\t * @cfg {String} serviceName\n\t *\n\t * The service to point hashtag matches to. See {@link Autolinker#hashtag}\n\t * for available values.\n\t */\n\n\t/**\n\t * @cfg {String} hashtag (required)\n\t *\n\t * The Hashtag that was matched, without the '#'.\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.match.Match.prototype.constructor.call( this, cfg );\n\n\t\t// TODO: if( !serviceName ) throw new Error( '`serviceName` cfg required' );\n\t\tif( !cfg.hashtag ) throw new Error( '`hashtag` cfg required' );\n\n\t\tthis.serviceName = cfg.serviceName;\n\t\tthis.hashtag = cfg.hashtag;\n\t},\n\n\n\t/**\n\t * Returns the type of match that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'hashtag';\n\t},\n\n\n\t/**\n\t * Returns the configured {@link #serviceName} to point the Hashtag to.\n\t * Ex: 'facebook', 'twitter'.\n\t *\n\t * @return {String}\n\t */\n\tgetServiceName : function() {\n\t\treturn this.serviceName;\n\t},\n\n\n\t/**\n\t * Returns the matched hashtag, without the '#' character.\n\t *\n\t * @return {String}\n\t */\n\tgetHashtag : function() {\n\t\treturn this.hashtag;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorHref : function() {\n\t\tvar serviceName = this.serviceName,\n\t\t    hashtag = this.hashtag;\n\n\t\tswitch( serviceName ) {\n\t\t\tcase 'twitter' :\n\t\t\t\treturn 'https://twitter.com/hashtag/' + hashtag;\n\t\t\tcase 'facebook' :\n\t\t\t\treturn 'https://www.facebook.com/hashtag/' + hashtag;\n\t\t\tcase 'instagram' :\n\t\t\t\treturn 'https://instagram.com/explore/tags/' + hashtag;\n\n\t\t\tdefault :  // Shouldn't happen because Autolinker's constructor should block any invalid values, but just in case.\n\t\t\t\tthrow new Error( 'Unknown service name to point hashtag to: ', serviceName );\n\t\t}\n\t},\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorText : function() {\n\t\treturn '#' + this.hashtag;\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.match.Phone\n * @extends Autolinker.match.Match\n *\n * Represents a Phone number match found in an input string which should be\n * Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more\n * details.\n */\nAutolinker.match.Phone = Autolinker.Util.extend( Autolinker.match.Match, {\n\n\t/**\n\t * @protected\n\t * @property {String} number (required)\n\t *\n\t * The phone number that was matched, without any delimiter characters.\n\t *\n\t * Note: This is a string to allow for prefixed 0's.\n\t */\n\n\t/**\n\t * @protected\n\t * @property  {Boolean} plusSign (required)\n\t *\n\t * `true` if the matched phone number started with a '+' sign. We'll include\n\t * it in the `tel:` URL if so, as this is needed for international numbers.\n\t *\n\t * Ex: '+1 (123) 456 7879'\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.match.Match.prototype.constructor.call( this, cfg );\n\n\t\tif( !cfg.number ) throw new Error( '`number` cfg required' );\n\t\tif( cfg.plusSign == null ) throw new Error( '`plusSign` cfg required' );\n\n\t\tthis.number = cfg.number;\n\t\tthis.plusSign = cfg.plusSign;\n\t},\n\n\n\t/**\n\t * Returns a string name for the type of match that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'phone';\n\t},\n\n\n\t/**\n\t * Returns the phone number that was matched as a string, without any\n\t * delimiter characters.\n\t *\n\t * Note: This is a string to allow for prefixed 0's.\n\t *\n\t * @return {String}\n\t */\n\tgetNumber: function() {\n\t\treturn this.number;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorHref : function() {\n\t\treturn 'tel:' + ( this.plusSign ? '+' : '' ) + this.number;\n\t},\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorText : function() {\n\t\treturn this.matchedText;\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.match.Mention\n * @extends Autolinker.match.Match\n *\n * Represents a Mention match found in an input string which should be Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more details.\n */\nAutolinker.match.Mention = Autolinker.Util.extend( Autolinker.match.Match, {\n\n\t/**\n\t * @cfg {String} serviceName\n\t *\n\t * The service to point mention matches to. See {@link Autolinker#mention}\n\t * for available values.\n\t */\n\n\t/**\n\t * @cfg {String} mention (required)\n\t *\n\t * The Mention that was matched, without the '@' character.\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.match.Match.prototype.constructor.call( this, cfg );\n\n\t\tif( !cfg.serviceName ) throw new Error( '`serviceName` cfg required' );\n\t\tif( !cfg.mention ) throw new Error( '`mention` cfg required' );\n\n\t\tthis.mention = cfg.mention;\n\t\tthis.serviceName = cfg.serviceName;\n\t},\n\n\n\t/**\n\t * Returns the type of match that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'mention';\n\t},\n\n\n\t/**\n\t * Returns the mention, without the '@' character.\n\t *\n\t * @return {String}\n\t */\n\tgetMention : function() {\n\t\treturn this.mention;\n\t},\n\n\n\t/**\n\t * Returns the configured {@link #serviceName} to point the mention to.\n\t * Ex: 'instagram', 'twitter'.\n\t *\n\t * @return {String}\n\t */\n\tgetServiceName : function() {\n\t\treturn this.serviceName;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorHref : function() {\n\t\tswitch( this.serviceName ) {\n\t\t\tcase 'twitter' :\n\t\t\t\treturn 'https://twitter.com/' + this.mention;\n\t\t\tcase 'instagram' :\n\t\t\t\treturn 'https://instagram.com/' + this.mention;\n\n\t\t\tdefault :  // Shouldn't happen because Autolinker's constructor should block any invalid values, but just in case.\n\t\t\t\tthrow new Error( 'Unknown service name to point mention to: ', this.serviceName );\n\t\t}\n\t},\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorText : function() {\n\t\treturn '@' + this.mention;\n\t},\n\n\n\t/**\n\t * Returns the CSS class suffixes that should be used on a tag built with\n\t * the match. See {@link Autolinker.match.Match#getCssClassSuffixes} for\n\t * details.\n\t *\n\t * @return {String[]}\n\t */\n\tgetCssClassSuffixes : function() {\n\t\tvar cssClassSuffixes = Autolinker.match.Match.prototype.getCssClassSuffixes.call( this ),\n\t\t    serviceName = this.getServiceName();\n\n\t\tif( serviceName ) {\n\t\t\tcssClassSuffixes.push( serviceName );\n\t\t}\n\t\treturn cssClassSuffixes;\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.match.Url\n * @extends Autolinker.match.Match\n *\n * Represents a Url match found in an input string which should be Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more details.\n */\nAutolinker.match.Url = Autolinker.Util.extend( Autolinker.match.Match, {\n\n\t/**\n\t * @cfg {String} url (required)\n\t *\n\t * The url that was matched.\n\t */\n\n\t/**\n\t * @cfg {\"scheme\"/\"www\"/\"tld\"} urlMatchType (required)\n\t *\n\t * The type of URL match that this class represents. This helps to determine\n\t * if the match was made in the original text with a prefixed scheme (ex:\n\t * 'http://www.google.com'), a prefixed 'www' (ex: 'www.google.com'), or\n\t * was matched by a known top-level domain (ex: 'google.com').\n\t */\n\n\t/**\n\t * @cfg {Boolean} protocolUrlMatch (required)\n\t *\n\t * `true` if the URL is a match which already has a protocol (i.e.\n\t * 'http://'), `false` if the match was from a 'www' or known TLD match.\n\t */\n\n\t/**\n\t * @cfg {Boolean} protocolRelativeMatch (required)\n\t *\n\t * `true` if the URL is a protocol-relative match. A protocol-relative match\n\t * is a URL that starts with '//', and will be either http:// or https://\n\t * based on the protocol that the site is loaded under.\n\t */\n\n\t/**\n\t * @cfg {Object} stripPrefix (required)\n\t *\n\t * The Object form of {@link Autolinker#cfg-stripPrefix}.\n\t */\n\n\t/**\n\t * @cfg {Boolean} stripTrailingSlash (required)\n\t * @inheritdoc Autolinker#cfg-stripTrailingSlash\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.match.Match.prototype.constructor.call( this, cfg );\n\n\t\tif( cfg.urlMatchType !== 'scheme' && cfg.urlMatchType !== 'www' && cfg.urlMatchType !== 'tld' ) throw new Error( '`urlMatchType` cfg must be one of: \"scheme\", \"www\", or \"tld\"' );\n\t\tif( !cfg.url ) throw new Error( '`url` cfg required' );\n\t\tif( cfg.protocolUrlMatch == null ) throw new Error( '`protocolUrlMatch` cfg required' );\n\t\tif( cfg.protocolRelativeMatch == null ) throw new Error( '`protocolRelativeMatch` cfg required' );\n\t\tif( cfg.stripPrefix == null ) throw new Error( '`stripPrefix` cfg required' );\n\t\tif( cfg.stripTrailingSlash == null ) throw new Error( '`stripTrailingSlash` cfg required' );\n\n\t\tthis.urlMatchType = cfg.urlMatchType;\n\t\tthis.url = cfg.url;\n\t\tthis.protocolUrlMatch = cfg.protocolUrlMatch;\n\t\tthis.protocolRelativeMatch = cfg.protocolRelativeMatch;\n\t\tthis.stripPrefix = cfg.stripPrefix;\n\t\tthis.stripTrailingSlash = cfg.stripTrailingSlash;\n\t},\n\n\n\t/**\n\t * @private\n\t * @property {RegExp} schemePrefixRegex\n\t *\n\t * A regular expression used to remove the 'http://' or 'https://' from\n\t * URLs.\n\t */\n\tschemePrefixRegex: /^(https?:\\/\\/)?/i,\n\n\t/**\n\t * @private\n\t * @property {RegExp} wwwPrefixRegex\n\t *\n\t * A regular expression used to remove the 'www.' from URLs.\n\t */\n\twwwPrefixRegex: /^(https?:\\/\\/)?(www\\.)?/i,\n\n\t/**\n\t * @private\n\t * @property {RegExp} protocolRelativeRegex\n\t *\n\t * The regular expression used to remove the protocol-relative '//' from the {@link #url} string, for purposes\n\t * of {@link #getAnchorText}. A protocol-relative URL is, for example, \"//yahoo.com\"\n\t */\n\tprotocolRelativeRegex : /^\\/\\//,\n\n\t/**\n\t * @private\n\t * @property {Boolean} protocolPrepended\n\t *\n\t * Will be set to `true` if the 'http://' protocol has been prepended to the {@link #url} (because the\n\t * {@link #url} did not have a protocol)\n\t */\n\tprotocolPrepended : false,\n\n\n\t/**\n\t * Returns a string name for the type of match that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'url';\n\t},\n\n\n\t/**\n\t * Returns a string name for the type of URL match that this class\n\t * represents.\n\t *\n\t * This helps to determine if the match was made in the original text with a\n\t * prefixed scheme (ex: 'http://www.google.com'), a prefixed 'www' (ex:\n\t * 'www.google.com'), or was matched by a known top-level domain (ex:\n\t * 'google.com').\n\t *\n\t * @return {\"scheme\"/\"www\"/\"tld\"}\n\t */\n\tgetUrlMatchType : function() {\n\t\treturn this.urlMatchType;\n\t},\n\n\n\t/**\n\t * Returns the url that was matched, assuming the protocol to be 'http://' if the original\n\t * match was missing a protocol.\n\t *\n\t * @return {String}\n\t */\n\tgetUrl : function() {\n\t\tvar url = this.url;\n\n\t\t// if the url string doesn't begin with a protocol, assume 'http://'\n\t\tif( !this.protocolRelativeMatch && !this.protocolUrlMatch && !this.protocolPrepended ) {\n\t\t\turl = this.url = 'http://' + url;\n\n\t\t\tthis.protocolPrepended = true;\n\t\t}\n\n\t\treturn url;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorHref : function() {\n\t\tvar url = this.getUrl();\n\n\t\treturn url.replace( /&amp;/g, '&' );  // any &amp;'s in the URL should be converted back to '&' if they were displayed as &amp; in the source html\n\t},\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorText : function() {\n\t\tvar anchorText = this.getMatchedText();\n\n\t\tif( this.protocolRelativeMatch ) {\n\t\t\t// Strip off any protocol-relative '//' from the anchor text\n\t\t\tanchorText = this.stripProtocolRelativePrefix( anchorText );\n\t\t}\n\t\tif( this.stripPrefix.scheme ) {\n\t\t\tanchorText = this.stripSchemePrefix( anchorText );\n\t\t}\n\t\tif( this.stripPrefix.www ) {\n\t\t\tanchorText = this.stripWwwPrefix( anchorText );\n\t\t}\n\t\tif( this.stripTrailingSlash ) {\n\t\t\tanchorText = this.removeTrailingSlash( anchorText );  // remove trailing slash, if there is one\n\t\t}\n\n\t\treturn anchorText;\n\t},\n\n\n\t// ---------------------------------------\n\n\t// Utility Functionality\n\n\t/**\n\t * Strips the scheme prefix (such as \"http://\" or \"https://\") from the given\n\t * `url`.\n\t *\n\t * @private\n\t * @param {String} url The text of the anchor that is being generated, for\n\t *   which to strip off the url scheme.\n\t * @return {String} The `url`, with the scheme stripped.\n\t */\n\tstripSchemePrefix : function( url ) {\n\t\treturn url.replace( this.schemePrefixRegex, '' );\n\t},\n\n\n\t/**\n\t * Strips the 'www' prefix from the given `url`.\n\t *\n\t * @private\n\t * @param {String} url The text of the anchor that is being generated, for\n\t *   which to strip off the 'www' if it exists.\n\t * @return {String} The `url`, with the 'www' stripped.\n\t */\n\tstripWwwPrefix : function( url ) {\n\t\treturn url.replace( this.wwwPrefixRegex, '$1' );  // leave any scheme ($1), it one exists\n\t},\n\n\n\t/**\n\t * Strips any protocol-relative '//' from the anchor text.\n\t *\n\t * @private\n\t * @param {String} text The text of the anchor that is being generated, for which to strip off the\n\t *   protocol-relative prefix (such as stripping off \"//\")\n\t * @return {String} The `anchorText`, with the protocol-relative prefix stripped.\n\t */\n\tstripProtocolRelativePrefix : function( text ) {\n\t\treturn text.replace( this.protocolRelativeRegex, '' );\n\t},\n\n\n\t/**\n\t * Removes any trailing slash from the given `anchorText`, in preparation for the text to be displayed.\n\t *\n\t * @private\n\t * @param {String} anchorText The text of the anchor that is being generated, for which to remove any trailing\n\t *   slash ('/') that may exist.\n\t * @return {String} The `anchorText`, with the trailing slash removed.\n\t */\n\tremoveTrailingSlash : function( anchorText ) {\n\t\tif( anchorText.charAt( anchorText.length - 1 ) === '/' ) {\n\t\t\tanchorText = anchorText.slice( 0, -1 );\n\t\t}\n\t\treturn anchorText;\n\t}\n\n} );\n// NOTE: THIS IS A GENERATED FILE\n// To update with the latest TLD list, run `gulp update-tld-list`\n\n/*global Autolinker */\nAutolinker.tldRegex = /(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermögensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermögensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|international|lifeinsurance|orientexpress|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|pamperedchef|scholarships|versicherung|xn--3e0b707e|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--3bst00m|xn--3ds443g|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|சிங்கப்பூர்|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|goodhands|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|mcdonalds|melbourne|microsoft|montblanc|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|telecity|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|السعودية|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|panerai|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|spiegel|staples|starhub|statoil|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|католик|الجزائر|العليان|پاکستان|كاثوليك|موبايلي|இந்தியா|abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|xperia|yachts|yandex|zappos|москва|онлайн|ابوظبي|ارامكو|الاردن|المغرب|امارات|فلسطين|مليسيا|இலங்கை|ファッション|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|boots|bosch|build|canon|cards|chase|cheap|chloe|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vista|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|ایران|بازار|بھارت|سودان|سورية|همراه|संगठन|বাংলা|భారత్|嘉里大酒店|aarp|able|adac|aero|aigo|akdn|ally|amex|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|mtpc|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sapo|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|дети|сайт|بيتك|تونس|شبكة|عراق|عمان|موقع|भारत|ভারত|ਭਾਰਤ|ભારત|ලංකා|グーグル|クラウド|ポイント|大众汽车|组织机构|電訊盈科|香格里拉|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|htc|ibm|ice|icu|ifm|ing|ink|int|ist|itv|iwc|jcb|jcp|jio|jlc|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|lol|lpl|ltd|man|mba|mcd|med|men|meo|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|бел|ком|қаз|мкд|мон|орг|рус|срб|укр|հայ|קום|قطر|كوم|مصر|कॉम|नेट|คอม|ไทย|ストア|セール|みんな|中文网|天主教|我爱你|新加坡|淡马锡|诺基亚|飞利浦|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ελ|бг|ею|рф|გე|닷넷|닷컴|삼성|한국|コム|世界|中信|中国|中國|企业|佛山|信息|健康|八卦|公司|公益|台湾|台灣|商城|商店|商标|嘉里|在线|大拿|娱乐|家電|工行|广东|微博|慈善|手机|手表|政务|政府|新闻|时尚|書籍|机构|游戏|澳門|点看|珠宝|移动|网址|网店|网站|网络|联通|谷歌|购物|通販|集团|食品|餐厅|香港)/;\n\n/*global Autolinker */\n/**\n * @abstract\n * @class Autolinker.matcher.Matcher\n *\n * An abstract class and interface for individual matchers to find matches in\n * an input string with linkified versions of them.\n *\n * Note that Matchers do not take HTML into account - they must be fed the text\n * nodes of any HTML string, which is handled by {@link Autolinker#parse}.\n */\nAutolinker.matcher.Matcher = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @cfg {Autolinker.AnchorTagBuilder} tagBuilder (required)\n\t *\n\t * Reference to the AnchorTagBuilder instance to use to generate HTML tags\n\t * for {@link Autolinker.match.Match Matches}.\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Matcher\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tif( !cfg.tagBuilder ) throw new Error( '`tagBuilder` cfg required' );\n\n\t\tthis.tagBuilder = cfg.tagBuilder;\n\t},\n\n\n\t/**\n\t * Parses the input `text` and returns the array of {@link Autolinker.match.Match Matches}\n\t * for the matcher.\n\t *\n\t * @abstract\n\t * @param {String} text The text to scan and replace matches in.\n\t * @return {Autolinker.match.Match[]}\n\t */\n\tparseMatches : Autolinker.Util.abstractMethod\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.matcher.Email\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find email matches in an input string.\n *\n * See this class's superclass ({@link Autolinker.matcher.Matcher}) for more details.\n */\nAutolinker.matcher.Email = Autolinker.Util.extend( Autolinker.matcher.Matcher, {\n\n\t/**\n\t * The regular expression to match email addresses. Example match:\n\t *\n\t *     person@place.com\n\t *\n\t * @private\n\t * @property {RegExp} matcherRegex\n\t */\n\tmatcherRegex : (function() {\n\t\tvar alphaNumericChars = Autolinker.RegexLib.alphaNumericCharsStr,\n\t\t    emailRegex = new RegExp( '[' + alphaNumericChars + '\\\\-_\\';:&=+$.,]+@' ),  // something@ for email addresses (a.k.a. local-part)\n\t\t\tdomainNameRegex = Autolinker.RegexLib.domainNameRegex,\n\t\t\ttldRegex = Autolinker.tldRegex;  // match our known top level domains (TLDs)\n\n\t\treturn new RegExp( [\n\t\t\temailRegex.source,\n\t\t\tdomainNameRegex.source,\n\t\t\t'\\\\.', tldRegex.source   // '.com', '.net', etc\n\t\t].join( \"\" ), 'gi' );\n\t} )(),\n\n\n\t/**\n\t * @inheritdoc\n\t */\n\tparseMatches : function( text ) {\n\t\tvar matcherRegex = this.matcherRegex,\n\t\t    tagBuilder = this.tagBuilder,\n\t\t    matches = [],\n\t\t    match;\n\n\t\twhile( ( match = matcherRegex.exec( text ) ) !== null ) {\n\t\t\tvar matchedText = match[ 0 ];\n\n\t\t\tmatches.push( new Autolinker.match.Email( {\n\t\t\t\ttagBuilder  : tagBuilder,\n\t\t\t\tmatchedText : matchedText,\n\t\t\t\toffset      : match.index,\n\t\t\t\temail       : matchedText\n\t\t\t} ) );\n\t\t}\n\n\t\treturn matches;\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.matcher.Hashtag\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find Hashtag matches in an input string.\n */\nAutolinker.matcher.Hashtag = Autolinker.Util.extend( Autolinker.matcher.Matcher, {\n\n\t/**\n\t * @cfg {String} serviceName\n\t *\n\t * The service to point hashtag matches to. See {@link Autolinker#hashtag}\n\t * for available values.\n\t */\n\n\n\t/**\n\t * The regular expression to match Hashtags. Example match:\n\t *\n\t *     #asdf\n\t *\n\t * @private\n\t * @property {RegExp} matcherRegex\n\t */\n\tmatcherRegex : new RegExp( '#[_' + Autolinker.RegexLib.alphaNumericCharsStr + ']{1,139}', 'g' ),\n\n\t/**\n\t * The regular expression to use to check the character before a username match to\n\t * make sure we didn't accidentally match an email address.\n\t *\n\t * For example, the string \"asdf@asdf.com\" should not match \"@asdf\" as a username.\n\t *\n\t * @private\n\t * @property {RegExp} nonWordCharRegex\n\t */\n\tnonWordCharRegex : new RegExp( '[^' + Autolinker.RegexLib.alphaNumericCharsStr + ']' ),\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match instance,\n\t *   specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.matcher.Matcher.prototype.constructor.call( this, cfg );\n\n\t\tthis.serviceName = cfg.serviceName;\n\t},\n\n\n\t/**\n\t * @inheritdoc\n\t */\n\tparseMatches : function( text ) {\n\t\tvar matcherRegex = this.matcherRegex,\n\t\t    nonWordCharRegex = this.nonWordCharRegex,\n\t\t    serviceName = this.serviceName,\n\t\t    tagBuilder = this.tagBuilder,\n\t\t    matches = [],\n\t\t    match;\n\n\t\twhile( ( match = matcherRegex.exec( text ) ) !== null ) {\n\t\t\tvar offset = match.index,\n\t\t\t    prevChar = text.charAt( offset - 1 );\n\n\t\t\t// If we found the match at the beginning of the string, or we found the match\n\t\t\t// and there is a whitespace char in front of it (meaning it is not a '#' char\n\t\t\t// in the middle of a word), then it is a hashtag match.\n\t\t\tif( offset === 0 || nonWordCharRegex.test( prevChar ) ) {\n\t\t\t\tvar matchedText = match[ 0 ],\n\t\t\t\t    hashtag = match[ 0 ].slice( 1 );  // strip off the '#' character at the beginning\n\n\t\t\t\tmatches.push( new Autolinker.match.Hashtag( {\n\t\t\t\t\ttagBuilder  : tagBuilder,\n\t\t\t\t\tmatchedText : matchedText,\n\t\t\t\t\toffset      : offset,\n\t\t\t\t\tserviceName : serviceName,\n\t\t\t\t\thashtag     : hashtag\n\t\t\t\t} ) );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.matcher.Phone\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find Phone number matches in an input string.\n *\n * See this class's superclass ({@link Autolinker.matcher.Matcher}) for more\n * details.\n */\nAutolinker.matcher.Phone = Autolinker.Util.extend( Autolinker.matcher.Matcher, {\n\n\t/**\n\t * The regular expression to match Phone numbers. Example match:\n\t *\n\t *     (123) 456-7890\n\t *\n\t * This regular expression has the following capturing groups:\n\t *\n\t * 1. The prefixed '+' sign, if there is one.\n\t *\n\t * @private\n\t * @property {RegExp} matcherRegex\n\t */\n    matcherRegex : /(?:(\\+)?\\d{1,3}[-\\040.]?)?\\(?\\d{3}\\)?[-\\040.]?\\d{3}[-\\040.]?\\d{4}([,;]*[0-9]+#?)*/g,    \n    \n    // ex: (123) 456-7890, 123 456 7890, 123-456-7890, +18004441234,,;,10226420346#, \n    // +1 (800) 444 1234, 10226420346#, 1-800-444-1234,1022,64,20346#\n\n\t/**\n\t * @inheritdoc\n\t */\n\tparseMatches: function(text) {\n\t\tvar matcherRegex = this.matcherRegex,\n\t\t\ttagBuilder = this.tagBuilder,\n\t\t\tmatches = [],\n\t\t\tmatch;\n\n\t\twhile ((match = matcherRegex.exec(text)) !== null) {\n\t\t\t// Remove non-numeric values from phone number string\n\t\t\tvar matchedText = match[0],\n\t\t\t\tcleanNumber = matchedText.replace(/[^0-9,;#]/g, ''), // strip out non-digit characters exclude comma semicolon and #\n\t\t\t\tplusSign = !!match[1]; // match[ 1 ] is the prefixed plus sign, if there is one\n\t\t\tif (/\\D/.test(match[2]) && /\\D/.test(matchedText)) {\n    \t\t\tmatches.push(new Autolinker.match.Phone({\n    \t\t\t\ttagBuilder: tagBuilder,\n    \t\t\t\tmatchedText: matchedText,\n    \t\t\t\toffset: match.index,\n    \t\t\t\tnumber: cleanNumber,\n    \t\t\t\tplusSign: plusSign\n    \t\t\t}));\n            }\n\t\t}\n\n\t\treturn matches;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.matcher.Mention\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find/replace username matches in an input string.\n */\nAutolinker.matcher.Mention = Autolinker.Util.extend( Autolinker.matcher.Matcher, {\n\n\t/**\n\t * Hash of regular expression to match username handles. Example match:\n\t *\n\t *     @asdf\n\t *\n\t * @private\n\t * @property {Object} matcherRegexes\n\t */\n\tmatcherRegexes : {\n\t\t\"twitter\": new RegExp( '@[_' + Autolinker.RegexLib.alphaNumericCharsStr + ']{1,20}', 'g' ),\n\t\t\"instagram\": new RegExp( '@[_.' + Autolinker.RegexLib.alphaNumericCharsStr + ']{1,50}', 'g' )\n\t},\n\n\t/**\n\t * The regular expression to use to check the character before a username match to\n\t * make sure we didn't accidentally match an email address.\n\t *\n\t * For example, the string \"asdf@asdf.com\" should not match \"@asdf\" as a username.\n\t *\n\t * @private\n\t * @property {RegExp} nonWordCharRegex\n\t */\n\tnonWordCharRegex : new RegExp( '[^' + Autolinker.RegexLib.alphaNumericCharsStr + ']' ),\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match instance,\n\t *   specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.matcher.Matcher.prototype.constructor.call( this, cfg );\n\n\t\tthis.serviceName = cfg.serviceName;\n\t},\n\n\n\t/**\n\t * @inheritdoc\n\t */\n\tparseMatches : function( text ) {\n\t\tvar matcherRegex = this.matcherRegexes[this.serviceName],\n\t\t    nonWordCharRegex = this.nonWordCharRegex,\n\t\t    serviceName = this.serviceName,\n\t\t    tagBuilder = this.tagBuilder,\n\t\t    matches = [],\n\t\t    match;\n\n\t\tif (!matcherRegex) {\n\t\t\treturn matches;\n\t\t}\n\n\t\twhile( ( match = matcherRegex.exec( text ) ) !== null ) {\n\t\t\tvar offset = match.index,\n\t\t\t    prevChar = text.charAt( offset - 1 );\n\n\t\t\t// If we found the match at the beginning of the string, or we found the match\n\t\t\t// and there is a whitespace char in front of it (meaning it is not an email\n\t\t\t// address), then it is a username match.\n\t\t\tif( offset === 0 || nonWordCharRegex.test( prevChar ) ) {\n\t\t\t\tvar matchedText = match[ 0 ].replace(/\\.+$/g, ''), // strip off trailing .\n\t\t\t\t    mention = matchedText.slice( 1 );  // strip off the '@' character at the beginning\n\n\t\t\t\tmatches.push( new Autolinker.match.Mention( {\n\t\t\t\t\ttagBuilder    : tagBuilder,\n\t\t\t\t\tmatchedText   : matchedText,\n\t\t\t\t\toffset        : offset,\n\t\t\t\t\tserviceName   : serviceName,\n\t\t\t\t\tmention       : mention\n\t\t\t\t} ) );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.matcher.Url\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find URL matches in an input string.\n *\n * See this class's superclass ({@link Autolinker.matcher.Matcher}) for more details.\n */\nAutolinker.matcher.Url = Autolinker.Util.extend( Autolinker.matcher.Matcher, {\n\n\t/**\n\t * @cfg {Object} stripPrefix (required)\n\t *\n\t * The Object form of {@link Autolinker#cfg-stripPrefix}.\n\t */\n\n\t/**\n\t * @cfg {Boolean} stripTrailingSlash (required)\n\t * @inheritdoc Autolinker#stripTrailingSlash\n\t */\n\n\n\t/**\n\t * @private\n\t * @property {RegExp} matcherRegex\n\t *\n\t * The regular expression to match URLs with an optional scheme, port\n\t * number, path, query string, and hash anchor.\n\t *\n\t * Example matches:\n\t *\n\t *     http://google.com\n\t *     www.google.com\n\t *     google.com/path/to/file?q1=1&q2=2#myAnchor\n\t *\n\t *\n\t * This regular expression will have the following capturing groups:\n\t *\n\t * 1.  Group that matches a scheme-prefixed URL (i.e. 'http://google.com').\n\t *     This is used to match scheme URLs with just a single word, such as\n\t *     'http://localhost', where we won't double check that the domain name\n\t *     has at least one dot ('.') in it.\n\t * 2.  Group that matches a 'www.' prefixed URL. This is only matched if the\n\t *     'www.' text was not prefixed by a scheme (i.e.: not prefixed by\n\t *     'http://', 'ftp:', etc.)\n\t * 3.  A protocol-relative ('//') match for the case of a 'www.' prefixed\n\t *     URL. Will be an empty string if it is not a protocol-relative match.\n\t *     We need to know the character before the '//' in order to determine\n\t *     if it is a valid match or the // was in a string we don't want to\n\t *     auto-link.\n\t * 4.  Group that matches a known TLD (top level domain), when a scheme\n\t *     or 'www.'-prefixed domain is not matched.\n\t * 5.  A protocol-relative ('//') match for the case of a known TLD prefixed\n\t *     URL. Will be an empty string if it is not a protocol-relative match.\n\t *     See #3 for more info.\n\t */\n\tmatcherRegex : (function() {\n\t\tvar schemeRegex = /(?:[A-Za-z][-.+A-Za-z0-9]*:(?![A-Za-z][-.+A-Za-z0-9]*:\\/\\/)(?!\\d+\\/?)(?:\\/\\/)?)/,  // match protocol, allow in format \"http://\" or \"mailto:\". However, do not match the first part of something like 'link:http://www.google.com' (i.e. don't match \"link:\"). Also, make sure we don't interpret 'google.com:8000' as if 'google.com' was a protocol here (i.e. ignore a trailing port number in this regex)\n\t\t    wwwRegex = /(?:www\\.)/,                  // starting with 'www.'\n\t\t    domainNameRegex = Autolinker.RegexLib.domainNameRegex,\n\t\t    tldRegex = Autolinker.tldRegex,  // match our known top level domains (TLDs)\n\t\t    alphaNumericCharsStr = Autolinker.RegexLib.alphaNumericCharsStr,\n\n\t\t    // Allow optional path, query string, and hash anchor, not ending in the following characters: \"?!:,.;\"\n\t\t    // http://blog.codinghorror.com/the-problem-with-urls/\n\t\t    urlSuffixRegex = new RegExp( '[/?#](?:[' + alphaNumericCharsStr + '\\\\-+&@#/%=~_()|\\'$*\\\\[\\\\]?!:,.;\\u2713]*[' + alphaNumericCharsStr + '\\\\-+&@#/%=~_()|\\'$*\\\\[\\\\]\\u2713])?' );\n\n\t\treturn new RegExp( [\n\t\t\t'(?:', // parens to cover match for scheme (optional), and domain\n\t\t\t\t'(',  // *** Capturing group $1, for a scheme-prefixed url (ex: http://google.com)\n\t\t\t\t\tschemeRegex.source,\n\t\t\t\t\tdomainNameRegex.source,\n\t\t\t\t')',\n\n\t\t\t\t'|',\n\n\t\t\t\t'(',  // *** Capturing group $2, for a 'www.' prefixed url (ex: www.google.com)\n\t\t\t\t\t'(//)?',  // *** Capturing group $3 for an optional protocol-relative URL. Must be at the beginning of the string or start with a non-word character (handled later)\n\t\t\t\t\twwwRegex.source,\n\t\t\t\t\tdomainNameRegex.source,\n\t\t\t\t')',\n\n\t\t\t\t'|',\n\n\t\t\t\t'(',  // *** Capturing group $4, for known a TLD url (ex: google.com)\n\t\t\t\t\t'(//)?',  // *** Capturing group $5 for an optional protocol-relative URL. Must be at the beginning of the string or start with a non-word character (handled later)\n\t\t\t\t\tdomainNameRegex.source + '\\\\.',\n\t\t\t\t\ttldRegex.source,\n\t\t\t\t\t'(?![-' + alphaNumericCharsStr + '])', // TLD not followed by a letter, behaves like unicode-aware \\b\n\t\t\t\t')',\n\t\t\t')',\n\n\t\t\t'(?::[0-9]+)?', // port\n\n\t\t\t'(?:' + urlSuffixRegex.source + ')?'  // match for path, query string, and/or hash anchor - optional\n\t\t].join( \"\" ), 'gi' );\n\t} )(),\n\n\n\t/**\n\t * A regular expression to use to check the character before a protocol-relative\n\t * URL match. We don't want to match a protocol-relative URL if it is part\n\t * of another word.\n\t *\n\t * For example, we want to match something like \"Go to: //google.com\",\n\t * but we don't want to match something like \"abc//google.com\"\n\t *\n\t * This regular expression is used to test the character before the '//'.\n\t *\n\t * @private\n\t * @type {RegExp} wordCharRegExp\n\t */\n\twordCharRegExp : new RegExp( '[' + Autolinker.RegexLib.alphaNumericCharsStr + ']' ),\n\n\n\t/**\n\t * The regular expression to match opening parenthesis in a URL match.\n\t *\n\t * This is to determine if we have unbalanced parenthesis in the URL, and to\n\t * drop the final parenthesis that was matched if so.\n\t *\n\t * Ex: The text \"(check out: wikipedia.com/something_(disambiguation))\"\n\t * should only autolink the inner \"wikipedia.com/something_(disambiguation)\"\n\t * part, so if we find that we have unbalanced parenthesis, we will drop the\n\t * last one for the match.\n\t *\n\t * @private\n\t * @property {RegExp}\n\t */\n\topenParensRe : /\\(/g,\n\n\t/**\n\t * The regular expression to match closing parenthesis in a URL match. See\n\t * {@link #openParensRe} for more information.\n\t *\n\t * @private\n\t * @property {RegExp}\n\t */\n\tcloseParensRe : /\\)/g,\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match instance,\n\t *   specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.matcher.Matcher.prototype.constructor.call( this, cfg );\n\n\t\tif( cfg.stripPrefix == null ) throw new Error( '`stripPrefix` cfg required' );\n\t\tif( cfg.stripTrailingSlash == null ) throw new Error( '`stripTrailingSlash` cfg required' );\n\n\t\tthis.stripPrefix = cfg.stripPrefix;\n\t\tthis.stripTrailingSlash = cfg.stripTrailingSlash;\n\t},\n\n\n\t/**\n\t * @inheritdoc\n\t */\n\tparseMatches : function( text ) {\n\t\tvar matcherRegex = this.matcherRegex,\n\t\t    stripPrefix = this.stripPrefix,\n\t\t    stripTrailingSlash = this.stripTrailingSlash,\n\t\t    tagBuilder = this.tagBuilder,\n\t\t    matches = [],\n\t\t    match;\n\n\t\twhile( ( match = matcherRegex.exec( text ) ) !== null ) {\n\t\t\tvar matchStr = match[ 0 ],\n\t\t\t    schemeUrlMatch = match[ 1 ],\n\t\t\t    wwwUrlMatch = match[ 2 ],\n\t\t\t    wwwProtocolRelativeMatch = match[ 3 ],\n\t\t\t    //tldUrlMatch = match[ 4 ],  -- not needed at the moment\n\t\t\t    tldProtocolRelativeMatch = match[ 5 ],\n\t\t\t    offset = match.index,\n\t\t\t    protocolRelativeMatch = wwwProtocolRelativeMatch || tldProtocolRelativeMatch,\n\t\t\t\tprevChar = text.charAt( offset - 1 );\n\n\t\t\tif( !Autolinker.matcher.UrlMatchValidator.isValid( matchStr, schemeUrlMatch ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the match is preceded by an '@' character, then it is either\n\t\t\t// an email address or a username. Skip these types of matches.\n\t\t\tif( offset > 0 && prevChar === '@' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If it's a protocol-relative '//' match, but the character before the '//'\n\t\t\t// was a word character (i.e. a letter/number), then we found the '//' in the\n\t\t\t// middle of another word (such as \"asdf//asdf.com\"). In this case, skip the\n\t\t\t// match.\n\t\t\tif( offset > 0 && protocolRelativeMatch && this.wordCharRegExp.test( prevChar ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( /\\?$/.test(matchStr) ) {\n\t\t\t\tmatchStr = matchStr.substr(0, matchStr.length-1);\n\t\t\t}\n\n\t\t\t// Handle a closing parenthesis at the end of the match, and exclude\n\t\t\t// it if there is not a matching open parenthesis in the match\n\t\t\t// itself.\n\t\t\tif( this.matchHasUnbalancedClosingParen( matchStr ) ) {\n\t\t\t\tmatchStr = matchStr.substr( 0, matchStr.length - 1 );  // remove the trailing \")\"\n\t\t\t} else {\n\t\t\t\t// Handle an invalid character after the TLD\n\t\t\t\tvar pos = this.matchHasInvalidCharAfterTld( matchStr, schemeUrlMatch );\n\t\t\t\tif( pos > -1 ) {\n\t\t\t\t\tmatchStr = matchStr.substr( 0, pos ); // remove the trailing invalid chars\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar urlMatchType = schemeUrlMatch ? 'scheme' : ( wwwUrlMatch ? 'www' : 'tld' ),\n\t\t\t    protocolUrlMatch = !!schemeUrlMatch;\n\n\t\t\tmatches.push( new Autolinker.match.Url( {\n\t\t\t\ttagBuilder            : tagBuilder,\n\t\t\t\tmatchedText           : matchStr,\n\t\t\t\toffset                : offset,\n\t\t\t\turlMatchType          : urlMatchType,\n\t\t\t\turl                   : matchStr,\n\t\t\t\tprotocolUrlMatch      : protocolUrlMatch,\n\t\t\t\tprotocolRelativeMatch : !!protocolRelativeMatch,\n\t\t\t\tstripPrefix           : stripPrefix,\n\t\t\t\tstripTrailingSlash    : stripTrailingSlash\n\t\t\t} ) );\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\n\t/**\n\t * Determines if a match found has an unmatched closing parenthesis. If so,\n\t * this parenthesis will be removed from the match itself, and appended\n\t * after the generated anchor tag.\n\t *\n\t * A match may have an extra closing parenthesis at the end of the match\n\t * because the regular expression must include parenthesis for URLs such as\n\t * \"wikipedia.com/something_(disambiguation)\", which should be auto-linked.\n\t *\n\t * However, an extra parenthesis *will* be included when the URL itself is\n\t * wrapped in parenthesis, such as in the case of \"(wikipedia.com/something_(disambiguation))\".\n\t * In this case, the last closing parenthesis should *not* be part of the\n\t * URL itself, and this method will return `true`.\n\t *\n\t * @private\n\t * @param {String} matchStr The full match string from the {@link #matcherRegex}.\n\t * @return {Boolean} `true` if there is an unbalanced closing parenthesis at\n\t *   the end of the `matchStr`, `false` otherwise.\n\t */\n\tmatchHasUnbalancedClosingParen : function( matchStr ) {\n\t\tvar lastChar = matchStr.charAt( matchStr.length - 1 );\n\n\t\tif( lastChar === ')' ) {\n\t\t\tvar openParensMatch = matchStr.match( this.openParensRe ),\n\t\t\t    closeParensMatch = matchStr.match( this.closeParensRe ),\n\t\t\t    numOpenParens = ( openParensMatch && openParensMatch.length ) || 0,\n\t\t\t    numCloseParens = ( closeParensMatch && closeParensMatch.length ) || 0;\n\n\t\t\tif( numOpenParens < numCloseParens ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\n\t/**\n\t * Determine if there's an invalid character after the TLD in a URL. Valid\n\t * characters after TLD are ':/?#'. Exclude scheme matched URLs from this\n\t * check.\n\t *\n\t * @private\n\t * @param {String} urlMatch The matched URL, if there was one. Will be an\n\t *   empty string if the match is not a URL match.\n\t * @param {String} schemeUrlMatch The match URL string for a scheme\n\t *   match. Ex: 'http://yahoo.com'. This is used to match something like\n\t *   'http://localhost', where we won't double check that the domain name\n\t *   has at least one '.' in it.\n\t * @return {Number} the position where the invalid character was found. If\n\t *   no such character was found, returns -1\n\t */\n\tmatchHasInvalidCharAfterTld : function( urlMatch, schemeUrlMatch ) {\n\t\tif( !urlMatch ) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tvar offset = 0;\n\t\tif ( schemeUrlMatch ) {\n\t\t\toffset = urlMatch.indexOf(':');\n\t\t\turlMatch = urlMatch.slice(offset);\n\t\t}\n\n\t\tvar alphaNumeric = Autolinker.RegexLib.alphaNumericCharsStr;\n\n\t\tvar re = new RegExp(\"^((.?\\/\\/)?[-.\" + alphaNumeric + \"]*[-\" + alphaNumeric + \"]\\\\.[-\" + alphaNumeric + \"]+)\");\n\t\tvar res = re.exec( urlMatch );\n\t\tif ( res === null ) {\n\t\t\treturn -1;\n\t\t}\n\n\t\toffset += res[1].length;\n\t\turlMatch = urlMatch.slice(res[1].length);\n\t\tif (/^[^-.A-Za-z0-9:\\/?#]/.test(urlMatch)) {\n\t\t\treturn offset;\n\t\t}\n\n\t\treturn -1;\n\t}\n\n} );\n\n/*global Autolinker */\n/*jshint scripturl:true */\n/**\n * @private\n * @class Autolinker.matcher.UrlMatchValidator\n * @singleton\n *\n * Used by Autolinker to filter out false URL positives from the\n * {@link Autolinker.matcher.Url UrlMatcher}.\n *\n * Due to the limitations of regular expressions (including the missing feature\n * of look-behinds in JS regular expressions), we cannot always determine the\n * validity of a given match. This class applies a bit of additional logic to\n * filter out any false positives that have been matched by the\n * {@link Autolinker.matcher.Url UrlMatcher}.\n */\nAutolinker.matcher.UrlMatchValidator = {\n\n\t/**\n\t * Regex to test for a full protocol, with the two trailing slashes. Ex: 'http://'\n\t *\n\t * @private\n\t * @property {RegExp} hasFullProtocolRegex\n\t */\n\thasFullProtocolRegex : /^[A-Za-z][-.+A-Za-z0-9]*:\\/\\//,\n\n\t/**\n\t * Regex to find the URI scheme, such as 'mailto:'.\n\t *\n\t * This is used to filter out 'javascript:' and 'vbscript:' schemes.\n\t *\n\t * @private\n\t * @property {RegExp} uriSchemeRegex\n\t */\n\turiSchemeRegex : /^[A-Za-z][-.+A-Za-z0-9]*:/,\n\n\t/**\n\t * Regex to determine if at least one word char exists after the protocol (i.e. after the ':')\n\t *\n\t * @private\n\t * @property {RegExp} hasWordCharAfterProtocolRegex\n\t */\n\thasWordCharAfterProtocolRegex : new RegExp(\":[^\\\\s]*?[\" + Autolinker.RegexLib.alphaCharsStr + \"]\"),\n\n\t/**\n\t * Regex to determine if the string is a valid IP address\n\t *\n\t * @private\n\t * @property {RegExp} ipRegex\n\t */\n\tipRegex: /[0-9][0-9]?[0-9]?\\.[0-9][0-9]?[0-9]?\\.[0-9][0-9]?[0-9]?\\.[0-9][0-9]?[0-9]?(:[0-9]*)?\\/?$/,\n\n\t/**\n\t * Determines if a given URL match found by the {@link Autolinker.matcher.Url UrlMatcher}\n\t * is valid. Will return `false` for:\n\t *\n\t * 1) URL matches which do not have at least have one period ('.') in the\n\t *    domain name (effectively skipping over matches like \"abc:def\").\n\t *    However, URL matches with a protocol will be allowed (ex: 'http://localhost')\n\t * 2) URL matches which do not have at least one word character in the\n\t *    domain name (effectively skipping over matches like \"git:1.0\").\n\t * 3) A protocol-relative url match (a URL beginning with '//') whose\n\t *    previous character is a word character (effectively skipping over\n\t *    strings like \"abc//google.com\")\n\t *\n\t * Otherwise, returns `true`.\n\t *\n\t * @param {String} urlMatch The matched URL, if there was one. Will be an\n\t *   empty string if the match is not a URL match.\n\t * @param {String} protocolUrlMatch The match URL string for a protocol\n\t *   match. Ex: 'http://yahoo.com'. This is used to match something like\n\t *   'http://localhost', where we won't double check that the domain name\n\t *   has at least one '.' in it.\n\t * @return {Boolean} `true` if the match given is valid and should be\n\t *   processed, or `false` if the match is invalid and/or should just not be\n\t *   processed.\n\t */\n\tisValid : function( urlMatch, protocolUrlMatch ) {\n\t\tif(\n\t\t\t( protocolUrlMatch && !this.isValidUriScheme( protocolUrlMatch ) ) ||\n\t\t\tthis.urlMatchDoesNotHaveProtocolOrDot( urlMatch, protocolUrlMatch ) ||    // At least one period ('.') must exist in the URL match for us to consider it an actual URL, *unless* it was a full protocol match (like 'http://localhost')\n\t\t\t(this.urlMatchDoesNotHaveAtLeastOneWordChar( urlMatch, protocolUrlMatch ) && // At least one letter character must exist in the domain name after a protocol match. Ex: skip over something like \"git:1.0\"\n\t\t\t   !this.isValidIpAddress( urlMatch )) || // Except if it's an IP address\n\t\t\tthis.containsMultipleDots( urlMatch )\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\n\tisValidIpAddress : function ( uriSchemeMatch ) {\n\t\tvar newRegex = new RegExp(this.hasFullProtocolRegex.source + this.ipRegex.source);\n\t\tvar uriScheme = uriSchemeMatch.match( newRegex );\n\n\t\treturn uriScheme !== null;\n\t},\n\n\tcontainsMultipleDots : function ( urlMatch ) {\n\t\treturn urlMatch.indexOf(\"..\") > -1;\n\t},\n\n\t/**\n\t * Determines if the URI scheme is a valid scheme to be autolinked. Returns\n\t * `false` if the scheme is 'javascript:' or 'vbscript:'\n\t *\n\t * @private\n\t * @param {String} uriSchemeMatch The match URL string for a full URI scheme\n\t *   match. Ex: 'http://yahoo.com' or 'mailto:a@a.com'.\n\t * @return {Boolean} `true` if the scheme is a valid one, `false` otherwise.\n\t */\n\tisValidUriScheme : function( uriSchemeMatch ) {\n\t\tvar uriScheme = uriSchemeMatch.match( this.uriSchemeRegex )[ 0 ].toLowerCase();\n\n\t\treturn ( uriScheme !== 'javascript:' && uriScheme !== 'vbscript:' );\n\t},\n\n\n\t/**\n\t * Determines if a URL match does not have either:\n\t *\n\t * a) a full protocol (i.e. 'http://'), or\n\t * b) at least one dot ('.') in the domain name (for a non-full-protocol\n\t *    match).\n\t *\n\t * Either situation is considered an invalid URL (ex: 'git:d' does not have\n\t * either the '://' part, or at least one dot in the domain name. If the\n\t * match was 'git:abc.com', we would consider this valid.)\n\t *\n\t * @private\n\t * @param {String} urlMatch The matched URL, if there was one. Will be an\n\t *   empty string if the match is not a URL match.\n\t * @param {String} protocolUrlMatch The match URL string for a protocol\n\t *   match. Ex: 'http://yahoo.com'. This is used to match something like\n\t *   'http://localhost', where we won't double check that the domain name\n\t *   has at least one '.' in it.\n\t * @return {Boolean} `true` if the URL match does not have a full protocol,\n\t *   or at least one dot ('.') in a non-full-protocol match.\n\t */\n\turlMatchDoesNotHaveProtocolOrDot : function( urlMatch, protocolUrlMatch ) {\n\t\treturn ( !!urlMatch && ( !protocolUrlMatch || !this.hasFullProtocolRegex.test( protocolUrlMatch ) ) && urlMatch.indexOf( '.' ) === -1 );\n\t},\n\n\n\t/**\n\t * Determines if a URL match does not have at least one word character after\n\t * the protocol (i.e. in the domain name).\n\t *\n\t * At least one letter character must exist in the domain name after a\n\t * protocol match. Ex: skip over something like \"git:1.0\"\n\t *\n\t * @private\n\t * @param {String} urlMatch The matched URL, if there was one. Will be an\n\t *   empty string if the match is not a URL match.\n\t * @param {String} protocolUrlMatch The match URL string for a protocol\n\t *   match. Ex: 'http://yahoo.com'. This is used to know whether or not we\n\t *   have a protocol in the URL string, in order to check for a word\n\t *   character after the protocol separator (':').\n\t * @return {Boolean} `true` if the URL match does not have at least one word\n\t *   character in it after the protocol, `false` otherwise.\n\t */\n\turlMatchDoesNotHaveAtLeastOneWordChar : function( urlMatch, protocolUrlMatch ) {\n\t\tif( urlMatch && protocolUrlMatch ) {\n\t\t\treturn !this.hasWordCharAfterProtocolRegex.test( urlMatch );\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n};\n\n/*global Autolinker */\n/**\n * A truncation feature where the ellipsis will be placed at the end of the URL.\n *\n * @param {String} anchorText\n * @param {Number} truncateLen The maximum length of the truncated output URL string.\n * @param {String} ellipsisChars The characters to place within the url, e.g. \"..\".\n * @return {String} The truncated URL.\n */\nAutolinker.truncate.TruncateEnd = function(anchorText, truncateLen, ellipsisChars){\n\treturn Autolinker.Util.ellipsis( anchorText, truncateLen, ellipsisChars );\n};\n\n/*global Autolinker */\n/**\n * Date: 2015-10-05\n * Author: Kasper Søfren <soefritz@gmail.com> (https://github.com/kafoso)\n *\n * A truncation feature, where the ellipsis will be placed in the dead-center of the URL.\n *\n * @param {String} url             A URL.\n * @param {Number} truncateLen     The maximum length of the truncated output URL string.\n * @param {String} ellipsisChars   The characters to place within the url, e.g. \"..\".\n * @return {String} The truncated URL.\n */\nAutolinker.truncate.TruncateMiddle = function(url, truncateLen, ellipsisChars){\n  if (url.length <= truncateLen) {\n    return url;\n  }\n\n  var ellipsisLengthBeforeParsing;\n  var ellipsisLength;\n\n  if(ellipsisChars == null) {\n    ellipsisChars = '&hellip;';\n    ellipsisLengthBeforeParsing = 8;\n    ellipsisLength = 3;\n  } else {\n    ellipsisLengthBeforeParsing = ellipsisChars.length;\n    ellipsisLength = ellipsisChars.length;\n  }\n\n  var availableLength = truncateLen - ellipsisLength;\n  var end = \"\";\n  if (availableLength > 0) {\n    end = url.substr((-1)*Math.floor(availableLength/2));\n  }\n  return (url.substr(0, Math.ceil(availableLength/2)) + ellipsisChars + end).substr(0, availableLength + ellipsisLengthBeforeParsing);\n};\n\n/*global Autolinker */\n/**\n * Date: 2015-10-05\n * Author: Kasper Søfren <soefritz@gmail.com> (https://github.com/kafoso)\n *\n * A truncation feature, where the ellipsis will be placed at a section within\n * the URL making it still somewhat human readable.\n *\n * @param {String} url\t\t\t\t\t\t A URL.\n * @param {Number} truncateLen\t\t The maximum length of the truncated output URL string.\n * @param {String} ellipsisChars\t The characters to place within the url, e.g. \"...\".\n * @return {String} The truncated URL.\n */\nAutolinker.truncate.TruncateSmart = function(url, truncateLen, ellipsisChars){\n\n\tvar ellipsisLengthBeforeParsing;\n\tvar ellipsisLength;\n\n\tif(ellipsisChars == null) {\n\t\tellipsisChars = '&hellip;';\n\t\tellipsisLength = 3;\n\t\tellipsisLengthBeforeParsing = 8;\n\t} else {\n\t\tellipsisLength = ellipsisChars.length;\n\t\tellipsisLengthBeforeParsing = ellipsisChars.length;\n\t}\n\n\tvar parse_url = function(url){ // Functionality inspired by PHP function of same name\n\t\tvar urlObj = {};\n\t\tvar urlSub = url;\n\t\tvar match = urlSub.match(/^([a-z]+):\\/\\//i);\n\t\tif (match) {\n\t\t\turlObj.scheme = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^(.*?)(?=(\\?|#|\\/|$))/i);\n\t\tif (match) {\n\t\t\turlObj.host = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^\\/(.*?)(?=(\\?|#|$))/i);\n\t\tif (match) {\n\t\t\turlObj.path = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^\\?(.*?)(?=(#|$))/i);\n\t\tif (match) {\n\t\t\turlObj.query = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^#(.*?)$/i);\n\t\tif (match) {\n\t\t\turlObj.fragment = match[1];\n\t\t\t//urlSub = urlSub.substr(match[0].length);  -- not used. Uncomment if adding another block.\n\t\t}\n\t\treturn urlObj;\n\t};\n\n\tvar buildUrl = function(urlObj){\n\t\tvar url = \"\";\n\t\tif (urlObj.scheme && urlObj.host) {\n\t\t\turl += urlObj.scheme + \"://\";\n\t\t}\n\t\tif (urlObj.host) {\n\t\t\turl += urlObj.host;\n\t\t}\n\t\tif (urlObj.path) {\n\t\t\turl += \"/\" + urlObj.path;\n\t\t}\n\t\tif (urlObj.query) {\n\t\t\turl += \"?\" + urlObj.query;\n\t\t}\n\t\tif (urlObj.fragment) {\n\t\t\turl += \"#\" + urlObj.fragment;\n\t\t}\n\t\treturn url;\n\t};\n\n\tvar buildSegment = function(segment, remainingAvailableLength){\n\t\tvar remainingAvailableLengthHalf = remainingAvailableLength/ 2,\n\t\t\t\tstartOffset = Math.ceil(remainingAvailableLengthHalf),\n\t\t\t\tendOffset = (-1)*Math.floor(remainingAvailableLengthHalf),\n\t\t\t\tend = \"\";\n\t\tif (endOffset < 0) {\n\t\t\tend = segment.substr(endOffset);\n\t\t}\n\t\treturn segment.substr(0, startOffset) + ellipsisChars + end;\n\t};\n\tif (url.length <= truncateLen) {\n\t\treturn url;\n\t}\n\tvar availableLength = truncateLen - ellipsisLength;\n\tvar urlObj = parse_url(url);\n\t// Clean up the URL\n\tif (urlObj.query) {\n\t\tvar matchQuery = urlObj.query.match(/^(.*?)(?=(\\?|\\#))(.*?)$/i);\n\t\tif (matchQuery) {\n\t\t\t// Malformed URL; two or more \"?\". Removed any content behind the 2nd.\n\t\t\turlObj.query = urlObj.query.substr(0, matchQuery[1].length);\n\t\t\turl = buildUrl(urlObj);\n\t\t}\n\t}\n\tif (url.length <= truncateLen) {\n\t\treturn url;\n\t}\n\tif (urlObj.host) {\n\t\turlObj.host = urlObj.host.replace(/^www\\./, \"\");\n\t\turl = buildUrl(urlObj);\n\t}\n\tif (url.length <= truncateLen) {\n\t\treturn url;\n\t}\n\t// Process and build the URL\n\tvar str = \"\";\n\tif (urlObj.host) {\n\t\tstr += urlObj.host;\n\t}\n\tif (str.length >= availableLength) {\n\t\tif (urlObj.host.length == truncateLen) {\n\t\t\treturn (urlObj.host.substr(0, (truncateLen - ellipsisLength)) + ellipsisChars).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t\t}\n\t\treturn buildSegment(str, availableLength).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t}\n\tvar pathAndQuery = \"\";\n\tif (urlObj.path) {\n\t\tpathAndQuery += \"/\" + urlObj.path;\n\t}\n\tif (urlObj.query) {\n\t\tpathAndQuery += \"?\" + urlObj.query;\n\t}\n\tif (pathAndQuery) {\n\t\tif ((str+pathAndQuery).length >= availableLength) {\n\t\t\tif ((str+pathAndQuery).length == truncateLen) {\n\t\t\t\treturn (str + pathAndQuery).substr(0, truncateLen);\n\t\t\t}\n\t\t\tvar remainingAvailableLength = availableLength - str.length;\n\t\t\treturn (str + buildSegment(pathAndQuery, remainingAvailableLength)).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t\t} else {\n\t\t\tstr += pathAndQuery;\n\t\t}\n\t}\n\tif (urlObj.fragment) {\n\t\tvar fragment = \"#\"+urlObj.fragment;\n\t\tif ((str+fragment).length >= availableLength) {\n\t\t\tif ((str+fragment).length == truncateLen) {\n\t\t\t\treturn (str + fragment).substr(0, truncateLen);\n\t\t\t}\n\t\t\tvar remainingAvailableLength2 = availableLength - str.length;\n\t\t\treturn (str + buildSegment(fragment, remainingAvailableLength2)).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t\t} else {\n\t\t\tstr += fragment;\n\t\t}\n\t}\n\tif (urlObj.scheme && urlObj.host) {\n\t\tvar scheme = urlObj.scheme + \"://\";\n\t\tif ((str+scheme).length < availableLength) {\n\t\t\treturn (scheme + str).substr(0, truncateLen);\n\t\t}\n\t}\n\tif (str.length <= truncateLen) {\n\t\treturn str;\n\t}\n\tvar end = \"\";\n\tif (availableLength > 0) {\n\t\tend = str.substr((-1)*Math.floor(availableLength/2));\n\t}\n\treturn (str.substr(0, Math.ceil(availableLength/2)) + ellipsisChars + end).substr(0, availableLength + ellipsisLengthBeforeParsing);\n};\n\nreturn Autolinker;\n}));\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = function (str) {\n\tvar tail = str.length;\n\n\twhile (/[\\s\\uFEFF\\u00A0]/.test(str[tail - 1])) {\n\t\ttail--;\n\t}\n\n\treturn str.slice(0, tail);\n};\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _PostingLayout = __webpack_require__(12);\n\nvar _PostingLayout2 = _interopRequireDefault(_PostingLayout);\n\nvar _helpers = __webpack_require__(2);\n\nvar _PostingAuthor = __webpack_require__(17);\n\nvar _PostingAuthor2 = _interopRequireDefault(_PostingAuthor);\n\nvar _Actions = __webpack_require__(6);\n\nvar _ActivityDate = __webpack_require__(13);\n\nvar _ActivityDate2 = _interopRequireDefault(_ActivityDate);\n\nvar _Topics = __webpack_require__(21);\n\nvar _Topics2 = _interopRequireDefault(_Topics);\n\nvar _ActivityText = __webpack_require__(14);\n\nvar _ActivityText2 = _interopRequireDefault(_ActivityText);\n\nvar _FileViewer = __webpack_require__(15);\n\nvar _FileViewer2 = _interopRequireDefault(_FileViewer);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: UserPosting.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar UserPosting = function (_React$Component) {\n    _inherits(UserPosting, _React$Component);\n\n    function UserPosting() {\n        _classCallCheck(this, UserPosting);\n\n        return _possibleConstructorReturn(this, (UserPosting.__proto__ || Object.getPrototypeOf(UserPosting)).apply(this, arguments));\n    }\n\n    _createClass(UserPosting, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                posting = _props.posting,\n                onComment = _props.onComment,\n                assignTopics = _props.assignTopics,\n                className = _props.className,\n                others = _objectWithoutProperties(_props, ['posting', 'onComment', 'assignTopics', 'className']);\n\n            var topics = (0, _Topics2.default)(posting);\n            return _react2.default.createElement(\n                _PostingLayout2.default,\n                _extends({}, others, {\n                    posting: posting,\n                    className: (0, _csWebComponentsExternals.classNames)(className, (0, _helpers.prefixNS)('user-posting')) }),\n                _react2.default.createElement(\n                    _PostingLayout2.default.Title,\n                    null,\n                    _react2.default.createElement(_PostingAuthor2.default, { posting: posting })\n                ),\n                _react2.default.createElement(\n                    _PostingLayout2.default.Nav,\n                    null,\n                    _react2.default.createElement(_ActivityDate2.default, { activityEntry: posting, className: 'text-muted' }),\n                    topics,\n                    _react2.default.createElement(_Actions.AssignTopics, { activityEntry: posting,\n                        assignTopics: assignTopics })\n                ),\n                _react2.default.createElement(_ActivityText2.default, { activityEntry: posting }),\n                _react2.default.createElement(_FileViewer2.default, { activityEntry: posting }),\n                _react2.default.createElement(\n                    _PostingLayout2.default.Footer,\n                    { activityEntry: posting },\n                    _react2.default.createElement(_Actions.Comment, { onClick: onComment }),\n                    _react2.default.createElement(_Actions.Share, { activityEntry: posting })\n                ),\n                this.props.children\n            );\n        }\n    }]);\n\n    return UserPosting;\n}(_react2.default.Component);\n\nexports.default = UserPosting;\n\n\nUserPosting.propTypes = {\n    posting: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    onComment: _csWebComponentsExternals.PropTypes.func,\n    assignTopics: _csWebComponentsExternals.PropTypes.func,\n    className: _csWebComponentsExternals.PropTypes.string\n};\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.findCommentToPosting = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(41);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _i18n = __webpack_require__(5);\n\nvar _helpers = __webpack_require__(2);\n\nvar _Comment = __webpack_require__(42);\n\nvar _Comment2 = _interopRequireDefault(_Comment);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: Comments.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar INITCOMMENTSCOUNT = 3;\nvar findComment = function findComment(comments, id) {\n    return comments.find(function (comment) {\n        return comment.get('@id') === id;\n    });\n};\n\nvar findCommentToPosting = exports.findCommentToPosting = function findCommentToPosting(posting, cID) {\n    return findComment(posting.getIn(['comments', 'comments']), cID);\n};\n\nvar Comments = function (_React$Component) {\n    _inherits(Comments, _React$Component);\n\n    function Comments(props) {\n        _classCallCheck(this, Comments);\n\n        var _this = _possibleConstructorReturn(this, (Comments.__proto__ || Object.getPrototypeOf(Comments)).call(this, props));\n\n        _this.state = {\n            showAll: false\n        };\n        _this.showMore = _this.showMore.bind(_this);\n        _this.scrollToTarget = _this.scrollToTarget.bind(_this);\n        _this._comments = {};\n        return _this;\n    }\n\n    _createClass(Comments, [{\n        key: 'showMore',\n        value: function showMore() {\n            this.setState({\n                showAll: true\n            });\n        }\n    }, {\n        key: 'scrollToTarget',\n        value: function scrollToTarget(comment) {\n            var _this2 = this;\n\n            var comp = this._comments[comment.get('cdb_object_id')];\n            if (comp) {\n                var el = _reactDom2.default.findDOMNode(comp); // eslint-disable-line react/no-find-dom-node\n                el.scrollIntoView(true);\n            } else if (!this.state.showAll) {\n                this.setState({ showAll: true }, function () {\n                    return _this2.scrollToTarget(comment);\n                });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this3 = this;\n\n            var _props = this.props,\n                posting = _props.posting,\n                onComment = _props.onComment,\n                instanceName = _props.instanceName;\n\n            var comments = posting.getIn(['comments', 'comments']);\n            var commentsAmount = comments.count() ? comments.count() : 0;\n            var showAll = commentsAmount <= INITCOMMENTSCOUNT || this.state.showAll ? null : _react2.default.createElement(_csWebComponentsBase.Button.TextButton, {\n                className: (0, _helpers.prefixNS)('show-all-comments'),\n                buttonStyle: 'link',\n                onClick: this.showMore,\n                label: (0, _i18n.formatStr)('show-all-comments', { commentsAmount: commentsAmount }) });\n            var showing = this.state.showAll ? comments : comments.takeLast(INITCOMMENTSCOUNT);\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('comments') },\n                showAll,\n                showing.map(function (comment) {\n                    return _react2.default.createElement(_Comment2.default, { key: comment.get('cdb_object_id'),\n                        instanceName: instanceName,\n                        posting: posting,\n                        comment: comment,\n                        replyTo: findComment(comments, comment.get('reply_to')),\n                        onComment: onComment,\n                        ref: function ref(c) {\n                            return _this3._comments[comment.get('cdb_object_id')] = c;\n                        },\n                        scrollToTarget: _this3.scrollToTarget });\n                })\n            );\n        }\n    }]);\n\n    return Comments;\n}(_react2.default.Component);\n\nexports.default = Comments;\n\n\nComments.propTypes = {\n    instanceName: _csWebComponentsExternals.PropTypes.string.isRequired,\n    posting: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    onComment: _csWebComponentsExternals.PropTypes.func\n};\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_41__;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(16);\n\nvar _i18n = __webpack_require__(5);\n\nvar _helpers = __webpack_require__(2);\n\nvar _PostingLayout = __webpack_require__(12);\n\nvar _PostingLayout2 = _interopRequireDefault(_PostingLayout);\n\nvar _PostingAuthor = __webpack_require__(17);\n\nvar _PostingAuthor2 = _interopRequireDefault(_PostingAuthor);\n\nvar _ActivityText = __webpack_require__(14);\n\nvar _ActivityText2 = _interopRequireDefault(_ActivityText);\n\nvar _Actions = __webpack_require__(6);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _ActivityDate = __webpack_require__(13);\n\nvar _ActivityDate2 = _interopRequireDefault(_ActivityDate);\n\nvar _FileViewer = __webpack_require__(15);\n\nvar _FileViewer2 = _interopRequireDefault(_FileViewer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: Comment.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar ReplyToTitle = function (_React$Component) {\n    _inherits(ReplyToTitle, _React$Component);\n\n    function ReplyToTitle(props) {\n        _classCallCheck(this, ReplyToTitle);\n\n        var _this = _possibleConstructorReturn(this, (ReplyToTitle.__proto__ || Object.getPrototypeOf(ReplyToTitle)).call(this, props));\n\n        _this.state = {\n            showReplyTo: false\n        };\n        _this.showTarget = _this.showTarget.bind(_this);\n        _this.hideTarget = _this.hideTarget.bind(_this);\n        _this.navigateToTarget = _this.navigateToTarget.bind(_this);\n        _this._replyTarget = null;\n        return _this;\n    }\n\n    _createClass(ReplyToTitle, [{\n        key: 'showTarget',\n        value: function showTarget() {\n            this.setState({\n                showReplyTo: true\n            });\n        }\n    }, {\n        key: 'hideTarget',\n        value: function hideTarget() {\n            this.setState({\n                showReplyTo: false\n            });\n        }\n    }, {\n        key: 'navigateToTarget',\n        value: function navigateToTarget(event) {\n            event.preventDefault();\n            var _props = this.props,\n                replyTo = _props.replyTo,\n                scrollToTarget = _props.scrollToTarget;\n\n            if (scrollToTarget) {\n                scrollToTarget(replyTo);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props2 = this.props,\n                replyTo = _props2.replyTo,\n                comment = _props2.comment;\n\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('comment-reply-to') },\n                _react2.default.createElement(_PostingAuthor2.default, { posting: comment }),\n                _react2.default.createElement(\n                    'span',\n                    null,\n                    ':'\n                ),\n                _react2.default.createElement(\n                    'span',\n                    { className: (0, _helpers.prefixNS)('comment-reply-to-label') },\n                    (0, _i18n.formatStr)('answer-to')\n                ),\n                _react2.default.createElement(\n                    'a',\n                    { onMouseOver: this.showTarget,\n                        onMouseOut: this.hideTarget,\n                        ref: function ref(c) {\n                            return _this2._replyTarget = c;\n                        },\n                        href: '#',\n                        onClick: this.navigateToTarget },\n                    replyTo.getIn(['author', 'name'])\n                ),\n                _react2.default.createElement(\n                    _reactBootstrap.Overlay,\n                    { placement: 'top',\n                        show: this.state.showReplyTo,\n                        target: this._replyTarget },\n                    _react2.default.createElement(\n                        _reactBootstrap.Popover,\n                        { id: 'replyToText-' + replyTo.get('cdb_object_id') },\n                        _react2.default.createElement(_ActivityText2.default, { activityEntry: replyTo })\n                    )\n                )\n            );\n        }\n    }]);\n\n    return ReplyToTitle;\n}(_react2.default.Component);\n\nReplyToTitle.propTypes = {\n    comment: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    replyTo: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    scrollToTarget: _csWebComponentsExternals.PropTypes.func\n};\n\nvar Comment = function (_React$Component2) {\n    _inherits(Comment, _React$Component2);\n\n    function Comment(props) {\n        _classCallCheck(this, Comment);\n\n        var _this3 = _possibleConstructorReturn(this, (Comment.__proto__ || Object.getPrototypeOf(Comment)).call(this, props));\n\n        _this3.onComment = _this3.onComment.bind(_this3);\n        return _this3;\n    }\n\n    _createClass(Comment, [{\n        key: 'onComment',\n        value: function onComment() {\n            this.props.onComment(this.props.comment);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props3 = this.props,\n                posting = _props3.posting,\n                comment = _props3.comment,\n                replyTo = _props3.replyTo,\n                scrollToTarget = _props3.scrollToTarget,\n                others = _objectWithoutProperties(_props3, ['posting', 'comment', 'replyTo', 'scrollToTarget']);\n\n            delete others.onComment;\n            return _react2.default.createElement(\n                _PostingLayout2.default,\n                _extends({}, others, {\n                    className: (0, _helpers.prefixNS)('comment'),\n                    posting: comment }),\n                _react2.default.createElement(\n                    _PostingLayout2.default.Title,\n                    null,\n                    replyTo === undefined ? _react2.default.createElement(_PostingAuthor2.default, { posting: comment }) : _react2.default.createElement(ReplyToTitle, { comment: comment,\n                        replyTo: replyTo,\n                        scrollToTarget: scrollToTarget })\n                ),\n                _react2.default.createElement(\n                    _PostingLayout2.default.Nav,\n                    null,\n                    _react2.default.createElement(_ActivityDate2.default, { activityEntry: comment, className: 'text-muted' })\n                ),\n                _react2.default.createElement(_ActivityText2.default, { activityEntry: comment }),\n                _react2.default.createElement(_FileViewer2.default, { activityEntry: comment,\n                    reloadEntry: false,\n                    onSubmit: this.onUpload }),\n                _react2.default.createElement(\n                    _PostingLayout2.default.Footer,\n                    { activityEntry: comment },\n                    _react2.default.createElement(_Actions.Comment, { onClick: this.onComment }),\n                    _react2.default.createElement(_Actions.Share, { activityEntry: posting })\n                )\n            );\n        }\n    }]);\n\n    return Comment;\n}(_react2.default.Component);\n\nexports.default = Comment;\n\n\nComment.propTypes = {\n    posting: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    comment: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired,\n    replyTo: _csWebComponentsExternals.ImmutablePropTypes.map,\n    onComment: _csWebComponentsExternals.PropTypes.func,\n    scrollToTarget: _csWebComponentsExternals.PropTypes.func\n};\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.PostingLoader = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _PageLayout = __webpack_require__(18);\n\nvar _PageLayout2 = _interopRequireDefault(_PageLayout);\n\nvar _Posting = __webpack_require__(20);\n\nvar _Posting2 = _interopRequireDefault(_Posting);\n\nvar _actions = __webpack_require__(8);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _constants = __webpack_require__(7);\n\nvar _helpers = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: Thread.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar PostingLoader = exports.PostingLoader = function (_React$Component) {\n    _inherits(PostingLoader, _React$Component);\n\n    function PostingLoader() {\n        _classCallCheck(this, PostingLoader);\n\n        return _possibleConstructorReturn(this, (PostingLoader.__proto__ || Object.getPrototypeOf(PostingLoader)).apply(this, arguments));\n    }\n\n    _createClass(PostingLoader, [{\n        key: 'fetchPosting',\n        value: function fetchPosting(props) {\n            var postingID = props.match.params.postingID;\n            if (postingID) {\n                props.fetchPosting(postingID);\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.fetchPosting(this.props);\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.match.params.postingID !== this.props.match.params.postingID) {\n                this.fetchPosting(nextProps);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                posting = _props.posting,\n                location = _props.location;\n\n            if (!posting) {\n                return null;\n            }\n            return _react2.default.createElement(\n                _PageLayout2.default,\n                { location: location, noSidebar: true },\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _helpers.prefixNS)('thread') },\n                    _react2.default.createElement(_Posting2.default, { posting: posting, instanceName: _constants.STANDALONE_INSTANCE })\n                )\n            );\n        }\n    }]);\n\n    return PostingLoader;\n}(_react2.default.Component);\n\nfunction mapStateToProps(state, ownProps) {\n    var postingID = ownProps.match.params.postingID;\n    var posting = (0, _helpers.getReferencedPostings)(state, (0, _helpers.getPostingURL)(postingID));\n    return { posting: posting };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchPosting: function fetchPosting(postingID) {\n            var url = (0, _helpers.getPostingURL)(postingID);\n            dispatch((0, _actions.fetchPosting)(url));\n        }\n    };\n}\n\nPostingLoader.propTypes = {\n    match: _csWebComponentsExternals.PropTypes.object,\n    location: _csWebComponentsExternals.PropTypes.object,\n    fetchPosting: _csWebComponentsExternals.PropTypes.func,\n    posting: _csWebComponentsExternals.ImmutablePropTypes.map\n};\n\nexports.default = (0, _csWebComponentsExternals.connect)(mapStateToProps, mapDispatchToProps)(PostingLoader);\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _ObjectPostings = __webpack_require__(23);\n\nvar _ObjectPostings2 = _interopRequireDefault(_ObjectPostings);\n\nvar _Actions = __webpack_require__(6);\n\nvar _helpers = __webpack_require__(2);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: ObjectActivities.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar ObjectActivities = function (_React$Component) {\n    _inherits(ObjectActivities, _React$Component);\n\n    function ObjectActivities(props) {\n        _classCallCheck(this, ObjectActivities);\n\n        var _this = _possibleConstructorReturn(this, (ObjectActivities.__proto__ || Object.getPrototypeOf(ObjectActivities)).call(this, props));\n\n        _this.state = {\n            filter: _immutable2.default.Map()\n        };\n        _this.toggleSystemPostings = _this.toggleSystemPostings.bind(_this);\n        return _this;\n    }\n\n    _createClass(ObjectActivities, [{\n        key: 'toggleSystemPostings',\n        value: function toggleSystemPostings() {\n            var prev = this.state.filter.get('systemposting');\n            this.setState({\n                filter: this.state.filter.set('systemposting', _Actions.SystemPostingFilter.toggleFilterState(prev))\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                instanceName = _props.instanceName,\n                contextObject = _props.contextObject;\n\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _helpers.prefixNS)('object-activities') },\n                _react2.default.createElement(_Actions.SystemPostingFilter, {\n                    filterState: this.state.filter.get('systemposting'),\n                    onChange: this.toggleSystemPostings }),\n                _react2.default.createElement(_ObjectPostings2.default, { instanceName: instanceName,\n                    contextObject: contextObject,\n                    filter: this.state.filter })\n            );\n        }\n    }]);\n\n    return ObjectActivities;\n}(_react2.default.Component);\n\nObjectActivities.propTypes = {\n    instanceName: _csWebComponentsExternals.PropTypes.string.isRequired,\n    contextObject: _csWebComponentsExternals.ImmutablePropTypes.map\n};\n\nexports.default = ObjectActivities;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _ObjectPostings = __webpack_require__(23);\n\nvar _ObjectPostings2 = _interopRequireDefault(_ObjectPostings);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _helpers = __webpack_require__(2);\n\nvar _i18n = __webpack_require__(5);\n\nvar _Actions = __webpack_require__(6);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2016 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: ObjectActivitiesBlock.jsx 162449 2017-07-31 13:08:43Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar ObjectPostingsBlock = function (_React$Component) {\n    _inherits(ObjectPostingsBlock, _React$Component);\n\n    function ObjectPostingsBlock(props) {\n        _classCallCheck(this, ObjectPostingsBlock);\n\n        var _this = _possibleConstructorReturn(this, (ObjectPostingsBlock.__proto__ || Object.getPrototypeOf(ObjectPostingsBlock)).call(this, props));\n\n        _this.state = {\n            filter: _immutable2.default.Map()\n        };\n        _this.toggleSystemPostings = _this.toggleSystemPostings.bind(_this);\n        return _this;\n    }\n\n    _createClass(ObjectPostingsBlock, [{\n        key: 'toggleSystemPostings',\n        value: function toggleSystemPostings() {\n            var _this2 = this;\n\n            var prev = this.state.filter.get('systemposting');\n            // workaround to https://github.com/facebook/react/issues/3005\n            // event.preventDefault() in ContentBlock.Header also prevents visually\n            // updating the checkbox, so use setTimeout to bypass that.\n            window.setTimeout(function (newState) {\n                _this2.setState(newState);\n            }, 0, {\n                filter: this.state.filter.set('systemposting', _Actions.SystemPostingFilter.toggleFilterState(prev))\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                instanceName = _props.instanceName,\n                contextObject = _props.contextObject,\n                others = _objectWithoutProperties(_props, ['instanceName', 'contextObject']);\n\n            return _react2.default.createElement(\n                _csWebComponentsBase.ContentBlock,\n                _extends({ title: (0, _i18n.formatStr)('activities')\n                }, others, {\n                    className: (0, _helpers.prefixNS)('object-activities-block') }),\n                _react2.default.createElement(\n                    _csWebComponentsBase.ContentBlock.Header,\n                    null,\n                    _react2.default.createElement(_Actions.SystemPostingFilter, {\n                        filterState: this.state.filter.get('systemposting'),\n                        onChange: this.toggleSystemPostings })\n                ),\n                _react2.default.createElement(\n                    _csWebComponentsBase.ContentBlock.Body,\n                    null,\n                    _react2.default.createElement(_ObjectPostings2.default, { instanceName: instanceName,\n                        contextObject: contextObject,\n                        filter: this.state.filter })\n                )\n            );\n        }\n    }]);\n\n    return ObjectPostingsBlock;\n}(_react2.default.Component);\n\nexports.default = ObjectPostingsBlock;\n\n\nObjectPostingsBlock.propTypes = {\n    instanceName: _csWebComponentsExternals.PropTypes.string.isRequired,\n    contextObject: _csWebComponentsExternals.ImmutablePropTypes.map\n};\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _immutable = __webpack_require__(4);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _csWebComponentsExternals = __webpack_require__(1);\n\nvar _csWebComponentsBase = __webpack_require__(3);\n\nvar _csWebDashboard = __webpack_require__(47);\n\nvar _csWebDashboard2 = _interopRequireDefault(_csWebDashboard);\n\nvar _i18n = __webpack_require__(5);\n\nvar _PostingList = __webpack_require__(9);\n\nvar _PostingList2 = _interopRequireDefault(_PostingList);\n\nvar _helpers = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2017 CONTACT Software GmbH\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * http://www.contact-software.com\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Revision \"$Id: DashboardWidget.jsx 168124 2017-11-09 11:30:40Z yzh $\"\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar counter = 0;\n\nvar DashboardWidget = function (_React$Component) {\n    _inherits(DashboardWidget, _React$Component);\n\n    function DashboardWidget(props) {\n        _classCallCheck(this, DashboardWidget);\n\n        var _this = _possibleConstructorReturn(this, (DashboardWidget.__proto__ || Object.getPrototypeOf(DashboardWidget)).call(this, props));\n\n        counter++;\n        _this.instanceName = 'as_widget_instance' + counter;\n        _this.dataURL = (0, _csWebComponentsBase.getAppSetup)().getIn(['cs-activitystream-web', 'dataURL']);\n        _this.state = {\n            postingFilter: _immutable2.default.fromJS({\n                systemposting: 'off'\n            })\n        };\n        return _this;\n    }\n\n    _createClass(DashboardWidget, [{\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(\n                _csWebDashboard2.default.DashboardItem,\n                {\n                    item: this.props.item,\n                    title: (0, _i18n.formatStr)('activities') },\n                _react2.default.createElement(_PostingList2.default, {\n                    className: (0, _helpers.prefixNS)('dashboard-widget'),\n                    instanceName: this.instanceName,\n                    initDataURL: this.dataURL,\n                    filter: this.state.postingFilter })\n            );\n        }\n    }]);\n\n    return DashboardWidget;\n}(_react2.default.Component);\n\nexports.default = DashboardWidget;\n\nDashboardWidget.propTypes = {\n    item: _csWebComponentsExternals.ImmutablePropTypes.map.isRequired\n};\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_47__;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// cs-activitystream-web.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5d5a4a24ad7719d13070","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 0\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cs-web-components-externals\"\n// module id = 1\n// module chunks = 0","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: helpers.js 168151 2017-11-09 14:47:33Z yzh $\"\r\n */\r\n\r\nimport moment from 'moment';\r\nimport {getLocalPathForURL, getAppSetup} from 'cs-web-components-base';\r\nimport {TOPIC_LINK} from './constants';\r\nimport Immutable from 'immutable';\r\n\r\nexport const APPBASE = getAppSetup().getIn(['appSettings', 'basePath']);\r\n\r\nexport function prefixNS(name) {\r\n    return `${componentNameSpace}-${name}`;\r\n}\r\n\r\nexport function getReferencedPostings(state, oids) {\r\n    if (oids === undefined) {\r\n        return undefined;\r\n    }\r\n    if (typeof oids === 'string') {\r\n        return state.objectsById.get(oids);\r\n    }\r\n    const result = oids\r\n        .map(ref => state.objectsById.get(ref))\r\n        .filter(obj => obj !== undefined);\r\n    return result;\r\n}\r\n\r\nexport function formatDate(dateStr) {\r\n    return moment(dateStr, moment.ISO_8601).calendar();\r\n}\r\n\r\nexport function getPostingURL(postingID) {\r\n    const collURL = getAppSetup().getIn([componentNameSpace, 'dataURL']);\r\n    if (postingID === undefined) {\r\n        return collURL;\r\n    }\r\n    return `${collURL}/${postingID}`;\r\n}\r\n\r\nexport function byTopicURL(topicID) {\r\n    return `${TOPIC_LINK}/${topicID}`;\r\n}\r\n\r\nexport function getToLink(url) {\r\n    return getLocalPathForURL(url, APPBASE);\r\n}\r\n\r\nexport function convertSearchResultItem(item) {\r\n    return Immutable.Map({\r\n        'cdb_object_id': item.get('cdb_object_id'),\r\n        'description': item.get('title'),\r\n        'object_icon': item.get('icon'),\r\n        'object_id': item.get('rest_url')\r\n        // disable link for search result because\r\n        // it replaces the dialog by navigating\r\n        // 'object_ui_link': item.get('ui_link')\r\n    });\r\n}\r\n\r\nexport function filterChannels(channels, filter) {\r\n    if (!filter) {\r\n        return channels;\r\n    }\r\n    const text = filter.toLowerCase();\r\n    return channels.filter(\r\n        channel => channel.get('description').toLowerCase().indexOf(text) > -1);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cs-web-components-base\"\n// module id = 3\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Immutable\"\n// module id = 4\n// module chunks = 0 1","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: i18n.js 161425 2017-07-10 06:52:43Z gwe $\"\r\n */\r\n\r\nimport {i18ndb} from 'cs-web-components-base';\r\n\r\nexport const Format = i18ndb.makeFormat('activitystream');\r\nexport const formatStr = i18ndb.makeFormatStr('activitystream');\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/i18n.js","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Actions.jsx 174199 2018-03-08 08:59:24Z vov $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {formatStr} from '../i18n';\r\nimport {prefixNS, convertSearchResultItem} from '../helpers';\r\nimport {FormControl, Button, getAppSetup, DataType,\r\n    Dialog, ObjectWidgets} from 'cs-web-components-base';\r\nimport {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport Immutable from 'immutable';\r\nimport Attachments from './Attachments';\r\nimport ReferenceObject from './ReferenceObject';\r\nimport {EXCLUDE_TOPIC_CLASSES} from '../constants';\r\n\r\nexport const Comment = (props) => (\r\n    <Button.IconButton\r\n        buttonStyle=\"success\"\r\n        size=\"sm\"\r\n        className={prefixNS('actions-comment')}\r\n        title={formatStr('answer')}\r\n        iconName=\"cs_activitystream_web_comment\"\r\n        {...props}/>\r\n);\r\n\r\nexport class Share extends React.PureComponent {\r\n    render() {\r\n        const {activityEntry, ...others} = this.props;\r\n        const shareLink = getAppSetup().getIn(\r\n            ['cs-sharing-web-share_objects', 'objectsSharing']);\r\n        const shareURL = shareLink.get('URL') + activityEntry.get('cdb_object_id');\r\n        return (\r\n            <Button.IconButton\r\n                buttonStyle=\"primary\"\r\n                size=\"sm\"\r\n                title={shareLink.get('label')}\r\n                iconName={shareLink.get('iconName')}\r\n                className={prefixNS('actions-share')}\r\n                {...others}\r\n                href={shareURL}\r\n                target=\"_blank\"/>\r\n        );\r\n    }\r\n}\r\n\r\nShare.propTypes = {\r\n    activityEntry: ImmutablePropTypes.map.isRequired\r\n};\r\n\r\nexport class AssignAttachments extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showForm: false,\r\n            entry: Immutable.Map(props.activityEntry)\r\n        };\r\n        this.showForm = this.showForm.bind(this);\r\n        this.closeForm = this.closeForm.bind(this);\r\n        this.submitForm = this.submitForm.bind(this);\r\n        this.onSelectItem = this.onSelectItem.bind(this);\r\n        this.onDeleteItem = this.onDeleteItem.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.activityEntry !== this.props.activityEntry) {\r\n            this.setState({entry: Immutable.Map(nextProps.activityEntry)});\r\n        }\r\n    }\r\n\r\n    showForm() {\r\n        this.setState({\r\n            showForm: true\r\n        });\r\n    }\r\n\r\n    closeForm() {\r\n        this.setState({\r\n            showForm: false\r\n        });\r\n    }\r\n\r\n    submitForm() {\r\n        const {assignAttachments} = this.props;\r\n        if (assignAttachments) {\r\n            assignAttachments(\r\n                this.state.entry.getIn(['attachments', 'attachments']));\r\n        }\r\n        this.closeForm();\r\n    }\r\n\r\n    onSelectItem(item) {\r\n        const {entry} = this.state;\r\n        const attachments = entry.getIn(\r\n            ['attachments', 'attachments']);\r\n        const found = attachments.find(\r\n            sItem => sItem.get('cdb_object_id') === item.get('cdb_object_id'));\r\n        if (!found) {\r\n            const newAttchm = convertSearchResultItem(item);\r\n            this.setState({\r\n                entry: entry.setIn(\r\n                    ['attachments', 'attachments'], attachments.push(newAttchm))\r\n            });\r\n        }\r\n    }\r\n\r\n    onDeleteItem(item) {\r\n        const {entry} = this.state;\r\n        const attachments = entry.getIn(\r\n            ['attachments', 'attachments']);\r\n        const idx = attachments.indexOf(item);\r\n        if (idx > -1) {\r\n            this.setState({\r\n                entry: entry.setIn(\r\n                    ['attachments', 'attachments'], attachments.delete(idx))\r\n            });\r\n        }\r\n    }\r\n\r\n    renderDialog() {\r\n        const {entry} = this.state;\r\n        const dlgClass = prefixNS('object-search-dialog');\r\n        return (\r\n            <Dialog.Dialog title={formatStr('assign-attachments')}\r\n                           buttons={[<Dialog.Buttons.Select\r\n                                        key=\"select\"\r\n                                        onClick={this.submitForm} />,\r\n                                     <Dialog.Buttons.Cancel\r\n                                         key=\"cancel\"\r\n                                         onClick={this.closeForm}/>]}\r\n                           show={true}\r\n                           showCancel={true}\r\n                           onHide={this.closeForm}\r\n                           dialogClassName={dlgClass}>\r\n                <Attachments activityEntry={entry} onDelete={this.onDeleteItem}/>\r\n                <ObjectWidgets.ObjectSearch\r\n                    id={prefixNS('attachment-search')}\r\n                    onSelectItem={this.onSelectItem}\r\n                    searchPlaceholder={formatStr('search-object')}/>\r\n            </Dialog.Dialog>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const {activityEntry, ...others} = this.props;\r\n        if (!activityEntry.getIn(['attachments', 'addable'])) {\r\n            return null;\r\n        }\r\n        delete others.assignAttachments;\r\n        return (\r\n            <div className={prefixNS('actions-assign-attachments')}>\r\n                <Button.TextButton\r\n                    label={formatStr('assign-attachments')}\r\n                    onClick={this.showForm}\r\n                    {...others} />\r\n                {this.state.showForm ?\r\n                    this.renderDialog() : null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nAssignAttachments.propTypes = {\r\n    activityEntry: ImmutablePropTypes.map.isRequired,\r\n    assignAttachments: PropTypes.func\r\n};\r\n\r\nexport class AssignTopics extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showForm: false,\r\n            selected: Immutable.List()\r\n        };\r\n        this.showForm = this.showForm.bind(this);\r\n        this.closeForm = this.closeForm.bind(this);\r\n        this.submitForm = this.submitForm.bind(this);\r\n        this.onSelectItem = this.onSelectItem.bind(this);\r\n        this.onDeleteItem = this.onDeleteItem.bind(this);\r\n    }\r\n\r\n    showForm() {\r\n        this.setState({\r\n            showForm: true,\r\n            selected: this.state.selected.clear()\r\n        });\r\n    }\r\n\r\n    closeForm() {\r\n        this.setState({\r\n            showForm: false\r\n        });\r\n    }\r\n\r\n    submitForm() {\r\n        const {activityEntry, assignTopics} = this.props;\r\n        const selected = this.state.selected.map(item => item.get('cdb_object_id'));\r\n        const oldIDs = activityEntry.getIn(['topics', 'topics'])\r\n            .map(item => item.get('cdb_object_id'));\r\n        const newIDs = selected.filter(nid => !oldIDs.contains(nid));\r\n        if (assignTopics) {\r\n            assignTopics(newIDs);\r\n        }\r\n        this.closeForm();\r\n    }\r\n\r\n    onSelectItem(item) {\r\n        const {selected} = this.state;\r\n        const found = selected.find(\r\n            sItem => sItem.get('cdb_object_id') === item.get('cdb_object_id'));\r\n        if (!found) {\r\n            this.setState({\r\n                selected: selected.push(convertSearchResultItem(item))\r\n            });\r\n        }\r\n    }\r\n\r\n    onDeleteItem(item) {\r\n        const {selected} = this.state;\r\n        const idx = selected.indexOf(item);\r\n        if (idx > -1) {\r\n            this.setState({\r\n                selected: selected.delete(idx)\r\n            });\r\n        }\r\n    }\r\n\r\n    renderDialog() {\r\n        const dlgClass = prefixNS('object-search-dialog');\r\n        const {selected} = this.state;\r\n        return (\r\n            <Dialog.Dialog title={formatStr('assign-topics')}\r\n                           buttons={[<Dialog.Buttons.Select\r\n                                        key=\"select\"\r\n                                        onClick={this.submitForm} />,\r\n                                     <Dialog.Buttons.Cancel\r\n                                         key=\"cancel\"\r\n                                         onClick={this.closeForm}/>]}\r\n                           show={true}\r\n                           showCancel={true}\r\n                           onHide={this.closeForm}\r\n                           dialogClassName={dlgClass}>\r\n                {selected.map(item => (\r\n                    <ReferenceObject\r\n                        key={item.get('cdb_object_id')}\r\n                        referenceObject={item}\r\n                        onDelete={this.onDeleteItem}/>\r\n                ))}\r\n                <ObjectWidgets.ObjectSearch\r\n                    id={prefixNS('topic-search')}\r\n                    onSelectItem={this.onSelectItem}\r\n                    searchPlaceholder={formatStr('search-object')}\r\n                    excludeClasses={EXCLUDE_TOPIC_CLASSES.toArray()}/>\r\n            </Dialog.Dialog>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const {...others} = this.props;\r\n        delete others.activityEntry;\r\n        delete others.assignTopics;\r\n        return (\r\n            <div className={prefixNS('actions-assign-topics')}>\r\n                <Button.IconButton\r\n                    buttonStyle=\"success\"\r\n                    size=\"sm\"\r\n                    title={formatStr('assign-topics')}\r\n                    iconName=\"cs_activitystream_web_tags\"\r\n                    onClick={this.showForm}\r\n                    {...others} />\r\n                {this.state.showForm ?\r\n                    this.renderDialog() : null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nAssignTopics.propTypes = {\r\n    activityEntry: ImmutablePropTypes.map.isRequired,\r\n    assignTopics: PropTypes.func\r\n};\r\n\r\nexport const SystemPostingFilter = ({filterState, onChange}) => (\r\n    <div className={prefixNS('systemposting-filter')}>\r\n        <FormControl.CheckBox\r\n            checked={filterState !== 'off'}\r\n            onChange={onChange}\r\n            label={formatStr('systempostings')}\r\n            name=\"systemPostingFilter\"/>\r\n    </div>\r\n);\r\n\r\nSystemPostingFilter.propTypes = {\r\n    filterState: PropTypes.string,\r\n    onChange: PropTypes.func\r\n};\r\n\r\nSystemPostingFilter.toggleFilterState = (prevState) =>\r\n    prevState === 'off' ? undefined : 'off';\r\n\r\nconst CE_DATEFORMAT = 'DD.MM.YYYY';\r\n\r\nexport class DateFilter extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            dateFormat: getAppSetup().getIn(['formats', 'dateFormat'])\r\n        };\r\n    }\r\n\r\n    ignoreInvalidDate() {\r\n    }\r\n\r\n    render() {\r\n        const {onFilterChange, value, ...others} = this.props;\r\n        return (\r\n            <FormControl.Calendar\r\n                {...others}\r\n                name={prefixNS('date-filter')}\r\n                value={value}\r\n                allowExpression={true}\r\n                dateConverter={DataType.CalendarSimpleConverter}\r\n                dateOnlyFormat={this.state.dateFormat}\r\n                displayFormat={this.state.dateFormat}\r\n                valueFormat={CE_DATEFORMAT}\r\n                onDateChange={onFilterChange}\r\n                onInvalidInput={this.ignoreInvalidDate}\r\n                placeholder={formatStr('filter_by_date')}/>\r\n        );\r\n    }\r\n}\r\n\r\nDateFilter.propTypes = {\r\n    value: PropTypes.string,\r\n    onFilterChange: PropTypes.func\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Actions.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: constants.js 164071 2017-08-28 13:01:03Z yzh $\"\r\n */\r\n\r\nimport {getAppSetup} from 'cs-web-components-base';\r\nimport Immutable from 'immutable';\r\n\r\nconst defaultSetups = Immutable.fromJS({\r\n    topicURL: '/internal/activitystream/topic',\r\n    excludeTopicClasses: [\r\n        'cdbblog_posting', 'cdbblog_user_posting',\r\n        'cdbblog_system_posting', 'cdbblog_comment']\r\n});\r\n\r\nconst APP_SETUPS = getAppSetup().get(componentNameSpace, defaultSetups);\r\n\r\nexport const CHANNLE_LINK = APP_SETUPS.get('channelURL');\r\n\r\nexport const SUBSCRIPTION_LINK = APP_SETUPS.get('subscriptionURL');\r\n\r\nexport const TOPIC_LINK = APP_SETUPS.get('topicURL');\r\n\r\nexport const STANDALONE_INSTANCE = 'standalone';\r\n\r\nexport const EXCLUDE_TOPIC_CLASSES = APP_SETUPS.get('excludeTopicClasses');\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: actions.js 168213 2017-11-10 10:00:44Z yzh $\"\r\n */\r\n\r\nimport {prefixNS} from '../helpers.js';\r\nimport {\r\n    fetchCollection, createObject, fetchObject,\r\n    postJSON, postForm, makeSequence, singleFetch,\r\n    notifyError, NetworkError\r\n} from 'cs-web-components-base';\r\nimport {CHANNLE_LINK, SUBSCRIPTION_LINK} from '../constants';\r\nimport {formatStr} from '../i18n';\r\n\r\nexport const RECEIVED_POSTINGS = prefixNS('RECEIVED_POSTINGS');\r\nexport const APPEND_POSTINGS = prefixNS('APPEND_POSTINGS');\r\nexport const INCOMING_POSTINGS = prefixNS('INCOMING_POSTINGS');\r\nexport const POSTING_CREATED = prefixNS('POSTING_CREATED');\r\nexport const POSTING_REMOVED = prefixNS('POSTING_REMOVED');\r\nexport const POSTING_UPDATING = prefixNS('POSTING_UPDATING');\r\nexport const POSTING_UPDATED = prefixNS('POSTING_UPDATED');\r\nexport const UPDATE_CONFIRMED = prefixNS('UPDATE_CONFIRMED');\r\nexport const RECEIVED_CHANNELS = prefixNS('RECEIVED_CHANNELS');\r\nexport const RECEIVED_SUBSCRIPTIONS = prefixNS('RECEIVED_SUBSCRIPTIONS');\r\n\r\nfunction receivedPostings(instanceName, url, filter, coll) {\r\n    return {\r\n        type: RECEIVED_POSTINGS,\r\n        payload: coll,\r\n        meta: {url, filter, instanceName}\r\n    };\r\n}\r\n\r\nfunction appendPostings(instanceName, url, param, coll) {\r\n    return {\r\n        type: APPEND_POSTINGS,\r\n        payload: coll,\r\n        meta: {url, param, instanceName}\r\n    };\r\n}\r\n\r\nfunction incomingPostings(instanceName, url, param, coll) {\r\n    return {\r\n        type: INCOMING_POSTINGS,\r\n        payload: coll,\r\n        meta: {url, param, instanceName}\r\n    };\r\n}\r\n\r\nfunction postingCreated(instanceName, posting) {\r\n    return {\r\n        type: POSTING_CREATED,\r\n        payload: posting,\r\n        meta: {instanceName}\r\n    };\r\n}\r\n\r\nfunction postingRemoved(instanceName, id) {\r\n    return {\r\n        type: POSTING_REMOVED,\r\n        payload: id,\r\n        meta: {instanceName}\r\n    };\r\n}\r\n\r\nfunction postingUpdating(instanceName, oID) {\r\n    return {\r\n        type: POSTING_UPDATING,\r\n        payload: oID,\r\n        meta: {instanceName}\r\n    };\r\n}\r\n\r\nfunction postingUpdated(instanceName) {\r\n    return {\r\n        type: POSTING_UPDATED,\r\n        meta: {instanceName}\r\n    };\r\n}\r\n\r\nfunction updateConfirmed(instanceName, confirmedAt) {\r\n    return {\r\n        type: UPDATE_CONFIRMED,\r\n        payload: confirmedAt,\r\n        meta: {instanceName}\r\n    };\r\n}\r\n\r\nfunction receivedChannels(channels) {\r\n    return {\r\n        type: RECEIVED_CHANNELS,\r\n        payload: channels\r\n    };\r\n}\r\n\r\nfunction receivedSubscriptions(subscriptions) {\r\n    return {\r\n        type: RECEIVED_SUBSCRIPTIONS,\r\n        payload: subscriptions\r\n    };\r\n}\r\n\r\nexport function fetchPosting(url) {\r\n    return dispatch => dispatch(fetchObject(url));\r\n}\r\n\r\nexport function fetchPostings(instanceName, url, filter) {\r\n    return (dispatch) => {\r\n        return dispatch(fetchCollection(url, filter.toJS(), (data) => data.postings))\r\n            .then(data => {\r\n                dispatch(receivedPostings(instanceName, url, filter, data));\r\n                return data;\r\n            });\r\n    };\r\n}\r\n\r\nexport function fetchMorePostings(instanceName, url, filter) {\r\n    return (dispatch, getState) => {\r\n        const prev = getState()[componentNameSpace]\r\n            .collections.get(instanceName);\r\n        const param = Object.assign(filter.toJS(), {\r\n            last_comment_date: prev.get('lastCommentDate'),\r\n            last_object_id: prev.get('lastObjectId')\r\n        });\r\n        dispatch(fetchCollection(url, param, (data) => data.postings))\r\n            .then(data => dispatch(appendPostings(instanceName, url, param, data)));\r\n    };\r\n}\r\n\r\nexport function uploadFiles(posting, files) {\r\n    return (dispatch) => {\r\n        const uploadURL = posting.file_upload_url;\r\n        if (!uploadURL) {\r\n            return makeSequence([]);\r\n        }\r\n        const callables =\r\n            files.map(file => () => {\r\n                const formData = new FormData();\r\n                formData.append('content', file);\r\n                formData.append('metadata', JSON.stringify({\r\n                    'cdbf_original_name': file.name,\r\n                    'cdbf_name': file.name\r\n                }));\r\n                return postForm(uploadURL, formData);\r\n            });\r\n        return makeSequence(callables).catch(\r\n            error => {\r\n                let detail = error;\r\n                if (error instanceof NetworkError) {\r\n                    detail = new NetworkError(formatStr('upload-aborted'));\r\n                }\r\n                dispatch(notifyError(detail, null, formatStr('activities')));\r\n            }).then(() => posting);\r\n    };\r\n}\r\n\r\nexport function reloadPosting(instanceName, postingID) {\r\n    return (dispatch) => {\r\n        return dispatch(fetchPosting(postingID))\r\n            .then(() =>\r\n                dispatch(postingUpdated(instanceName)));\r\n    };\r\n}\r\n\r\nexport function createPosting(instanceName, url, text, attachments, files) {\r\n    return (dispatch) => {\r\n        const data = {text: text};\r\n        if (attachments.count()) {\r\n            data.attachment_ids = attachments.toArray();\r\n        }\r\n        return dispatch(createObject(url, data)).then(\r\n            (posting) => {\r\n                dispatch(postingCreated(instanceName, posting));\r\n                return posting;\r\n            }).catch(error => {\r\n                let detail = error;\r\n                const response = error.response;\r\n                if (response && response.status === 404 && response.url === url) {\r\n                    detail = new Error(formatStr('context-not-found'));\r\n                    detail.response = response;\r\n                }\r\n                else if (error instanceof NetworkError) {\r\n                    detail = new NetworkError(formatStr('network-error'));\r\n                }\r\n                dispatch(notifyError(detail, null, formatStr('activities')));\r\n                throw detail;\r\n            }).then(\r\n                (posting) => dispatch(uploadFiles(posting, files))\r\n            ).then(\r\n                (posting) => dispatch(reloadPosting(instanceName, posting['@id']))\r\n            );\r\n    };\r\n}\r\n\r\nexport function createComment(instanceName, url, {posting, text, attachments, files}) {\r\n    return (dispatch) => {\r\n        const data = {text: text};\r\n        const postingURL = posting.get('@id');\r\n        if (attachments.count()) {\r\n            data.attachment_ids = attachments.toArray();\r\n        }\r\n        dispatch(postingUpdating(instanceName, posting.get('cdb_object_id')));\r\n        return dispatch(createObject(url, data))\r\n            .catch(error => {\r\n                let detail = error;\r\n                const response = error.response;\r\n                if (response && response.status === 404 && response.url === url) {\r\n                    detail = new Error(formatStr('posting-not-found'));\r\n                    detail.response = response;\r\n                    dispatch(notifyError(detail));\r\n                    dispatch(postingUpdated(instanceName));\r\n                    dispatch(postingRemoved(instanceName, postingURL));\r\n                }\r\n                else if (error instanceof NetworkError) {\r\n                    detail = new NetworkError(formatStr('network-error'));\r\n                }\r\n                dispatch(notifyError(detail, null, formatStr('activities')));\r\n                throw detail;\r\n            }).then(\r\n                (comment) => dispatch(uploadFiles(comment, files))\r\n            ).then(\r\n                // reload posting\r\n                () => dispatch(reloadPosting(instanceName, postingURL))\r\n            );\r\n    };\r\n}\r\n\r\nexport function assignTopics(instanceName, posting, topics) {\r\n    return (dispatch) => {\r\n        const url = posting.getIn(['topics', '@id']);\r\n        dispatch(postingUpdating(instanceName, posting.get('cdb_object_id')));\r\n        postJSON(url, {topic_ids: topics.toArray()}).then(\r\n            // reload posting\r\n            () => dispatch(reloadPosting(instanceName, posting.get('@id'))));\r\n    };\r\n}\r\n\r\nexport function confirmUpdate(instanceName, confirmedAt) {\r\n    return (dispatch) =>\r\n        dispatch(updateConfirmed(instanceName, confirmedAt));\r\n}\r\n\r\nexport function checkNewPostings(instanceName, url, filter) {\r\n    return (dispatch, getState) => {\r\n        const prev = getState()[componentNameSpace]\r\n            .collections.get(instanceName);\r\n        const param = Object.assign(filter.toJS(), {\r\n            since: prev.get('updatedAt'),\r\n            posting_count: 99999\r\n        });\r\n        dispatch(fetchCollection(url, param, (data) => data.postings))\r\n            .then(data => dispatch(incomingPostings(instanceName, url, param, data)))\r\n            .catch(() => {});\r\n    };\r\n}\r\n\r\nexport function fetchChannels() {\r\n    return dispatch => {\r\n        return dispatch(singleFetch(\r\n            CHANNLE_LINK,\r\n            data => dispatch(receivedChannels(data))\r\n        ));\r\n    };\r\n}\r\n\r\nexport function fetchSubscriptions() {\r\n    return dispatch => {\r\n        return dispatch(singleFetch(\r\n            SUBSCRIPTION_LINK,\r\n            data => dispatch(receivedSubscriptions(data))\r\n        ));\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/actions.js","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: PostingList.jsx 174894 2018-03-22 14:27:29Z gwe $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport Immutable from 'immutable';\r\nimport {connect, ImmutablePropTypes, PropTypes, classNames} from 'cs-web-components-externals';\r\nimport {Button} from 'cs-web-components-base';\r\nimport {fetchPostings, createPosting, fetchMorePostings,\r\n    confirmUpdate, checkNewPostings} from '../actions/actions';\r\nimport {getReferencedPostings} from '../helpers';\r\nimport Posting from './Posting';\r\nimport {prefixNS} from '../helpers';\r\nimport CreateForm from './CreateForm';\r\nimport {formatStr} from '../i18n';\r\nimport {Collapse, Alert} from 'react-bootstrap';\r\n\r\nconst CHECKINTERVAL = 900000;  // 15 min.\r\n\r\nconst getID = (entry) => entry.get('cdb_object_id');\r\nconst findByID = (coll, oid) => coll.find(entry => getID(entry) === oid);\r\nconst getDate = (entry) => entry.get('last_comment_date');\r\n\r\nfunction sortPostings(postings, dateMap = Immutable.Map()) {\r\n    return postings === undefined ? undefined :\r\n        postings.sortBy(\r\n            posting => dateMap.get(\r\n                getID(posting),\r\n                getDate(posting)\r\n            )).reverse();\r\n}\r\n\r\nfunction getOlderPostings(postings, updatedAt) {\r\n    if (postings === undefined) {\r\n        return postings;\r\n    }\r\n    return postings\r\n        .filter(posting => getDate(posting) <= updatedAt);\r\n}\r\n\r\nfunction generateDateMap(postings) {\r\n    if (postings === undefined) {\r\n        return undefined;\r\n    }\r\n    return Immutable.Map(\r\n        postings.map(posting =>\r\n            [getID(posting), getDate(posting)]));\r\n}\r\n\r\nclass PostingList extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // dateMap supposed to keep the sequence of postings to avoid\r\n        // flicking due to posting date changes in store\r\n        this.state = {\r\n            dateMap: undefined,\r\n            postings: undefined,\r\n            newest: props.updatedAt,\r\n            incoming: false\r\n        };\r\n        this.createPosting = this.createPosting.bind(this);\r\n        this.loadMorePostings = this.loadMorePostings.bind(this);\r\n        this.confirmUpdate = this.confirmUpdate.bind(this);\r\n        this.checkNewPostings = this.checkNewPostings.bind(this);\r\n        this.stopChecker = this.stopChecker.bind(this);\r\n        this._checker = null;\r\n    }\r\n\r\n    componentWillMount() {\r\n        const {fetchPostings, initDataURL, filter} = this.props;\r\n        fetchPostings(initDataURL, filter);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.checkNewPostings();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.stopChecker();\r\n    }\r\n\r\n    stopChecker() {\r\n        if (this._checker !== null) {\r\n            window.clearTimeout(this._checker);\r\n        }\r\n        this._checker = null;\r\n    }\r\n\r\n    checkNewPostings() {\r\n        this.stopChecker();\r\n        this._checker = window.setTimeout(\r\n            () => {\r\n                const {checkNewPostings, initDataURL, filter} = this.props;\r\n                checkNewPostings(initDataURL, filter);\r\n                this.checkNewPostings();\r\n            },\r\n            CHECKINTERVAL);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.initDataURL !== this.props.initDataURL ||\r\n            nextProps.filter !== this.props.filter) {\r\n            // new fetching required, clean up old stuff\r\n            this.setState({\r\n                dateMap: undefined,\r\n                incoming: false\r\n            });\r\n            this.stopChecker();\r\n            nextProps.fetchPostings(nextProps.initDataURL, nextProps.filter)\r\n                .then(this.checkNewPostings);\r\n        } else if (this.state.dateMap === undefined) {\r\n            // recreate the posting sequences\r\n            const sorted = sortPostings(nextProps.postings);\r\n            this.setState({\r\n                postings: sorted,\r\n                dateMap: generateDateMap(sorted),\r\n                incoming: false\r\n            });\r\n        } else if (nextProps.updatedAt !== this.props.updatedAt) {\r\n            // keep list uptodate\r\n            this.stopChecker();\r\n            const sorted = sortPostings(\r\n                getOlderPostings(nextProps.postings, nextProps.updatedAt));\r\n            this.setState({\r\n                postings: sorted,\r\n                dateMap: generateDateMap(sorted),\r\n                incoming: nextProps.postings.count() !== sorted.count()\r\n            });\r\n            this.checkNewPostings();\r\n        } else {\r\n            const updatingID = nextProps.updatingPosting;\r\n            const updatingPosting = updatingID ?\r\n                findByID(this.state.postings, updatingID) : undefined;\r\n            const updatedPosting = updatingID ?\r\n                findByID(nextProps.postings, updatingID) : undefined;\r\n            const updating = updatingPosting !== updatedPosting;\r\n            if (!nextProps.postings.equals(this.props.postings) || updating) {\r\n                const nextIDs = nextProps.postings.map(getID);\r\n                let showing = this.state.postings;\r\n                // remove obsolete data\r\n                showing = showing.filter(\r\n                    posting => nextIDs.contains(getID(posting)));\r\n                // local changed posting\r\n                // (creating, commenting, assigning topics)\r\n                if (updating) {\r\n                    showing = showing.delete(updatingPosting).add(updatedPosting);\r\n                }\r\n                // unchanged and newly appended postings e.g. via \"load more\"\r\n                const olderOnes = getOlderPostings(\r\n                    nextProps.postings, nextProps.updatedAt);\r\n                const olderIDs = olderOnes.map(getID);\r\n                // because the props.postings are real time data,\r\n                // use them in conflicts.\r\n                showing = showing\r\n                    .filterNot(posting => olderIDs.contains(getID(posting)))\r\n                    .union(olderOnes);\r\n                // sort list according to cached date to keep sequence\r\n                // unchanged\r\n                showing = sortPostings(showing, this.state.dateMap);\r\n                const newMap = showing.reduce(\r\n                    (dateMap, posting) => {\r\n                        const oid = getID(posting);\r\n                        return dateMap.set(\r\n                            oid,\r\n                            this.state.dateMap.get(oid, getDate(posting)));\r\n                    }, Immutable.Map());\r\n                this.setState({\r\n                    postings: showing,\r\n                    dateMap: newMap,\r\n                    incoming: nextProps.postings.subtract(showing).count() > 0\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    createPosting(text, attachments, files) {\r\n        const {createPosting} = this.props;\r\n        return createPosting(text, attachments, files);\r\n    }\r\n\r\n    loadMorePostings() {\r\n        const {initDataURL, filter, fetchMorePostings} = this.props;\r\n        fetchMorePostings(initDataURL, filter);\r\n    }\r\n\r\n    renderPostings() {\r\n        const {instanceName, updatedAt} = this.props;\r\n        const postings = this.state.postings;\r\n        return (postings === undefined ?\r\n            null :\r\n            postings.map(posting =>\r\n                <Posting\r\n                    key={posting.get('cdb_object_id')}\r\n                    instanceName={instanceName}\r\n                    posting={posting}\r\n                    lastUpdatedAt={updatedAt}/>\r\n            ));\r\n    }\r\n\r\n    confirmUpdate() {\r\n        const {confirmUpdate, postings} = this.props;\r\n        if (confirmUpdate && postings) {\r\n            confirmUpdate(getDate(postings.maxBy(getDate)));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {topicDesc, defaultTopic, resultComplete, className, showForm} = this.props;\r\n        const topic = topicDesc || defaultTopic;\r\n        const label = formatStr('new-posting', {topic});\r\n        const clsname = classNames(className, prefixNS('posting-list'));\r\n        return (\r\n            <div className={clsname}>\r\n                <Collapse in={this.state.incoming}>\r\n                    <Alert bsStyle=\"info\">\r\n                        <Button.TextButton\r\n                            label={formatStr('incoming-postings')}\r\n                            buttonStyle=\"primary\"\r\n                            onClick={this.confirmUpdate} />\r\n                    </Alert>\r\n                </Collapse>\r\n                {showForm ? (\r\n                    <CreateForm\r\n                        label={label}\r\n                        placeholder={label}\r\n                        createEntry={this.createPosting}/>\r\n                ) : null}\r\n                {this.renderPostings()}\r\n                {resultComplete === false ?\r\n                    <Button.TextButton\r\n                        label={formatStr('load-more')}\r\n                        className={prefixNS('load-more')}\r\n                        buttonStyle=\"primary\"\r\n                        onClick={this.loadMorePostings} /> :\r\n                    null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nPostingList.propTypes = {\r\n    instanceName: PropTypes.string.isRequired,\r\n    initDataURL: PropTypes.string.isRequired,\r\n    resultComplete: PropTypes.bool,\r\n    topicDesc: PropTypes.string,\r\n    defaultTopic: PropTypes.string,\r\n    updatedAt: PropTypes.string,\r\n    postings: ImmutablePropTypes.orderedSet,\r\n    filter: ImmutablePropTypes.map,\r\n    updatingPosting: PropTypes.string,\r\n    confirmUpdate: PropTypes.func,\r\n    fetchPostings: PropTypes.func,\r\n    checkNewPostings: PropTypes.func,\r\n    createPosting: PropTypes.func,\r\n    fetchMorePostings: PropTypes.func,\r\n    className: PropTypes.string,\r\n    showForm: PropTypes.bool\r\n};\r\n\r\nPostingList.defaultProps = {\r\n    filter: Immutable.Map()\r\n};\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n    const {instanceName} = ownProps;\r\n    const compState = state[componentNameSpace];\r\n    const postings = compState === undefined ?\r\n        undefined :\r\n        getReferencedPostings(\r\n            state,\r\n            compState.collections.getIn([\r\n                instanceName,\r\n                'postings'\r\n            ]));\r\n    return {\r\n        postings,\r\n        resultComplete: compState.collections.getIn([\r\n            instanceName,\r\n            'result_complete'\r\n        ]),\r\n        topicDesc: compState.collections.getIn([\r\n            instanceName,\r\n            'description'\r\n        ]),\r\n        defaultTopic: compState.collections.getIn([\r\n            instanceName,\r\n            'default_topic'\r\n        ]),\r\n        updatedAt: compState.collections.getIn([\r\n            instanceName,\r\n            'updatedAt'\r\n        ]),\r\n        updatingPosting: compState.collections.getIn([\r\n            instanceName,\r\n            'updatingPosting'\r\n        ]),\r\n        showForm: compState.collections.getIn([\r\n            instanceName,\r\n            'cdb_object_id'\r\n        ]) !== 'sharing'\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch, ownProps) {\r\n    const {instanceName} = ownProps;\r\n    return {\r\n        fetchPostings: (url, filter) =>\r\n            dispatch(fetchPostings(instanceName, url, filter)),\r\n        fetchMorePostings: (url, filter) =>\r\n            dispatch(fetchMorePostings(instanceName, url, filter)),\r\n        checkNewPostings: (url, filter) =>\r\n            dispatch(checkNewPostings(instanceName, url, filter)),\r\n        createPosting: (text, attachments, files) =>\r\n            dispatch(createPosting(\r\n                instanceName, ownProps.initDataURL, text, attachments, files)),\r\n        confirmUpdate: (confirmAt) =>\r\n            dispatch(confirmUpdate(instanceName, confirmAt))\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PostingList);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PostingList.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Channel.jsx 166061 2017-09-28 13:27:35Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {Navigation, updateQuery} from 'cs-web-components-base';\r\nimport {ImmutablePropTypes, classNames, PropTypes} from 'cs-web-components-externals';\r\nimport {prefixNS} from '../helpers';\r\n\r\nexport default function Channel(props) {\r\n    const {channel, location, currentTopic} = props;\r\n    const cid = channel.get('cdb_object_id');\r\n    const text = channel.get('description');\r\n    const isActive = currentTopic === cid;\r\n    const to = updateQuery(location, {topic: cid});\r\n    const clsname = classNames(\r\n        props.className,\r\n        prefixNS('channel'),\r\n        {[prefixNS('channel-active')]: isActive}\r\n    );\r\n    return (\r\n        <Navigation.Link to={to}\r\n                         title={text}\r\n                         className={clsname}>\r\n           {text}\r\n        </Navigation.Link>\r\n    );\r\n}\r\n\r\nChannel.propTypes = {\r\n    channel: ImmutablePropTypes.map,\r\n    className: PropTypes.string,\r\n    currentTopic: PropTypes.string,\r\n    location: PropTypes.object\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Channel.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Attachments.jsx 164013 2017-08-25 14:50:32Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {ImmutablePropTypes, classNames, PropTypes} from 'cs-web-components-externals';\r\nimport {prefixNS} from '../helpers';\r\nimport ReferenceObject from './ReferenceObject';\r\n\r\nexport default class Attachments extends React.PureComponent {\r\n    render() {\r\n        const {activityEntry, onDelete} = this.props;\r\n        const attachments = activityEntry.get('attachments');\r\n        return (\r\n            <ul className={classNames(prefixNS('attachments'), 'list-unstyled')}>\r\n                {attachments.get('attachments').map(attachment =>\r\n                    <li key={attachment.get('cdb_object_id')}>\r\n                        <ReferenceObject referenceObject={attachment}\r\n                                         onDelete={onDelete}/>\r\n                    </li>\r\n                )}\r\n            </ul>\r\n        );\r\n    }\r\n}\r\n\r\nAttachments.propTypes = {\r\n    activityEntry: ImmutablePropTypes.map.isRequired,\r\n    onDelete: PropTypes.func\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Attachments.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: PostingLayout.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport PersonPicture from './PersonPicture';\r\nimport Footer from './Footer';\r\nimport {classNames, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport {prefixNS} from '../helpers';\r\n\r\nconst Title = ({children}) => (\r\n    <div className={prefixNS('posting-title')}>\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst Nav = ({children}) => (\r\n    <nav className={prefixNS('posting-nav')}>\r\n        {children}\r\n    </nav>\r\n);\r\n\r\nexport default class PostingLayout extends React.Component {\r\n    render() {\r\n        const {posting, className} = this.props;\r\n        const author = posting.get('author');\r\n        return (\r\n            <div className={classNames(className, prefixNS('posting-layout'))}>\r\n                <div className={prefixNS('posting-icon')}>\r\n                    <PersonPicture person={author} />\r\n                </div>\r\n                <div className={prefixNS('posting-detail')}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nPostingLayout.propTypes = {\r\n    posting: ImmutablePropTypes.map.isRequired,\r\n    className: PropTypes.string\r\n};\r\n\r\nPostingLayout.Title = Title;\r\nPostingLayout.Nav = Nav;\r\nPostingLayout.Footer = Footer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PostingLayout.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: ActivityDate.jsx 150838 2016-12-13 15:29:09Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {Navigation} from 'cs-web-components-base';\r\nimport {formatDate, getToLink} from '../helpers';\r\nimport {ImmutablePropTypes} from 'cs-web-components-externals';\r\n\r\nexport default function ActivityDate(props) {\r\n    const {activityEntry} = props;\r\n    const calendar = formatDate(activityEntry.get('datetime'));\r\n    const uiLink = activityEntry.get('system:ui_link');\r\n    if (uiLink) {\r\n        const toLink = getToLink(uiLink);\r\n        const link = toLink && (uiLink !== toLink) ?\r\n            {pathname: toLink} : uiLink;\r\n        return (\r\n            <Navigation.Link to={link} className=\"text-muted\">\r\n                {calendar}\r\n            </Navigation.Link>);\r\n    }\r\n    return (\r\n        <span className=\"text-muted\">{calendar}</span>\r\n    );\r\n}\r\n\r\nActivityDate.propTypes = {\r\n    activityEntry: ImmutablePropTypes.map.isRequired\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ActivityDate.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: ActivityText.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {Navigation, Button} from 'cs-web-components-base';\r\nimport Autolinker from 'autolinker';\r\nimport trimRight from 'trim-right';\r\nimport {formatStr} from '../i18n';\r\nimport {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\n\r\nconst linker = new Autolinker({\r\n    newWindow: true,\r\n    stripPrefix: false,\r\n    urls: {\r\n        schemeMatches: true,\r\n        wwwMatches: true,\r\n        tldMatches: false\r\n    },\r\n    email: false,\r\n    phone: false,\r\n    twitter: false,\r\n    hashtag: false\r\n});\r\n\r\nconst rootURL = window.location.protocol + '//' +\r\n    window.location.hostname.toLowerCase() +\r\n    (window.location.port ? ':' + window.location.port.toLowerCase() : '');\r\n\r\nfunction isExternal(url) {\r\n    const lower = url.toLowerCase();\r\n    return lower.indexOf('cdb:') !== 0 &&\r\n        lower.indexOf('cdbcmsg:') !== 0 &&\r\n        lower.indexOf(rootURL) === -1;\r\n}\r\n\r\nfunction ShowMore(props) {\r\n    return (\r\n        <span>\r\n            <span>...</span>\r\n            <Button.TextButton\r\n                buttonStyle=\"link\"\r\n                label={formatStr('more')}\r\n                {...props} />\r\n        </span>\r\n    );\r\n}\r\n\r\nfunction digest(text, offset, length, tolerance) {\r\n    const end = length - offset;\r\n    if (end < 0 || text.length < end) {\r\n        return [text];\r\n    }\r\n    let cutIndex = text.indexOf(' ', end);\r\n    // if no whitespace go maximum tolerance\r\n    // if whitespace exceeds tolerance, go max tolerance\r\n    if (cutIndex === -1 || cutIndex - end > tolerance) {\r\n        cutIndex = end + tolerance;\r\n    }\r\n    const result = [];\r\n    const before = text.slice(0, cutIndex);\r\n    const after = text.slice(cutIndex);\r\n    if (before) {\r\n        result.push(before);\r\n    }\r\n    result.push(ShowMore);\r\n    if (after) {\r\n        result.push(after);\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction lineBreaking(parts) {\r\n    const result = [];\r\n    let keyIdx = 0;\r\n    parts.forEach(part => {\r\n        let splitted;\r\n        if (typeof part !== 'string') {\r\n            splitted = null;\r\n        } else {\r\n            splitted = part.split('\\n');\r\n        }\r\n        if (splitted === null || splitted.length === 1) {\r\n            result.push(part);\r\n        } else {\r\n            // insert link breaker between lines\r\n            splitted.forEach((text, idx) => {\r\n                if (text !== '') {\r\n                    result.push(text);\r\n                }\r\n                if (idx < splitted.length - 1) {\r\n                    result.push(<br key={keyIdx}/>);\r\n                    keyIdx++;\r\n                }\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nexport default class ActivityText extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            'digest': true,\r\n            'parts': this.parseActivityText(props)\r\n        };\r\n        this.showMore = this.showMore.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.activityEntry !== this.props.activityEntry) {\r\n            this.setState({\r\n                'parts': this.parseActivityText(nextProps)\r\n            });\r\n        }\r\n    }\r\n\r\n    parseActivityText(props) {\r\n        const {activityEntry, digestLength, digestTolerance} = props;\r\n        const parts = [];\r\n        const activityText = trimRight(activityEntry.get('text'));\r\n        const matches = linker.parse(activityText);\r\n        let lastIdx = 0;\r\n        if (digestLength === lastIdx) {\r\n            parts.push(ShowMore);\r\n        }\r\n        matches.forEach((match, idx) => {\r\n            const offset = match.getOffset();\r\n            const matched = match.getMatchedText();\r\n            const before = activityText.substring(lastIdx, offset);\r\n            if (before !== '') {\r\n                parts.push(...digest(before, lastIdx, digestLength, digestTolerance));\r\n            }\r\n            const link = match.getAnchorHref();\r\n            const target = isExternal(link) ? '_extern' : '_blank';\r\n            parts.push(\r\n                <Navigation.Link\r\n                    key={`link-${idx}`}\r\n                    to={link}\r\n                    title={link}\r\n                    target={target}>\r\n                    {match.getAnchorText()}\r\n                </Navigation.Link>);\r\n            lastIdx = offset + matched.length;\r\n        });\r\n        if (lastIdx < activityText.length) {\r\n            parts.push(\r\n                ...digest(activityText.substring(lastIdx),\r\n                lastIdx, digestLength, digestTolerance));\r\n        }\r\n        return lineBreaking(parts);\r\n    }\r\n\r\n    showMore() {\r\n        this.setState({\r\n            digest: false\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {digest, parts} = this.state;\r\n        let showParts;\r\n        if (digest) {\r\n            const idx = parts.indexOf(ShowMore);\r\n            if (idx === -1) {\r\n                showParts = parts;\r\n            } else {\r\n                showParts = parts.slice(0, idx).concat(\r\n                    <ShowMore key='showMore' onClick={this.showMore} />\r\n                );\r\n            }\r\n        } else {\r\n            showParts = parts;//.filter((item) => item !== ShowMore);\r\n        }\r\n        return (\r\n            <div className=\"cs-activitystream-web-detail-text\">\r\n                {showParts.length ? showParts : null}\r\n            </div>);\r\n    }\r\n}\r\n\r\nActivityText.propTypes = {\r\n    activityEntry: ImmutablePropTypes.map.isRequired,\r\n    digestLength: PropTypes.number,\r\n    digestTolerance: PropTypes.number\r\n};\r\n\r\nActivityText.defaultProps = {\r\n    digestLength: 300,\r\n    digestTolerance: 50\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ActivityText.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: FileViewer.jsx 163928 2017-08-24 12:53:01Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport Immutable from 'immutable';\r\nimport {Dialog,\r\n    isSupportedImageType, isSupportedVideoType} from 'cs-web-components-base';\r\nimport {Label, Carousel} from 'react-bootstrap';\r\nimport {prefixNS} from '../helpers';\r\nimport {formatStr} from '../i18n';\r\nimport {ImmutablePropTypes, classNames, PropTypes} from 'cs-web-components-externals';\r\n\r\nfunction getType(file) {\r\n    return file.get('system:content_type');\r\n}\r\n\r\nclass Renderer extends React.PureComponent {\r\n    render() {\r\n        const {file} = this.props;\r\n        const isVideo = isSupportedVideoType(getType(file));\r\n        const src = file.get('@id');\r\n        if (isVideo) {\r\n            return (\r\n                <video src={src} controls />\r\n            );\r\n        } else {\r\n            return (\r\n                <img src={src} />\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nRenderer.propTypes = {\r\n    file: ImmutablePropTypes.map.isRequired\r\n};\r\n\r\nexport default class FileViewer extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            lightBox: false,\r\n            showing: 0,\r\n            direction: null\r\n        };\r\n        this.closeLightBox = this.closeLightBox.bind(this);\r\n        this.openLightBox = this.openLightBox.bind(this);\r\n        this.selectItem = this.selectItem.bind(this);\r\n        this.dialogSizes = Immutable.List([Dialog.SIZE_MEDIUM, Dialog.SIZE_LARGE]);\r\n    }\r\n\r\n    openLightBox() {\r\n        this.setState({\r\n            lightBox: true,\r\n            showing: 0,\r\n            direction: null\r\n        });\r\n    }\r\n\r\n    closeLightBox() {\r\n        this.setState({\r\n            lightBox: false\r\n        });\r\n    }\r\n\r\n    selectItem(selectedIndex, e) {\r\n        this.setState({\r\n            showing: selectedIndex,\r\n            direction: e.direction\r\n        });\r\n    }\r\n\r\n    renderLightBox(files) {\r\n        const imgCls = prefixNS('file-viewer-lightbox__image');\r\n        const capCls = prefixNS('file-viewer-lightbox__caption');\r\n        const dialogCls = classNames(\r\n            prefixNS('file-viewer-lightbox'),\r\n            {\r\n                [prefixNS('file-viewer-lightbox--single')]: files.count() <= 1\r\n            });\r\n        return (\r\n            <Dialog.Dialog show={true}\r\n                           hideFooter={true}\r\n                           showCancel={true}\r\n                           sizes={this.dialogSizes}\r\n                           dialogClassName={dialogCls}\r\n                           onHide={this.closeLightBox}\r\n                           title={formatStr('images')}>\r\n                <Carousel activeIndex={this.state.showing}\r\n                          direction={this.state.direction}\r\n                          onSelect={this.selectItem}>\r\n                    {files.map((file) => (\r\n                        <Carousel.Item key={file.get('@id')}>\r\n                            <div className={imgCls}>\r\n                                <Renderer file={file}/>\r\n                            </div>\r\n                           <span className={capCls}>{file.get('cdbf_name')}</span>\r\n                        </Carousel.Item>\r\n                    ))}\r\n                </Carousel>\r\n            </Dialog.Dialog>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const {activityEntry} = this.props;\r\n        const files = activityEntry.getIn(\r\n            ['relship:files', 'targets'], Immutable.List());\r\n        const viewable = files.filter(file =>\r\n            isSupportedImageType(getType(file)) ||\r\n            isSupportedVideoType(getType(file))\r\n        );\r\n        if (viewable.count() < 1) {\r\n            return null;\r\n        }\r\n        const lightBox = this.state.lightBox ? this.renderLightBox(viewable) : null;\r\n        return (\r\n            <div className={prefixNS('file-viewer')}>\r\n                {lightBox}\r\n                <div className={prefixNS('file-viewer-preview')}>\r\n                    <div className={prefixNS('file-viewer-preview-image')}\r\n                         onClick={this.openLightBox}>\r\n                        <Renderer file={viewable.get(0)}/>\r\n                        <Label bsStyle=\"default\"\r\n                               className={prefixNS('file-viewer-preview-counter')}>\r\n                            {formatStr('one-of', {n: viewable.count()})}\r\n                        </Label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nFileViewer.propTypes = {\r\n    activityEntry: ImmutablePropTypes.map.isRequired,\r\n    onSubmit: PropTypes.func\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FileViewer.jsx","module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactBootstrap\"\n// module id = 16\n// module chunks = 0","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: PostingAuthor.jsx 174161 2018-03-07 14:27:13Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {Navigation} from 'cs-web-components-base';\r\nimport {ImmutablePropTypes} from 'cs-web-components-externals';\r\n\r\nexport default function PostingAuthor(props) {\r\n    const {posting} = props;\r\n    const person = posting.get('author');\r\n    const link = person.get('system:ui_link');\r\n    const name = person.get('name');\r\n    if (link) {\r\n        return (\r\n            <Navigation.Link to={link}>\r\n                {name}\r\n            </Navigation.Link>\r\n        );\r\n    }\r\n    return (\r\n        <span>{name}</span>\r\n    );\r\n}\r\n\r\nPostingAuthor.propTypes = {\r\n    posting: ImmutablePropTypes.map.isRequired\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PostingAuthor.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: PageLayout.jsx 162172 2017-07-26 08:22:43Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {prefixNS} from '../helpers';\r\nimport Sidebar from '../components/Sidebar';\r\nimport {classNames, PropTypes} from 'cs-web-components-externals';\r\nimport {PageFrame, parseQuery} from 'cs-web-components-base';\r\n\r\nexport default function PageLayout({location, noSidebar, children}) {\r\n    const embedded = parseInt(parseQuery(location).embedded) === 1;\r\n    const appCls = classNames(prefixNS('app'), {\r\n        [prefixNS('embedded')]: embedded\r\n    });\r\n    const page = (\r\n        <div className={appCls}>\r\n            <div className={prefixNS('app-sidebar')}>\r\n                {!noSidebar && !embedded ? (<Sidebar />) : null}\r\n            </div>\r\n            <div className={prefixNS('app-content')}>\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n    if (embedded) {\r\n        return page;\r\n    }\r\n    return (\r\n        <PageFrame.ApplicationFrame>\r\n            {page}\r\n        </PageFrame.ApplicationFrame>\r\n    );\r\n}\r\n\r\nPageLayout.propTypes = {\r\n    location: PropTypes.object,\r\n    noSidebar: PropTypes.bool\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/PageLayout.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: ReferenceObject.jsx 174199 2018-03-08 08:59:24Z vov $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {SVGIconAndLink, Button} from 'cs-web-components-base';\r\nimport {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport {prefixNS} from '../helpers';\r\nimport {formatStr} from '../i18n';\r\n\r\nexport default class ReferenceObject extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.onDelete = this.onDelete.bind(this);\r\n    }\r\n\r\n    onDelete() {\r\n        this.props.onDelete && this.props.onDelete(this.props.referenceObject);\r\n    }\r\n\r\n    render() {\r\n        const {referenceObject, onDelete} = this.props;\r\n        return (\r\n            <div className={prefixNS('reference-object')}\r\n                title={referenceObject.get('description')}>\r\n                {onDelete ? (\r\n                    <Button.IconButton\r\n                        buttonStyle=\"danger\"\r\n                        size=\"sm\"\r\n                        iconName=\"csweb_cancel\"\r\n                        onClick={this.onDelete}\r\n                        className={prefixNS('reference-object-delete')}\r\n                        title={formatStr('delete')} />\r\n                ) : null}\r\n                <SVGIconAndLink\r\n                    src={referenceObject.get('object_icon')}\r\n                    to={referenceObject.get('object_ui_link')}\r\n                    label={referenceObject.get('description')}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nReferenceObject.propTypes = {\r\n    referenceObject: ImmutablePropTypes.map.isRequired,\r\n    onDelete: PropTypes.func\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ReferenceObject.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Posting.jsx 168213 2017-11-10 10:00:44Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport SystemPosting from './SystemPosting';\r\nimport UserPosting from './UserPosting';\r\nimport Comments, {findCommentToPosting} from './Comments';\r\nimport CreateForm from './CreateForm';\r\nimport {connect, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport {createComment, assignTopics} from '../actions/actions';\r\nimport {formatStr} from '../i18n';\r\nimport {prefixNS} from '../helpers';\r\n\r\nexport class Posting extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            replyingTo: null\r\n        };\r\n        this.createComment = this.createComment.bind(this);\r\n        this.onComment = this.onComment.bind(this);\r\n        this.onCommentPosting = this.onCommentPosting.bind(this);\r\n        this.onCloseForm = this.onCloseForm.bind(this);\r\n    }\r\n\r\n    onComment(entry) {\r\n        this.setState({\r\n            replyingTo: entry ? entry.get('@id') : null\r\n        }, () => this.refs['commentForm'].expandForm());\r\n    }\r\n\r\n    onCommentPosting() {\r\n        this.onComment(null);\r\n    }\r\n\r\n    onCloseForm() {\r\n        this.setState({\r\n            replyingTo: null\r\n        });\r\n    }\r\n\r\n    createComment(text, attachments, files) {\r\n        const {posting, createComment} = this.props;\r\n        const replyTo = this.state.replyingTo ?\r\n            this.state.replyingTo : posting.get('comments').get('@id');\r\n        return createComment(replyTo, text, attachments, files);\r\n    }\r\n\r\n    isSystemPosting() {\r\n        const {posting} = this.props;\r\n        if (posting === undefined) {\r\n            return false;\r\n        }\r\n        return posting.get('is_system_posting');\r\n    }\r\n\r\n    render() {\r\n        const {posting, instanceName} = this.props;\r\n        const PostingComponent = this.isSystemPosting() ? SystemPosting : UserPosting;\r\n        const replyTo = this.state.replyingTo ?\r\n            findCommentToPosting(posting, this.state.replyingTo) : posting;\r\n        const replyToAuthor = replyTo.getIn(['author', 'name']);\r\n        return (\r\n            <PostingComponent\r\n                {...this.props}\r\n                className={prefixNS('posting')}\r\n                onComment={this.onCommentPosting}>\r\n                <Comments posting={posting} onComment={this.onComment} instanceName={instanceName}/>\r\n                <CreateForm\r\n                    label={formatStr('new-comment', {name: replyToAuthor})}\r\n                    placeholder={formatStr('write-answer')}\r\n                    createEntry={this.createComment}\r\n                    onClose={this.onCloseForm}\r\n                    ref=\"commentForm\"/>\r\n            </PostingComponent>\r\n        );\r\n    }\r\n}\r\n\r\nPosting.propTypes = {\r\n    instanceName: PropTypes.string.isRequired,\r\n    createComment: PropTypes.func.isRequired,\r\n    assignTopics: PropTypes.func.isRequired,\r\n    lastUpdatedAt: PropTypes.string,\r\n    posting: ImmutablePropTypes.map.isRequired\r\n};\r\n\r\nfunction mapDispatchToProps(dispatch, ownProps) {\r\n    const {instanceName, posting} = ownProps;\r\n    return {\r\n        createComment: (url, text, attachments, files) =>\r\n            dispatch(createComment(\r\n                instanceName, url, {posting, text, attachments, files})),\r\n        assignTopics: (topics) =>\r\n            dispatch(assignTopics(instanceName, posting, topics))\r\n    };\r\n}\r\n\r\nexport default connect(() => ({}), mapDispatchToProps)(Posting);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Posting.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Topics.jsx 166061 2017-09-28 13:27:35Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {SVGIconAndLink} from 'cs-web-components-base';\r\nimport {classNames, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport {prefixNS} from '../helpers';\r\n\r\nexport function Topic(props) {\r\n    const {topic} = props;\r\n    const link = topic.get('object_ui_link');\r\n    const icon = topic.get('object_icon');\r\n    const descr = topic.get('description');\r\n    const clsNames = classNames(\r\n        prefixNS('posting-topics-item'), props.className);\r\n    return (\r\n        <div className={clsNames} title={descr}>\r\n            <SVGIconAndLink label={descr}\r\n                            src={icon}\r\n                            to={link} />\r\n        </div>\r\n    );\r\n}\r\n\r\nTopic.propTypes = {\r\n    topic: ImmutablePropTypes.map.isRequired,\r\n    className: PropTypes.string\r\n};\r\n\r\nexport default function renderTopics(posting) {\r\n    const topics = posting.getIn(['topics', 'topics']);\r\n    if (!topics) {\r\n        return null;\r\n    }\r\n    return topics.map((topic, idx) =>\r\n        <Topic topic={topic}\r\n               key={topic.get('cdb_object_id')}\r\n               className={classNames({[prefixNS('main-topic')]: idx === 0})}/>\r\n    );\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Topics.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: CreateForm.jsx 168213 2017-11-10 10:00:44Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport Immutable from 'immutable';\r\nimport {FormControl, FileDropzone, Button, ButtonGroup,\r\n    isSupportedImageType, isSupportedVideoType, Throbber} from 'cs-web-components-base';\r\nimport {classNames, PropTypes} from 'cs-web-components-externals';\r\nimport {prefixNS} from '../helpers';\r\nimport {formatStr} from '../i18n';\r\nimport {AssignAttachments} from './Actions';\r\nimport Attachments from './Attachments';\r\n\r\nclass Renderer extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            src: this.getPreview(props),\r\n            isVideo: isSupportedVideoType(props.file.type)\r\n        };\r\n    }\r\n\r\n    getPreview(props) {\r\n        return FileDropzone.getPreview(props.file);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.file !== this.props.file) {\r\n            this.setState({\r\n                src: this.getPreview(nextProps),\r\n                isVideo: isSupportedVideoType(nextProps.file.type)\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        FileDropzone.revokePreview(this.state.src);\r\n    }\r\n\r\n    render() {\r\n        const {src, isVideo} = this.state;\r\n        if (isVideo) {\r\n            return (\r\n                <video src={src} />\r\n            );\r\n        } else {\r\n            return (\r\n                <img src={src} />\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nRenderer.propTypes = {\r\n    file: PropTypes.any.isRequired\r\n};\r\n\r\nconst calculatorClassName = prefixNS('form__height-calculator');\r\n\r\nexport default class CreateForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            newEntry: this.makeNewEntry(),\r\n            expanded: false,\r\n            height: null,\r\n            submitting: false\r\n        };\r\n        this.onChange = this.onChange.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n        this.onClose = this.onClose.bind(this);\r\n        this.expandForm = this.expandForm.bind(this);\r\n        this.assignAttachments = this.assignAttachments.bind(this);\r\n        this.onAddFiles = this.onAddFiles.bind(this);\r\n        this.onDeleteFile = this.onDeleteFile.bind(this);\r\n        this.onDeleteAttachment = this.onDeleteAttachment.bind(this);\r\n        this._form = null;\r\n    }\r\n\r\n    onChange(event) {\r\n        this.setState({\r\n            newEntry: this.state.newEntry.set('text', event.target.value)\r\n        }, () => {\r\n            if (this._form) {\r\n                const calcEls = this._form\r\n                    .getElementsByClassName(calculatorClassName);\r\n                if (calcEls.length) {\r\n                    const els = calcEls[0].getElementsByTagName('textarea');\r\n                    if (els.length) {\r\n                        // offsetHeight - clientHeight = border size!\r\n                        const newHeight = els[0].scrollHeight + (\r\n                            els[0].offsetHeight - els[0].clientHeight);\r\n                        this.setState({\r\n                            height: newHeight\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    makeNewEntry() {\r\n        return Immutable.fromJS({\r\n            text: '',\r\n            attachments: {\r\n                addable: true,\r\n                attachments: []\r\n            },\r\n            files: []\r\n        });\r\n    }\r\n\r\n    expandForm() {\r\n        this.setState({\r\n            expanded: true\r\n        });\r\n    }\r\n\r\n    onAddFiles(items) {\r\n        const prev = this.state.newEntry.get('files');\r\n        const prevNames = prev.map(file => file.name);\r\n        this.setState({\r\n            newEntry: this.state.newEntry.set(\r\n                'files',\r\n                prev.concat(\r\n                    Immutable.List(items).filter(\r\n                        item => !prevNames.contains(item.name) &&\r\n                                (isSupportedImageType(item.type) ||\r\n                                isSupportedVideoType(item.type))\r\n                    )))\r\n        });\r\n    }\r\n\r\n    onDeleteFile(file) {\r\n        const prev = this.state.newEntry.get('files');\r\n        const idx = prev.indexOf(file);\r\n        if (idx > -1) {\r\n            this.setState({\r\n                newEntry: this.state.newEntry.set(\r\n                    'files',\r\n                    prev.delete(idx)\r\n                )\r\n            });\r\n        }\r\n    }\r\n\r\n    assignAttachments(attachments) {\r\n        this.setState({\r\n            newEntry: this.state.newEntry.setIn(\r\n                ['attachments', 'attachments'], attachments)\r\n        });\r\n    }\r\n\r\n    onDeleteAttachment(attachment) {\r\n        const attachments = this.state.newEntry.getIn(\r\n            ['attachments', 'attachments']);\r\n        const idx = attachments.indexOf(attachment);\r\n        if (idx > -1) {\r\n            this.setState({\r\n                newEntry: this.state.newEntry.setIn(\r\n                    ['attachments', 'attachments'], attachments.delete(idx))\r\n            });\r\n        }\r\n    }\r\n\r\n    onSubmit() {\r\n        this.setState({submitting: true}, () => {\r\n            const {createEntry} = this.props;\r\n            const {newEntry} = this.state;\r\n            const text = newEntry.get('text', '');\r\n            const attachments = newEntry.getIn(['attachments', 'attachments'])\r\n                .map(obj => obj.get('cdb_object_id'));\r\n            const files = newEntry.get('files');\r\n            createEntry(text, attachments, files)\r\n                .then(this.onClose)\r\n                .catch(() => {\r\n                    this.setState({submitting: false});\r\n                });\r\n        });\r\n    }\r\n\r\n    onClose() {\r\n        this.setState({\r\n            expanded: false,\r\n            height: null,\r\n            newEntry: this.makeNewEntry(),\r\n            submitting: false\r\n        });\r\n        const {onClose} = this.props;\r\n        if (onClose) {\r\n            onClose();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {label, placeholder} = this.props;\r\n        const text = this.state.newEntry.get('text');\r\n        const fileList = this.state.newEntry.get('files');\r\n        const compactCls = classNames(prefixNS('form'), prefixNS('form--compact'));\r\n        const coverCls = classNames(prefixNS('form__cover'), {\r\n            [prefixNS('form__cover--submitting')]: this.state.submitting\r\n        });\r\n        const areaStl = this.state.height ? {height: this.state.height} : undefined;\r\n        return this.state.expanded ? (\r\n            <form className={prefixNS('form')}\r\n                  ref={c => this._form = c}>\r\n                <div className={coverCls}><Throbber /></div>\r\n                <FormControl.TextArea\r\n                    label={label}\r\n                    value={text}\r\n                    onChange={this.onChange}\r\n                    name=\"newActivity\"\r\n                    rows={3}\r\n                    style={areaStl}\r\n                    autoFocus\r\n                />\r\n                <FileDropzone className={prefixNS('form-upload-margin')} onDrop={this.onAddFiles}>\r\n                    <FileDropzone.Preview files={fileList}\r\n                                          onDelete={this.onDeleteFile}\r\n                                          Renderer={Renderer} />\r\n                    <div className={prefixNS('form-upload-placeholder')}>\r\n                        {formatStr('file-drop-text')}\r\n                    </div>\r\n                </FileDropzone>\r\n\r\n                <Attachments activityEntry={this.state.newEntry}\r\n                             onDelete={this.onDeleteAttachment}/>\r\n                <ButtonGroup>\r\n                    <Button.TextButton\r\n                        label={formatStr('publish')}\r\n                        onClick={this.onSubmit}\r\n                        buttonStyle=\"primary\"\r\n                        disabled={text === ''} />\r\n                    <Button.TextButton\r\n                        label={formatStr('cancel')}\r\n                        onClick={this.onClose} />\r\n                </ButtonGroup>\r\n                <ButtonGroup>\r\n                    <AssignAttachments\r\n                        activityEntry={this.state.newEntry}\r\n                        assignAttachments={this.assignAttachments}/>\r\n                </ButtonGroup>\r\n                <div className={calculatorClassName} aria-hidden={true}>\r\n                    <FormControl.TextArea\r\n                        value={text}\r\n                        name=\"heightCalculator\"\r\n                        rows={3}\r\n                    />\r\n                </div>\r\n            </form>\r\n        ) : (\r\n            <form className={compactCls}>\r\n                <FormControl.TextInput\r\n                    name=\"formTrigger\"\r\n                    placeholder={placeholder}\r\n                    onFocus={this.expandForm}/>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nCreateForm.propTypes = {\r\n    label: PropTypes.string,\r\n    placeholder: PropTypes.string,\r\n    createEntry: PropTypes.func.isRequired,\r\n    onClose: PropTypes.func\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CreateForm.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: ObjectPostings.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport Immutable from 'immutable';\r\nimport PostingList from './PostingList';\r\nimport {TOPIC_LINK} from '../constants';\r\nimport {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\n\r\nconst ObjectPostings = ({contextObject, instanceName, filter}) => {\r\n    if (contextObject === undefined) {\r\n        return null;\r\n    }\r\n    const url = `${TOPIC_LINK}/${contextObject.get('cdb_object_id')}`;\r\n    return (\r\n        <PostingList instanceName={instanceName} initDataURL={url} filter={filter}/>\r\n    );\r\n};\r\n\r\nObjectPostings.propTypes = {\r\n    instanceName: PropTypes.string.isRequired,\r\n    contextObject: ImmutablePropTypes.map,\r\n    filter: ImmutablePropTypes.map\r\n};\r\n\r\nObjectPostings.defaultProps = {\r\n    filter: Immutable.Map()\r\n};\r\n\r\nexport default ObjectPostings;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ObjectPostings.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: index.js 157065 2017-04-13 09:39:19Z gwe $\"\r\n */\r\n\r\nimport {Registry} from 'cs-web-components-base';\r\nimport {prefixNS} from './helpers';\r\nimport {combineReducers} from 'cs-web-components-externals';\r\nimport {collections, channels, subscriptions, links} from './reducers/reducers';\r\nimport App from './containers/App';\r\nimport PostingList from './components/PostingList';\r\nimport ObjectActivities from './components/ObjectActivities';\r\nimport ObjectActivitiesBlock from './components/ObjectActivitiesBlock';\r\nimport DashboardWidget from './dashboard_widget/DashboardWidget.jsx';\r\n\r\nRegistry.registerComponent(prefixNS('App'), App);\r\nRegistry.registerComponent(prefixNS('PostingList'), PostingList);\r\nRegistry.registerComponent(prefixNS('ObjectActivities'), ObjectActivities);\r\nRegistry.registerComponent(prefixNS('ObjectActivitiesBlock'), ObjectActivitiesBlock);\r\nRegistry.registerComponent(prefixNS('DashboardWidget'), DashboardWidget);\r\nRegistry.registerReducer(\r\n    componentNameSpace,\r\n    combineReducers({collections, channels, subscriptions, links}));\r\n\r\nexport default {\r\n    App,\r\n    PostingList,\r\n    ObjectActivities,\r\n    ObjectActivitiesBlock\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_25__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 25\n// module chunks = 0","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: reducers.js 164019 2017-08-25 15:37:23Z yzh $\"\r\n */\r\n\r\nimport Immutable from 'immutable';\r\nimport {RECEIVED_POSTINGS, POSTING_CREATED, POSTING_REMOVED,\r\n    APPEND_POSTINGS, POSTING_UPDATED, POSTING_UPDATING,\r\n    UPDATE_CONFIRMED, INCOMING_POSTINGS,\r\n    RECEIVED_CHANNELS, RECEIVED_SUBSCRIPTIONS} from '../actions/actions';\r\n\r\nconst getCollectionInfo = (col) => {\r\n    let result = Immutable.Map({});\r\n    const postings = col.postings;\r\n    const oids = Immutable.OrderedSet(postings.map(o => o['@id']));\r\n    result = result\r\n        .set('postings', oids)\r\n        .set('result_complete', col['result_complete']);\r\n    if (postings.length > 0) {\r\n        const lastOne = postings[postings.length - 1];\r\n        result = result\r\n            .set('lastCommentDate', lastOne['last_comment_date'])\r\n            .set('lastObjectId', lastOne['cdb_object_id']);\r\n    }\r\n    return result;\r\n};\r\n\r\nconst getCollectionTimestamp = (col) => {\r\n    const postings = col.postings;\r\n    if (postings.length > 0) {\r\n        const firstOne = postings[0];\r\n        return firstOne['last_comment_date'];\r\n    }\r\n    return undefined;\r\n};\r\n\r\nconst getCollectionUpdateTime = (col) => {\r\n    let result = Immutable.Map({});\r\n    const updatedAt = getCollectionTimestamp(col);\r\n    if (updatedAt) {\r\n        result = result\r\n            .set('updatedAt', updatedAt);\r\n    }\r\n    return result;\r\n};\r\n\r\nexport function collections(state = Immutable.Map(), action) {\r\n    const instanceName = action.meta && action.meta.instanceName;\r\n    if (action.type === RECEIVED_POSTINGS) {\r\n        return state.set(\r\n                    instanceName,\r\n                    Immutable.Map(action.payload)\r\n                        .merge(getCollectionInfo(action.payload))\r\n                        .merge(getCollectionUpdateTime(action.payload)));\r\n    } else if (instanceName && state.get(instanceName) === undefined) {\r\n        return state;\r\n    }\r\n    switch (action.type) {\r\n        case APPEND_POSTINGS: {\r\n            const prev = state.getIn([instanceName, 'postings']);\r\n            const updated = getCollectionInfo(action.payload)\r\n                .update('postings', (curr) => prev.union(curr));\r\n            return state.mergeIn([instanceName], updated);\r\n        }\r\n        case INCOMING_POSTINGS: {\r\n            const incoming = getCollectionInfo(action.payload);\r\n            return state.update(\r\n                instanceName,\r\n                (prevData) =>\r\n                    prevData.update(\r\n                        'postings',\r\n                        (prevCol) =>\r\n                            incoming.get('postings').union(prevCol)\r\n                    ));\r\n        }\r\n        case POSTING_CREATED: {\r\n            const posting = action.payload;\r\n            return state.update(\r\n                instanceName,\r\n                (prevData) =>\r\n                    prevData.update(\r\n                        'postings',\r\n                        (prevCol) =>\r\n                            Immutable.OrderedSet([posting['@id']]).union(prevCol)\r\n                    ).set('updatingPosting', posting['cdb_object_id'])\r\n            );\r\n        }\r\n        case POSTING_REMOVED: {\r\n            const postingURL = action.payload;\r\n            return state.update(\r\n                instanceName,\r\n                (prevData) =>\r\n                    prevData.update(\r\n                        'postings',\r\n                        (prevCol) => prevCol.delete(postingURL)\r\n                    )\r\n            );\r\n        }\r\n        case POSTING_UPDATING:\r\n            return state.update(\r\n                instanceName,\r\n                (prevData) => prevData.set(\r\n                    'updatingPosting', action.payload)\r\n            );\r\n        case POSTING_UPDATED:\r\n            return state.update(\r\n                instanceName,\r\n                (prevData) => prevData.set(\r\n                    'updatingPosting', undefined)\r\n            );\r\n        case UPDATE_CONFIRMED:\r\n            return state.update(\r\n                instanceName,\r\n                (prevData) =>\r\n                    prevData.set('updatedAt', action.payload)\r\n                        .set('updatingPosting', undefined)\r\n            );\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport function channels(state = Immutable.Map(), action) {\r\n    switch (action.type) {\r\n        case RECEIVED_CHANNELS:\r\n            return Immutable.fromJS(action.payload);\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport function subscriptions(state = Immutable.Map(), action) {\r\n    switch (action.type) {\r\n        case RECEIVED_SUBSCRIPTIONS:\r\n            return Immutable.fromJS(action.payload);\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport function links(state = Immutable.Map(), action) {\r\n    switch (action.type) {\r\n        case RECEIVED_CHANNELS:\r\n            return state.withMutations(prev => {\r\n                if (action.payload.predefined) {\r\n                    action.payload.predefined.forEach((channel) =>\r\n                        prev.set(channel['cdb_object_id'], channel['@id'])\r\n                    );\r\n                }\r\n                if (action.payload.channels) {\r\n                    action.payload.channels.forEach((channel) =>\r\n                        prev.set(channel['cdb_object_id'], channel['@id'])\r\n                    );\r\n                }\r\n            });\r\n        case RECEIVED_SUBSCRIPTIONS:\r\n            return state.withMutations(prev => {\r\n                if (action.payload.subscriptions) {\r\n                    action.payload.subscriptions.forEach((group) => {\r\n                        if (group.subscriptions) {\r\n                            group.subscriptions.forEach((channel) =>\r\n                                prev.set(\r\n                                    channel['cdb_object_id'], channel['@id'])\r\n                            );\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/reducers.js","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: App.jsx 162172 2017-07-26 08:22:43Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport AppMain from './AppMain';\r\nimport Thread from './Thread';\r\nimport {ReactRouter, browserHistory} from 'cs-web-components-externals';\r\nimport {APPBASE} from '../helpers';\r\n\r\nexport default class App extends React.Component {\r\n    render() {\r\n        const postingPath = `${APPBASE}/posting/:postingID`;\r\n        return (\r\n            <ReactRouter.Router history={browserHistory}>\r\n                <ReactRouter.Switch>\r\n                    <ReactRouter.Route path={postingPath} component={Thread}/>\r\n                    <ReactRouter.Route component={AppMain}/>\r\n                </ReactRouter.Switch>\r\n            </ReactRouter.Router>\r\n        );\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/App.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: AppMain.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport PageLayout from './PageLayout';\r\nimport FilterBar from '../components/FilterBar';\r\nimport PostingList from '../components/PostingList';\r\nimport {getPostingURL, byTopicURL} from '../helpers';\r\nimport {STANDALONE_INSTANCE} from '../constants';\r\nimport Immutable from 'immutable';\r\nimport {connect, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport {parseQuery} from 'cs-web-components-base';\r\n\r\nfunction getQuery(location) {\r\n    return Immutable.Map(parseQuery(location));\r\n}\r\n\r\nclass AppMain extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            query: getQuery(props.location)\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.location.search !== this.props.location.search) {\r\n            this.setState({\r\n                query: getQuery(nextProps.location)\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {links, location} = this.props;\r\n        const topic = this.state.query.get('topic');\r\n        const dataURL = topic === undefined ?\r\n            getPostingURL() : links.get(topic, byTopicURL(topic));\r\n        return (\r\n            <PageLayout location={location}>\r\n                <FilterBar />\r\n                <PostingList\r\n                    instanceName={STANDALONE_INSTANCE}\r\n                    initDataURL={dataURL}\r\n                    filter={this.state.query}/>\r\n            </PageLayout>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {links: state[componentNameSpace].links};\r\n}\r\n\r\nAppMain.propTypes = {\r\n    links: ImmutablePropTypes.map,\r\n    location: PropTypes.object\r\n};\r\n\r\nexport default connect(mapStateToProps)(AppMain);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/AppMain.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Sidebar.jsx 168430 2017-11-14 13:52:36Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport Channels from './Channels';\r\nimport Channel from './Channel';\r\nimport Subscriptions from './Subscriptions';\r\nimport Immutable from 'immutable';\r\nimport {formatStr} from '../i18n';\r\nimport {prefixNS} from '../helpers';\r\nimport {ReactRouter, PropTypes} from 'cs-web-components-externals';\r\nimport {parseQuery, FormControl} from 'cs-web-components-base';\r\n\r\nclass Sidebar extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            filter: ''\r\n        };\r\n        this.setFilter = this.setFilter.bind(this);\r\n    }\r\n\r\n    setFilter(value) {\r\n        this.setState({\r\n            filter: value\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {location} = this.props;\r\n        const showAll = Immutable.Map({\r\n            cdb_object_id: undefined,\r\n            description: formatStr('all')\r\n        });\r\n        const currentTopic = parseQuery(location).topic;\r\n        const {filter} = this.state;\r\n        return (\r\n            <div className={prefixNS('sidebar-navigations')}>\r\n                <div className={prefixNS('filter-bar')}>\r\n                    <div className={prefixNS('filter-bar-filter')}>\r\n                        <FormControl.TextInput\r\n                            name={prefixNS('channel-filter')}\r\n                            placeholder={formatStr('filter_by_channel')}\r\n                            value={filter}\r\n                            onValueChange={this.setFilter}/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"clearfix\"/>\r\n                <Channel\r\n                    className={prefixNS('channel-show-all')}\r\n                    channel={showAll}\r\n                    currentTopic={currentTopic}\r\n                    location={location} />\r\n                <Channels location={location}\r\n                          currentTopic={currentTopic}\r\n                          filter={filter}/>\r\n                <Subscriptions location={location}\r\n                               currentTopic={currentTopic}\r\n                               filter={filter}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nSidebar.propTypes = {\r\n    location: PropTypes.object\r\n};\r\n\r\nexport default ReactRouter.withRouter(Sidebar);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Sidebar.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Channels.jsx 168151 2017-11-09 14:47:33Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {formatStr} from '../i18n';\r\nimport {prefixNS, filterChannels} from '../helpers';\r\nimport {Collapsible} from 'cs-web-components-base';\r\nimport {connect, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport {fetchChannels} from '../actions/actions';\r\nimport Channel from './Channel';\r\nimport Immutable from 'immutable';\r\n\r\nclass Channels extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            channels: this.getChannels(props)\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.fetchChannels();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.filter !== this.props.filter ||\r\n            nextProps.channels !== this.props.channels) {\r\n            this.setState({channels: this.getChannels(nextProps)});\r\n        }\r\n    }\r\n\r\n    getChannels(props) {\r\n        const {channels, filter} = props;\r\n        let result = Immutable.OrderedSet();\r\n        if (!channels) {\r\n            return result;\r\n        }\r\n        const predefined = channels.get('predefined');\r\n        if (predefined) {\r\n            result = result.union(predefined);\r\n        }\r\n        const others = channels.get('channels');\r\n        if (others) {\r\n            result = result.union(others);\r\n        }\r\n        return filterChannels(result, filter);\r\n    }\r\n\r\n    renderPredefined() {\r\n        const {channels} = this.props;\r\n        if (!channels) {\r\n            return null;\r\n        }\r\n        const predefined = channels.get('predefined');\r\n        if (!predefined) {\r\n            return null;\r\n        }\r\n        return predefined.map(channel => (\r\n            <Channel\r\n                key={channel.get('cdb_object_id')}\r\n                channel={channel}/>\r\n        ));\r\n    }\r\n\r\n    renderOthers() {\r\n        const {channels} = this.props;\r\n        if (!channels) {\r\n            return null;\r\n        }\r\n        const others = channels.get('channels');\r\n        if (!others) {\r\n            return null;\r\n        }\r\n        return others.map(channel => (\r\n            <Channel\r\n                key={channel.get('cdb_object_id')}\r\n                channel={channel}/>\r\n        ));\r\n    }\r\n\r\n    render() {\r\n        const {location, currentTopic, filter} = this.props;\r\n        const {channels} = this.state;\r\n        const isActive = filter || channels.find(\r\n                channel => channel.get('cdb_object_id') === currentTopic);\r\n        return (\r\n            <div className={prefixNS('channels')}>\r\n                <Collapsible initialCollapsed={!isActive}\r\n                             header={formatStr('channels')}>\r\n                    {channels.map(channel =>\r\n                        <Channel\r\n                            key={channel.get('cdb_object_id')}\r\n                            channel={channel}\r\n                            currentTopic={currentTopic}\r\n                            location={location}/>\r\n                    )}\r\n                </Collapsible>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nChannels.propTypes = {\r\n    channels: ImmutablePropTypes.map,\r\n    fetchChannels: PropTypes.func,\r\n    currentTopic: PropTypes.string,\r\n    location: PropTypes.object,\r\n    filter: PropTypes.string\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    const channels = state[componentNameSpace].channels;\r\n    return {channels};\r\n}\r\n\r\nexport default connect(mapStateToProps, {fetchChannels})(Channels);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Channels.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Subscriptions.jsx 168151 2017-11-09 14:47:33Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {prefixNS, filterChannels} from '../helpers';\r\nimport {Collapsible} from 'cs-web-components-base';\r\nimport {connect, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport {fetchSubscriptions} from '../actions/actions';\r\nimport Channel from './Channel';\r\n\r\nclass Subscriptions extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.renderEntries = this.renderEntries.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.fetchSubscriptions();\r\n    }\r\n\r\n    renderGroups() {\r\n        const {subscriptions} = this.props;\r\n        if (!subscriptions) {\r\n            return null;\r\n        }\r\n        const groups = subscriptions.get('subscriptions');\r\n        if (!groups) {\r\n            return null;\r\n        }\r\n        return groups.map(this.renderEntries);\r\n    }\r\n\r\n    renderEntries(group) {\r\n        const {currentTopic, location, filter} = this.props;\r\n        let channels = group.get('subscriptions');\r\n        if (!channels) {\r\n            return null;\r\n        }\r\n        channels = filterChannels(channels, filter);\r\n        const isActive = filter || channels.find(\r\n            channel => channel.get('cdb_object_id') === currentTopic);\r\n        const desc = group.get('description');\r\n        return (\r\n            <div className={prefixNS('subscriptions-group')}\r\n                 key={desc}>\r\n                <Collapsible\r\n                    initialCollapsed={!isActive}\r\n                    header={desc}>\r\n                    {channels.map(channel => (\r\n                        <Channel\r\n                            key={channel.get('cdb_object_id')}\r\n                            channel={channel}\r\n                            currentTopic={currentTopic}\r\n                            location={location}/>\r\n                    ))}\r\n                </Collapsible>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={prefixNS('subscriptions')}>\r\n                {this.renderGroups()}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nSubscriptions.propTypes = {\r\n    fetchSubscriptions: PropTypes.func,\r\n    subscriptions: ImmutablePropTypes.map,\r\n    currentTopic: PropTypes.string,\r\n    location: PropTypes.object,\r\n    filter: PropTypes.string\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    const subscriptions = state[componentNameSpace].subscriptions;\r\n    return {subscriptions};\r\n}\r\n\r\nexport default connect(mapStateToProps, {fetchSubscriptions})(Subscriptions);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Subscriptions.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: FilterBar.jsx 168430 2017-11-14 13:52:36Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {prefixNS} from '../helpers';\r\nimport {formatStr} from '../i18n';\r\nimport {DateFilter, SystemPostingFilter} from './Actions';\r\nimport PersonFilter from './PersonFilter';\r\nimport {Button, parseQuery, updateQuery} from 'cs-web-components-base';\r\nimport {ReactRouter, PropTypes} from 'cs-web-components-externals';\r\n\r\nfunction getFilter(location) {\r\n    const {author, pn, date, systemposting} = parseQuery(location);\r\n    return {author, pn, date, systemposting};\r\n}\r\n\r\nclass FilterBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = getFilter(props.location);\r\n        this.onPersonChange = this.onPersonChange.bind(this);\r\n        this.onDateChange = this.onDateChange.bind(this);\r\n        this.onFilter = this.onFilter.bind(this);\r\n        this.onClearFilter = this.onClearFilter.bind(this);\r\n        this.toggleSystemPostingFilter = this.toggleSystemPostingFilter.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.location.search !== this.props.location.search) {\r\n            this.setState(getFilter(nextProps.location));\r\n        }\r\n    }\r\n\r\n    onPersonChange({author, pn}) {\r\n        this.setState({\r\n            author, pn\r\n        });\r\n    }\r\n\r\n    onDateChange(date) {\r\n        this.setState({date: date ? date : undefined});\r\n    }\r\n\r\n    toggleSystemPostingFilter() {\r\n        this.setState({\r\n            systemposting: SystemPostingFilter.toggleFilterState(\r\n                this.state.systemposting)\r\n        }, this.onFilter);\r\n    }\r\n\r\n    onFilter() {\r\n        const {location, history} = this.props;\r\n        const {author, pn, date, systemposting} = this.state;\r\n        const to = updateQuery(location, {author, pn, date, systemposting});\r\n        history.push(to);\r\n    }\r\n\r\n    onClearFilter() {\r\n        this.setState({\r\n            author: undefined,\r\n            pn: undefined,\r\n            date: undefined,\r\n            systemposting: undefined\r\n        }, this.onFilter);\r\n    }\r\n\r\n    render() {\r\n        const {author, date, systemposting} = this.state;\r\n        const disabled = !author && !date;\r\n        return (\r\n            <div className={prefixNS('filter-bar')}>\r\n                <div className={prefixNS('filter-bar-filter')}>\r\n                    <PersonFilter onFilterChange={this.onPersonChange}\r\n                                  value={author}/>\r\n                </div>\r\n                <div className={prefixNS('filter-bar-filter')}>\r\n                    <DateFilter onFilterChange={this.onDateChange}\r\n                                value={date}/>\r\n                </div>\r\n                <div className={prefixNS('filter-bar-systemposting')}>\r\n                    <SystemPostingFilter\r\n                        filterState={systemposting}\r\n                        onChange={this.toggleSystemPostingFilter}/>\r\n                </div>\r\n                <div className={prefixNS('filter-bar-buttons')}>\r\n                    <Button.TextButton title={formatStr('filter')}\r\n                                       buttonStyle=\"primary\"\r\n                                       onClick={this.onFilter}\r\n                                       disabled={disabled}/>\r\n                    <Button.TextButton title={formatStr('reset')}\r\n                                       buttonStyle=\"warning\"\r\n                                       onClick={this.onClearFilter}/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nFilterBar.propTypes = {\r\n    location: PropTypes.object,\r\n    history: PropTypes.object\r\n};\r\n\r\nexport default ReactRouter.withRouter(FilterBar);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FilterBar.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: PersonFilter.jsx 174161 2018-03-07 14:27:13Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {FormControl, Tiles, getJSON, getAppSetup, getIcon} from 'cs-web-components-base';\r\nimport {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport Immutable from 'immutable';\r\nimport {prefixNS} from '../helpers';\r\nimport {formatStr} from '../i18n';\r\n\r\nconst searchURL = getAppSetup().getIn([componentNameSpace, 'personSearchURL']);\r\nconst TypeAheadText = FormControl.WithTypeAhead(FormControl.TextInput);\r\nconst SEARCH_DELAY = 250;\r\n\r\nfunction PersonRenderer({item}) {\r\n    const contextObject = item.get('cs_activitystream_data');\r\n    const orgname = contextObject.get('orgname');\r\n    return (\r\n        <div className={prefixNS('person-filter-tile')}>\r\n            <Tiles.Tile contextObject={contextObject}\r\n                        fallbackImg={getIcon('csweb_person_fallback')}\r\n                        headerAttr='name'\r\n                        plain\r\n                        thumbnailSize='lg'>\r\n                <div title={orgname}>{orgname}</div>\r\n            </Tiles.Tile>\r\n        </div>\r\n    );\r\n}\r\n\r\nPersonRenderer.propTypes = {\r\n    item: ImmutablePropTypes.map\r\n};\r\n\r\nfunction normValue(value) {\r\n    return value === undefined ? '' : value;\r\n}\r\n\r\nexport default class PersonFilter extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            text: normValue(props.value),\r\n            matches: Immutable.List(),\r\n            hasMore: false\r\n        };\r\n        this._searchRequest = null;\r\n        this.ontextChange = this.ontextChange.bind(this);\r\n        this.onSelectAt = this.onSelectAt.bind(this);\r\n        this.onBlur = this.onBlur.bind(this);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.cancelRequest();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.value !== this.props.value) {\r\n            this.setState({\r\n                text: normValue(nextProps.value)\r\n            });\r\n        }\r\n    }\r\n\r\n    cancelRequest() {\r\n        if (this._searchRequest !== null) {\r\n            clearTimeout(this._searchRequest);\r\n        }\r\n    }\r\n\r\n    fetchMatches() {\r\n        const value = this.state.text;\r\n        this.cancelRequest();\r\n        if (!value) {\r\n            this.setState({\r\n                matches: Immutable.List(),\r\n                hasMore: false\r\n            });\r\n            return;\r\n        }\r\n        this._searchRequest = setTimeout(\r\n            () => {\r\n                getJSON(searchURL, {fulltextsearch: `${value}*`}).then(data => {\r\n                    this._searchRequest = null;\r\n                    this.setState({\r\n                        matches: Immutable.fromJS(data.result.result),\r\n                        hasMore: data.result.links.length > 0\r\n                    });\r\n                });\r\n            },\r\n            SEARCH_DELAY\r\n        );\r\n    }\r\n\r\n    ontextChange(value) {\r\n        this.setState({\r\n            text: value\r\n        }, this.fetchMatches);\r\n        if (!value) {\r\n            this.props.onFilterChange && this.props.onFilterChange({});\r\n        }\r\n    }\r\n\r\n    onSelectAt(idx) {\r\n        const hit = this.state.matches.get(idx);\r\n        this.setState({\r\n            text: hit.getIn(['cs_activitystream_data', 'name']),\r\n            matches: this.state.matches.clear().push(hit),\r\n            hasMore: false\r\n        });\r\n        this.props.onFilterChange && this.props.onFilterChange({\r\n            pn: hit.getIn(['cs_activitystream_data', 'personalnummer']),\r\n            author: hit.getIn(['cs_activitystream_data', 'name'])\r\n        });\r\n    }\r\n\r\n    onBlur() {\r\n        const value = normValue(this.props.value);\r\n        if (this.state.text !== value) {\r\n            this.setState({text: value});\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <TypeAheadText\r\n                name={prefixNS('person-filter')}\r\n                className={prefixNS('person-filter')}\r\n                TypeAheadItemRenderer={PersonRenderer}\r\n                value={this.state.text}\r\n                matched={this.state.matches}\r\n                onValueChange={this.ontextChange}\r\n                onSelectAt={this.onSelectAt}\r\n                hasMoreMatches={this.state.hasMore}\r\n                placeholder={formatStr('filter_by_person')}\r\n                onBlur={this.onBlur}\r\n                autoSelectFirstMatch={true}/>\r\n        );\r\n    }\r\n}\r\n\r\nPersonFilter.propTypes = {\r\n    value: PropTypes.string,\r\n    onFilterChange: PropTypes.func\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PersonFilter.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: SystemPosting.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport PostingLayout from './PostingLayout';\r\nimport {prefixNS} from '../helpers';\r\nimport {Comment, Share, AssignTopics} from './Actions';\r\nimport ActivityDate from './ActivityDate';\r\nimport renderTopics from './Topics';\r\nimport ActivityText from './ActivityText';\r\nimport FileViewer from './FileViewer';\r\nimport PostingAuthor from './PostingAuthor';\r\nimport {classNames, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\n\r\nexport default class SystemPosting extends React.Component {\r\n    render() {\r\n        const {posting, onComment, assignTopics, className} = this.props;\r\n        const topics = renderTopics(posting);\r\n        return (\r\n            <PostingLayout\r\n                {...this.props}\r\n                showAuthor={true}\r\n                className={classNames(className, prefixNS('system-posting'))}>\r\n                <PostingLayout.Title>\r\n                    <span>{this.props.posting.get('title')}</span>\r\n                </PostingLayout.Title>\r\n                <PostingLayout.Nav>\r\n                    <PostingAuthor posting={posting}/>\r\n                    <ActivityDate activityEntry={posting} className=\"text-muted\"/>\r\n                    {topics}\r\n                    <AssignTopics activityEntry={posting}\r\n                                  assignTopics={assignTopics}/>\r\n                </PostingLayout.Nav>\r\n                <ActivityText activityEntry={posting}/>\r\n                <FileViewer activityEntry={posting}/>\r\n                <PostingLayout.Footer activityEntry={posting}>\r\n                    <Comment onClick={onComment}/>\r\n                    <Share activityEntry={posting}/>\r\n                </PostingLayout.Footer>\r\n                {this.props.children}\r\n            </PostingLayout>\r\n        );\r\n    }\r\n}\r\n\r\nSystemPosting.propTypes = {\r\n    posting: ImmutablePropTypes.map.isRequired,\r\n    onComment: PropTypes.func,\r\n    assignTopics: PropTypes.func,\r\n    className: PropTypes.string\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/SystemPosting.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: PersonPicture.jsx 172891 2018-02-05 16:14:08Z vov $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {Navigation, getIcon, Thumbnail} from 'cs-web-components-base';\r\nimport {ImmutablePropTypes} from 'cs-web-components-externals';\r\n\r\nexport default function PersonPicture(props) {\r\n    const {person} = props;\r\n    const link = person.get('system:ui_link');\r\n    const picture = person.getIn(['relship:files', 'targets']).find(\r\n        f => f.get('cdbf_primary') === '1'\r\n    );\r\n    const pictureSrc = picture ? picture.get('@id') : null;\r\n    const pictureComp = (\r\n      <Thumbnail imgSrc={pictureSrc}\r\n                 fallbackSrc={getIcon('csweb_person_fallback')}\r\n                 size=\"md\"/>\r\n    );\r\n    if (link) {\r\n        return (\r\n            <Navigation.Link to={link} className=\"cs-activitystream-web-picture\">\r\n                {pictureComp}\r\n            </Navigation.Link>);\r\n    }\r\n    return pictureComp;\r\n}\r\n\r\nPersonPicture.propTypes = {\r\n    person: ImmutablePropTypes.map.isRequired\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PersonPicture.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Footer.jsx 160417 2017-06-16 12:09:10Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport Attachments from './Attachments';\r\nimport {prefixNS} from '../helpers';\r\nimport {ImmutablePropTypes} from 'cs-web-components-externals';\r\n\r\nexport default class Footer extends React.PureComponent {\r\n    render() {\r\n        const {activityEntry} = this.props;\r\n        return (\r\n            <div className={prefixNS('footer')}>\r\n                <Attachments activityEntry={activityEntry}/>\r\n                <div className={prefixNS('footer-actions')}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nFooter.propTypes = {\r\n    activityEntry: ImmutablePropTypes.map.isRequired\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Footer.jsx","/*!\n * Autolinker.js\n * 1.4.2\n *\n * Copyright(c) 2017 Gregory Jacobs <greg@greg-jacobs.com>\n * MIT License\n *\n * https://github.com/gregjacobs/Autolinker.js\n */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.Autolinker = factory();\n  }\n}(this, function() {\n/**\n * @class Autolinker\n * @extends Object\n *\n * Utility class used to process a given string of text, and wrap the matches in\n * the appropriate anchor (&lt;a&gt;) tags to turn them into links.\n *\n * Any of the configuration options may be provided in an Object (map) provided\n * to the Autolinker constructor, which will configure how the {@link #link link()}\n * method will process the links.\n *\n * For example:\n *\n *     var autolinker = new Autolinker( {\n *         newWindow : false,\n *         truncate  : 30\n *     } );\n *\n *     var html = autolinker.link( \"Joe went to www.yahoo.com\" );\n *     // produces: 'Joe went to <a href=\"http://www.yahoo.com\">yahoo.com</a>'\n *\n *\n * The {@link #static-link static link()} method may also be used to inline\n * options into a single call, which may be more convenient for one-off uses.\n * For example:\n *\n *     var html = Autolinker.link( \"Joe went to www.yahoo.com\", {\n *         newWindow : false,\n *         truncate  : 30\n *     } );\n *     // produces: 'Joe went to <a href=\"http://www.yahoo.com\">yahoo.com</a>'\n *\n *\n * ## Custom Replacements of Links\n *\n * If the configuration options do not provide enough flexibility, a {@link #replaceFn}\n * may be provided to fully customize the output of Autolinker. This function is\n * called once for each URL/Email/Phone#/Hashtag/Mention (Twitter, Instagram)\n * match that is encountered.\n *\n * For example:\n *\n *     var input = \"...\";  // string with URLs, Email Addresses, Phone #s, Hashtags, and Mentions (Twitter, Instagram)\n *\n *     var linkedText = Autolinker.link( input, {\n *         replaceFn : function( match ) {\n *             console.log( \"href = \", match.getAnchorHref() );\n *             console.log( \"text = \", match.getAnchorText() );\n *\n *             switch( match.getType() ) {\n *                 case 'url' :\n *                     console.log( \"url: \", match.getUrl() );\n *\n *                     if( match.getUrl().indexOf( 'mysite.com' ) === -1 ) {\n *                         var tag = match.buildTag();  // returns an `Autolinker.HtmlTag` instance, which provides mutator methods for easy changes\n *                         tag.setAttr( 'rel', 'nofollow' );\n *                         tag.addClass( 'external-link' );\n *\n *                         return tag;\n *\n *                     } else {\n *                         return true;  // let Autolinker perform its normal anchor tag replacement\n *                     }\n *\n *                 case 'email' :\n *                     var email = match.getEmail();\n *                     console.log( \"email: \", email );\n *\n *                     if( email === \"my@own.address\" ) {\n *                         return false;  // don't auto-link this particular email address; leave as-is\n *                     } else {\n *                         return;  // no return value will have Autolinker perform its normal anchor tag replacement (same as returning `true`)\n *                     }\n *\n *                 case 'phone' :\n *                     var phoneNumber = match.getPhoneNumber();\n *                     console.log( phoneNumber );\n *\n *                     return '<a href=\"http://newplace.to.link.phone.numbers.to/\">' + phoneNumber + '</a>';\n *\n *                 case 'hashtag' :\n *                     var hashtag = match.getHashtag();\n *                     console.log( hashtag );\n *\n *                     return '<a href=\"http://newplace.to.link.hashtag.handles.to/\">' + hashtag + '</a>';\n *\n *                 case 'mention' :\n *                     var mention = match.getMention();\n *                     console.log( mention );\n *\n *                     return '<a href=\"http://newplace.to.link.mention.to/\">' + mention + '</a>';\n *             }\n *         }\n *     } );\n *\n *\n * The function may return the following values:\n *\n * - `true` (Boolean): Allow Autolinker to replace the match as it normally\n *   would.\n * - `false` (Boolean): Do not replace the current match at all - leave as-is.\n * - Any String: If a string is returned from the function, the string will be\n *   used directly as the replacement HTML for the match.\n * - An {@link Autolinker.HtmlTag} instance, which can be used to build/modify\n *   an HTML tag before writing out its HTML text.\n *\n * @constructor\n * @param {Object} [cfg] The configuration options for the Autolinker instance,\n *   specified in an Object (map).\n */\nvar Autolinker = function( cfg ) {\n\tcfg = cfg || {};\n\n\tthis.version = Autolinker.version;\n\n\tthis.urls = this.normalizeUrlsCfg( cfg.urls );\n\tthis.email = typeof cfg.email === 'boolean' ? cfg.email : true;\n\tthis.phone = typeof cfg.phone === 'boolean' ? cfg.phone : true;\n\tthis.hashtag = cfg.hashtag || false;\n\tthis.mention = cfg.mention || false;\n\tthis.newWindow = typeof cfg.newWindow === 'boolean' ? cfg.newWindow : true;\n\tthis.stripPrefix = this.normalizeStripPrefixCfg( cfg.stripPrefix );\n\tthis.stripTrailingSlash = typeof cfg.stripTrailingSlash === 'boolean' ? cfg.stripTrailingSlash : true;\n\n\t// Validate the value of the `mention` cfg\n\tvar mention = this.mention;\n\tif( mention !== false && mention !== 'twitter' && mention !== 'instagram' ) {\n\t\tthrow new Error( \"invalid `mention` cfg - see docs\" );\n\t}\n\n\t// Validate the value of the `hashtag` cfg\n\tvar hashtag = this.hashtag;\n\tif( hashtag !== false && hashtag !== 'twitter' && hashtag !== 'facebook' && hashtag !== 'instagram' ) {\n\t\tthrow new Error( \"invalid `hashtag` cfg - see docs\" );\n\t}\n\n\tthis.truncate = this.normalizeTruncateCfg( cfg.truncate );\n\tthis.className = cfg.className || '';\n\tthis.replaceFn = cfg.replaceFn || null;\n\tthis.context = cfg.context || this;\n\n\tthis.htmlParser = null;\n\tthis.matchers = null;\n\tthis.tagBuilder = null;\n};\n\n\n\n/**\n * Automatically links URLs, Email addresses, Phone Numbers, Twitter handles,\n * Hashtags, and Mentions found in the given chunk of HTML. Does not link URLs\n * found within HTML tags.\n *\n * For instance, if given the text: `You should go to http://www.yahoo.com`,\n * then the result will be `You should go to &lt;a href=\"http://www.yahoo.com\"&gt;http://www.yahoo.com&lt;/a&gt;`\n *\n * Example:\n *\n *     var linkedText = Autolinker.link( \"Go to google.com\", { newWindow: false } );\n *     // Produces: \"Go to <a href=\"http://google.com\">google.com</a>\"\n *\n * @static\n * @param {String} textOrHtml The HTML or text to find matches within (depending\n *   on if the {@link #urls}, {@link #email}, {@link #phone}, {@link #mention},\n *   {@link #hashtag}, and {@link #mention} options are enabled).\n * @param {Object} [options] Any of the configuration options for the Autolinker\n *   class, specified in an Object (map). See the class description for an\n *   example call.\n * @return {String} The HTML text, with matches automatically linked.\n */\nAutolinker.link = function( textOrHtml, options ) {\n\tvar autolinker = new Autolinker( options );\n\treturn autolinker.link( textOrHtml );\n};\n\n\n\n/**\n * Parses the input `textOrHtml` looking for URLs, email addresses, phone\n * numbers, username handles, and hashtags (depending on the configuration\n * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n * objects describing those matches (without making any replacements).\n *\n * Note that if parsing multiple pieces of text, it is slightly more efficient\n * to create an Autolinker instance, and use the instance-level {@link #parse}\n * method.\n *\n * Example:\n *\n *     var matches = Autolinker.parse( \"Hello google.com, I am asdf@asdf.com\", {\n *         urls: true,\n *         email: true\n *     } );\n *\n *     console.log( matches.length );           // 2\n *     console.log( matches[ 0 ].getType() );   // 'url'\n *     console.log( matches[ 0 ].getUrl() );    // 'google.com'\n *     console.log( matches[ 1 ].getType() );   // 'email'\n *     console.log( matches[ 1 ].getEmail() );  // 'asdf@asdf.com'\n *\n * @static\n * @param {String} textOrHtml The HTML or text to find matches within\n *   (depending on if the {@link #urls}, {@link #email}, {@link #phone},\n *   {@link #hashtag}, and {@link #mention} options are enabled).\n * @param {Object} [options] Any of the configuration options for the Autolinker\n *   class, specified in an Object (map). See the class description for an\n *   example call.\n * @return {Autolinker.match.Match[]} The array of Matches found in the\n *   given input `textOrHtml`.\n */\nAutolinker.parse = function( textOrHtml, options ) {\n\tvar autolinker = new Autolinker( options );\n\treturn autolinker.parse( textOrHtml );\n};\n\n\n/**\n * @static\n * @property {String} version (readonly)\n *\n * The Autolinker version number in the form major.minor.patch\n *\n * Ex: 0.25.1\n */\nAutolinker.version = '1.4.2';\n\n\nAutolinker.prototype = {\n\tconstructor : Autolinker,  // fix constructor property\n\n\t/**\n\t * @cfg {Boolean/Object} [urls]\n\t *\n\t * `true` if URLs should be automatically linked, `false` if they should not\n\t * be. Defaults to `true`.\n\t *\n\t * Examples:\n\t *\n\t *     urls: true\n\t *\n\t *     // or\n\t *\n\t *     urls: {\n\t *         schemeMatches : true,\n\t *         wwwMatches    : true,\n\t *         tldMatches    : true\n\t *     }\n\t *\n\t * As shown above, this option also accepts an Object form with 3 properties\n\t * to allow for more customization of what exactly gets linked. All default\n\t * to `true`:\n\t *\n\t * @cfg {Boolean} [urls.schemeMatches] `true` to match URLs found prefixed\n\t *   with a scheme, i.e. `http://google.com`, or `other+scheme://google.com`,\n\t *   `false` to prevent these types of matches.\n\t * @cfg {Boolean} [urls.wwwMatches] `true` to match urls found prefixed with\n\t *   `'www.'`, i.e. `www.google.com`. `false` to prevent these types of\n\t *   matches. Note that if the URL had a prefixed scheme, and\n\t *   `schemeMatches` is true, it will still be linked.\n\t * @cfg {Boolean} [urls.tldMatches] `true` to match URLs with known top\n\t *   level domains (.com, .net, etc.) that are not prefixed with a scheme or\n\t *   `'www.'`. This option attempts to match anything that looks like a URL\n\t *   in the given text. Ex: `google.com`, `asdf.org/?page=1`, etc. `false`\n\t *   to prevent these types of matches.\n\t */\n\n\t/**\n\t * @cfg {Boolean} [email=true]\n\t *\n\t * `true` if email addresses should be automatically linked, `false` if they\n\t * should not be.\n\t */\n\n\t/**\n\t * @cfg {Boolean} [phone=true]\n\t *\n\t * `true` if Phone numbers (\"(555)555-5555\") should be automatically linked,\n\t * `false` if they should not be.\n\t */\n\n\t/**\n\t * @cfg {Boolean/String} [hashtag=false]\n\t *\n\t * A string for the service name to have hashtags (ex: \"#myHashtag\")\n\t * auto-linked to. The currently-supported values are:\n\t *\n\t * - 'twitter'\n\t * - 'facebook'\n\t * - 'instagram'\n\t *\n\t * Pass `false` to skip auto-linking of hashtags.\n\t */\n\n\t/**\n\t * @cfg {String/Boolean} [mention=false]\n\t *\n\t * A string for the service name to have mentions (ex: \"@myuser\")\n\t * auto-linked to. The currently supported values are:\n\t *\n\t * - 'twitter'\n\t * - 'instagram'\n\t *\n\t * Defaults to `false` to skip auto-linking of mentions.\n\t */\n\n\t/**\n\t * @cfg {Boolean} [newWindow=true]\n\t *\n\t * `true` if the links should open in a new window, `false` otherwise.\n\t */\n\n\t/**\n\t * @cfg {Boolean/Object} [stripPrefix]\n\t *\n\t * `true` if 'http://' (or 'https://') and/or the 'www.' should be stripped\n\t * from the beginning of URL links' text, `false` otherwise. Defaults to\n\t * `true`.\n\t *\n\t * Examples:\n\t *\n\t *     stripPrefix: true\n\t *\n\t *     // or\n\t *\n\t *     stripPrefix: {\n\t *         scheme : true,\n\t *         www    : true\n\t *     }\n\t *\n\t * As shown above, this option also accepts an Object form with 2 properties\n\t * to allow for more customization of what exactly is prevented from being\n\t * displayed. Both default to `true`:\n\t *\n\t * @cfg {Boolean} [stripPrefix.scheme] `true` to prevent the scheme part of\n\t *   a URL match from being displayed to the user. Example:\n\t *   `'http://google.com'` will be displayed as `'google.com'`. `false` to\n\t *   not strip the scheme. NOTE: Only an `'http://'` or `'https://'` scheme\n\t *   will be removed, so as not to remove a potentially dangerous scheme\n\t *   (such as `'file://'` or `'javascript:'`)\n\t * @cfg {Boolean} [stripPrefix.www] www (Boolean): `true` to prevent the\n\t *   `'www.'` part of a URL match from being displayed to the user. Ex:\n\t *   `'www.google.com'` will be displayed as `'google.com'`. `false` to not\n\t *   strip the `'www'`.\n\t */\n\n\t/**\n\t * @cfg {Boolean} [stripTrailingSlash=true]\n\t *\n\t * `true` to remove the trailing slash from URL matches, `false` to keep\n\t *  the trailing slash.\n\t *\n\t *  Example when `true`: `http://google.com/` will be displayed as\n\t *  `http://google.com`.\n\t */\n\n\t/**\n\t * @cfg {Number/Object} [truncate=0]\n\t *\n\t * ## Number Form\n\t *\n\t * A number for how many characters matched text should be truncated to\n\t * inside the text of a link. If the matched text is over this number of\n\t * characters, it will be truncated to this length by adding a two period\n\t * ellipsis ('..') to the end of the string.\n\t *\n\t * For example: A url like 'http://www.yahoo.com/some/long/path/to/a/file'\n\t * truncated to 25 characters might look something like this:\n\t * 'yahoo.com/some/long/pat..'\n\t *\n\t * Example Usage:\n\t *\n\t *     truncate: 25\n\t *\n\t *\n\t *  Defaults to `0` for \"no truncation.\"\n\t *\n\t *\n\t * ## Object Form\n\t *\n\t * An Object may also be provided with two properties: `length` (Number) and\n\t * `location` (String). `location` may be one of the following: 'end'\n\t * (default), 'middle', or 'smart'.\n\t *\n\t * Example Usage:\n\t *\n\t *     truncate: { length: 25, location: 'middle' }\n\t *\n\t * @cfg {Number} [truncate.length=0] How many characters to allow before\n\t *   truncation will occur. Defaults to `0` for \"no truncation.\"\n\t * @cfg {\"end\"/\"middle\"/\"smart\"} [truncate.location=\"end\"]\n\t *\n\t * - 'end' (default): will truncate up to the number of characters, and then\n\t *   add an ellipsis at the end. Ex: 'yahoo.com/some/long/pat..'\n\t * - 'middle': will truncate and add the ellipsis in the middle. Ex:\n\t *   'yahoo.com/s..th/to/a/file'\n\t * - 'smart': for URLs where the algorithm attempts to strip out unnecessary\n\t *   parts first (such as the 'www.', then URL scheme, hash, etc.),\n\t *   attempting to make the URL human-readable before looking for a good\n\t *   point to insert the ellipsis if it is still too long. Ex:\n\t *   'yahoo.com/some..to/a/file'. For more details, see\n\t *   {@link Autolinker.truncate.TruncateSmart}.\n\t */\n\n\t/**\n\t * @cfg {String} className\n\t *\n\t * A CSS class name to add to the generated links. This class will be added\n\t * to all links, as well as this class plus match suffixes for styling\n\t * url/email/phone/hashtag/mention links differently.\n\t *\n\t * For example, if this config is provided as \"myLink\", then:\n\t *\n\t * - URL links will have the CSS classes: \"myLink myLink-url\"\n\t * - Email links will have the CSS classes: \"myLink myLink-email\", and\n\t * - Phone links will have the CSS classes: \"myLink myLink-phone\"\n\t * - Hashtag links will have the CSS classes: \"myLink myLink-hashtag\"\n\t * - Mention links will have the CSS classes: \"myLink myLink-mention myLink-[type]\"\n\t *   where [type] is either \"instagram\" or \"twitter\"\n\t */\n\n\t/**\n\t * @cfg {Function} replaceFn\n\t *\n\t * A function to individually process each match found in the input string.\n\t *\n\t * See the class's description for usage.\n\t *\n\t * The `replaceFn` can be called with a different context object (`this`\n\t * reference) using the {@link #context} cfg.\n\t *\n\t * This function is called with the following parameter:\n\t *\n\t * @cfg {Autolinker.match.Match} replaceFn.match The Match instance which\n\t *   can be used to retrieve information about the match that the `replaceFn`\n\t *   is currently processing. See {@link Autolinker.match.Match} subclasses\n\t *   for details.\n\t */\n\n\t/**\n\t * @cfg {Object} context\n\t *\n\t * The context object (`this` reference) to call the `replaceFn` with.\n\t *\n\t * Defaults to this Autolinker instance.\n\t */\n\n\n\t/**\n\t * @property {String} version (readonly)\n\t *\n\t * The Autolinker version number in the form major.minor.patch\n\t *\n\t * Ex: 0.25.1\n\t */\n\n\t/**\n\t * @private\n\t * @property {Autolinker.htmlParser.HtmlParser} htmlParser\n\t *\n\t * The HtmlParser instance used to skip over HTML tags, while finding text\n\t * nodes to process. This is lazily instantiated in the {@link #getHtmlParser}\n\t * method.\n\t */\n\n\t/**\n\t * @private\n\t * @property {Autolinker.matcher.Matcher[]} matchers\n\t *\n\t * The {@link Autolinker.matcher.Matcher} instances for this Autolinker\n\t * instance.\n\t *\n\t * This is lazily created in {@link #getMatchers}.\n\t */\n\n\t/**\n\t * @private\n\t * @property {Autolinker.AnchorTagBuilder} tagBuilder\n\t *\n\t * The AnchorTagBuilder instance used to build match replacement anchor tags.\n\t * Note: this is lazily instantiated in the {@link #getTagBuilder} method.\n\t */\n\n\n\t/**\n\t * Normalizes the {@link #urls} config into an Object with 3 properties:\n\t * `schemeMatches`, `wwwMatches`, and `tldMatches`, all Booleans.\n\t *\n\t * See {@link #urls} config for details.\n\t *\n\t * @private\n\t * @param {Boolean/Object} urls\n\t * @return {Object}\n\t */\n\tnormalizeUrlsCfg : function( urls ) {\n\t\tif( urls == null ) urls = true;  // default to `true`\n\n\t\tif( typeof urls === 'boolean' ) {\n\t\t\treturn { schemeMatches: urls, wwwMatches: urls, tldMatches: urls };\n\n\t\t} else {  // object form\n\t\t\treturn {\n\t\t\t\tschemeMatches : typeof urls.schemeMatches === 'boolean' ? urls.schemeMatches : true,\n\t\t\t\twwwMatches    : typeof urls.wwwMatches === 'boolean'    ? urls.wwwMatches    : true,\n\t\t\t\ttldMatches    : typeof urls.tldMatches === 'boolean'    ? urls.tldMatches    : true\n\t\t\t};\n\t\t}\n\t},\n\n\n\t/**\n\t * Normalizes the {@link #stripPrefix} config into an Object with 2\n\t * properties: `scheme`, and `www` - both Booleans.\n\t *\n\t * See {@link #stripPrefix} config for details.\n\t *\n\t * @private\n\t * @param {Boolean/Object} stripPrefix\n\t * @return {Object}\n\t */\n\tnormalizeStripPrefixCfg : function( stripPrefix ) {\n\t\tif( stripPrefix == null ) stripPrefix = true;  // default to `true`\n\n\t\tif( typeof stripPrefix === 'boolean' ) {\n\t\t\treturn { scheme: stripPrefix, www: stripPrefix };\n\n\t\t} else {  // object form\n\t\t\treturn {\n\t\t\t\tscheme : typeof stripPrefix.scheme === 'boolean' ? stripPrefix.scheme : true,\n\t\t\t\twww    : typeof stripPrefix.www === 'boolean'    ? stripPrefix.www    : true\n\t\t\t};\n\t\t}\n\t},\n\n\n\t/**\n\t * Normalizes the {@link #truncate} config into an Object with 2 properties:\n\t * `length` (Number), and `location` (String).\n\t *\n\t * See {@link #truncate} config for details.\n\t *\n\t * @private\n\t * @param {Number/Object} truncate\n\t * @return {Object}\n\t */\n\tnormalizeTruncateCfg : function( truncate ) {\n\t\tif( typeof truncate === 'number' ) {\n\t\t\treturn { length: truncate, location: 'end' };\n\n\t\t} else {  // object, or undefined/null\n\t\t\treturn Autolinker.Util.defaults( truncate || {}, {\n\t\t\t\tlength   : Number.POSITIVE_INFINITY,\n\t\t\t\tlocation : 'end'\n\t\t\t} );\n\t\t}\n\t},\n\n\n\t/**\n\t * Parses the input `textOrHtml` looking for URLs, email addresses, phone\n\t * numbers, username handles, and hashtags (depending on the configuration\n\t * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n\t * objects describing those matches (without making any replacements).\n\t *\n\t * This method is used by the {@link #link} method, but can also be used to\n\t * simply do parsing of the input in order to discover what kinds of links\n\t * there are and how many.\n\t *\n\t * Example usage:\n\t *\n\t *     var autolinker = new Autolinker( {\n\t *         urls: true,\n\t *         email: true\n\t *     } );\n\t *\n\t *     var matches = autolinker.parse( \"Hello google.com, I am asdf@asdf.com\" );\n\t *\n\t *     console.log( matches.length );           // 2\n\t *     console.log( matches[ 0 ].getType() );   // 'url'\n\t *     console.log( matches[ 0 ].getUrl() );    // 'google.com'\n\t *     console.log( matches[ 1 ].getType() );   // 'email'\n\t *     console.log( matches[ 1 ].getEmail() );  // 'asdf@asdf.com'\n\t *\n\t * @param {String} textOrHtml The HTML or text to find matches within\n\t *   (depending on if the {@link #urls}, {@link #email}, {@link #phone},\n\t *   {@link #hashtag}, and {@link #mention} options are enabled).\n\t * @return {Autolinker.match.Match[]} The array of Matches found in the\n\t *   given input `textOrHtml`.\n\t */\n\tparse : function( textOrHtml ) {\n\t\tvar htmlParser = this.getHtmlParser(),\n\t\t    htmlNodes = htmlParser.parse( textOrHtml ),\n\t\t    anchorTagStackCount = 0,  // used to only process text around anchor tags, and any inner text/html they may have;\n\t\t    matches = [];\n\n\t\t// Find all matches within the `textOrHtml` (but not matches that are\n\t\t// already nested within <a> tags)\n\t\tfor( var i = 0, len = htmlNodes.length; i < len; i++ ) {\n\t\t\tvar node = htmlNodes[ i ],\n\t\t\t    nodeType = node.getType();\n\n\t\t\tif( nodeType === 'element' && node.getTagName() === 'a' ) {  // Process HTML anchor element nodes in the input `textOrHtml` to find out when we're within an <a> tag\n\t\t\t\tif( !node.isClosing() ) {  // it's the start <a> tag\n\t\t\t\t\tanchorTagStackCount++;\n\t\t\t\t} else {  // it's the end </a> tag\n\t\t\t\t\tanchorTagStackCount = Math.max( anchorTagStackCount - 1, 0 );  // attempt to handle extraneous </a> tags by making sure the stack count never goes below 0\n\t\t\t\t}\n\n\t\t\t} else if( nodeType === 'text' && anchorTagStackCount === 0 ) {  // Process text nodes that are not within an <a> tag\n\t\t\t\tvar textNodeMatches = this.parseText( node.getText(), node.getOffset() );\n\n\t\t\t\tmatches.push.apply( matches, textNodeMatches );\n\t\t\t}\n\t\t}\n\n\n\t\t// After we have found all matches, remove subsequent matches that\n\t\t// overlap with a previous match. This can happen for instance with URLs,\n\t\t// where the url 'google.com/#link' would match '#link' as a hashtag.\n\t\tmatches = this.compactMatches( matches );\n\n\t\t// And finally, remove matches for match types that have been turned\n\t\t// off. We needed to have all match types turned on initially so that\n\t\t// things like hashtags could be filtered out if they were really just\n\t\t// part of a URL match (for instance, as a named anchor).\n\t\tmatches = this.removeUnwantedMatches( matches );\n\n\t\treturn matches;\n\t},\n\n\n\t/**\n\t * After we have found all matches, we need to remove subsequent matches\n\t * that overlap with a previous match. This can happen for instance with\n\t * URLs, where the url 'google.com/#link' would match '#link' as a hashtag.\n\t *\n\t * @private\n\t * @param {Autolinker.match.Match[]} matches\n\t * @return {Autolinker.match.Match[]}\n\t */\n\tcompactMatches : function( matches ) {\n\t\t// First, the matches need to be sorted in order of offset\n\t\tmatches.sort( function( a, b ) { return a.getOffset() - b.getOffset(); } );\n\n\t\tfor( var i = 0; i < matches.length - 1; i++ ) {\n\t\t\tvar match = matches[ i ],\n\t\t\t    endIdx = match.getOffset() + match.getMatchedText().length;\n\n\t\t\t// Remove subsequent matches that overlap with the current match\n\t\t\twhile( i + 1 < matches.length && matches[ i + 1 ].getOffset() <= endIdx ) {\n\t\t\t\tmatches.splice( i + 1, 1 );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\n\t/**\n\t * Removes matches for matchers that were turned off in the options. For\n\t * example, if {@link #hashtag hashtags} were not to be matched, we'll\n\t * remove them from the `matches` array here.\n\t *\n\t * @private\n\t * @param {Autolinker.match.Match[]} matches The array of matches to remove\n\t *   the unwanted matches from. Note: this array is mutated for the\n\t *   removals.\n\t * @return {Autolinker.match.Match[]} The mutated input `matches` array.\n\t */\n\tremoveUnwantedMatches : function( matches ) {\n\t\tvar remove = Autolinker.Util.remove;\n\n\t\tif( !this.hashtag ) remove( matches, function( match ) { return match.getType() === 'hashtag'; } );\n\t\tif( !this.email )   remove( matches, function( match ) { return match.getType() === 'email'; } );\n\t\tif( !this.phone )   remove( matches, function( match ) { return match.getType() === 'phone'; } );\n\t\tif( !this.mention ) remove( matches, function( match ) { return match.getType() === 'mention'; } );\n\t\tif( !this.urls.schemeMatches ) {\n\t\t\tremove( matches, function( m ) { return m.getType() === 'url' && m.getUrlMatchType() === 'scheme'; } );\n\t\t}\n\t\tif( !this.urls.wwwMatches ) {\n\t\t\tremove( matches, function( m ) { return m.getType() === 'url' && m.getUrlMatchType() === 'www'; } );\n\t\t}\n\t\tif( !this.urls.tldMatches ) {\n\t\t\tremove( matches, function( m ) { return m.getType() === 'url' && m.getUrlMatchType() === 'tld'; } );\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\n\t/**\n\t * Parses the input `text` looking for URLs, email addresses, phone\n\t * numbers, username handles, and hashtags (depending on the configuration\n\t * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n\t * objects describing those matches.\n\t *\n\t * This method processes a **non-HTML string**, and is used to parse and\n\t * match within the text nodes of an HTML string. This method is used\n\t * internally by {@link #parse}.\n\t *\n\t * @private\n\t * @param {String} text The text to find matches within (depending on if the\n\t *   {@link #urls}, {@link #email}, {@link #phone},\n\t *   {@link #hashtag}, and {@link #mention} options are enabled). This must be a non-HTML string.\n\t * @param {Number} [offset=0] The offset of the text node within the\n\t *   original string. This is used when parsing with the {@link #parse}\n\t *   method to generate correct offsets within the {@link Autolinker.match.Match}\n\t *   instances, but may be omitted if calling this method publicly.\n\t * @return {Autolinker.match.Match[]} The array of Matches found in the\n\t *   given input `text`.\n\t */\n\tparseText : function( text, offset ) {\n\t\toffset = offset || 0;\n\t\tvar matchers = this.getMatchers(),\n\t\t    matches = [];\n\n\t\tfor( var i = 0, numMatchers = matchers.length; i < numMatchers; i++ ) {\n\t\t\tvar textMatches = matchers[ i ].parseMatches( text );\n\n\t\t\t// Correct the offset of each of the matches. They are originally\n\t\t\t// the offset of the match within the provided text node, but we\n\t\t\t// need to correct them to be relative to the original HTML input\n\t\t\t// string (i.e. the one provided to #parse).\n\t\t\tfor( var j = 0, numTextMatches = textMatches.length; j < numTextMatches; j++ ) {\n\t\t\t\ttextMatches[ j ].setOffset( offset + textMatches[ j ].getOffset() );\n\t\t\t}\n\n\t\t\tmatches.push.apply( matches, textMatches );\n\t\t}\n\t\treturn matches;\n\t},\n\n\n\t/**\n\t * Automatically links URLs, Email addresses, Phone numbers, Hashtags,\n\t * and Mentions (Twitter, Instagram) found in the given chunk of HTML. Does not link\n\t * URLs found within HTML tags.\n\t *\n\t * For instance, if given the text: `You should go to http://www.yahoo.com`,\n\t * then the result will be `You should go to\n\t * &lt;a href=\"http://www.yahoo.com\"&gt;http://www.yahoo.com&lt;/a&gt;`\n\t *\n\t * This method finds the text around any HTML elements in the input\n\t * `textOrHtml`, which will be the text that is processed. Any original HTML\n\t * elements will be left as-is, as well as the text that is already wrapped\n\t * in anchor (&lt;a&gt;) tags.\n\t *\n\t * @param {String} textOrHtml The HTML or text to autolink matches within\n\t *   (depending on if the {@link #urls}, {@link #email}, {@link #phone}, {@link #hashtag}, and {@link #mention} options are enabled).\n\t * @return {String} The HTML, with matches automatically linked.\n\t */\n\tlink : function( textOrHtml ) {\n\t\tif( !textOrHtml ) { return \"\"; }  // handle `null` and `undefined`\n\n\t\tvar matches = this.parse( textOrHtml ),\n\t\t\tnewHtml = [],\n\t\t\tlastIndex = 0;\n\n\t\tfor( var i = 0, len = matches.length; i < len; i++ ) {\n\t\t\tvar match = matches[ i ];\n\n\t\t\tnewHtml.push( textOrHtml.substring( lastIndex, match.getOffset() ) );\n\t\t\tnewHtml.push( this.createMatchReturnVal( match ) );\n\n\t\t\tlastIndex = match.getOffset() + match.getMatchedText().length;\n\t\t}\n\t\tnewHtml.push( textOrHtml.substring( lastIndex ) );  // handle the text after the last match\n\n\t\treturn newHtml.join( '' );\n\t},\n\n\n\t/**\n\t * Creates the return string value for a given match in the input string.\n\t *\n\t * This method handles the {@link #replaceFn}, if one was provided.\n\t *\n\t * @private\n\t * @param {Autolinker.match.Match} match The Match object that represents\n\t *   the match.\n\t * @return {String} The string that the `match` should be replaced with.\n\t *   This is usually the anchor tag string, but may be the `matchStr` itself\n\t *   if the match is not to be replaced.\n\t */\n\tcreateMatchReturnVal : function( match ) {\n\t\t// Handle a custom `replaceFn` being provided\n\t\tvar replaceFnResult;\n\t\tif( this.replaceFn ) {\n\t\t\treplaceFnResult = this.replaceFn.call( this.context, match );  // Autolinker instance is the context\n\t\t}\n\n\t\tif( typeof replaceFnResult === 'string' ) {\n\t\t\treturn replaceFnResult;  // `replaceFn` returned a string, use that\n\n\t\t} else if( replaceFnResult === false ) {\n\t\t\treturn match.getMatchedText();  // no replacement for the match\n\n\t\t} else if( replaceFnResult instanceof Autolinker.HtmlTag ) {\n\t\t\treturn replaceFnResult.toAnchorString();\n\n\t\t} else {  // replaceFnResult === true, or no/unknown return value from function\n\t\t\t// Perform Autolinker's default anchor tag generation\n\t\t\tvar anchorTag = match.buildTag();  // returns an Autolinker.HtmlTag instance\n\n\t\t\treturn anchorTag.toAnchorString();\n\t\t}\n\t},\n\n\n\t/**\n\t * Lazily instantiates and returns the {@link #htmlParser} instance for this\n\t * Autolinker instance.\n\t *\n\t * @protected\n\t * @return {Autolinker.htmlParser.HtmlParser}\n\t */\n\tgetHtmlParser : function() {\n\t\tvar htmlParser = this.htmlParser;\n\n\t\tif( !htmlParser ) {\n\t\t\thtmlParser = this.htmlParser = new Autolinker.htmlParser.HtmlParser();\n\t\t}\n\n\t\treturn htmlParser;\n\t},\n\n\n\t/**\n\t * Lazily instantiates and returns the {@link Autolinker.matcher.Matcher}\n\t * instances for this Autolinker instance.\n\t *\n\t * @protected\n\t * @return {Autolinker.matcher.Matcher[]}\n\t */\n\tgetMatchers : function() {\n\t\tif( !this.matchers ) {\n\t\t\tvar matchersNs = Autolinker.matcher,\n\t\t\t    tagBuilder = this.getTagBuilder();\n\n\t\t\tvar matchers = [\n\t\t\t\tnew matchersNs.Hashtag( { tagBuilder: tagBuilder, serviceName: this.hashtag } ),\n\t\t\t\tnew matchersNs.Email( { tagBuilder: tagBuilder } ),\n\t\t\t\tnew matchersNs.Phone( { tagBuilder: tagBuilder } ),\n\t\t\t\tnew matchersNs.Mention( { tagBuilder: tagBuilder, serviceName: this.mention } ),\n\t\t\t\tnew matchersNs.Url( { tagBuilder: tagBuilder, stripPrefix: this.stripPrefix, stripTrailingSlash: this.stripTrailingSlash } )\n\t\t\t];\n\n\t\t\treturn ( this.matchers = matchers );\n\n\t\t} else {\n\t\t\treturn this.matchers;\n\t\t}\n\t},\n\n\n\t/**\n\t * Returns the {@link #tagBuilder} instance for this Autolinker instance, lazily instantiating it\n\t * if it does not yet exist.\n\t *\n\t * This method may be used in a {@link #replaceFn} to generate the {@link Autolinker.HtmlTag HtmlTag} instance that\n\t * Autolinker would normally generate, and then allow for modifications before returning it. For example:\n\t *\n\t *     var html = Autolinker.link( \"Test google.com\", {\n\t *         replaceFn : function( match ) {\n\t *             var tag = match.buildTag();  // returns an {@link Autolinker.HtmlTag} instance\n\t *             tag.setAttr( 'rel', 'nofollow' );\n\t *\n\t *             return tag;\n\t *         }\n\t *     } );\n\t *\n\t *     // generated html:\n\t *     //   Test <a href=\"http://google.com\" target=\"_blank\" rel=\"nofollow\">google.com</a>\n\t *\n\t * @return {Autolinker.AnchorTagBuilder}\n\t */\n\tgetTagBuilder : function() {\n\t\tvar tagBuilder = this.tagBuilder;\n\n\t\tif( !tagBuilder ) {\n\t\t\ttagBuilder = this.tagBuilder = new Autolinker.AnchorTagBuilder( {\n\t\t\t\tnewWindow   : this.newWindow,\n\t\t\t\ttruncate    : this.truncate,\n\t\t\t\tclassName   : this.className\n\t\t\t} );\n\t\t}\n\n\t\treturn tagBuilder;\n\t}\n\n};\n\n\n// Autolinker Namespaces\n\nAutolinker.match = {};\nAutolinker.matcher = {};\nAutolinker.htmlParser = {};\nAutolinker.truncate = {};\n\n/*global Autolinker */\n/*jshint eqnull:true, boss:true */\n/**\n * @class Autolinker.Util\n * @singleton\n *\n * A few utility methods for Autolinker.\n */\nAutolinker.Util = {\n\n\t/**\n\t * @property {Function} abstractMethod\n\t *\n\t * A function object which represents an abstract method.\n\t */\n\tabstractMethod : function() { throw \"abstract\"; },\n\n\n\t/**\n\t * @private\n\t * @property {RegExp} trimRegex\n\t *\n\t * The regular expression used to trim the leading and trailing whitespace\n\t * from a string.\n\t */\n\ttrimRegex : /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\n\n\n\t/**\n\t * Assigns (shallow copies) the properties of `src` onto `dest`.\n\t *\n\t * @param {Object} dest The destination object.\n\t * @param {Object} src The source object.\n\t * @return {Object} The destination object (`dest`)\n\t */\n\tassign : function( dest, src ) {\n\t\tfor( var prop in src ) {\n\t\t\tif( src.hasOwnProperty( prop ) ) {\n\t\t\t\tdest[ prop ] = src[ prop ];\n\t\t\t}\n\t\t}\n\n\t\treturn dest;\n\t},\n\n\n\t/**\n\t * Assigns (shallow copies) the properties of `src` onto `dest`, if the\n\t * corresponding property on `dest` === `undefined`.\n\t *\n\t * @param {Object} dest The destination object.\n\t * @param {Object} src The source object.\n\t * @return {Object} The destination object (`dest`)\n\t */\n\tdefaults : function( dest, src ) {\n\t\tfor( var prop in src ) {\n\t\t\tif( src.hasOwnProperty( prop ) && dest[ prop ] === undefined ) {\n\t\t\t\tdest[ prop ] = src[ prop ];\n\t\t\t}\n\t\t}\n\n\t\treturn dest;\n\t},\n\n\n\t/**\n\t * Extends `superclass` to create a new subclass, adding the `protoProps` to the new subclass's prototype.\n\t *\n\t * @param {Function} superclass The constructor function for the superclass.\n\t * @param {Object} protoProps The methods/properties to add to the subclass's prototype. This may contain the\n\t *   special property `constructor`, which will be used as the new subclass's constructor function.\n\t * @return {Function} The new subclass function.\n\t */\n\textend : function( superclass, protoProps ) {\n\t\tvar superclassProto = superclass.prototype;\n\n\t\tvar F = function() {};\n\t\tF.prototype = superclassProto;\n\n\t\tvar subclass;\n\t\tif( protoProps.hasOwnProperty( 'constructor' ) ) {\n\t\t\tsubclass = protoProps.constructor;\n\t\t} else {\n\t\t\tsubclass = function() { superclassProto.constructor.apply( this, arguments ); };\n\t\t}\n\n\t\tvar subclassProto = subclass.prototype = new F();  // set up prototype chain\n\t\tsubclassProto.constructor = subclass;  // fix constructor property\n\t\tsubclassProto.superclass = superclassProto;\n\n\t\tdelete protoProps.constructor;  // don't re-assign constructor property to the prototype, since a new function may have been created (`subclass`), which is now already there\n\t\tAutolinker.Util.assign( subclassProto, protoProps );\n\n\t\treturn subclass;\n\t},\n\n\n\t/**\n\t * Truncates the `str` at `len - ellipsisChars.length`, and adds the `ellipsisChars` to the\n\t * end of the string (by default, two periods: '..'). If the `str` length does not exceed\n\t * `len`, the string will be returned unchanged.\n\t *\n\t * @param {String} str The string to truncate and add an ellipsis to.\n\t * @param {Number} truncateLen The length to truncate the string at.\n\t * @param {String} [ellipsisChars=...] The ellipsis character(s) to add to the end of `str`\n\t *   when truncated. Defaults to '...'\n\t */\n\tellipsis : function( str, truncateLen, ellipsisChars ) {\n\t\tvar ellipsisLength;\n\n\t\tif( str.length > truncateLen ) {\n\t\t\tif(ellipsisChars == null) {\n\t\t\t  ellipsisChars = '&hellip;';\n\t\t\t  ellipsisLength = 3;\n\t\t\t} else {\n\t\t\t  ellipsisLength = ellipsisChars.length;\n\t\t\t}\n\n\t\t\tstr = str.substring( 0, truncateLen - ellipsisLength ) + ellipsisChars;\n\t\t}\n\t\treturn str;\n\t},\n\n\n\t/**\n\t * Supports `Array.prototype.indexOf()` functionality for old IE (IE8 and below).\n\t *\n\t * @param {Array} arr The array to find an element of.\n\t * @param {*} element The element to find in the array, and return the index of.\n\t * @return {Number} The index of the `element`, or -1 if it was not found.\n\t */\n\tindexOf : function( arr, element ) {\n\t\tif( Array.prototype.indexOf ) {\n\t\t\treturn arr.indexOf( element );\n\n\t\t} else {\n\t\t\tfor( var i = 0, len = arr.length; i < len; i++ ) {\n\t\t\t\tif( arr[ i ] === element ) return i;\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\t},\n\n\n\t/**\n\t * Removes array elements based on a filtering function. Mutates the input\n\t * array.\n\t *\n\t * Using this instead of the ES5 Array.prototype.filter() function, to allow\n\t * Autolinker compatibility with IE8, and also to prevent creating many new\n\t * arrays in memory for filtering.\n\t *\n\t * @param {Array} arr The array to remove elements from. This array is\n\t *   mutated.\n\t * @param {Function} fn A function which should return `true` to\n\t *   remove an element.\n\t * @return {Array} The mutated input `arr`.\n\t */\n\tremove : function( arr, fn ) {\n\t\tfor( var i = arr.length - 1; i >= 0; i-- ) {\n\t\t\tif( fn( arr[ i ] ) === true ) {\n\t\t\t\tarr.splice( i, 1 );\n\t\t\t}\n\t\t}\n\t},\n\n\n\t/**\n\t * Performs the functionality of what modern browsers do when `String.prototype.split()` is called\n\t * with a regular expression that contains capturing parenthesis.\n\t *\n\t * For example:\n\t *\n\t *     // Modern browsers:\n\t *     \"a,b,c\".split( /(,)/ );  // --> [ 'a', ',', 'b', ',', 'c' ]\n\t *\n\t *     // Old IE (including IE8):\n\t *     \"a,b,c\".split( /(,)/ );  // --> [ 'a', 'b', 'c' ]\n\t *\n\t * This method emulates the functionality of modern browsers for the old IE case.\n\t *\n\t * @param {String} str The string to split.\n\t * @param {RegExp} splitRegex The regular expression to split the input `str` on. The splitting\n\t *   character(s) will be spliced into the array, as in the \"modern browsers\" example in the\n\t *   description of this method.\n\t *   Note #1: the supplied regular expression **must** have the 'g' flag specified.\n\t *   Note #2: for simplicity's sake, the regular expression does not need\n\t *   to contain capturing parenthesis - it will be assumed that any match has them.\n\t * @return {String[]} The split array of strings, with the splitting character(s) included.\n\t */\n\tsplitAndCapture : function( str, splitRegex ) {\n\t\tif( !splitRegex.global ) throw new Error( \"`splitRegex` must have the 'g' flag set\" );\n\n\t\tvar result = [],\n\t\t    lastIdx = 0,\n\t\t    match;\n\n\t\twhile( match = splitRegex.exec( str ) ) {\n\t\t\tresult.push( str.substring( lastIdx, match.index ) );\n\t\t\tresult.push( match[ 0 ] );  // push the splitting char(s)\n\n\t\t\tlastIdx = match.index + match[ 0 ].length;\n\t\t}\n\t\tresult.push( str.substring( lastIdx ) );\n\n\t\treturn result;\n\t},\n\n\n\t/**\n\t * Trims the leading and trailing whitespace from a string.\n\t *\n\t * @param {String} str The string to trim.\n\t * @return {String}\n\t */\n\ttrim : function( str ) {\n\t\treturn str.replace( this.trimRegex, '' );\n\t}\n\n};\n\n/*global Autolinker */\n/*jshint boss:true */\n/**\n * @class Autolinker.HtmlTag\n * @extends Object\n *\n * Represents an HTML tag, which can be used to easily build/modify HTML tags programmatically.\n *\n * Autolinker uses this abstraction to create HTML tags, and then write them out as strings. You may also use\n * this class in your code, especially within a {@link Autolinker#replaceFn replaceFn}.\n *\n * ## Examples\n *\n * Example instantiation:\n *\n *     var tag = new Autolinker.HtmlTag( {\n *         tagName : 'a',\n *         attrs   : { 'href': 'http://google.com', 'class': 'external-link' },\n *         innerHtml : 'Google'\n *     } );\n *\n *     tag.toAnchorString();  // <a href=\"http://google.com\" class=\"external-link\">Google</a>\n *\n *     // Individual accessor methods\n *     tag.getTagName();                 // 'a'\n *     tag.getAttr( 'href' );            // 'http://google.com'\n *     tag.hasClass( 'external-link' );  // true\n *\n *\n * Using mutator methods (which may be used in combination with instantiation config properties):\n *\n *     var tag = new Autolinker.HtmlTag();\n *     tag.setTagName( 'a' );\n *     tag.setAttr( 'href', 'http://google.com' );\n *     tag.addClass( 'external-link' );\n *     tag.setInnerHtml( 'Google' );\n *\n *     tag.getTagName();                 // 'a'\n *     tag.getAttr( 'href' );            // 'http://google.com'\n *     tag.hasClass( 'external-link' );  // true\n *\n *     tag.toAnchorString();  // <a href=\"http://google.com\" class=\"external-link\">Google</a>\n *\n *\n * ## Example use within a {@link Autolinker#replaceFn replaceFn}\n *\n *     var html = Autolinker.link( \"Test google.com\", {\n *         replaceFn : function( match ) {\n *             var tag = match.buildTag();  // returns an {@link Autolinker.HtmlTag} instance, configured with the Match's href and anchor text\n *             tag.setAttr( 'rel', 'nofollow' );\n *\n *             return tag;\n *         }\n *     } );\n *\n *     // generated html:\n *     //   Test <a href=\"http://google.com\" target=\"_blank\" rel=\"nofollow\">google.com</a>\n *\n *\n * ## Example use with a new tag for the replacement\n *\n *     var html = Autolinker.link( \"Test google.com\", {\n *         replaceFn : function( match ) {\n *             var tag = new Autolinker.HtmlTag( {\n *                 tagName : 'button',\n *                 attrs   : { 'title': 'Load URL: ' + match.getAnchorHref() },\n *                 innerHtml : 'Load URL: ' + match.getAnchorText()\n *             } );\n *\n *             return tag;\n *         }\n *     } );\n *\n *     // generated html:\n *     //   Test <button title=\"Load URL: http://google.com\">Load URL: google.com</button>\n */\nAutolinker.HtmlTag = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @cfg {String} tagName\n\t *\n\t * The tag name. Ex: 'a', 'button', etc.\n\t *\n\t * Not required at instantiation time, but should be set using {@link #setTagName} before {@link #toAnchorString}\n\t * is executed.\n\t */\n\n\t/**\n\t * @cfg {Object.<String, String>} attrs\n\t *\n\t * An key/value Object (map) of attributes to create the tag with. The keys are the attribute names, and the\n\t * values are the attribute values.\n\t */\n\n\t/**\n\t * @cfg {String} innerHtml\n\t *\n\t * The inner HTML for the tag.\n\t *\n\t * Note the camel case name on `innerHtml`. Acronyms are camelCased in this utility (such as not to run into the acronym\n\t * naming inconsistency that the DOM developers created with `XMLHttpRequest`). You may alternatively use {@link #innerHTML}\n\t * if you prefer, but this one is recommended.\n\t */\n\n\t/**\n\t * @cfg {String} innerHTML\n\t *\n\t * Alias of {@link #innerHtml}, accepted for consistency with the browser DOM api, but prefer the camelCased version\n\t * for acronym names.\n\t */\n\n\n\t/**\n\t * @protected\n\t * @property {RegExp} whitespaceRegex\n\t *\n\t * Regular expression used to match whitespace in a string of CSS classes.\n\t */\n\twhitespaceRegex : /\\s+/,\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} [cfg] The configuration properties for this class, in an Object (map)\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.Util.assign( this, cfg );\n\n\t\tthis.innerHtml = this.innerHtml || this.innerHTML;  // accept either the camelCased form or the fully capitalized acronym\n\t},\n\n\n\t/**\n\t * Sets the tag name that will be used to generate the tag with.\n\t *\n\t * @param {String} tagName\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tsetTagName : function( tagName ) {\n\t\tthis.tagName = tagName;\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Retrieves the tag name.\n\t *\n\t * @return {String}\n\t */\n\tgetTagName : function() {\n\t\treturn this.tagName || \"\";\n\t},\n\n\n\t/**\n\t * Sets an attribute on the HtmlTag.\n\t *\n\t * @param {String} attrName The attribute name to set.\n\t * @param {String} attrValue The attribute value to set.\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tsetAttr : function( attrName, attrValue ) {\n\t\tvar tagAttrs = this.getAttrs();\n\t\ttagAttrs[ attrName ] = attrValue;\n\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Retrieves an attribute from the HtmlTag. If the attribute does not exist, returns `undefined`.\n\t *\n\t * @param {String} attrName The attribute name to retrieve.\n\t * @return {String} The attribute's value, or `undefined` if it does not exist on the HtmlTag.\n\t */\n\tgetAttr : function( attrName ) {\n\t\treturn this.getAttrs()[ attrName ];\n\t},\n\n\n\t/**\n\t * Sets one or more attributes on the HtmlTag.\n\t *\n\t * @param {Object.<String, String>} attrs A key/value Object (map) of the attributes to set.\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tsetAttrs : function( attrs ) {\n\t\tvar tagAttrs = this.getAttrs();\n\t\tAutolinker.Util.assign( tagAttrs, attrs );\n\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Retrieves the attributes Object (map) for the HtmlTag.\n\t *\n\t * @return {Object.<String, String>} A key/value object of the attributes for the HtmlTag.\n\t */\n\tgetAttrs : function() {\n\t\treturn this.attrs || ( this.attrs = {} );\n\t},\n\n\n\t/**\n\t * Sets the provided `cssClass`, overwriting any current CSS classes on the HtmlTag.\n\t *\n\t * @param {String} cssClass One or more space-separated CSS classes to set (overwrite).\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tsetClass : function( cssClass ) {\n\t\treturn this.setAttr( 'class', cssClass );\n\t},\n\n\n\t/**\n\t * Convenience method to add one or more CSS classes to the HtmlTag. Will not add duplicate CSS classes.\n\t *\n\t * @param {String} cssClass One or more space-separated CSS classes to add.\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\taddClass : function( cssClass ) {\n\t\tvar classAttr = this.getClass(),\n\t\t    whitespaceRegex = this.whitespaceRegex,\n\t\t    indexOf = Autolinker.Util.indexOf,  // to support IE8 and below\n\t\t    classes = ( !classAttr ) ? [] : classAttr.split( whitespaceRegex ),\n\t\t    newClasses = cssClass.split( whitespaceRegex ),\n\t\t    newClass;\n\n\t\twhile( newClass = newClasses.shift() ) {\n\t\t\tif( indexOf( classes, newClass ) === -1 ) {\n\t\t\t\tclasses.push( newClass );\n\t\t\t}\n\t\t}\n\n\t\tthis.getAttrs()[ 'class' ] = classes.join( \" \" );\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Convenience method to remove one or more CSS classes from the HtmlTag.\n\t *\n\t * @param {String} cssClass One or more space-separated CSS classes to remove.\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tremoveClass : function( cssClass ) {\n\t\tvar classAttr = this.getClass(),\n\t\t    whitespaceRegex = this.whitespaceRegex,\n\t\t    indexOf = Autolinker.Util.indexOf,  // to support IE8 and below\n\t\t    classes = ( !classAttr ) ? [] : classAttr.split( whitespaceRegex ),\n\t\t    removeClasses = cssClass.split( whitespaceRegex ),\n\t\t    removeClass;\n\n\t\twhile( classes.length && ( removeClass = removeClasses.shift() ) ) {\n\t\t\tvar idx = indexOf( classes, removeClass );\n\t\t\tif( idx !== -1 ) {\n\t\t\t\tclasses.splice( idx, 1 );\n\t\t\t}\n\t\t}\n\n\t\tthis.getAttrs()[ 'class' ] = classes.join( \" \" );\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Convenience method to retrieve the CSS class(es) for the HtmlTag, which will each be separated by spaces when\n\t * there are multiple.\n\t *\n\t * @return {String}\n\t */\n\tgetClass : function() {\n\t\treturn this.getAttrs()[ 'class' ] || \"\";\n\t},\n\n\n\t/**\n\t * Convenience method to check if the tag has a CSS class or not.\n\t *\n\t * @param {String} cssClass The CSS class to check for.\n\t * @return {Boolean} `true` if the HtmlTag has the CSS class, `false` otherwise.\n\t */\n\thasClass : function( cssClass ) {\n\t\treturn ( ' ' + this.getClass() + ' ' ).indexOf( ' ' + cssClass + ' ' ) !== -1;\n\t},\n\n\n\t/**\n\t * Sets the inner HTML for the tag.\n\t *\n\t * @param {String} html The inner HTML to set.\n\t * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n\t */\n\tsetInnerHtml : function( html ) {\n\t\tthis.innerHtml = html;\n\n\t\treturn this;\n\t},\n\n\n\t/**\n\t * Retrieves the inner HTML for the tag.\n\t *\n\t * @return {String}\n\t */\n\tgetInnerHtml : function() {\n\t\treturn this.innerHtml || \"\";\n\t},\n\n\n\t/**\n\t * Override of superclass method used to generate the HTML string for the tag.\n\t *\n\t * @return {String}\n\t */\n\ttoAnchorString : function() {\n\t\tvar tagName = this.getTagName(),\n\t\t    attrsStr = this.buildAttrsStr();\n\n\t\tattrsStr = ( attrsStr ) ? ' ' + attrsStr : '';  // prepend a space if there are actually attributes\n\n\t\treturn [ '<', tagName, attrsStr, '>', this.getInnerHtml(), '</', tagName, '>' ].join( \"\" );\n\t},\n\n\n\t/**\n\t * Support method for {@link #toAnchorString}, returns the string space-separated key=\"value\" pairs, used to populate\n\t * the stringified HtmlTag.\n\t *\n\t * @protected\n\t * @return {String} Example return: `attr1=\"value1\" attr2=\"value2\"`\n\t */\n\tbuildAttrsStr : function() {\n\t\tif( !this.attrs ) return \"\";  // no `attrs` Object (map) has been set, return empty string\n\n\t\tvar attrs = this.getAttrs(),\n\t\t    attrsArr = [];\n\n\t\tfor( var prop in attrs ) {\n\t\t\tif( attrs.hasOwnProperty( prop ) ) {\n\t\t\t\tattrsArr.push( prop + '=\"' + attrs[ prop ] + '\"' );\n\t\t\t}\n\t\t}\n\t\treturn attrsArr.join( \" \" );\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.RegexLib\n * @singleton\n *\n * Builds and stores a library of the common regular expressions used by the\n * Autolinker utility.\n *\n * Other regular expressions may exist ad-hoc, but these are generally the\n * regular expressions that are shared between source files.\n */\nAutolinker.RegexLib = (function() {\n\n\t/**\n\t * The string form of a regular expression that would match all of the\n\t * alphabetic (\"letter\") chars in the unicode character set when placed in a\n\t * RegExp character class (`[]`). This includes all international alphabetic\n\t * characters.\n\t *\n\t * These would be the characters matched by unicode regex engines `\\p{L}`\n\t * escape (\"all letters\").\n\t *\n\t * Taken from the XRegExp library: http://xregexp.com/\n\t * Specifically: http://xregexp.com/v/3.0.0/unicode-categories.js\n\t *\n\t * @private\n\t * @type {String}\n\t */\n\tvar alphaCharsStr = 'A-Za-z\\\\xAA\\\\xB5\\\\xBA\\\\xC0-\\\\xD6\\\\xD8-\\\\xF6\\\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC';\n\n\t/**\n\t * The string form of a regular expression that would match all of the\n\t * decimal number chars in the unicode character set when placed in a RegExp\n\t * character class (`[]`).\n\t *\n\t * These would be the characters matched by unicode regex engines `\\p{Nd}`\n\t * escape (\"all decimal numbers\")\n\t *\n\t * Taken from the XRegExp library: http://xregexp.com/\n\t * Specifically: http://xregexp.com/v/3.0.0/unicode-categories.js\n\t *\n\t * @private\n\t * @type {String}\n\t */\n\tvar decimalNumbersStr = '0-9\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19';\n\n\n\t// See documentation below\n\tvar alphaNumericCharsStr = alphaCharsStr + decimalNumbersStr;\n\n\n\t// See documentation below\n\tvar domainNameRegex = new RegExp( '[' + alphaNumericCharsStr + '.\\\\-]*[' + alphaNumericCharsStr + '\\\\-]' );\n\n\treturn {\n\n\t\t/**\n\t\t * The string form of a regular expression that would match all of the\n\t\t * letters and decimal number chars in the unicode character set when placed\n\t\t * in a RegExp character class (`[]`).\n\t\t *\n\t\t * These would be the characters matched by unicode regex engines `[\\p{L}\\p{Nd}]`\n\t\t * escape (\"all letters and decimal numbers\")\n\t\t *\n\t\t * @property {String} alphaNumericCharsStr\n\t\t */\n\t\talphaNumericCharsStr : alphaNumericCharsStr,\n\n\t\t/**\n\t\t * The string form of a regular expression that would match all of the\n\t\t * letters and in the unicode character set when placed\n\t\t * in a RegExp character class (`[]`).\n\t\t *\n\t\t * These would be the characters matched by unicode regex engines `[\\p{L}]`\n\t\t * escape (\"all letters\")\n\t\t *\n\t\t * @property {String} alphaCharsStr\n\t\t */\n\t\talphaCharsStr : alphaCharsStr,\n\n\t\t/**\n\t\t * A regular expression to match domain names of a URL or email address.\n\t\t * Ex: 'google', 'yahoo', 'some-other-company', etc.\n\t\t *\n\t\t * @property {RegExp} domainNameRegex\n\t\t */\n\t\tdomainNameRegex : domainNameRegex,\n\n\t};\n\n\n}() );\n\n/*global Autolinker */\n/*jshint sub:true */\n/**\n * @protected\n * @class Autolinker.AnchorTagBuilder\n * @extends Object\n *\n * Builds anchor (&lt;a&gt;) tags for the Autolinker utility when a match is\n * found.\n *\n * Normally this class is instantiated, configured, and used internally by an\n * {@link Autolinker} instance, but may actually be used indirectly in a\n * {@link Autolinker#replaceFn replaceFn} to create {@link Autolinker.HtmlTag HtmlTag}\n * instances which may be modified before returning from the\n * {@link Autolinker#replaceFn replaceFn}. For example:\n *\n *     var html = Autolinker.link( \"Test google.com\", {\n *         replaceFn : function( match ) {\n *             var tag = match.buildTag();  // returns an {@link Autolinker.HtmlTag} instance\n *             tag.setAttr( 'rel', 'nofollow' );\n *\n *             return tag;\n *         }\n *     } );\n *\n *     // generated html:\n *     //   Test <a href=\"http://google.com\" target=\"_blank\" rel=\"nofollow\">google.com</a>\n */\nAutolinker.AnchorTagBuilder = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @cfg {Boolean} newWindow\n\t * @inheritdoc Autolinker#newWindow\n\t */\n\n\t/**\n\t * @cfg {Object} truncate\n\t * @inheritdoc Autolinker#truncate\n\t */\n\n\t/**\n\t * @cfg {String} className\n\t * @inheritdoc Autolinker#className\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} [cfg] The configuration options for the AnchorTagBuilder instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tcfg = cfg || {};\n\n\t\tthis.newWindow = cfg.newWindow;\n\t\tthis.truncate = cfg.truncate;\n\t\tthis.className = cfg.className;\n\t},\n\n\n\t/**\n\t * Generates the actual anchor (&lt;a&gt;) tag to use in place of the\n\t * matched text, via its `match` object.\n\t *\n\t * @param {Autolinker.match.Match} match The Match instance to generate an\n\t *   anchor tag from.\n\t * @return {Autolinker.HtmlTag} The HtmlTag instance for the anchor tag.\n\t */\n\tbuild : function( match ) {\n\t\treturn new Autolinker.HtmlTag( {\n\t\t\ttagName   : 'a',\n\t\t\tattrs     : this.createAttrs( match ),\n\t\t\tinnerHtml : this.processAnchorText( match.getAnchorText() )\n\t\t} );\n\t},\n\n\n\t/**\n\t * Creates the Object (map) of the HTML attributes for the anchor (&lt;a&gt;)\n\t *   tag being generated.\n\t *\n\t * @protected\n\t * @param {Autolinker.match.Match} match The Match instance to generate an\n\t *   anchor tag from.\n\t * @return {Object} A key/value Object (map) of the anchor tag's attributes.\n\t */\n\tcreateAttrs : function( match ) {\n\t\tvar attrs = {\n\t\t\t'href' : match.getAnchorHref()  // we'll always have the `href` attribute\n\t\t};\n\n\t\tvar cssClass = this.createCssClass( match );\n\t\tif( cssClass ) {\n\t\t\tattrs[ 'class' ] = cssClass;\n\t\t}\n\t\tif( this.newWindow ) {\n\t\t\tattrs[ 'target' ] = \"_blank\";\n\t\t\tattrs[ 'rel' ] = \"noopener noreferrer\";\n\t\t}\n\n\t\tif( this.truncate ) {\n\t\t\tif( this.truncate.length && this.truncate.length < match.getAnchorText().length ) {\n\t\t\t\tattrs[ 'title' ] = match.getAnchorHref();\n\t\t\t}\n\t\t}\n\n\t\treturn attrs;\n\t},\n\n\n\t/**\n\t * Creates the CSS class that will be used for a given anchor tag, based on\n\t * the `matchType` and the {@link #className} config.\n\t *\n\t * Example returns:\n\t *\n\t * - \"\"                                      // no {@link #className}\n\t * - \"myLink myLink-url\"                     // url match\n\t * - \"myLink myLink-email\"                   // email match\n\t * - \"myLink myLink-phone\"                   // phone match\n\t * - \"myLink myLink-hashtag\"                 // hashtag match\n\t * - \"myLink myLink-mention myLink-twitter\"  // mention match with Twitter service\n\t *\n\t * @private\n\t * @param {Autolinker.match.Match} match The Match instance to generate an\n\t *   anchor tag from.\n\t * @return {String} The CSS class string for the link. Example return:\n\t *   \"myLink myLink-url\". If no {@link #className} was configured, returns\n\t *   an empty string.\n\t */\n\tcreateCssClass : function( match ) {\n\t\tvar className = this.className;\n\n\t\tif( !className ) {\n\t\t\treturn \"\";\n\n\t\t} else {\n\t\t\tvar returnClasses = [ className ],\n\t\t\t\tcssClassSuffixes = match.getCssClassSuffixes();\n\n\t\t\tfor( var i = 0, len = cssClassSuffixes.length; i < len; i++ ) {\n\t\t\t\treturnClasses.push( className + '-' + cssClassSuffixes[ i ] );\n\t\t\t}\n\t\t\treturn returnClasses.join( ' ' );\n\t\t}\n\t},\n\n\n\t/**\n\t * Processes the `anchorText` by truncating the text according to the\n\t * {@link #truncate} config.\n\t *\n\t * @private\n\t * @param {String} anchorText The anchor tag's text (i.e. what will be\n\t *   displayed).\n\t * @return {String} The processed `anchorText`.\n\t */\n\tprocessAnchorText : function( anchorText ) {\n\t\tanchorText = this.doTruncate( anchorText );\n\n\t\treturn anchorText;\n\t},\n\n\n\t/**\n\t * Performs the truncation of the `anchorText` based on the {@link #truncate}\n\t * option. If the `anchorText` is longer than the length specified by the\n\t * {@link #truncate} option, the truncation is performed based on the\n\t * `location` property. See {@link #truncate} for details.\n\t *\n\t * @private\n\t * @param {String} anchorText The anchor tag's text (i.e. what will be\n\t *   displayed).\n\t * @return {String} The truncated anchor text.\n\t */\n\tdoTruncate : function( anchorText ) {\n\t\tvar truncate = this.truncate;\n\t\tif( !truncate || !truncate.length ) return anchorText;\n\n\t\tvar truncateLength = truncate.length,\n\t\t\ttruncateLocation = truncate.location;\n\n\t\tif( truncateLocation === 'smart' ) {\n\t\t\treturn Autolinker.truncate.TruncateSmart( anchorText, truncateLength );\n\n\t\t} else if( truncateLocation === 'middle' ) {\n\t\t\treturn Autolinker.truncate.TruncateMiddle( anchorText, truncateLength );\n\n\t\t} else {\n\t\t\treturn Autolinker.truncate.TruncateEnd( anchorText, truncateLength );\n\t\t}\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.htmlParser.HtmlParser\n * @extends Object\n *\n * An HTML parser implementation which simply walks an HTML string and returns an array of\n * {@link Autolinker.htmlParser.HtmlNode HtmlNodes} that represent the basic HTML structure of the input string.\n *\n * Autolinker uses this to only link URLs/emails/mentions within text nodes, effectively ignoring / \"walking\n * around\" HTML tags.\n */\nAutolinker.htmlParser.HtmlParser = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @private\n\t * @property {RegExp} htmlRegex\n\t *\n\t * The regular expression used to pull out HTML tags from a string. Handles namespaced HTML tags and\n\t * attribute names, as specified by http://www.w3.org/TR/html-markup/syntax.html.\n\t *\n\t * Capturing groups:\n\t *\n\t * 1. The \"!DOCTYPE\" tag name, if a tag is a &lt;!DOCTYPE&gt; tag.\n\t * 2. If it is an end tag, this group will have the '/'.\n\t * 3. If it is a comment tag, this group will hold the comment text (i.e.\n\t *    the text inside the `&lt;!--` and `--&gt;`.\n\t * 4. The tag name for a tag without attributes (other than the &lt;!DOCTYPE&gt; tag)\n\t * 5. The tag name for a tag with attributes (other than the &lt;!DOCTYPE&gt; tag)\n\t */\n\thtmlRegex : (function() {\n\t\tvar commentTagRegex = /!--([\\s\\S]+?)--/,\n\t\t    tagNameRegex = /[0-9a-zA-Z][0-9a-zA-Z:]*/,\n\t\t    attrNameRegex = /[^\\s\"'>\\/=\\x00-\\x1F\\x7F]+/,   // the unicode range accounts for excluding control chars, and the delete char\n\t\t    attrValueRegex = /(?:\"[^\"]*?\"|'[^']*?'|[^'\"=<>`\\s]+)/, // double quoted, single quoted, or unquoted attribute values\n\t\t    nameEqualsValueRegex = attrNameRegex.source + '(?:\\\\s*=\\\\s*' + attrValueRegex.source + ')?';  // optional '=[value]'\n\n\t\treturn new RegExp( [\n\t\t\t// for <!DOCTYPE> tag. Ex: <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">)\n\t\t\t'(?:',\n\t\t\t\t'<(!DOCTYPE)',  // *** Capturing Group 1 - If it's a doctype tag\n\n\t\t\t\t\t// Zero or more attributes following the tag name\n\t\t\t\t\t'(?:',\n\t\t\t\t\t\t'\\\\s+',  // one or more whitespace chars before an attribute\n\n\t\t\t\t\t\t// Either:\n\t\t\t\t\t\t// A. attr=\"value\", or\n\t\t\t\t\t\t// B. \"value\" alone (To cover example doctype tag: <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">)\n\t\t\t\t\t\t'(?:', nameEqualsValueRegex, '|', attrValueRegex.source + ')',\n\t\t\t\t\t')*',\n\t\t\t\t'>',\n\t\t\t')',\n\n\t\t\t'|',\n\n\t\t\t// All other HTML tags (i.e. tags that are not <!DOCTYPE>)\n\t\t\t'(?:',\n\t\t\t\t'<(/)?',  // Beginning of a tag or comment. Either '<' for a start tag, or '</' for an end tag.\n\t\t\t\t          // *** Capturing Group 2: The slash or an empty string. Slash ('/') for end tag, empty string for start or self-closing tag.\n\n\t\t\t\t\t'(?:',\n\t\t\t\t\t\tcommentTagRegex.source,  // *** Capturing Group 3 - A Comment Tag's Text\n\n\t\t\t\t\t\t'|',\n\n\t\t\t\t\t\t// Handle tag without attributes.\n\t\t\t\t\t\t// Doing this separately from a tag that has attributes\n\t\t\t\t\t\t// to fix a regex time complexity issue seen with the\n\t\t\t\t\t\t// example in https://github.com/gregjacobs/Autolinker.js/issues/172\n\t\t\t\t\t\t'(?:',\n\t\t\t\t\t\t\t// *** Capturing Group 4 - The tag name for a tag without attributes\n\t\t\t\t\t\t\t'(' + tagNameRegex.source + ')',\n\n\t\t\t\t\t\t\t'\\\\s*/?',  // any trailing spaces and optional '/' before the closing '>'\n\t\t\t\t\t\t')',\n\n\t\t\t\t\t\t'|',\n\n\t\t\t\t\t\t// Handle tag with attributes\n\t\t\t\t\t\t// Doing this separately from a tag with no attributes\n\t\t\t\t\t\t// to fix a regex time complexity issue seen with the\n\t\t\t\t\t\t// example in https://github.com/gregjacobs/Autolinker.js/issues/172\n\t\t\t\t\t\t'(?:',\n\t\t\t\t\t\t\t// *** Capturing Group 5 - The tag name for a tag with attributes\n\t\t\t\t\t\t\t'(' + tagNameRegex.source + ')',\n\n\t\t\t\t\t\t\t'\\\\s+',  // must have at least one space after the tag name to prevent ReDoS issue (issue #172)\n\n\t\t\t\t\t\t\t// Zero or more attributes following the tag name\n\t\t\t\t\t\t\t'(?:',\n\t\t\t\t\t\t\t\t'(?:\\\\s+|\\\\b)',        // any number of whitespace chars before an attribute. NOTE: Using \\s* here throws Chrome into an infinite loop for some reason, so using \\s+|\\b instead\n\t\t\t\t\t\t\t\tnameEqualsValueRegex,  // attr=\"value\" (with optional =\"value\" part)\n\t\t\t\t\t\t\t')*',\n\n\t\t\t\t\t\t\t'\\\\s*/?',  // any trailing spaces and optional '/' before the closing '>'\n\t\t\t\t\t\t')',\n\t\t\t\t\t')',\n\t\t\t\t'>',\n\t\t\t')'\n\t\t].join( \"\" ), 'gi' );\n\t} )(),\n\n\t/**\n\t * @private\n\t * @property {RegExp} htmlCharacterEntitiesRegex\n\t *\n\t * The regular expression that matches common HTML character entities.\n\t *\n\t * Ignoring &amp; as it could be part of a query string -- handling it separately.\n\t */\n\thtmlCharacterEntitiesRegex: /(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,\n\n\n\t/**\n\t * Parses an HTML string and returns a simple array of {@link Autolinker.htmlParser.HtmlNode HtmlNodes}\n\t * to represent the HTML structure of the input string.\n\t *\n\t * @param {String} html The HTML to parse.\n\t * @return {Autolinker.htmlParser.HtmlNode[]}\n\t */\n\tparse : function( html ) {\n\t\tvar htmlRegex = this.htmlRegex,\n\t\t    currentResult,\n\t\t    lastIndex = 0,\n\t\t    textAndEntityNodes,\n\t\t    nodes = [];  // will be the result of the method\n\n\t\twhile( ( currentResult = htmlRegex.exec( html ) ) !== null ) {\n\t\t\tvar tagText = currentResult[ 0 ],\n\t\t\t    commentText = currentResult[ 3 ], // if we've matched a comment\n\t\t\t    tagName = currentResult[ 1 ] || currentResult[ 4 ] || currentResult[ 5 ],  // The <!DOCTYPE> tag (ex: \"!DOCTYPE\"), or another tag (ex: \"a\" or \"img\")\n\t\t\t    isClosingTag = !!currentResult[ 2 ],\n\t\t\t    offset = currentResult.index,\n\t\t\t    inBetweenTagsText = html.substring( lastIndex, offset );\n\n\t\t\t// Push TextNodes and EntityNodes for any text found between tags\n\t\t\tif( inBetweenTagsText ) {\n\t\t\t\ttextAndEntityNodes = this.parseTextAndEntityNodes( lastIndex, inBetweenTagsText );\n\t\t\t\tnodes.push.apply( nodes, textAndEntityNodes );\n\t\t\t}\n\n\t\t\t// Push the CommentNode or ElementNode\n\t\t\tif( commentText ) {\n\t\t\t\tnodes.push( this.createCommentNode( offset, tagText, commentText ) );\n\t\t\t} else {\n\t\t\t\tnodes.push( this.createElementNode( offset, tagText, tagName, isClosingTag ) );\n\t\t\t}\n\n\t\t\tlastIndex = offset + tagText.length;\n\t\t}\n\n\t\t// Process any remaining text after the last HTML element. Will process all of the text if there were no HTML elements.\n\t\tif( lastIndex < html.length ) {\n\t\t\tvar text = html.substring( lastIndex );\n\n\t\t\t// Push TextNodes and EntityNodes for any text found between tags\n\t\t\tif( text ) {\n\t\t\t\ttextAndEntityNodes = this.parseTextAndEntityNodes( lastIndex, text );\n\n\t\t\t\t// Note: the following 3 lines were previously:\n\t\t\t\t//   nodes.push.apply( nodes, textAndEntityNodes );\n\t\t\t\t// but this was causing a \"Maximum Call Stack Size Exceeded\"\n\t\t\t\t// error on inputs with a large number of html entities.\n\t\t\t\ttextAndEntityNodes.forEach( function( node ) {\n\t\t\t\t\tnodes.push( node );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\treturn nodes;\n\t},\n\n\n\t/**\n\t * Parses text and HTML entity nodes from a given string. The input string\n\t * should not have any HTML tags (elements) within it.\n\t *\n\t * @private\n\t * @param {Number} offset The offset of the text node match within the\n\t *   original HTML string.\n\t * @param {String} text The string of text to parse. This is from an HTML\n\t *   text node.\n\t * @return {Autolinker.htmlParser.HtmlNode[]} An array of HtmlNodes to\n\t *   represent the {@link Autolinker.htmlParser.TextNode TextNodes} and\n\t *   {@link Autolinker.htmlParser.EntityNode EntityNodes} found.\n\t */\n\tparseTextAndEntityNodes : function( offset, text ) {\n\t\tvar nodes = [],\n\t\t    textAndEntityTokens = Autolinker.Util.splitAndCapture( text, this.htmlCharacterEntitiesRegex );  // split at HTML entities, but include the HTML entities in the results array\n\n\t\t// Every even numbered token is a TextNode, and every odd numbered token is an EntityNode\n\t\t// For example: an input `text` of \"Test &quot;this&quot; today\" would turn into the\n\t\t//   `textAndEntityTokens`: [ 'Test ', '&quot;', 'this', '&quot;', ' today' ]\n\t\tfor( var i = 0, len = textAndEntityTokens.length; i < len; i += 2 ) {\n\t\t\tvar textToken = textAndEntityTokens[ i ],\n\t\t\t    entityToken = textAndEntityTokens[ i + 1 ];\n\n\t\t\tif( textToken ) {\n\t\t\t\tnodes.push( this.createTextNode( offset, textToken ) );\n\t\t\t\toffset += textToken.length;\n\t\t\t}\n\t\t\tif( entityToken ) {\n\t\t\t\tnodes.push( this.createEntityNode( offset, entityToken ) );\n\t\t\t\toffset += entityToken.length;\n\t\t\t}\n\t\t}\n\t\treturn nodes;\n\t},\n\n\n\t/**\n\t * Factory method to create an {@link Autolinker.htmlParser.CommentNode CommentNode}.\n\t *\n\t * @private\n\t * @param {Number} offset The offset of the match within the original HTML\n\t *   string.\n\t * @param {String} tagText The full text of the tag (comment) that was\n\t *   matched, including its &lt;!-- and --&gt;.\n\t * @param {String} commentText The full text of the comment that was matched.\n\t */\n\tcreateCommentNode : function( offset, tagText, commentText ) {\n\t\treturn new Autolinker.htmlParser.CommentNode( {\n\t\t\toffset : offset,\n\t\t\ttext   : tagText,\n\t\t\tcomment: Autolinker.Util.trim( commentText )\n\t\t} );\n\t},\n\n\n\t/**\n\t * Factory method to create an {@link Autolinker.htmlParser.ElementNode ElementNode}.\n\t *\n\t * @private\n\t * @param {Number} offset The offset of the match within the original HTML\n\t *   string.\n\t * @param {String} tagText The full text of the tag (element) that was\n\t *   matched, including its attributes.\n\t * @param {String} tagName The name of the tag. Ex: An &lt;img&gt; tag would\n\t *   be passed to this method as \"img\".\n\t * @param {Boolean} isClosingTag `true` if it's a closing tag, false\n\t *   otherwise.\n\t * @return {Autolinker.htmlParser.ElementNode}\n\t */\n\tcreateElementNode : function( offset, tagText, tagName, isClosingTag ) {\n\t\treturn new Autolinker.htmlParser.ElementNode( {\n\t\t\toffset  : offset,\n\t\t\ttext    : tagText,\n\t\t\ttagName : tagName.toLowerCase(),\n\t\t\tclosing : isClosingTag\n\t\t} );\n\t},\n\n\n\t/**\n\t * Factory method to create a {@link Autolinker.htmlParser.EntityNode EntityNode}.\n\t *\n\t * @private\n\t * @param {Number} offset The offset of the match within the original HTML\n\t *   string.\n\t * @param {String} text The text that was matched for the HTML entity (such\n\t *   as '&amp;nbsp;').\n\t * @return {Autolinker.htmlParser.EntityNode}\n\t */\n\tcreateEntityNode : function( offset, text ) {\n\t\treturn new Autolinker.htmlParser.EntityNode( { offset: offset, text: text } );\n\t},\n\n\n\t/**\n\t * Factory method to create a {@link Autolinker.htmlParser.TextNode TextNode}.\n\t *\n\t * @private\n\t * @param {Number} offset The offset of the match within the original HTML\n\t *   string.\n\t * @param {String} text The text that was matched.\n\t * @return {Autolinker.htmlParser.TextNode}\n\t */\n\tcreateTextNode : function( offset, text ) {\n\t\treturn new Autolinker.htmlParser.TextNode( { offset: offset, text: text } );\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @abstract\n * @class Autolinker.htmlParser.HtmlNode\n *\n * Represents an HTML node found in an input string. An HTML node is one of the\n * following:\n *\n * 1. An {@link Autolinker.htmlParser.ElementNode ElementNode}, which represents\n *    HTML tags.\n * 2. A {@link Autolinker.htmlParser.CommentNode CommentNode}, which represents\n *    HTML comments.\n * 3. A {@link Autolinker.htmlParser.TextNode TextNode}, which represents text\n *    outside or within HTML tags.\n * 4. A {@link Autolinker.htmlParser.EntityNode EntityNode}, which represents\n *    one of the known HTML entities that Autolinker looks for. This includes\n *    common ones such as &amp;quot; and &amp;nbsp;\n */\nAutolinker.htmlParser.HtmlNode = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @cfg {Number} offset (required)\n\t *\n\t * The offset of the HTML node in the original text that was parsed.\n\t */\n\toffset : undefined,\n\n\t/**\n\t * @cfg {String} text (required)\n\t *\n\t * The text that was matched for the HtmlNode.\n\t *\n\t * - In the case of an {@link Autolinker.htmlParser.ElementNode ElementNode},\n\t *   this will be the tag's text.\n\t * - In the case of an {@link Autolinker.htmlParser.CommentNode CommentNode},\n\t *   this will be the comment's text.\n\t * - In the case of a {@link Autolinker.htmlParser.TextNode TextNode}, this\n\t *   will be the text itself.\n\t * - In the case of a {@link Autolinker.htmlParser.EntityNode EntityNode},\n\t *   this will be the text of the HTML entity.\n\t */\n\ttext : undefined,\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match instance,\n\t * specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.Util.assign( this, cfg );\n\n\t\tif( this.offset == null ) throw new Error( '`offset` cfg required' );\n\t\tif( this.text == null ) throw new Error( '`text` cfg required' );\n\t},\n\n\n\t/**\n\t * Returns a string name for the type of node that this class represents.\n\t *\n\t * @abstract\n\t * @return {String}\n\t */\n\tgetType : Autolinker.Util.abstractMethod,\n\n\n\t/**\n\t * Retrieves the {@link #offset} of the HtmlNode. This is the offset of the\n\t * HTML node in the original string that was parsed.\n\t *\n\t * @return {Number}\n\t */\n\tgetOffset : function() {\n\t\treturn this.offset;\n\t},\n\n\n\t/**\n\t * Retrieves the {@link #text} for the HtmlNode.\n\t *\n\t * @return {String}\n\t */\n\tgetText : function() {\n\t\treturn this.text;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.htmlParser.CommentNode\n * @extends Autolinker.htmlParser.HtmlNode\n *\n * Represents an HTML comment node that has been parsed by the\n * {@link Autolinker.htmlParser.HtmlParser}.\n *\n * See this class's superclass ({@link Autolinker.htmlParser.HtmlNode}) for more\n * details.\n */\nAutolinker.htmlParser.CommentNode = Autolinker.Util.extend( Autolinker.htmlParser.HtmlNode, {\n\n\t/**\n\t * @cfg {String} comment (required)\n\t *\n\t * The text inside the comment tag. This text is stripped of any leading or\n\t * trailing whitespace.\n\t */\n\tcomment : '',\n\n\n\t/**\n\t * Returns a string name for the type of node that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'comment';\n\t},\n\n\n\t/**\n\t * Returns the comment inside the comment tag.\n\t *\n\t * @return {String}\n\t */\n\tgetComment : function() {\n\t\treturn this.comment;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.htmlParser.ElementNode\n * @extends Autolinker.htmlParser.HtmlNode\n *\n * Represents an HTML element node that has been parsed by the {@link Autolinker.htmlParser.HtmlParser}.\n *\n * See this class's superclass ({@link Autolinker.htmlParser.HtmlNode}) for more\n * details.\n */\nAutolinker.htmlParser.ElementNode = Autolinker.Util.extend( Autolinker.htmlParser.HtmlNode, {\n\n\t/**\n\t * @cfg {String} tagName (required)\n\t *\n\t * The name of the tag that was matched.\n\t */\n\ttagName : '',\n\n\t/**\n\t * @cfg {Boolean} closing (required)\n\t *\n\t * `true` if the element (tag) is a closing tag, `false` if its an opening\n\t * tag.\n\t */\n\tclosing : false,\n\n\n\t/**\n\t * Returns a string name for the type of node that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'element';\n\t},\n\n\n\t/**\n\t * Returns the HTML element's (tag's) name. Ex: for an &lt;img&gt; tag,\n\t * returns \"img\".\n\t *\n\t * @return {String}\n\t */\n\tgetTagName : function() {\n\t\treturn this.tagName;\n\t},\n\n\n\t/**\n\t * Determines if the HTML element (tag) is a closing tag. Ex: &lt;div&gt;\n\t * returns `false`, while &lt;/div&gt; returns `true`.\n\t *\n\t * @return {Boolean}\n\t */\n\tisClosing : function() {\n\t\treturn this.closing;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.htmlParser.EntityNode\n * @extends Autolinker.htmlParser.HtmlNode\n *\n * Represents a known HTML entity node that has been parsed by the {@link Autolinker.htmlParser.HtmlParser}.\n * Ex: '&amp;nbsp;', or '&amp#160;' (which will be retrievable from the {@link #getText}\n * method.\n *\n * Note that this class will only be returned from the HtmlParser for the set of\n * checked HTML entity nodes  defined by the {@link Autolinker.htmlParser.HtmlParser#htmlCharacterEntitiesRegex}.\n *\n * See this class's superclass ({@link Autolinker.htmlParser.HtmlNode}) for more\n * details.\n */\nAutolinker.htmlParser.EntityNode = Autolinker.Util.extend( Autolinker.htmlParser.HtmlNode, {\n\n\t/**\n\t * Returns a string name for the type of node that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'entity';\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.htmlParser.TextNode\n * @extends Autolinker.htmlParser.HtmlNode\n *\n * Represents a text node that has been parsed by the {@link Autolinker.htmlParser.HtmlParser}.\n *\n * See this class's superclass ({@link Autolinker.htmlParser.HtmlNode}) for more\n * details.\n */\nAutolinker.htmlParser.TextNode = Autolinker.Util.extend( Autolinker.htmlParser.HtmlNode, {\n\n\t/**\n\t * Returns a string name for the type of node that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'text';\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @abstract\n * @class Autolinker.match.Match\n *\n * Represents a match found in an input string which should be Autolinked. A Match object is what is provided in a\n * {@link Autolinker#replaceFn replaceFn}, and may be used to query for details about the match.\n *\n * For example:\n *\n *     var input = \"...\";  // string with URLs, Email Addresses, and Mentions (Twitter, Instagram)\n *\n *     var linkedText = Autolinker.link( input, {\n *         replaceFn : function( match ) {\n *             console.log( \"href = \", match.getAnchorHref() );\n *             console.log( \"text = \", match.getAnchorText() );\n *\n *             switch( match.getType() ) {\n *                 case 'url' :\n *                     console.log( \"url: \", match.getUrl() );\n *\n *                 case 'email' :\n *                     console.log( \"email: \", match.getEmail() );\n *\n *                 case 'mention' :\n *                     console.log( \"mention: \", match.getMention() );\n *             }\n *         }\n *     } );\n *\n * See the {@link Autolinker} class for more details on using the {@link Autolinker#replaceFn replaceFn}.\n */\nAutolinker.match.Match = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @cfg {Autolinker.AnchorTagBuilder} tagBuilder (required)\n\t *\n\t * Reference to the AnchorTagBuilder instance to use to generate an anchor\n\t * tag for the Match.\n\t */\n\n\t/**\n\t * @cfg {String} matchedText (required)\n\t *\n\t * The original text that was matched by the {@link Autolinker.matcher.Matcher}.\n\t */\n\n\t/**\n\t * @cfg {Number} offset (required)\n\t *\n\t * The offset of where the match was made in the input string.\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tif( cfg.tagBuilder == null ) throw new Error( '`tagBuilder` cfg required' );\n\t\tif( cfg.matchedText == null ) throw new Error( '`matchedText` cfg required' );\n\t\tif( cfg.offset == null ) throw new Error( '`offset` cfg required' );\n\n\t\tthis.tagBuilder = cfg.tagBuilder;\n\t\tthis.matchedText = cfg.matchedText;\n\t\tthis.offset = cfg.offset;\n\t},\n\n\n\t/**\n\t * Returns a string name for the type of match that this class represents.\n\t *\n\t * @abstract\n\t * @return {String}\n\t */\n\tgetType : Autolinker.Util.abstractMethod,\n\n\n\t/**\n\t * Returns the original text that was matched.\n\t *\n\t * @return {String}\n\t */\n\tgetMatchedText : function() {\n\t\treturn this.matchedText;\n\t},\n\n\n\t/**\n\t * Sets the {@link #offset} of where the match was made in the input string.\n\t *\n\t * A {@link Autolinker.matcher.Matcher} will be fed only HTML text nodes,\n\t * and will therefore set an original offset that is relative to the HTML\n\t * text node itself. However, we want this offset to be relative to the full\n\t * HTML input string, and thus if using {@link Autolinker#parse} (rather\n\t * than calling a {@link Autolinker.matcher.Matcher} directly), then this\n\t * offset is corrected after the Matcher itself has done its job.\n\t *\n\t * @param {Number} offset\n\t */\n\tsetOffset : function( offset ) {\n\t\tthis.offset = offset;\n\t},\n\n\n\t/**\n\t * Returns the offset of where the match was made in the input string. This\n\t * is the 0-based index of the match.\n\t *\n\t * @return {Number}\n\t */\n\tgetOffset : function() {\n\t\treturn this.offset;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @abstract\n\t * @return {String}\n\t */\n\tgetAnchorHref : Autolinker.Util.abstractMethod,\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @abstract\n\t * @return {String}\n\t */\n\tgetAnchorText : Autolinker.Util.abstractMethod,\n\n\n\t/**\n\t * Returns the CSS class suffix(es) for this match.\n\t *\n\t * A CSS class suffix is appended to the {@link Autolinker#className} in\n\t * the {@link Autolinker.AnchorTagBuilder} when a match is translated into\n\t * an anchor tag.\n\t *\n\t * For example, if {@link Autolinker#className} was configured as 'myLink',\n\t * and this method returns `[ 'url' ]`, the final class name of the element\n\t * will become: 'myLink myLink-url'.\n\t *\n\t * The match may provide multiple CSS class suffixes to be appended to the\n\t * {@link Autolinker#className} in order to facilitate better styling\n\t * options for different match criteria. See {@link Autolinker.match.Mention}\n\t * for an example.\n\t *\n\t * By default, this method returns a single array with the match's\n\t * {@link #getType type} name, but may be overridden by subclasses.\n\t *\n\t * @return {String[]}\n\t */\n\tgetCssClassSuffixes : function() {\n\t\treturn [ this.getType() ];\n\t},\n\n\n\t/**\n\t * Builds and returns an {@link Autolinker.HtmlTag} instance based on the\n\t * Match.\n\t *\n\t * This can be used to easily generate anchor tags from matches, and either\n\t * return their HTML string, or modify them before doing so.\n\t *\n\t * Example Usage:\n\t *\n\t *     var tag = match.buildTag();\n\t *     tag.addClass( 'cordova-link' );\n\t *     tag.setAttr( 'target', '_system' );\n\t *\n\t *     tag.toAnchorString();  // <a href=\"http://google.com\" class=\"cordova-link\" target=\"_system\">Google</a>\n\t */\n\tbuildTag : function() {\n\t\treturn this.tagBuilder.build( this );\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.match.Email\n * @extends Autolinker.match.Match\n *\n * Represents a Email match found in an input string which should be Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more details.\n */\nAutolinker.match.Email = Autolinker.Util.extend( Autolinker.match.Match, {\n\n\t/**\n\t * @cfg {String} email (required)\n\t *\n\t * The email address that was matched.\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.match.Match.prototype.constructor.call( this, cfg );\n\n\t\tif( !cfg.email ) throw new Error( '`email` cfg required' );\n\n\t\tthis.email = cfg.email;\n\t},\n\n\n\t/**\n\t * Returns a string name for the type of match that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'email';\n\t},\n\n\n\t/**\n\t * Returns the email address that was matched.\n\t *\n\t * @return {String}\n\t */\n\tgetEmail : function() {\n\t\treturn this.email;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorHref : function() {\n\t\treturn 'mailto:' + this.email;\n\t},\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorText : function() {\n\t\treturn this.email;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.match.Hashtag\n * @extends Autolinker.match.Match\n *\n * Represents a Hashtag match found in an input string which should be\n * Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more\n * details.\n */\nAutolinker.match.Hashtag = Autolinker.Util.extend( Autolinker.match.Match, {\n\n\t/**\n\t * @cfg {String} serviceName\n\t *\n\t * The service to point hashtag matches to. See {@link Autolinker#hashtag}\n\t * for available values.\n\t */\n\n\t/**\n\t * @cfg {String} hashtag (required)\n\t *\n\t * The Hashtag that was matched, without the '#'.\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.match.Match.prototype.constructor.call( this, cfg );\n\n\t\t// TODO: if( !serviceName ) throw new Error( '`serviceName` cfg required' );\n\t\tif( !cfg.hashtag ) throw new Error( '`hashtag` cfg required' );\n\n\t\tthis.serviceName = cfg.serviceName;\n\t\tthis.hashtag = cfg.hashtag;\n\t},\n\n\n\t/**\n\t * Returns the type of match that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'hashtag';\n\t},\n\n\n\t/**\n\t * Returns the configured {@link #serviceName} to point the Hashtag to.\n\t * Ex: 'facebook', 'twitter'.\n\t *\n\t * @return {String}\n\t */\n\tgetServiceName : function() {\n\t\treturn this.serviceName;\n\t},\n\n\n\t/**\n\t * Returns the matched hashtag, without the '#' character.\n\t *\n\t * @return {String}\n\t */\n\tgetHashtag : function() {\n\t\treturn this.hashtag;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorHref : function() {\n\t\tvar serviceName = this.serviceName,\n\t\t    hashtag = this.hashtag;\n\n\t\tswitch( serviceName ) {\n\t\t\tcase 'twitter' :\n\t\t\t\treturn 'https://twitter.com/hashtag/' + hashtag;\n\t\t\tcase 'facebook' :\n\t\t\t\treturn 'https://www.facebook.com/hashtag/' + hashtag;\n\t\t\tcase 'instagram' :\n\t\t\t\treturn 'https://instagram.com/explore/tags/' + hashtag;\n\n\t\t\tdefault :  // Shouldn't happen because Autolinker's constructor should block any invalid values, but just in case.\n\t\t\t\tthrow new Error( 'Unknown service name to point hashtag to: ', serviceName );\n\t\t}\n\t},\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorText : function() {\n\t\treturn '#' + this.hashtag;\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.match.Phone\n * @extends Autolinker.match.Match\n *\n * Represents a Phone number match found in an input string which should be\n * Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more\n * details.\n */\nAutolinker.match.Phone = Autolinker.Util.extend( Autolinker.match.Match, {\n\n\t/**\n\t * @protected\n\t * @property {String} number (required)\n\t *\n\t * The phone number that was matched, without any delimiter characters.\n\t *\n\t * Note: This is a string to allow for prefixed 0's.\n\t */\n\n\t/**\n\t * @protected\n\t * @property  {Boolean} plusSign (required)\n\t *\n\t * `true` if the matched phone number started with a '+' sign. We'll include\n\t * it in the `tel:` URL if so, as this is needed for international numbers.\n\t *\n\t * Ex: '+1 (123) 456 7879'\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.match.Match.prototype.constructor.call( this, cfg );\n\n\t\tif( !cfg.number ) throw new Error( '`number` cfg required' );\n\t\tif( cfg.plusSign == null ) throw new Error( '`plusSign` cfg required' );\n\n\t\tthis.number = cfg.number;\n\t\tthis.plusSign = cfg.plusSign;\n\t},\n\n\n\t/**\n\t * Returns a string name for the type of match that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'phone';\n\t},\n\n\n\t/**\n\t * Returns the phone number that was matched as a string, without any\n\t * delimiter characters.\n\t *\n\t * Note: This is a string to allow for prefixed 0's.\n\t *\n\t * @return {String}\n\t */\n\tgetNumber: function() {\n\t\treturn this.number;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorHref : function() {\n\t\treturn 'tel:' + ( this.plusSign ? '+' : '' ) + this.number;\n\t},\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorText : function() {\n\t\treturn this.matchedText;\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.match.Mention\n * @extends Autolinker.match.Match\n *\n * Represents a Mention match found in an input string which should be Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more details.\n */\nAutolinker.match.Mention = Autolinker.Util.extend( Autolinker.match.Match, {\n\n\t/**\n\t * @cfg {String} serviceName\n\t *\n\t * The service to point mention matches to. See {@link Autolinker#mention}\n\t * for available values.\n\t */\n\n\t/**\n\t * @cfg {String} mention (required)\n\t *\n\t * The Mention that was matched, without the '@' character.\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.match.Match.prototype.constructor.call( this, cfg );\n\n\t\tif( !cfg.serviceName ) throw new Error( '`serviceName` cfg required' );\n\t\tif( !cfg.mention ) throw new Error( '`mention` cfg required' );\n\n\t\tthis.mention = cfg.mention;\n\t\tthis.serviceName = cfg.serviceName;\n\t},\n\n\n\t/**\n\t * Returns the type of match that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'mention';\n\t},\n\n\n\t/**\n\t * Returns the mention, without the '@' character.\n\t *\n\t * @return {String}\n\t */\n\tgetMention : function() {\n\t\treturn this.mention;\n\t},\n\n\n\t/**\n\t * Returns the configured {@link #serviceName} to point the mention to.\n\t * Ex: 'instagram', 'twitter'.\n\t *\n\t * @return {String}\n\t */\n\tgetServiceName : function() {\n\t\treturn this.serviceName;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorHref : function() {\n\t\tswitch( this.serviceName ) {\n\t\t\tcase 'twitter' :\n\t\t\t\treturn 'https://twitter.com/' + this.mention;\n\t\t\tcase 'instagram' :\n\t\t\t\treturn 'https://instagram.com/' + this.mention;\n\n\t\t\tdefault :  // Shouldn't happen because Autolinker's constructor should block any invalid values, but just in case.\n\t\t\t\tthrow new Error( 'Unknown service name to point mention to: ', this.serviceName );\n\t\t}\n\t},\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorText : function() {\n\t\treturn '@' + this.mention;\n\t},\n\n\n\t/**\n\t * Returns the CSS class suffixes that should be used on a tag built with\n\t * the match. See {@link Autolinker.match.Match#getCssClassSuffixes} for\n\t * details.\n\t *\n\t * @return {String[]}\n\t */\n\tgetCssClassSuffixes : function() {\n\t\tvar cssClassSuffixes = Autolinker.match.Match.prototype.getCssClassSuffixes.call( this ),\n\t\t    serviceName = this.getServiceName();\n\n\t\tif( serviceName ) {\n\t\t\tcssClassSuffixes.push( serviceName );\n\t\t}\n\t\treturn cssClassSuffixes;\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.match.Url\n * @extends Autolinker.match.Match\n *\n * Represents a Url match found in an input string which should be Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more details.\n */\nAutolinker.match.Url = Autolinker.Util.extend( Autolinker.match.Match, {\n\n\t/**\n\t * @cfg {String} url (required)\n\t *\n\t * The url that was matched.\n\t */\n\n\t/**\n\t * @cfg {\"scheme\"/\"www\"/\"tld\"} urlMatchType (required)\n\t *\n\t * The type of URL match that this class represents. This helps to determine\n\t * if the match was made in the original text with a prefixed scheme (ex:\n\t * 'http://www.google.com'), a prefixed 'www' (ex: 'www.google.com'), or\n\t * was matched by a known top-level domain (ex: 'google.com').\n\t */\n\n\t/**\n\t * @cfg {Boolean} protocolUrlMatch (required)\n\t *\n\t * `true` if the URL is a match which already has a protocol (i.e.\n\t * 'http://'), `false` if the match was from a 'www' or known TLD match.\n\t */\n\n\t/**\n\t * @cfg {Boolean} protocolRelativeMatch (required)\n\t *\n\t * `true` if the URL is a protocol-relative match. A protocol-relative match\n\t * is a URL that starts with '//', and will be either http:// or https://\n\t * based on the protocol that the site is loaded under.\n\t */\n\n\t/**\n\t * @cfg {Object} stripPrefix (required)\n\t *\n\t * The Object form of {@link Autolinker#cfg-stripPrefix}.\n\t */\n\n\t/**\n\t * @cfg {Boolean} stripTrailingSlash (required)\n\t * @inheritdoc Autolinker#cfg-stripTrailingSlash\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.match.Match.prototype.constructor.call( this, cfg );\n\n\t\tif( cfg.urlMatchType !== 'scheme' && cfg.urlMatchType !== 'www' && cfg.urlMatchType !== 'tld' ) throw new Error( '`urlMatchType` cfg must be one of: \"scheme\", \"www\", or \"tld\"' );\n\t\tif( !cfg.url ) throw new Error( '`url` cfg required' );\n\t\tif( cfg.protocolUrlMatch == null ) throw new Error( '`protocolUrlMatch` cfg required' );\n\t\tif( cfg.protocolRelativeMatch == null ) throw new Error( '`protocolRelativeMatch` cfg required' );\n\t\tif( cfg.stripPrefix == null ) throw new Error( '`stripPrefix` cfg required' );\n\t\tif( cfg.stripTrailingSlash == null ) throw new Error( '`stripTrailingSlash` cfg required' );\n\n\t\tthis.urlMatchType = cfg.urlMatchType;\n\t\tthis.url = cfg.url;\n\t\tthis.protocolUrlMatch = cfg.protocolUrlMatch;\n\t\tthis.protocolRelativeMatch = cfg.protocolRelativeMatch;\n\t\tthis.stripPrefix = cfg.stripPrefix;\n\t\tthis.stripTrailingSlash = cfg.stripTrailingSlash;\n\t},\n\n\n\t/**\n\t * @private\n\t * @property {RegExp} schemePrefixRegex\n\t *\n\t * A regular expression used to remove the 'http://' or 'https://' from\n\t * URLs.\n\t */\n\tschemePrefixRegex: /^(https?:\\/\\/)?/i,\n\n\t/**\n\t * @private\n\t * @property {RegExp} wwwPrefixRegex\n\t *\n\t * A regular expression used to remove the 'www.' from URLs.\n\t */\n\twwwPrefixRegex: /^(https?:\\/\\/)?(www\\.)?/i,\n\n\t/**\n\t * @private\n\t * @property {RegExp} protocolRelativeRegex\n\t *\n\t * The regular expression used to remove the protocol-relative '//' from the {@link #url} string, for purposes\n\t * of {@link #getAnchorText}. A protocol-relative URL is, for example, \"//yahoo.com\"\n\t */\n\tprotocolRelativeRegex : /^\\/\\//,\n\n\t/**\n\t * @private\n\t * @property {Boolean} protocolPrepended\n\t *\n\t * Will be set to `true` if the 'http://' protocol has been prepended to the {@link #url} (because the\n\t * {@link #url} did not have a protocol)\n\t */\n\tprotocolPrepended : false,\n\n\n\t/**\n\t * Returns a string name for the type of match that this class represents.\n\t *\n\t * @return {String}\n\t */\n\tgetType : function() {\n\t\treturn 'url';\n\t},\n\n\n\t/**\n\t * Returns a string name for the type of URL match that this class\n\t * represents.\n\t *\n\t * This helps to determine if the match was made in the original text with a\n\t * prefixed scheme (ex: 'http://www.google.com'), a prefixed 'www' (ex:\n\t * 'www.google.com'), or was matched by a known top-level domain (ex:\n\t * 'google.com').\n\t *\n\t * @return {\"scheme\"/\"www\"/\"tld\"}\n\t */\n\tgetUrlMatchType : function() {\n\t\treturn this.urlMatchType;\n\t},\n\n\n\t/**\n\t * Returns the url that was matched, assuming the protocol to be 'http://' if the original\n\t * match was missing a protocol.\n\t *\n\t * @return {String}\n\t */\n\tgetUrl : function() {\n\t\tvar url = this.url;\n\n\t\t// if the url string doesn't begin with a protocol, assume 'http://'\n\t\tif( !this.protocolRelativeMatch && !this.protocolUrlMatch && !this.protocolPrepended ) {\n\t\t\turl = this.url = 'http://' + url;\n\n\t\t\tthis.protocolPrepended = true;\n\t\t}\n\n\t\treturn url;\n\t},\n\n\n\t/**\n\t * Returns the anchor href that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorHref : function() {\n\t\tvar url = this.getUrl();\n\n\t\treturn url.replace( /&amp;/g, '&' );  // any &amp;'s in the URL should be converted back to '&' if they were displayed as &amp; in the source html\n\t},\n\n\n\t/**\n\t * Returns the anchor text that should be generated for the match.\n\t *\n\t * @return {String}\n\t */\n\tgetAnchorText : function() {\n\t\tvar anchorText = this.getMatchedText();\n\n\t\tif( this.protocolRelativeMatch ) {\n\t\t\t// Strip off any protocol-relative '//' from the anchor text\n\t\t\tanchorText = this.stripProtocolRelativePrefix( anchorText );\n\t\t}\n\t\tif( this.stripPrefix.scheme ) {\n\t\t\tanchorText = this.stripSchemePrefix( anchorText );\n\t\t}\n\t\tif( this.stripPrefix.www ) {\n\t\t\tanchorText = this.stripWwwPrefix( anchorText );\n\t\t}\n\t\tif( this.stripTrailingSlash ) {\n\t\t\tanchorText = this.removeTrailingSlash( anchorText );  // remove trailing slash, if there is one\n\t\t}\n\n\t\treturn anchorText;\n\t},\n\n\n\t// ---------------------------------------\n\n\t// Utility Functionality\n\n\t/**\n\t * Strips the scheme prefix (such as \"http://\" or \"https://\") from the given\n\t * `url`.\n\t *\n\t * @private\n\t * @param {String} url The text of the anchor that is being generated, for\n\t *   which to strip off the url scheme.\n\t * @return {String} The `url`, with the scheme stripped.\n\t */\n\tstripSchemePrefix : function( url ) {\n\t\treturn url.replace( this.schemePrefixRegex, '' );\n\t},\n\n\n\t/**\n\t * Strips the 'www' prefix from the given `url`.\n\t *\n\t * @private\n\t * @param {String} url The text of the anchor that is being generated, for\n\t *   which to strip off the 'www' if it exists.\n\t * @return {String} The `url`, with the 'www' stripped.\n\t */\n\tstripWwwPrefix : function( url ) {\n\t\treturn url.replace( this.wwwPrefixRegex, '$1' );  // leave any scheme ($1), it one exists\n\t},\n\n\n\t/**\n\t * Strips any protocol-relative '//' from the anchor text.\n\t *\n\t * @private\n\t * @param {String} text The text of the anchor that is being generated, for which to strip off the\n\t *   protocol-relative prefix (such as stripping off \"//\")\n\t * @return {String} The `anchorText`, with the protocol-relative prefix stripped.\n\t */\n\tstripProtocolRelativePrefix : function( text ) {\n\t\treturn text.replace( this.protocolRelativeRegex, '' );\n\t},\n\n\n\t/**\n\t * Removes any trailing slash from the given `anchorText`, in preparation for the text to be displayed.\n\t *\n\t * @private\n\t * @param {String} anchorText The text of the anchor that is being generated, for which to remove any trailing\n\t *   slash ('/') that may exist.\n\t * @return {String} The `anchorText`, with the trailing slash removed.\n\t */\n\tremoveTrailingSlash : function( anchorText ) {\n\t\tif( anchorText.charAt( anchorText.length - 1 ) === '/' ) {\n\t\t\tanchorText = anchorText.slice( 0, -1 );\n\t\t}\n\t\treturn anchorText;\n\t}\n\n} );\n// NOTE: THIS IS A GENERATED FILE\n// To update with the latest TLD list, run `gulp update-tld-list`\n\n/*global Autolinker */\nAutolinker.tldRegex = /(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermögensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermögensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|international|lifeinsurance|orientexpress|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|pamperedchef|scholarships|versicherung|xn--3e0b707e|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--3bst00m|xn--3ds443g|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|சிங்கப்பூர்|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|goodhands|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|mcdonalds|melbourne|microsoft|montblanc|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|telecity|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|السعودية|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|panerai|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|spiegel|staples|starhub|statoil|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|католик|الجزائر|العليان|پاکستان|كاثوليك|موبايلي|இந்தியா|abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|xperia|yachts|yandex|zappos|москва|онлайн|ابوظبي|ارامكو|الاردن|المغرب|امارات|فلسطين|مليسيا|இலங்கை|ファッション|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|boots|bosch|build|canon|cards|chase|cheap|chloe|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vista|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|ایران|بازار|بھارت|سودان|سورية|همراه|संगठन|বাংলা|భారత్|嘉里大酒店|aarp|able|adac|aero|aigo|akdn|ally|amex|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|mtpc|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sapo|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|дети|сайт|بيتك|تونس|شبكة|عراق|عمان|موقع|भारत|ভারত|ਭਾਰਤ|ભારત|ලංකා|グーグル|クラウド|ポイント|大众汽车|组织机构|電訊盈科|香格里拉|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|htc|ibm|ice|icu|ifm|ing|ink|int|ist|itv|iwc|jcb|jcp|jio|jlc|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|lol|lpl|ltd|man|mba|mcd|med|men|meo|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|бел|ком|қаз|мкд|мон|орг|рус|срб|укр|հայ|קום|قطر|كوم|مصر|कॉम|नेट|คอม|ไทย|ストア|セール|みんな|中文网|天主教|我爱你|新加坡|淡马锡|诺基亚|飞利浦|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ελ|бг|ею|рф|გე|닷넷|닷컴|삼성|한국|コム|世界|中信|中国|中國|企业|佛山|信息|健康|八卦|公司|公益|台湾|台灣|商城|商店|商标|嘉里|在线|大拿|娱乐|家電|工行|广东|微博|慈善|手机|手表|政务|政府|新闻|时尚|書籍|机构|游戏|澳門|点看|珠宝|移动|网址|网店|网站|网络|联通|谷歌|购物|通販|集团|食品|餐厅|香港)/;\n\n/*global Autolinker */\n/**\n * @abstract\n * @class Autolinker.matcher.Matcher\n *\n * An abstract class and interface for individual matchers to find matches in\n * an input string with linkified versions of them.\n *\n * Note that Matchers do not take HTML into account - they must be fed the text\n * nodes of any HTML string, which is handled by {@link Autolinker#parse}.\n */\nAutolinker.matcher.Matcher = Autolinker.Util.extend( Object, {\n\n\t/**\n\t * @cfg {Autolinker.AnchorTagBuilder} tagBuilder (required)\n\t *\n\t * Reference to the AnchorTagBuilder instance to use to generate HTML tags\n\t * for {@link Autolinker.match.Match Matches}.\n\t */\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Matcher\n\t *   instance, specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tif( !cfg.tagBuilder ) throw new Error( '`tagBuilder` cfg required' );\n\n\t\tthis.tagBuilder = cfg.tagBuilder;\n\t},\n\n\n\t/**\n\t * Parses the input `text` and returns the array of {@link Autolinker.match.Match Matches}\n\t * for the matcher.\n\t *\n\t * @abstract\n\t * @param {String} text The text to scan and replace matches in.\n\t * @return {Autolinker.match.Match[]}\n\t */\n\tparseMatches : Autolinker.Util.abstractMethod\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.matcher.Email\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find email matches in an input string.\n *\n * See this class's superclass ({@link Autolinker.matcher.Matcher}) for more details.\n */\nAutolinker.matcher.Email = Autolinker.Util.extend( Autolinker.matcher.Matcher, {\n\n\t/**\n\t * The regular expression to match email addresses. Example match:\n\t *\n\t *     person@place.com\n\t *\n\t * @private\n\t * @property {RegExp} matcherRegex\n\t */\n\tmatcherRegex : (function() {\n\t\tvar alphaNumericChars = Autolinker.RegexLib.alphaNumericCharsStr,\n\t\t    emailRegex = new RegExp( '[' + alphaNumericChars + '\\\\-_\\';:&=+$.,]+@' ),  // something@ for email addresses (a.k.a. local-part)\n\t\t\tdomainNameRegex = Autolinker.RegexLib.domainNameRegex,\n\t\t\ttldRegex = Autolinker.tldRegex;  // match our known top level domains (TLDs)\n\n\t\treturn new RegExp( [\n\t\t\temailRegex.source,\n\t\t\tdomainNameRegex.source,\n\t\t\t'\\\\.', tldRegex.source   // '.com', '.net', etc\n\t\t].join( \"\" ), 'gi' );\n\t} )(),\n\n\n\t/**\n\t * @inheritdoc\n\t */\n\tparseMatches : function( text ) {\n\t\tvar matcherRegex = this.matcherRegex,\n\t\t    tagBuilder = this.tagBuilder,\n\t\t    matches = [],\n\t\t    match;\n\n\t\twhile( ( match = matcherRegex.exec( text ) ) !== null ) {\n\t\t\tvar matchedText = match[ 0 ];\n\n\t\t\tmatches.push( new Autolinker.match.Email( {\n\t\t\t\ttagBuilder  : tagBuilder,\n\t\t\t\tmatchedText : matchedText,\n\t\t\t\toffset      : match.index,\n\t\t\t\temail       : matchedText\n\t\t\t} ) );\n\t\t}\n\n\t\treturn matches;\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.matcher.Hashtag\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find Hashtag matches in an input string.\n */\nAutolinker.matcher.Hashtag = Autolinker.Util.extend( Autolinker.matcher.Matcher, {\n\n\t/**\n\t * @cfg {String} serviceName\n\t *\n\t * The service to point hashtag matches to. See {@link Autolinker#hashtag}\n\t * for available values.\n\t */\n\n\n\t/**\n\t * The regular expression to match Hashtags. Example match:\n\t *\n\t *     #asdf\n\t *\n\t * @private\n\t * @property {RegExp} matcherRegex\n\t */\n\tmatcherRegex : new RegExp( '#[_' + Autolinker.RegexLib.alphaNumericCharsStr + ']{1,139}', 'g' ),\n\n\t/**\n\t * The regular expression to use to check the character before a username match to\n\t * make sure we didn't accidentally match an email address.\n\t *\n\t * For example, the string \"asdf@asdf.com\" should not match \"@asdf\" as a username.\n\t *\n\t * @private\n\t * @property {RegExp} nonWordCharRegex\n\t */\n\tnonWordCharRegex : new RegExp( '[^' + Autolinker.RegexLib.alphaNumericCharsStr + ']' ),\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match instance,\n\t *   specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.matcher.Matcher.prototype.constructor.call( this, cfg );\n\n\t\tthis.serviceName = cfg.serviceName;\n\t},\n\n\n\t/**\n\t * @inheritdoc\n\t */\n\tparseMatches : function( text ) {\n\t\tvar matcherRegex = this.matcherRegex,\n\t\t    nonWordCharRegex = this.nonWordCharRegex,\n\t\t    serviceName = this.serviceName,\n\t\t    tagBuilder = this.tagBuilder,\n\t\t    matches = [],\n\t\t    match;\n\n\t\twhile( ( match = matcherRegex.exec( text ) ) !== null ) {\n\t\t\tvar offset = match.index,\n\t\t\t    prevChar = text.charAt( offset - 1 );\n\n\t\t\t// If we found the match at the beginning of the string, or we found the match\n\t\t\t// and there is a whitespace char in front of it (meaning it is not a '#' char\n\t\t\t// in the middle of a word), then it is a hashtag match.\n\t\t\tif( offset === 0 || nonWordCharRegex.test( prevChar ) ) {\n\t\t\t\tvar matchedText = match[ 0 ],\n\t\t\t\t    hashtag = match[ 0 ].slice( 1 );  // strip off the '#' character at the beginning\n\n\t\t\t\tmatches.push( new Autolinker.match.Hashtag( {\n\t\t\t\t\ttagBuilder  : tagBuilder,\n\t\t\t\t\tmatchedText : matchedText,\n\t\t\t\t\toffset      : offset,\n\t\t\t\t\tserviceName : serviceName,\n\t\t\t\t\thashtag     : hashtag\n\t\t\t\t} ) );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.matcher.Phone\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find Phone number matches in an input string.\n *\n * See this class's superclass ({@link Autolinker.matcher.Matcher}) for more\n * details.\n */\nAutolinker.matcher.Phone = Autolinker.Util.extend( Autolinker.matcher.Matcher, {\n\n\t/**\n\t * The regular expression to match Phone numbers. Example match:\n\t *\n\t *     (123) 456-7890\n\t *\n\t * This regular expression has the following capturing groups:\n\t *\n\t * 1. The prefixed '+' sign, if there is one.\n\t *\n\t * @private\n\t * @property {RegExp} matcherRegex\n\t */\n    matcherRegex : /(?:(\\+)?\\d{1,3}[-\\040.]?)?\\(?\\d{3}\\)?[-\\040.]?\\d{3}[-\\040.]?\\d{4}([,;]*[0-9]+#?)*/g,    \n    \n    // ex: (123) 456-7890, 123 456 7890, 123-456-7890, +18004441234,,;,10226420346#, \n    // +1 (800) 444 1234, 10226420346#, 1-800-444-1234,1022,64,20346#\n\n\t/**\n\t * @inheritdoc\n\t */\n\tparseMatches: function(text) {\n\t\tvar matcherRegex = this.matcherRegex,\n\t\t\ttagBuilder = this.tagBuilder,\n\t\t\tmatches = [],\n\t\t\tmatch;\n\n\t\twhile ((match = matcherRegex.exec(text)) !== null) {\n\t\t\t// Remove non-numeric values from phone number string\n\t\t\tvar matchedText = match[0],\n\t\t\t\tcleanNumber = matchedText.replace(/[^0-9,;#]/g, ''), // strip out non-digit characters exclude comma semicolon and #\n\t\t\t\tplusSign = !!match[1]; // match[ 1 ] is the prefixed plus sign, if there is one\n\t\t\tif (/\\D/.test(match[2]) && /\\D/.test(matchedText)) {\n    \t\t\tmatches.push(new Autolinker.match.Phone({\n    \t\t\t\ttagBuilder: tagBuilder,\n    \t\t\t\tmatchedText: matchedText,\n    \t\t\t\toffset: match.index,\n    \t\t\t\tnumber: cleanNumber,\n    \t\t\t\tplusSign: plusSign\n    \t\t\t}));\n            }\n\t\t}\n\n\t\treturn matches;\n\t}\n\n} );\n/*global Autolinker */\n/**\n * @class Autolinker.matcher.Mention\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find/replace username matches in an input string.\n */\nAutolinker.matcher.Mention = Autolinker.Util.extend( Autolinker.matcher.Matcher, {\n\n\t/**\n\t * Hash of regular expression to match username handles. Example match:\n\t *\n\t *     @asdf\n\t *\n\t * @private\n\t * @property {Object} matcherRegexes\n\t */\n\tmatcherRegexes : {\n\t\t\"twitter\": new RegExp( '@[_' + Autolinker.RegexLib.alphaNumericCharsStr + ']{1,20}', 'g' ),\n\t\t\"instagram\": new RegExp( '@[_.' + Autolinker.RegexLib.alphaNumericCharsStr + ']{1,50}', 'g' )\n\t},\n\n\t/**\n\t * The regular expression to use to check the character before a username match to\n\t * make sure we didn't accidentally match an email address.\n\t *\n\t * For example, the string \"asdf@asdf.com\" should not match \"@asdf\" as a username.\n\t *\n\t * @private\n\t * @property {RegExp} nonWordCharRegex\n\t */\n\tnonWordCharRegex : new RegExp( '[^' + Autolinker.RegexLib.alphaNumericCharsStr + ']' ),\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match instance,\n\t *   specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.matcher.Matcher.prototype.constructor.call( this, cfg );\n\n\t\tthis.serviceName = cfg.serviceName;\n\t},\n\n\n\t/**\n\t * @inheritdoc\n\t */\n\tparseMatches : function( text ) {\n\t\tvar matcherRegex = this.matcherRegexes[this.serviceName],\n\t\t    nonWordCharRegex = this.nonWordCharRegex,\n\t\t    serviceName = this.serviceName,\n\t\t    tagBuilder = this.tagBuilder,\n\t\t    matches = [],\n\t\t    match;\n\n\t\tif (!matcherRegex) {\n\t\t\treturn matches;\n\t\t}\n\n\t\twhile( ( match = matcherRegex.exec( text ) ) !== null ) {\n\t\t\tvar offset = match.index,\n\t\t\t    prevChar = text.charAt( offset - 1 );\n\n\t\t\t// If we found the match at the beginning of the string, or we found the match\n\t\t\t// and there is a whitespace char in front of it (meaning it is not an email\n\t\t\t// address), then it is a username match.\n\t\t\tif( offset === 0 || nonWordCharRegex.test( prevChar ) ) {\n\t\t\t\tvar matchedText = match[ 0 ].replace(/\\.+$/g, ''), // strip off trailing .\n\t\t\t\t    mention = matchedText.slice( 1 );  // strip off the '@' character at the beginning\n\n\t\t\t\tmatches.push( new Autolinker.match.Mention( {\n\t\t\t\t\ttagBuilder    : tagBuilder,\n\t\t\t\t\tmatchedText   : matchedText,\n\t\t\t\t\toffset        : offset,\n\t\t\t\t\tserviceName   : serviceName,\n\t\t\t\t\tmention       : mention\n\t\t\t\t} ) );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t}\n\n} );\n\n/*global Autolinker */\n/**\n * @class Autolinker.matcher.Url\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find URL matches in an input string.\n *\n * See this class's superclass ({@link Autolinker.matcher.Matcher}) for more details.\n */\nAutolinker.matcher.Url = Autolinker.Util.extend( Autolinker.matcher.Matcher, {\n\n\t/**\n\t * @cfg {Object} stripPrefix (required)\n\t *\n\t * The Object form of {@link Autolinker#cfg-stripPrefix}.\n\t */\n\n\t/**\n\t * @cfg {Boolean} stripTrailingSlash (required)\n\t * @inheritdoc Autolinker#stripTrailingSlash\n\t */\n\n\n\t/**\n\t * @private\n\t * @property {RegExp} matcherRegex\n\t *\n\t * The regular expression to match URLs with an optional scheme, port\n\t * number, path, query string, and hash anchor.\n\t *\n\t * Example matches:\n\t *\n\t *     http://google.com\n\t *     www.google.com\n\t *     google.com/path/to/file?q1=1&q2=2#myAnchor\n\t *\n\t *\n\t * This regular expression will have the following capturing groups:\n\t *\n\t * 1.  Group that matches a scheme-prefixed URL (i.e. 'http://google.com').\n\t *     This is used to match scheme URLs with just a single word, such as\n\t *     'http://localhost', where we won't double check that the domain name\n\t *     has at least one dot ('.') in it.\n\t * 2.  Group that matches a 'www.' prefixed URL. This is only matched if the\n\t *     'www.' text was not prefixed by a scheme (i.e.: not prefixed by\n\t *     'http://', 'ftp:', etc.)\n\t * 3.  A protocol-relative ('//') match for the case of a 'www.' prefixed\n\t *     URL. Will be an empty string if it is not a protocol-relative match.\n\t *     We need to know the character before the '//' in order to determine\n\t *     if it is a valid match or the // was in a string we don't want to\n\t *     auto-link.\n\t * 4.  Group that matches a known TLD (top level domain), when a scheme\n\t *     or 'www.'-prefixed domain is not matched.\n\t * 5.  A protocol-relative ('//') match for the case of a known TLD prefixed\n\t *     URL. Will be an empty string if it is not a protocol-relative match.\n\t *     See #3 for more info.\n\t */\n\tmatcherRegex : (function() {\n\t\tvar schemeRegex = /(?:[A-Za-z][-.+A-Za-z0-9]*:(?![A-Za-z][-.+A-Za-z0-9]*:\\/\\/)(?!\\d+\\/?)(?:\\/\\/)?)/,  // match protocol, allow in format \"http://\" or \"mailto:\". However, do not match the first part of something like 'link:http://www.google.com' (i.e. don't match \"link:\"). Also, make sure we don't interpret 'google.com:8000' as if 'google.com' was a protocol here (i.e. ignore a trailing port number in this regex)\n\t\t    wwwRegex = /(?:www\\.)/,                  // starting with 'www.'\n\t\t    domainNameRegex = Autolinker.RegexLib.domainNameRegex,\n\t\t    tldRegex = Autolinker.tldRegex,  // match our known top level domains (TLDs)\n\t\t    alphaNumericCharsStr = Autolinker.RegexLib.alphaNumericCharsStr,\n\n\t\t    // Allow optional path, query string, and hash anchor, not ending in the following characters: \"?!:,.;\"\n\t\t    // http://blog.codinghorror.com/the-problem-with-urls/\n\t\t    urlSuffixRegex = new RegExp( '[/?#](?:[' + alphaNumericCharsStr + '\\\\-+&@#/%=~_()|\\'$*\\\\[\\\\]?!:,.;\\u2713]*[' + alphaNumericCharsStr + '\\\\-+&@#/%=~_()|\\'$*\\\\[\\\\]\\u2713])?' );\n\n\t\treturn new RegExp( [\n\t\t\t'(?:', // parens to cover match for scheme (optional), and domain\n\t\t\t\t'(',  // *** Capturing group $1, for a scheme-prefixed url (ex: http://google.com)\n\t\t\t\t\tschemeRegex.source,\n\t\t\t\t\tdomainNameRegex.source,\n\t\t\t\t')',\n\n\t\t\t\t'|',\n\n\t\t\t\t'(',  // *** Capturing group $2, for a 'www.' prefixed url (ex: www.google.com)\n\t\t\t\t\t'(//)?',  // *** Capturing group $3 for an optional protocol-relative URL. Must be at the beginning of the string or start with a non-word character (handled later)\n\t\t\t\t\twwwRegex.source,\n\t\t\t\t\tdomainNameRegex.source,\n\t\t\t\t')',\n\n\t\t\t\t'|',\n\n\t\t\t\t'(',  // *** Capturing group $4, for known a TLD url (ex: google.com)\n\t\t\t\t\t'(//)?',  // *** Capturing group $5 for an optional protocol-relative URL. Must be at the beginning of the string or start with a non-word character (handled later)\n\t\t\t\t\tdomainNameRegex.source + '\\\\.',\n\t\t\t\t\ttldRegex.source,\n\t\t\t\t\t'(?![-' + alphaNumericCharsStr + '])', // TLD not followed by a letter, behaves like unicode-aware \\b\n\t\t\t\t')',\n\t\t\t')',\n\n\t\t\t'(?::[0-9]+)?', // port\n\n\t\t\t'(?:' + urlSuffixRegex.source + ')?'  // match for path, query string, and/or hash anchor - optional\n\t\t].join( \"\" ), 'gi' );\n\t} )(),\n\n\n\t/**\n\t * A regular expression to use to check the character before a protocol-relative\n\t * URL match. We don't want to match a protocol-relative URL if it is part\n\t * of another word.\n\t *\n\t * For example, we want to match something like \"Go to: //google.com\",\n\t * but we don't want to match something like \"abc//google.com\"\n\t *\n\t * This regular expression is used to test the character before the '//'.\n\t *\n\t * @private\n\t * @type {RegExp} wordCharRegExp\n\t */\n\twordCharRegExp : new RegExp( '[' + Autolinker.RegexLib.alphaNumericCharsStr + ']' ),\n\n\n\t/**\n\t * The regular expression to match opening parenthesis in a URL match.\n\t *\n\t * This is to determine if we have unbalanced parenthesis in the URL, and to\n\t * drop the final parenthesis that was matched if so.\n\t *\n\t * Ex: The text \"(check out: wikipedia.com/something_(disambiguation))\"\n\t * should only autolink the inner \"wikipedia.com/something_(disambiguation)\"\n\t * part, so if we find that we have unbalanced parenthesis, we will drop the\n\t * last one for the match.\n\t *\n\t * @private\n\t * @property {RegExp}\n\t */\n\topenParensRe : /\\(/g,\n\n\t/**\n\t * The regular expression to match closing parenthesis in a URL match. See\n\t * {@link #openParensRe} for more information.\n\t *\n\t * @private\n\t * @property {RegExp}\n\t */\n\tcloseParensRe : /\\)/g,\n\n\n\t/**\n\t * @constructor\n\t * @param {Object} cfg The configuration properties for the Match instance,\n\t *   specified in an Object (map).\n\t */\n\tconstructor : function( cfg ) {\n\t\tAutolinker.matcher.Matcher.prototype.constructor.call( this, cfg );\n\n\t\tif( cfg.stripPrefix == null ) throw new Error( '`stripPrefix` cfg required' );\n\t\tif( cfg.stripTrailingSlash == null ) throw new Error( '`stripTrailingSlash` cfg required' );\n\n\t\tthis.stripPrefix = cfg.stripPrefix;\n\t\tthis.stripTrailingSlash = cfg.stripTrailingSlash;\n\t},\n\n\n\t/**\n\t * @inheritdoc\n\t */\n\tparseMatches : function( text ) {\n\t\tvar matcherRegex = this.matcherRegex,\n\t\t    stripPrefix = this.stripPrefix,\n\t\t    stripTrailingSlash = this.stripTrailingSlash,\n\t\t    tagBuilder = this.tagBuilder,\n\t\t    matches = [],\n\t\t    match;\n\n\t\twhile( ( match = matcherRegex.exec( text ) ) !== null ) {\n\t\t\tvar matchStr = match[ 0 ],\n\t\t\t    schemeUrlMatch = match[ 1 ],\n\t\t\t    wwwUrlMatch = match[ 2 ],\n\t\t\t    wwwProtocolRelativeMatch = match[ 3 ],\n\t\t\t    //tldUrlMatch = match[ 4 ],  -- not needed at the moment\n\t\t\t    tldProtocolRelativeMatch = match[ 5 ],\n\t\t\t    offset = match.index,\n\t\t\t    protocolRelativeMatch = wwwProtocolRelativeMatch || tldProtocolRelativeMatch,\n\t\t\t\tprevChar = text.charAt( offset - 1 );\n\n\t\t\tif( !Autolinker.matcher.UrlMatchValidator.isValid( matchStr, schemeUrlMatch ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the match is preceded by an '@' character, then it is either\n\t\t\t// an email address or a username. Skip these types of matches.\n\t\t\tif( offset > 0 && prevChar === '@' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If it's a protocol-relative '//' match, but the character before the '//'\n\t\t\t// was a word character (i.e. a letter/number), then we found the '//' in the\n\t\t\t// middle of another word (such as \"asdf//asdf.com\"). In this case, skip the\n\t\t\t// match.\n\t\t\tif( offset > 0 && protocolRelativeMatch && this.wordCharRegExp.test( prevChar ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( /\\?$/.test(matchStr) ) {\n\t\t\t\tmatchStr = matchStr.substr(0, matchStr.length-1);\n\t\t\t}\n\n\t\t\t// Handle a closing parenthesis at the end of the match, and exclude\n\t\t\t// it if there is not a matching open parenthesis in the match\n\t\t\t// itself.\n\t\t\tif( this.matchHasUnbalancedClosingParen( matchStr ) ) {\n\t\t\t\tmatchStr = matchStr.substr( 0, matchStr.length - 1 );  // remove the trailing \")\"\n\t\t\t} else {\n\t\t\t\t// Handle an invalid character after the TLD\n\t\t\t\tvar pos = this.matchHasInvalidCharAfterTld( matchStr, schemeUrlMatch );\n\t\t\t\tif( pos > -1 ) {\n\t\t\t\t\tmatchStr = matchStr.substr( 0, pos ); // remove the trailing invalid chars\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar urlMatchType = schemeUrlMatch ? 'scheme' : ( wwwUrlMatch ? 'www' : 'tld' ),\n\t\t\t    protocolUrlMatch = !!schemeUrlMatch;\n\n\t\t\tmatches.push( new Autolinker.match.Url( {\n\t\t\t\ttagBuilder            : tagBuilder,\n\t\t\t\tmatchedText           : matchStr,\n\t\t\t\toffset                : offset,\n\t\t\t\turlMatchType          : urlMatchType,\n\t\t\t\turl                   : matchStr,\n\t\t\t\tprotocolUrlMatch      : protocolUrlMatch,\n\t\t\t\tprotocolRelativeMatch : !!protocolRelativeMatch,\n\t\t\t\tstripPrefix           : stripPrefix,\n\t\t\t\tstripTrailingSlash    : stripTrailingSlash\n\t\t\t} ) );\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\n\t/**\n\t * Determines if a match found has an unmatched closing parenthesis. If so,\n\t * this parenthesis will be removed from the match itself, and appended\n\t * after the generated anchor tag.\n\t *\n\t * A match may have an extra closing parenthesis at the end of the match\n\t * because the regular expression must include parenthesis for URLs such as\n\t * \"wikipedia.com/something_(disambiguation)\", which should be auto-linked.\n\t *\n\t * However, an extra parenthesis *will* be included when the URL itself is\n\t * wrapped in parenthesis, such as in the case of \"(wikipedia.com/something_(disambiguation))\".\n\t * In this case, the last closing parenthesis should *not* be part of the\n\t * URL itself, and this method will return `true`.\n\t *\n\t * @private\n\t * @param {String} matchStr The full match string from the {@link #matcherRegex}.\n\t * @return {Boolean} `true` if there is an unbalanced closing parenthesis at\n\t *   the end of the `matchStr`, `false` otherwise.\n\t */\n\tmatchHasUnbalancedClosingParen : function( matchStr ) {\n\t\tvar lastChar = matchStr.charAt( matchStr.length - 1 );\n\n\t\tif( lastChar === ')' ) {\n\t\t\tvar openParensMatch = matchStr.match( this.openParensRe ),\n\t\t\t    closeParensMatch = matchStr.match( this.closeParensRe ),\n\t\t\t    numOpenParens = ( openParensMatch && openParensMatch.length ) || 0,\n\t\t\t    numCloseParens = ( closeParensMatch && closeParensMatch.length ) || 0;\n\n\t\t\tif( numOpenParens < numCloseParens ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\n\t/**\n\t * Determine if there's an invalid character after the TLD in a URL. Valid\n\t * characters after TLD are ':/?#'. Exclude scheme matched URLs from this\n\t * check.\n\t *\n\t * @private\n\t * @param {String} urlMatch The matched URL, if there was one. Will be an\n\t *   empty string if the match is not a URL match.\n\t * @param {String} schemeUrlMatch The match URL string for a scheme\n\t *   match. Ex: 'http://yahoo.com'. This is used to match something like\n\t *   'http://localhost', where we won't double check that the domain name\n\t *   has at least one '.' in it.\n\t * @return {Number} the position where the invalid character was found. If\n\t *   no such character was found, returns -1\n\t */\n\tmatchHasInvalidCharAfterTld : function( urlMatch, schemeUrlMatch ) {\n\t\tif( !urlMatch ) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tvar offset = 0;\n\t\tif ( schemeUrlMatch ) {\n\t\t\toffset = urlMatch.indexOf(':');\n\t\t\turlMatch = urlMatch.slice(offset);\n\t\t}\n\n\t\tvar alphaNumeric = Autolinker.RegexLib.alphaNumericCharsStr;\n\n\t\tvar re = new RegExp(\"^((.?\\/\\/)?[-.\" + alphaNumeric + \"]*[-\" + alphaNumeric + \"]\\\\.[-\" + alphaNumeric + \"]+)\");\n\t\tvar res = re.exec( urlMatch );\n\t\tif ( res === null ) {\n\t\t\treturn -1;\n\t\t}\n\n\t\toffset += res[1].length;\n\t\turlMatch = urlMatch.slice(res[1].length);\n\t\tif (/^[^-.A-Za-z0-9:\\/?#]/.test(urlMatch)) {\n\t\t\treturn offset;\n\t\t}\n\n\t\treturn -1;\n\t}\n\n} );\n\n/*global Autolinker */\n/*jshint scripturl:true */\n/**\n * @private\n * @class Autolinker.matcher.UrlMatchValidator\n * @singleton\n *\n * Used by Autolinker to filter out false URL positives from the\n * {@link Autolinker.matcher.Url UrlMatcher}.\n *\n * Due to the limitations of regular expressions (including the missing feature\n * of look-behinds in JS regular expressions), we cannot always determine the\n * validity of a given match. This class applies a bit of additional logic to\n * filter out any false positives that have been matched by the\n * {@link Autolinker.matcher.Url UrlMatcher}.\n */\nAutolinker.matcher.UrlMatchValidator = {\n\n\t/**\n\t * Regex to test for a full protocol, with the two trailing slashes. Ex: 'http://'\n\t *\n\t * @private\n\t * @property {RegExp} hasFullProtocolRegex\n\t */\n\thasFullProtocolRegex : /^[A-Za-z][-.+A-Za-z0-9]*:\\/\\//,\n\n\t/**\n\t * Regex to find the URI scheme, such as 'mailto:'.\n\t *\n\t * This is used to filter out 'javascript:' and 'vbscript:' schemes.\n\t *\n\t * @private\n\t * @property {RegExp} uriSchemeRegex\n\t */\n\turiSchemeRegex : /^[A-Za-z][-.+A-Za-z0-9]*:/,\n\n\t/**\n\t * Regex to determine if at least one word char exists after the protocol (i.e. after the ':')\n\t *\n\t * @private\n\t * @property {RegExp} hasWordCharAfterProtocolRegex\n\t */\n\thasWordCharAfterProtocolRegex : new RegExp(\":[^\\\\s]*?[\" + Autolinker.RegexLib.alphaCharsStr + \"]\"),\n\n\t/**\n\t * Regex to determine if the string is a valid IP address\n\t *\n\t * @private\n\t * @property {RegExp} ipRegex\n\t */\n\tipRegex: /[0-9][0-9]?[0-9]?\\.[0-9][0-9]?[0-9]?\\.[0-9][0-9]?[0-9]?\\.[0-9][0-9]?[0-9]?(:[0-9]*)?\\/?$/,\n\n\t/**\n\t * Determines if a given URL match found by the {@link Autolinker.matcher.Url UrlMatcher}\n\t * is valid. Will return `false` for:\n\t *\n\t * 1) URL matches which do not have at least have one period ('.') in the\n\t *    domain name (effectively skipping over matches like \"abc:def\").\n\t *    However, URL matches with a protocol will be allowed (ex: 'http://localhost')\n\t * 2) URL matches which do not have at least one word character in the\n\t *    domain name (effectively skipping over matches like \"git:1.0\").\n\t * 3) A protocol-relative url match (a URL beginning with '//') whose\n\t *    previous character is a word character (effectively skipping over\n\t *    strings like \"abc//google.com\")\n\t *\n\t * Otherwise, returns `true`.\n\t *\n\t * @param {String} urlMatch The matched URL, if there was one. Will be an\n\t *   empty string if the match is not a URL match.\n\t * @param {String} protocolUrlMatch The match URL string for a protocol\n\t *   match. Ex: 'http://yahoo.com'. This is used to match something like\n\t *   'http://localhost', where we won't double check that the domain name\n\t *   has at least one '.' in it.\n\t * @return {Boolean} `true` if the match given is valid and should be\n\t *   processed, or `false` if the match is invalid and/or should just not be\n\t *   processed.\n\t */\n\tisValid : function( urlMatch, protocolUrlMatch ) {\n\t\tif(\n\t\t\t( protocolUrlMatch && !this.isValidUriScheme( protocolUrlMatch ) ) ||\n\t\t\tthis.urlMatchDoesNotHaveProtocolOrDot( urlMatch, protocolUrlMatch ) ||    // At least one period ('.') must exist in the URL match for us to consider it an actual URL, *unless* it was a full protocol match (like 'http://localhost')\n\t\t\t(this.urlMatchDoesNotHaveAtLeastOneWordChar( urlMatch, protocolUrlMatch ) && // At least one letter character must exist in the domain name after a protocol match. Ex: skip over something like \"git:1.0\"\n\t\t\t   !this.isValidIpAddress( urlMatch )) || // Except if it's an IP address\n\t\t\tthis.containsMultipleDots( urlMatch )\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\n\tisValidIpAddress : function ( uriSchemeMatch ) {\n\t\tvar newRegex = new RegExp(this.hasFullProtocolRegex.source + this.ipRegex.source);\n\t\tvar uriScheme = uriSchemeMatch.match( newRegex );\n\n\t\treturn uriScheme !== null;\n\t},\n\n\tcontainsMultipleDots : function ( urlMatch ) {\n\t\treturn urlMatch.indexOf(\"..\") > -1;\n\t},\n\n\t/**\n\t * Determines if the URI scheme is a valid scheme to be autolinked. Returns\n\t * `false` if the scheme is 'javascript:' or 'vbscript:'\n\t *\n\t * @private\n\t * @param {String} uriSchemeMatch The match URL string for a full URI scheme\n\t *   match. Ex: 'http://yahoo.com' or 'mailto:a@a.com'.\n\t * @return {Boolean} `true` if the scheme is a valid one, `false` otherwise.\n\t */\n\tisValidUriScheme : function( uriSchemeMatch ) {\n\t\tvar uriScheme = uriSchemeMatch.match( this.uriSchemeRegex )[ 0 ].toLowerCase();\n\n\t\treturn ( uriScheme !== 'javascript:' && uriScheme !== 'vbscript:' );\n\t},\n\n\n\t/**\n\t * Determines if a URL match does not have either:\n\t *\n\t * a) a full protocol (i.e. 'http://'), or\n\t * b) at least one dot ('.') in the domain name (for a non-full-protocol\n\t *    match).\n\t *\n\t * Either situation is considered an invalid URL (ex: 'git:d' does not have\n\t * either the '://' part, or at least one dot in the domain name. If the\n\t * match was 'git:abc.com', we would consider this valid.)\n\t *\n\t * @private\n\t * @param {String} urlMatch The matched URL, if there was one. Will be an\n\t *   empty string if the match is not a URL match.\n\t * @param {String} protocolUrlMatch The match URL string for a protocol\n\t *   match. Ex: 'http://yahoo.com'. This is used to match something like\n\t *   'http://localhost', where we won't double check that the domain name\n\t *   has at least one '.' in it.\n\t * @return {Boolean} `true` if the URL match does not have a full protocol,\n\t *   or at least one dot ('.') in a non-full-protocol match.\n\t */\n\turlMatchDoesNotHaveProtocolOrDot : function( urlMatch, protocolUrlMatch ) {\n\t\treturn ( !!urlMatch && ( !protocolUrlMatch || !this.hasFullProtocolRegex.test( protocolUrlMatch ) ) && urlMatch.indexOf( '.' ) === -1 );\n\t},\n\n\n\t/**\n\t * Determines if a URL match does not have at least one word character after\n\t * the protocol (i.e. in the domain name).\n\t *\n\t * At least one letter character must exist in the domain name after a\n\t * protocol match. Ex: skip over something like \"git:1.0\"\n\t *\n\t * @private\n\t * @param {String} urlMatch The matched URL, if there was one. Will be an\n\t *   empty string if the match is not a URL match.\n\t * @param {String} protocolUrlMatch The match URL string for a protocol\n\t *   match. Ex: 'http://yahoo.com'. This is used to know whether or not we\n\t *   have a protocol in the URL string, in order to check for a word\n\t *   character after the protocol separator (':').\n\t * @return {Boolean} `true` if the URL match does not have at least one word\n\t *   character in it after the protocol, `false` otherwise.\n\t */\n\turlMatchDoesNotHaveAtLeastOneWordChar : function( urlMatch, protocolUrlMatch ) {\n\t\tif( urlMatch && protocolUrlMatch ) {\n\t\t\treturn !this.hasWordCharAfterProtocolRegex.test( urlMatch );\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n};\n\n/*global Autolinker */\n/**\n * A truncation feature where the ellipsis will be placed at the end of the URL.\n *\n * @param {String} anchorText\n * @param {Number} truncateLen The maximum length of the truncated output URL string.\n * @param {String} ellipsisChars The characters to place within the url, e.g. \"..\".\n * @return {String} The truncated URL.\n */\nAutolinker.truncate.TruncateEnd = function(anchorText, truncateLen, ellipsisChars){\n\treturn Autolinker.Util.ellipsis( anchorText, truncateLen, ellipsisChars );\n};\n\n/*global Autolinker */\n/**\n * Date: 2015-10-05\n * Author: Kasper Søfren <soefritz@gmail.com> (https://github.com/kafoso)\n *\n * A truncation feature, where the ellipsis will be placed in the dead-center of the URL.\n *\n * @param {String} url             A URL.\n * @param {Number} truncateLen     The maximum length of the truncated output URL string.\n * @param {String} ellipsisChars   The characters to place within the url, e.g. \"..\".\n * @return {String} The truncated URL.\n */\nAutolinker.truncate.TruncateMiddle = function(url, truncateLen, ellipsisChars){\n  if (url.length <= truncateLen) {\n    return url;\n  }\n\n  var ellipsisLengthBeforeParsing;\n  var ellipsisLength;\n\n  if(ellipsisChars == null) {\n    ellipsisChars = '&hellip;';\n    ellipsisLengthBeforeParsing = 8;\n    ellipsisLength = 3;\n  } else {\n    ellipsisLengthBeforeParsing = ellipsisChars.length;\n    ellipsisLength = ellipsisChars.length;\n  }\n\n  var availableLength = truncateLen - ellipsisLength;\n  var end = \"\";\n  if (availableLength > 0) {\n    end = url.substr((-1)*Math.floor(availableLength/2));\n  }\n  return (url.substr(0, Math.ceil(availableLength/2)) + ellipsisChars + end).substr(0, availableLength + ellipsisLengthBeforeParsing);\n};\n\n/*global Autolinker */\n/**\n * Date: 2015-10-05\n * Author: Kasper Søfren <soefritz@gmail.com> (https://github.com/kafoso)\n *\n * A truncation feature, where the ellipsis will be placed at a section within\n * the URL making it still somewhat human readable.\n *\n * @param {String} url\t\t\t\t\t\t A URL.\n * @param {Number} truncateLen\t\t The maximum length of the truncated output URL string.\n * @param {String} ellipsisChars\t The characters to place within the url, e.g. \"...\".\n * @return {String} The truncated URL.\n */\nAutolinker.truncate.TruncateSmart = function(url, truncateLen, ellipsisChars){\n\n\tvar ellipsisLengthBeforeParsing;\n\tvar ellipsisLength;\n\n\tif(ellipsisChars == null) {\n\t\tellipsisChars = '&hellip;';\n\t\tellipsisLength = 3;\n\t\tellipsisLengthBeforeParsing = 8;\n\t} else {\n\t\tellipsisLength = ellipsisChars.length;\n\t\tellipsisLengthBeforeParsing = ellipsisChars.length;\n\t}\n\n\tvar parse_url = function(url){ // Functionality inspired by PHP function of same name\n\t\tvar urlObj = {};\n\t\tvar urlSub = url;\n\t\tvar match = urlSub.match(/^([a-z]+):\\/\\//i);\n\t\tif (match) {\n\t\t\turlObj.scheme = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^(.*?)(?=(\\?|#|\\/|$))/i);\n\t\tif (match) {\n\t\t\turlObj.host = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^\\/(.*?)(?=(\\?|#|$))/i);\n\t\tif (match) {\n\t\t\turlObj.path = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^\\?(.*?)(?=(#|$))/i);\n\t\tif (match) {\n\t\t\turlObj.query = match[1];\n\t\t\turlSub = urlSub.substr(match[0].length);\n\t\t}\n\t\tmatch = urlSub.match(/^#(.*?)$/i);\n\t\tif (match) {\n\t\t\turlObj.fragment = match[1];\n\t\t\t//urlSub = urlSub.substr(match[0].length);  -- not used. Uncomment if adding another block.\n\t\t}\n\t\treturn urlObj;\n\t};\n\n\tvar buildUrl = function(urlObj){\n\t\tvar url = \"\";\n\t\tif (urlObj.scheme && urlObj.host) {\n\t\t\turl += urlObj.scheme + \"://\";\n\t\t}\n\t\tif (urlObj.host) {\n\t\t\turl += urlObj.host;\n\t\t}\n\t\tif (urlObj.path) {\n\t\t\turl += \"/\" + urlObj.path;\n\t\t}\n\t\tif (urlObj.query) {\n\t\t\turl += \"?\" + urlObj.query;\n\t\t}\n\t\tif (urlObj.fragment) {\n\t\t\turl += \"#\" + urlObj.fragment;\n\t\t}\n\t\treturn url;\n\t};\n\n\tvar buildSegment = function(segment, remainingAvailableLength){\n\t\tvar remainingAvailableLengthHalf = remainingAvailableLength/ 2,\n\t\t\t\tstartOffset = Math.ceil(remainingAvailableLengthHalf),\n\t\t\t\tendOffset = (-1)*Math.floor(remainingAvailableLengthHalf),\n\t\t\t\tend = \"\";\n\t\tif (endOffset < 0) {\n\t\t\tend = segment.substr(endOffset);\n\t\t}\n\t\treturn segment.substr(0, startOffset) + ellipsisChars + end;\n\t};\n\tif (url.length <= truncateLen) {\n\t\treturn url;\n\t}\n\tvar availableLength = truncateLen - ellipsisLength;\n\tvar urlObj = parse_url(url);\n\t// Clean up the URL\n\tif (urlObj.query) {\n\t\tvar matchQuery = urlObj.query.match(/^(.*?)(?=(\\?|\\#))(.*?)$/i);\n\t\tif (matchQuery) {\n\t\t\t// Malformed URL; two or more \"?\". Removed any content behind the 2nd.\n\t\t\turlObj.query = urlObj.query.substr(0, matchQuery[1].length);\n\t\t\turl = buildUrl(urlObj);\n\t\t}\n\t}\n\tif (url.length <= truncateLen) {\n\t\treturn url;\n\t}\n\tif (urlObj.host) {\n\t\turlObj.host = urlObj.host.replace(/^www\\./, \"\");\n\t\turl = buildUrl(urlObj);\n\t}\n\tif (url.length <= truncateLen) {\n\t\treturn url;\n\t}\n\t// Process and build the URL\n\tvar str = \"\";\n\tif (urlObj.host) {\n\t\tstr += urlObj.host;\n\t}\n\tif (str.length >= availableLength) {\n\t\tif (urlObj.host.length == truncateLen) {\n\t\t\treturn (urlObj.host.substr(0, (truncateLen - ellipsisLength)) + ellipsisChars).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t\t}\n\t\treturn buildSegment(str, availableLength).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t}\n\tvar pathAndQuery = \"\";\n\tif (urlObj.path) {\n\t\tpathAndQuery += \"/\" + urlObj.path;\n\t}\n\tif (urlObj.query) {\n\t\tpathAndQuery += \"?\" + urlObj.query;\n\t}\n\tif (pathAndQuery) {\n\t\tif ((str+pathAndQuery).length >= availableLength) {\n\t\t\tif ((str+pathAndQuery).length == truncateLen) {\n\t\t\t\treturn (str + pathAndQuery).substr(0, truncateLen);\n\t\t\t}\n\t\t\tvar remainingAvailableLength = availableLength - str.length;\n\t\t\treturn (str + buildSegment(pathAndQuery, remainingAvailableLength)).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t\t} else {\n\t\t\tstr += pathAndQuery;\n\t\t}\n\t}\n\tif (urlObj.fragment) {\n\t\tvar fragment = \"#\"+urlObj.fragment;\n\t\tif ((str+fragment).length >= availableLength) {\n\t\t\tif ((str+fragment).length == truncateLen) {\n\t\t\t\treturn (str + fragment).substr(0, truncateLen);\n\t\t\t}\n\t\t\tvar remainingAvailableLength2 = availableLength - str.length;\n\t\t\treturn (str + buildSegment(fragment, remainingAvailableLength2)).substr(0, availableLength + ellipsisLengthBeforeParsing);\n\t\t} else {\n\t\t\tstr += fragment;\n\t\t}\n\t}\n\tif (urlObj.scheme && urlObj.host) {\n\t\tvar scheme = urlObj.scheme + \"://\";\n\t\tif ((str+scheme).length < availableLength) {\n\t\t\treturn (scheme + str).substr(0, truncateLen);\n\t\t}\n\t}\n\tif (str.length <= truncateLen) {\n\t\treturn str;\n\t}\n\tvar end = \"\";\n\tif (availableLength > 0) {\n\t\tend = str.substr((-1)*Math.floor(availableLength/2));\n\t}\n\treturn (str.substr(0, Math.ceil(availableLength/2)) + ellipsisChars + end).substr(0, availableLength + ellipsisLengthBeforeParsing);\n};\n\nreturn Autolinker;\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/autolinker/dist/Autolinker.js\n// module id = 37\n// module chunks = 0","'use strict';\nmodule.exports = function (str) {\n\tvar tail = str.length;\n\n\twhile (/[\\s\\uFEFF\\u00A0]/.test(str[tail - 1])) {\n\t\ttail--;\n\t}\n\n\treturn str.slice(0, tail);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/trim-right/index.js\n// module id = 38\n// module chunks = 0","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: UserPosting.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport PostingLayout from './PostingLayout';\r\nimport {prefixNS} from '../helpers';\r\nimport PostingAuthor from './PostingAuthor';\r\nimport {Comment, Share, AssignTopics} from './Actions';\r\nimport ActivityDate from './ActivityDate';\r\nimport renderTopics from './Topics';\r\nimport ActivityText from './ActivityText';\r\nimport FileViewer from './FileViewer';\r\nimport {classNames, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\n\r\nexport default class UserPosting extends React.Component {\r\n    render() {\r\n        const {\r\n            posting, onComment,\r\n            assignTopics, className, ...others\r\n        } = this.props;\r\n        const topics = renderTopics(posting);\r\n        return (\r\n            <PostingLayout\r\n                {...others}\r\n                posting={posting}\r\n                className={classNames(className, prefixNS('user-posting'))}>\r\n                <PostingLayout.Title>\r\n                    <PostingAuthor posting={posting}/>\r\n                </PostingLayout.Title>\r\n                <PostingLayout.Nav>\r\n                    <ActivityDate activityEntry={posting} className=\"text-muted\"/>\r\n                    {topics}\r\n                    <AssignTopics activityEntry={posting}\r\n                                  assignTopics={assignTopics}/>\r\n                </PostingLayout.Nav>\r\n                <ActivityText activityEntry={posting}/>\r\n                <FileViewer activityEntry={posting}/>\r\n                <PostingLayout.Footer activityEntry={posting}>\r\n                    <Comment onClick={onComment}/>\r\n                    <Share activityEntry={posting}/>\r\n                </PostingLayout.Footer>\r\n                {this.props.children}\r\n            </PostingLayout>\r\n        );\r\n    }\r\n}\r\n\r\nUserPosting.propTypes = {\r\n    posting: ImmutablePropTypes.map.isRequired,\r\n    onComment: PropTypes.func,\r\n    assignTopics: PropTypes.func,\r\n    className: PropTypes.string\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/UserPosting.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Comments.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {formatStr} from '../i18n';\r\nimport {prefixNS} from '../helpers';\r\nimport Comment from './Comment';\r\nimport {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport {Button} from 'cs-web-components-base';\r\n\r\nconst INITCOMMENTSCOUNT = 3;\r\nconst findComment = (comments, id) => comments.find(\r\n    (comment) => comment.get('@id') === id);\r\n\r\nexport const findCommentToPosting = (posting, cID) =>\r\n    findComment(posting.getIn(['comments', 'comments']), cID);\r\n\r\nexport default class Comments extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showAll: false\r\n        };\r\n        this.showMore = this.showMore.bind(this);\r\n        this.scrollToTarget = this.scrollToTarget.bind(this);\r\n        this._comments = {};\r\n    }\r\n\r\n    showMore() {\r\n        this.setState({\r\n            showAll: true\r\n        });\r\n    }\r\n\r\n    scrollToTarget(comment) {\r\n        const comp = this._comments[comment.get('cdb_object_id')];\r\n        if (comp) {\r\n            const el = ReactDOM.findDOMNode(comp);  // eslint-disable-line react/no-find-dom-node\r\n            el.scrollIntoView(true);\r\n        } else if (!this.state.showAll) {\r\n            this.setState({showAll: true}, () => this.scrollToTarget(comment));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {posting, onComment, instanceName} = this.props;\r\n        const comments = posting.getIn(['comments', 'comments']);\r\n        const commentsAmount = comments.count() ? comments.count() : 0;\r\n        const showAll = commentsAmount <= INITCOMMENTSCOUNT || this.state.showAll ?\r\n            null : (\r\n            <Button.TextButton\r\n                className={prefixNS('show-all-comments')}\r\n                buttonStyle=\"link\"\r\n                onClick={this.showMore}\r\n                label={formatStr('show-all-comments', {commentsAmount})} />\r\n        );\r\n        const showing = this.state.showAll ?\r\n            comments : comments.takeLast(INITCOMMENTSCOUNT);\r\n        return (\r\n            <div className={prefixNS('comments')}>\r\n                {showAll}\r\n                {showing.map(comment =>\r\n                    <Comment key={comment.get('cdb_object_id')}\r\n                             instanceName={instanceName}\r\n                             posting={posting}\r\n                             comment={comment}\r\n                             replyTo={findComment(comments, comment.get('reply_to'))}\r\n                             onComment={onComment}\r\n                             ref={(c) => this._comments[comment.get('cdb_object_id')] = c}\r\n                             scrollToTarget={this.scrollToTarget}/>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nComments.propTypes = {\r\n    instanceName: PropTypes.string.isRequired,\r\n    posting: ImmutablePropTypes.map.isRequired,\r\n    onComment: PropTypes.func\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Comments.jsx","module.exports = __WEBPACK_EXTERNAL_MODULE_41__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 41\n// module chunks = 0","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Comment.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport {Popover, Overlay} from 'react-bootstrap';\r\nimport {formatStr} from '../i18n';\r\nimport {prefixNS} from '../helpers';\r\nimport PostingLayout from './PostingLayout';\r\nimport PostingAuthor from './PostingAuthor';\r\nimport ActivityText from './ActivityText';\r\nimport {Comment as CommentAction, Share} from './Actions';\r\nimport {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport ActivityDate from './ActivityDate';\r\nimport FileViewer from './FileViewer';\r\n\r\nclass ReplyToTitle extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showReplyTo: false\r\n        };\r\n        this.showTarget = this.showTarget.bind(this);\r\n        this.hideTarget = this.hideTarget.bind(this);\r\n        this.navigateToTarget = this.navigateToTarget.bind(this);\r\n        this._replyTarget = null;\r\n    }\r\n\r\n    showTarget() {\r\n        this.setState({\r\n            showReplyTo: true\r\n        });\r\n    }\r\n\r\n    hideTarget() {\r\n        this.setState({\r\n            showReplyTo: false\r\n        });\r\n    }\r\n\r\n    navigateToTarget(event) {\r\n        event.preventDefault();\r\n        const {replyTo, scrollToTarget} = this.props;\r\n        if (scrollToTarget) {\r\n            scrollToTarget(replyTo);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {replyTo, comment} = this.props;\r\n        return (\r\n            <div className={prefixNS('comment-reply-to')}>\r\n                <PostingAuthor posting={comment}/>\r\n                <span>:</span>\r\n                <span className={prefixNS('comment-reply-to-label')}>{formatStr('answer-to')}</span>\r\n                <a onMouseOver={this.showTarget}\r\n                   onMouseOut={this.hideTarget}\r\n                   ref={c => this._replyTarget = c}\r\n                   href=\"#\"\r\n                   onClick={this.navigateToTarget}>\r\n                    {replyTo.getIn(['author', 'name'])}\r\n                </a>\r\n                <Overlay placement=\"top\"\r\n                         show={this.state.showReplyTo}\r\n                         target={this._replyTarget}>\r\n                    <Popover id={`replyToText-${replyTo.get('cdb_object_id')}`}>\r\n                        <ActivityText activityEntry={replyTo} />\r\n                    </Popover>\r\n                </Overlay>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nReplyToTitle.propTypes = {\r\n    comment: ImmutablePropTypes.map.isRequired,\r\n    replyTo: ImmutablePropTypes.map.isRequired,\r\n    scrollToTarget: PropTypes.func\r\n};\r\n\r\nexport default class Comment extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.onComment = this.onComment.bind(this);\r\n    }\r\n\r\n    onComment() {\r\n        this.props.onComment(this.props.comment);\r\n    }\r\n\r\n    render() {\r\n        const {posting, comment, replyTo, scrollToTarget, ...others} = this.props;\r\n        delete others.onComment;\r\n        return (\r\n            <PostingLayout {...others}\r\n                           className={prefixNS('comment')}\r\n                           posting={comment}>\r\n                <PostingLayout.Title>\r\n                    {replyTo === undefined ?\r\n                        <PostingAuthor posting={comment} /> :\r\n                        <ReplyToTitle comment={comment}\r\n                                      replyTo={replyTo}\r\n                                      scrollToTarget={scrollToTarget} />\r\n                    }\r\n                </PostingLayout.Title>\r\n                <PostingLayout.Nav>\r\n                    <ActivityDate activityEntry={comment} className=\"text-muted\" />\r\n                </PostingLayout.Nav>\r\n                <ActivityText activityEntry={comment} />\r\n                <FileViewer activityEntry={comment}\r\n                            reloadEntry={false}\r\n                            onSubmit={this.onUpload}/>\r\n                <PostingLayout.Footer activityEntry={comment}>\r\n                    <CommentAction onClick={this.onComment}/>\r\n                    <Share activityEntry={posting}/>\r\n                </PostingLayout.Footer>\r\n            </PostingLayout>\r\n      );\r\n    }\r\n}\r\n\r\nComment.propTypes = {\r\n    posting: ImmutablePropTypes.map.isRequired,\r\n    comment: ImmutablePropTypes.map.isRequired,\r\n    replyTo: ImmutablePropTypes.map,\r\n    onComment: PropTypes.func,\r\n    scrollToTarget: PropTypes.func\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Comment.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: Thread.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport PageLayout from './PageLayout';\r\nimport Posting from '../components/Posting';\r\nimport {fetchPosting} from '../actions/actions';\r\nimport {connect, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\nimport {STANDALONE_INSTANCE} from '../constants';\r\nimport {getReferencedPostings, getPostingURL, prefixNS} from '../helpers';\r\n\r\nexport class PostingLoader extends React.Component {\r\n    fetchPosting(props) {\r\n        const postingID = props.match.params.postingID;\r\n        if (postingID) {\r\n            props.fetchPosting(postingID);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchPosting(this.props);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.match.params.postingID !== this.props.match.params.postingID) {\r\n            this.fetchPosting(nextProps);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {posting, location} = this.props;\r\n        if (!posting) {\r\n            return null;\r\n        }\r\n        return (\r\n            <PageLayout location={location} noSidebar={true}>\r\n                <div className={prefixNS('thread')}>\r\n                    <Posting posting={posting} instanceName={STANDALONE_INSTANCE}/>\r\n                </div>\r\n            </PageLayout>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n    const postingID = ownProps.match.params.postingID;\r\n    const posting = getReferencedPostings(state, getPostingURL(postingID));\r\n    return {posting};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        fetchPosting: (postingID) => {\r\n            const url = getPostingURL(postingID);\r\n            dispatch(fetchPosting(url));\r\n        }\r\n    };\r\n}\r\n\r\nPostingLoader.propTypes = {\r\n    match: PropTypes.object,\r\n    location: PropTypes.object,\r\n    fetchPosting: PropTypes.func,\r\n    posting: ImmutablePropTypes.map\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PostingLoader);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/Thread.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: ObjectActivities.jsx 162376 2017-07-28 13:55:03Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport Immutable from 'immutable';\r\nimport ObjectPostings from './ObjectPostings';\r\nimport {SystemPostingFilter} from './Actions';\r\nimport {prefixNS} from '../helpers';\r\nimport {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\n\r\nclass ObjectActivities extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            filter: Immutable.Map()\r\n        };\r\n        this.toggleSystemPostings = this.toggleSystemPostings.bind(this);\r\n    }\r\n\r\n    toggleSystemPostings() {\r\n        const prev = this.state.filter.get('systemposting');\r\n        this.setState({\r\n            filter: this.state.filter.set(\r\n                'systemposting',\r\n                SystemPostingFilter.toggleFilterState(prev))\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {instanceName, contextObject} = this.props;\r\n        return (\r\n            <div className={prefixNS('object-activities')}>\r\n                <SystemPostingFilter\r\n                    filterState={this.state.filter.get('systemposting')}\r\n                    onChange={this.toggleSystemPostings}/>\r\n                <ObjectPostings instanceName={instanceName}\r\n                                contextObject={contextObject}\r\n                                filter={this.state.filter}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nObjectActivities.propTypes = {\r\n    instanceName: PropTypes.string.isRequired,\r\n    contextObject: ImmutablePropTypes.map\r\n};\r\n\r\nexport default ObjectActivities;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ObjectActivities.jsx","/*\r\n * Copyright (C) 2016 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: ObjectActivitiesBlock.jsx 162449 2017-07-31 13:08:43Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport Immutable from 'immutable';\r\nimport ObjectPostings from './ObjectPostings';\r\nimport {ContentBlock} from 'cs-web-components-base';\r\nimport {prefixNS} from '../helpers';\r\nimport {formatStr} from '../i18n';\r\nimport {SystemPostingFilter} from './Actions';\r\nimport {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';\r\n\r\nexport default class ObjectPostingsBlock extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            filter: Immutable.Map()\r\n        };\r\n        this.toggleSystemPostings = this.toggleSystemPostings.bind(this);\r\n    }\r\n\r\n    toggleSystemPostings() {\r\n        const prev = this.state.filter.get('systemposting');\r\n        // workaround to https://github.com/facebook/react/issues/3005\r\n        // event.preventDefault() in ContentBlock.Header also prevents visually\r\n        // updating the checkbox, so use setTimeout to bypass that.\r\n        window.setTimeout((newState) => {\r\n            this.setState(newState);\r\n        }, 0, {\r\n            filter: this.state.filter.set(\r\n                'systemposting',\r\n                SystemPostingFilter.toggleFilterState(prev))\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {instanceName, contextObject, ...others} = this.props;\r\n        return (\r\n            <ContentBlock title={formatStr('activities')}\r\n                          {...others}\r\n                          className={prefixNS('object-activities-block')}>\r\n                <ContentBlock.Header>\r\n                    <SystemPostingFilter\r\n                        filterState={this.state.filter.get('systemposting')}\r\n                        onChange={this.toggleSystemPostings}/>\r\n                </ContentBlock.Header>\r\n                <ContentBlock.Body>\r\n                    <ObjectPostings instanceName={instanceName}\r\n                                    contextObject={contextObject}\r\n                                    filter={this.state.filter}/>\r\n                </ContentBlock.Body>\r\n            </ContentBlock>\r\n        );\r\n    }\r\n}\r\n\r\nObjectPostingsBlock.propTypes = {\r\n    instanceName: PropTypes.string.isRequired,\r\n    contextObject: ImmutablePropTypes.map\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ObjectActivitiesBlock.jsx","/*\r\n * Copyright (C) 2017 CONTACT Software GmbH\r\n * All rights reserved.\r\n * http://www.contact-software.com\r\n *\r\n * Revision \"$Id: DashboardWidget.jsx 168124 2017-11-09 11:30:40Z yzh $\"\r\n */\r\n\r\nimport React from 'react';\r\nimport Immutable from 'immutable';\r\nimport {ImmutablePropTypes} from 'cs-web-components-externals';\r\nimport {getAppSetup} from 'cs-web-components-base';\r\nimport Dashboard from 'cs-web-dashboard';\r\nimport {formatStr} from '../i18n.js';\r\nimport PostingList from '../components/PostingList';\r\nimport {prefixNS} from '../helpers';\r\n\r\nlet counter = 0;\r\n\r\nexport default class DashboardWidget extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        counter++;\r\n        this.instanceName = `as_widget_instance${counter}`;\r\n        this.dataURL = getAppSetup().getIn(['cs-activitystream-web', 'dataURL']);\r\n        this.state = {\r\n            postingFilter: Immutable.fromJS({\r\n                systemposting: 'off'\r\n            })\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Dashboard.DashboardItem\r\n                    item={this.props.item}\r\n                    title={formatStr('activities')}>\r\n                <PostingList\r\n                    className={prefixNS('dashboard-widget')}\r\n                    instanceName={this.instanceName}\r\n                    initDataURL={this.dataURL}\r\n                    filter={this.state.postingFilter} />\r\n            </Dashboard.DashboardItem>\r\n        );\r\n    }\r\n\r\n\r\n}\r\nDashboardWidget.propTypes = {\r\n    item: ImmutablePropTypes.map.isRequired\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dashboard_widget/DashboardWidget.jsx","module.exports = __WEBPACK_EXTERNAL_MODULE_47__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cs-web-dashboard\"\n// module id = 47\n// module chunks = 0"],"sourceRoot":""}