/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: PersonPicture.jsx 172891 2018-02-05 16:14:08Z vov $"
 */

import React from 'react';
import {Navigation, getIcon, Thumbnail} from 'cs-web-components-base';
import {ImmutablePropTypes} from 'cs-web-components-externals';

export default function PersonPicture(props) {
    const {person} = props;
    const link = person.get('system:ui_link');
    const picture = person.getIn(['relship:files', 'targets']).find(
        f => f.get('cdbf_primary') === '1'
    );
    const pictureSrc = picture ? picture.get('@id') : null;
    const pictureComp = (
      <Thumbnail imgSrc={pictureSrc}
                 fallbackSrc={getIcon('csweb_person_fallback')}
                 size="md"/>
    );
    if (link) {
        return (
            <Navigation.Link to={link} className="cs-activitystream-web-picture">
                {pictureComp}
            </Navigation.Link>);
    }
    return pictureComp;
}

PersonPicture.propTypes = {
    person: ImmutablePropTypes.map.isRequired
};
