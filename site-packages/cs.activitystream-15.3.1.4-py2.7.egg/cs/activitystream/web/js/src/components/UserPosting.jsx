/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: UserPosting.jsx 162376 2017-07-28 13:55:03Z yzh $"
 */

import React from 'react';
import PostingLayout from './PostingLayout';
import {prefixNS} from '../helpers';
import PostingAuthor from './PostingAuthor';
import {Comment, Share, AssignTopics} from './Actions';
import ActivityDate from './ActivityDate';
import renderTopics from './Topics';
import ActivityText from './ActivityText';
import FileViewer from './FileViewer';
import {classNames, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';

export default class UserPosting extends React.Component {
    render() {
        const {
            posting, onComment,
            assignTopics, className, ...others
        } = this.props;
        const topics = renderTopics(posting);
        return (
            <PostingLayout
                {...others}
                posting={posting}
                className={classNames(className, prefixNS('user-posting'))}>
                <PostingLayout.Title>
                    <PostingAuthor posting={posting}/>
                </PostingLayout.Title>
                <PostingLayout.Nav>
                    <ActivityDate activityEntry={posting} className="text-muted"/>
                    {topics}
                    <AssignTopics activityEntry={posting}
                                  assignTopics={assignTopics}/>
                </PostingLayout.Nav>
                <ActivityText activityEntry={posting}/>
                <FileViewer activityEntry={posting}/>
                <PostingLayout.Footer activityEntry={posting}>
                    <Comment onClick={onComment}/>
                    <Share activityEntry={posting}/>
                </PostingLayout.Footer>
                {this.props.children}
            </PostingLayout>
        );
    }
}

UserPosting.propTypes = {
    posting: ImmutablePropTypes.map.isRequired,
    onComment: PropTypes.func,
    assignTopics: PropTypes.func,
    className: PropTypes.string
};
