/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: Topics.jsx 166061 2017-09-28 13:27:35Z yzh $"
 */

import React from 'react';
import {SVGIconAndLink} from 'cs-web-components-base';
import {classNames, ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';
import {prefixNS} from '../helpers';

export function Topic(props) {
    const {topic} = props;
    const link = topic.get('object_ui_link');
    const icon = topic.get('object_icon');
    const descr = topic.get('description');
    const clsNames = classNames(
        prefixNS('posting-topics-item'), props.className);
    return (
        <div className={clsNames} title={descr}>
            <SVGIconAndLink label={descr}
                            src={icon}
                            to={link} />
        </div>
    );
}

Topic.propTypes = {
    topic: ImmutablePropTypes.map.isRequired,
    className: PropTypes.string
};

export default function renderTopics(posting) {
    const topics = posting.getIn(['topics', 'topics']);
    if (!topics) {
        return null;
    }
    return topics.map((topic, idx) =>
        <Topic topic={topic}
               key={topic.get('cdb_object_id')}
               className={classNames({[prefixNS('main-topic')]: idx === 0})}/>
    );
}
