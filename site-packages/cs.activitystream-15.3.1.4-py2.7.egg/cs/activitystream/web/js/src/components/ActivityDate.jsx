/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: ActivityDate.jsx 150838 2016-12-13 15:29:09Z yzh $"
 */

import React from 'react';
import {Navigation} from 'cs-web-components-base';
import {formatDate, getToLink} from '../helpers';
import {ImmutablePropTypes} from 'cs-web-components-externals';

export default function ActivityDate(props) {
    const {activityEntry} = props;
    const calendar = formatDate(activityEntry.get('datetime'));
    const uiLink = activityEntry.get('system:ui_link');
    if (uiLink) {
        const toLink = getToLink(uiLink);
        const link = toLink && (uiLink !== toLink) ?
            {pathname: toLink} : uiLink;
        return (
            <Navigation.Link to={link} className="text-muted">
                {calendar}
            </Navigation.Link>);
    }
    return (
        <span className="text-muted">{calendar}</span>
    );
}

ActivityDate.propTypes = {
    activityEntry: ImmutablePropTypes.map.isRequired
};
