/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: ReferenceObject.jsx 174199 2018-03-08 08:59:24Z vov $"
 */

import React from 'react';
import {SVGIconAndLink, Button} from 'cs-web-components-base';
import {ImmutablePropTypes, PropTypes} from 'cs-web-components-externals';
import {prefixNS} from '../helpers';
import {formatStr} from '../i18n';

export default class ReferenceObject extends React.PureComponent {
    constructor(props) {
        super(props);
        this.onDelete = this.onDelete.bind(this);
    }

    onDelete() {
        this.props.onDelete && this.props.onDelete(this.props.referenceObject);
    }

    render() {
        const {referenceObject, onDelete} = this.props;
        return (
            <div className={prefixNS('reference-object')}
                title={referenceObject.get('description')}>
                {onDelete ? (
                    <Button.IconButton
                        buttonStyle="danger"
                        size="sm"
                        iconName="csweb_cancel"
                        onClick={this.onDelete}
                        className={prefixNS('reference-object-delete')}
                        title={formatStr('delete')} />
                ) : null}
                <SVGIconAndLink
                    src={referenceObject.get('object_icon')}
                    to={referenceObject.get('object_ui_link')}
                    label={referenceObject.get('description')}/>
            </div>
        );
    }
}

ReferenceObject.propTypes = {
    referenceObject: ImmutablePropTypes.map.isRequired,
    onDelete: PropTypes.func
};
