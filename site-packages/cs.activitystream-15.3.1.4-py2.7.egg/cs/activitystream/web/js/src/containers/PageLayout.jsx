/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: PageLayout.jsx 162172 2017-07-26 08:22:43Z yzh $"
 */

import React from 'react';
import {prefixNS} from '../helpers';
import Sidebar from '../components/Sidebar';
import {classNames, PropTypes} from 'cs-web-components-externals';
import {PageFrame, parseQuery} from 'cs-web-components-base';

export default function PageLayout({location, noSidebar, children}) {
    const embedded = parseInt(parseQuery(location).embedded) === 1;
    const appCls = classNames(prefixNS('app'), {
        [prefixNS('embedded')]: embedded
    });
    const page = (
        <div className={appCls}>
            <div className={prefixNS('app-sidebar')}>
                {!noSidebar && !embedded ? (<Sidebar />) : null}
            </div>
            <div className={prefixNS('app-content')}>
                {children}
            </div>
        </div>
    );
    if (embedded) {
        return page;
    }
    return (
        <PageFrame.ApplicationFrame>
            {page}
        </PageFrame.ApplicationFrame>
    );
}

PageLayout.propTypes = {
    location: PropTypes.object,
    noSidebar: PropTypes.bool
};
