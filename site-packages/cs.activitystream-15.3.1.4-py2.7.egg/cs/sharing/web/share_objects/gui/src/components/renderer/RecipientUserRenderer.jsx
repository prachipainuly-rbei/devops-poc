/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: RecipientUserRenderer.jsx 162151 2017-07-25 13:52:57Z sla $"
 */

import React from 'react';
import {ImmutablePropTypes} from 'cs-web-components-externals';
import RecipientImage from './RecipientImage';
import * as constants from '../../constants';
import {prefixNS} from '../../helpers';

export default class RecipientUserRender extends React.Component {

    getUserPicture(user) {
        try {
            return (
                <RecipientImage
                    img_url={
                        user.get(constants.FILES).get(constants.TARGETS).get(0).get(constants.ID)
                } />
            );
        } catch (e) {
            return (
                <RecipientImage imgName={constants.USER_PIC_FALLBACK} />
            );
        }
    }

    render() {
        const recipient = this.props.item;
        return (
            <div className={prefixNS("recipients-user")}>
                {this.getUserPicture(recipient)}
                <ul className={prefixNS("recipients-recipient-data")}>
                    <li>
                        <strong>
                            {recipient.get('lastname')}, {recipient.get('firstname')}
                        </strong>
                    </li>

                    <li className={prefixNS("text-muted")}>{recipient.get('org_name')}</li>
                    <li className={prefixNS("text-muted app-separate-children")}>
                        {recipient.get('abt_nummer')} {recipient.get('beruf')}
                    </li>
                </ul>
            </div>
        );
    }
}

RecipientUserRender.propTypes = {
    item: ImmutablePropTypes.map
};
