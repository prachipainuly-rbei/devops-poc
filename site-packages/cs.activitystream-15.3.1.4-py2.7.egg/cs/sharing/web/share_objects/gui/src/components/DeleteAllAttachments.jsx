/*
 * Copyright (C) 2016 CONTACT Software GmbH
 * All rights reserved.
 * http://www.contact-software.com
 *
 * Revision "$Id: DeleteAllAttachments.jsx 174894 2018-03-22 14:27:29Z gwe $"
 */

import React from 'react';
import {IconButton} from 'cs-web-components-base';
import {connect, PropTypes} from 'cs-web-components-externals';
import {getAttachments} from '../reducers/sharing-store';
import {clearAttachments, setDirtyState} from '../actions/sharing-actions';
import {prefixNS} from '../helpers';
import {formatStr} from '../i18n';
import * as constants from '../constants';

class DeleteAllAttachmentsComponent extends React.Component {

    render() {
        const buttonDisabled = (this.props.attachments.length === 0);

        return (
            <IconButton disabled={buttonDisabled}
                buttonStyle="danger"
                onClick={() => {
                    this.props.clearAttachments();
                    this.props.setDirtyState(true);
                }}
                className={prefixNS("delete-all-attachments-button")}
                iconName="csweb_remove"
                title={formatStr(constants.CLEAR_ATTACHMENTS)} />
        );
    }
}

DeleteAllAttachmentsComponent.propTypes = {
    attachments: PropTypes.array,
    clearAttachments: PropTypes.func,
    setDirtyState: PropTypes.func
};

function mapStateToProps(state) {
    return {
        attachments: getAttachments(state),
    };
}

const actions = {clearAttachments, setDirtyState};
const DeleteAllAttachments = connect(mapStateToProps, actions)(DeleteAllAttachmentsComponent);
export default DeleteAllAttachments;
