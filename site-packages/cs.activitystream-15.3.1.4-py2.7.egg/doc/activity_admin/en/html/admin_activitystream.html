

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Activities &mdash; Activities</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Activities" href="index.html"/>
        <link rel="next" title="Share Objects" href="sharing_overview.html"/>
        <link rel="prev" title="Introduction" href="admin_activitystream_intro.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="/doc/en" class="icon fa-book">
            Documentation Portal
          </a>
        

        
          <a href="index.html" class="icon icon-home"> Activities
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="admin_activitystream_intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Activities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#themen-abonnieren">Subscribe Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#systembeitrag">System Posting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#anzeige-der-aktivitaten-als-registerkarte">Display of the Activities as tab</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kanale">Channels</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#tagliche-zusammenfassung-als-e-mail">Daily Activities as E-Mail</a></li>
<li class="toctree-l1"><a class="reference internal" href="sharing_overview.html">Share Objects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sharing_overview.html#operationsablauf">Operation Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="sharing_overview.html#groups">Recipient Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="sharing_overview.html#eingebettete-esearch">Embedded Enterprise-Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="sharing_overview.html#einrichtung-fur-eigene-klassen">Setup for Custom Classes</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Activities</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Activities</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/admin_activitystream.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="aktivitaten">
<span id="admin-activitystream"></span><h1>Activities<a class="headerlink" href="#aktivitaten" title="Permalink to this headline">¶</a></h1>
<div class="section" id="themen-abonnieren">
<h2>Subscribe Topics<a class="headerlink" href="#themen-abonnieren" title="Permalink to this headline">¶</a></h2>
<p><span class="guilabel">Is Activity Stream Channel</span></p>
<blockquote>
<div><p>Each object with a <code class="docutils literal"><span class="pre">cdb_object_id</span></code> can be a topic to which postings can be assigned. As an alternative to <em>Topic</em>, the term <em>Channel</em> is also used. In the global stream, users currently see postings only if they have subscribed to the corresponding topic. If this box is checked, the <code class="docutils literal"><span class="pre">CDB_SubscribeToChannel</span></code> or <code class="docutils literal"><span class="pre">CDB_UnsubscribeFromChannel</span></code> operations are automatically assigned to the class or removed.</p>
</div></blockquote>
</div>
<div class="section" id="systembeitrag">
<span id="cdbfunctions-cdbblog-system-postings"></span><h2>System Posting<a class="headerlink" href="#systembeitrag" title="Permalink to this headline">¶</a></h2>
<p>The system can automatically generate a system posting in the case of a new creation, modification or status change; this message then appears in <span class="guilabel">Activities</span>. System postings are generated in all active languages of the installation (see <span class="xref std std-ref">multilanguage-activate</span>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For performance reasons, parts of the code for creating system postings are executed by a separate service. The installation and operating manual describes how to activate this service, called <code class="docutils literal"><span class="pre">System</span> <span class="pre">Posting</span> <span class="pre">Queue</span></code>. The <code class="xref py py-class docutils literal"><span class="pre">cs.activitystream.activitylistener</span></code> has to be enabled for jobs to be generated for the queue. This is not automatically the case, for example, for pure PowerScript applications.</p>
</div>
<p>The base configuration is set in the class properties (see <span class="xref std std-ref">datadict-class-properties</span>).</p>
<p>The attributes concerning all actions in the Activity Stream are defined as follows:</p>
<div class="section" id="allgemeine-aktivitatenkonfiguration-in-der-klassendefinition">
<span id="cdb-class-activity-attributes"></span><h3>General Activities configuration in the class definition<a class="headerlink" href="#allgemeine-aktivitatenkonfiguration-in-der-klassendefinition" title="Permalink to this headline">¶</a></h3>
<p><span class="guilabel">Create System Postings</span></p>
<blockquote>
<div><p>In order for system postings to be created at all for objects of a class, this check box has to be selected. If it is selected, the setting also applies for derived classes. This is true regardless of whether or not the check box is selected there. If it is not selected, all other configurations have no impact on the Activity Stream.</p>
<p>System postings can only be created for classes with the <code class="docutils literal"><span class="pre">cdb_object_id</span></code> attribute. When classes are created or modified, the system checks whether this attribute exists. If the attribute is not present, it is added automatically. The class then usually has to be generated manually using the <span class="guilabel">Compile</span> function.</p>
</div></blockquote>
<p><span class="guilabel">Rule</span></p>
<blockquote>
<div><p>Here, an <span class="xref std std-ref">object rule</span> can be referenced, which limits the amount of objects for which a system posting is to be created. For example, you could specify that postings are to be created only for tasks of a certain category.</p>
<p>If a rule is specified, this rule has to be fulfilled in this class and in all derived classes, so that a posting is created. If a rule is defined in a derived class, it has to apply also for all rules defined in base classes of this class.</p>
</div></blockquote>
<p>The other attributes are described in the following chapters.</p>
</div>
<div class="section" id="generierung-von-beitragen-bei-der-anlage-von-objekten">
<span id="cdbfunctions-cdbblog-system-postings-create"></span><h3>Generation of postings when creating an object<a class="headerlink" href="#generierung-von-beitragen-bei-der-anlage-von-objekten" title="Permalink to this headline">¶</a></h3>
<p>If the basic requirements for generating system postings are satisfied (see <a class="reference internal" href="#cdb-class-activity-attributes"><span class="std std-ref">General Activities configuration in the class definition</span></a>), other settings can be used to determine whether a posting is to be generated when creating an object. The base configuration is set in the class properties (see <span class="xref std std-ref">datadict-class-properties</span>).</p>
<div class="section" id="aktivitatenkonfiguration-fur-anlage-eines-neuen-objekts">
<span id="cdb-class-activity-attributes-posting-on-create"></span><h4>Activities configuration for object creation<a class="headerlink" href="#aktivitatenkonfiguration-fur-anlage-eines-neuen-objekts" title="Permalink to this headline">¶</a></h4>
<p>The relevant attributes are defined as follows:</p>
<p><span class="guilabel">Generate System Postings on Object Creation</span></p>
<blockquote>
<div><p>If this check box is set, a posting is created when creating an object of the class. If it is selected, the setting also applies for derived classes. This is true regardless of whether or not the check box is selected there.</p>
</div></blockquote>
<p><span class="guilabel">Text</span></p>
<blockquote>
<div><p>An (error) message can be referenced here via a label. The text of the system posting is preset in this message. The evaluation is performed in the same way as for the configuration of <span class="xref std std-ref">object description</span> in the Data Dictionary, meaning that fixed elements and attribute values can be concatenated. If no text is configured, the message <code class="docutils literal"><span class="pre">activity_obj_created</span></code> is used and the object description configured in the Data Dictionary is used as a replacement.</p>
</div></blockquote>
<p>Channel for Creation Postings</p>
<blockquote>
<div><p>Sometimes users want to be notified about the creation of objects by means of the activities. In the case of objects not assigned to any topic, a channel can be created, for example, the <em>New Ideas</em> channel for idea management (see <a class="reference internal" href="#cdbblog-channel"><span class="std std-ref">Access rights for postings</span></a>). Then a user who wants to see new ideas in the global activities window can subscribe to this channel. If this channel is referenced in the field described here, a Creation System Posting is automatically assigned to the channel, regardless of implementing the PowerScript method <code class="docutils literal"><span class="pre">GetActivityStreamTopics</span></code>.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="generierung-von-beitragen-bei-anderungen">
<span id="activity-posting-on-update"></span><span id="cdbfunctions-cdbblog-system-postings-update"></span><span id="helpid-cdb-activity-posting-on-update"></span><h3>Generation of postings when there are changes<a class="headerlink" href="#generierung-von-beitragen-bei-anderungen" title="Permalink to this headline">¶</a></h3>
<p>If the basic requirements for generating system postings are satisfied (see <a class="reference internal" href="#cdb-class-activity-attributes"><span class="std std-ref">General Activities configuration in the class definition</span></a>), other settings can be used to determine whether a posting is to be generated when changing objects. The configuration is performed in the <span class="guilabel">Activities</span> tab of the attribute properties in the data dictionary (see <span class="xref std std-ref">cdb-classdef-attributes</span>).</p>
<div class="section" id="aktivitatenkonfiguration-fur-anderung">
<span id="cdb-class-activity-attributes-posting-on-update"></span><h4>Activities configuration for changing an object<a class="headerlink" href="#aktivitatenkonfiguration-fur-anderung" title="Permalink to this headline">¶</a></h4>
<p>These attributes are defined as follows:</p>
<p><span class="guilabel">Create System Posting on Change</span></p>
<blockquote>
<div><p>If this check box is set, a check is performed when changing an object to see if this attribute has been changed. If this is the case, a posting is generated.</p>
</div></blockquote>
<p><span class="guilabel">Text</span></p>
<blockquote>
<div><p>An (error) message can be referenced here via a label. The text of the system posting is preset in this message. The evaluation is performed in the same way as for the configuration of <span class="xref std std-ref">object description</span> in the Data Dictionary, meaning that fixed elements and attribute values can be concatenated. If a text is configured, a separate posting is generated with the text – i.e., if multiple attributes are changed and a text is configured for each of these attributes, multiple postings are also generated.</p>
<p>If no text is configured, the message <code class="docutils literal"><span class="pre">activity_obj_modified</span></code> is used. Here, all changed attributes are collected whose change caused a posting, and for which no special message is configured. The object description and the list of the changed attributes with their values are used as replacements for the message.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="generierung-von-beitragen-bei-statusanderung">
<span id="cdbfunctions-cdbblog-system-postings-wfstep"></span><h3>Generation of postings in the case of a status change<a class="headerlink" href="#generierung-von-beitragen-bei-statusanderung" title="Permalink to this headline">¶</a></h3>
<p>If the basic requirements for generating system postings are met (see <a class="reference internal" href="#cdb-class-activity-attributes"><span class="std std-ref">General Activities configuration in the class definition</span></a>), other settings can be used to define whether a posting is to be generated in the case of a status change. The settings are made when configuring the <span class="xref std std-ref">status definition</span>.</p>
<div class="section" id="aktivitatenkonfiguration-fur-statusanderung">
<span id="cdb-class-activity-attributes-posting-on-wfstep"></span><h4>Activities configuration for status change<a class="headerlink" href="#aktivitatenkonfiguration-fur-statusanderung" title="Permalink to this headline">¶</a></h4>
<p>These attributes are defined as follows:</p>
<p><span class="guilabel">Generate Posting on Interactive Status Change</span></p>
<blockquote>
<div><p>If this checkbox is selected, a posting is generated in the case of an interactive status change to this status.</p>
</div></blockquote>
<p><span class="guilabel">Generate Posting on Batch Status Change</span></p>
<blockquote>
<div><p>If this checkbox is selected, a posting is generated in the case of an automatic status change to this status. These are the status changes performed by the system, for example, by calling status changes within user exits.</p>
</div></blockquote>
<p><span class="guilabel">Text</span></p>
<blockquote>
<div><p>A message from the (error) message management system can be referenced here via a label. The text of the system posting is preset in this message. The evaluation is performed in the same way as for the configuration of <span class="xref std std-ref">object descriptions</span> in the Data Dictionary, meaning that fixed elements and attribute values can be concatenated.</p>
<p>If no text is configured, the message <code class="docutils literal"><span class="pre">activity_obj_wfstep</span></code> is used. The object description and the target state are used as replacements for the message.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="zuordnung-der-themen">
<h3>Assignment of the topics<a class="headerlink" href="#zuordnung-der-themen" title="Permalink to this headline">¶</a></h3>
<p>A posting can be assigned to multiple topics. For example, the posting that a new task was created can be assigned to the Activity of the assigned project and to the Activity of the task. The method <code class="docutils literal"><span class="pre">GetActivityStreamTopics</span></code> of the PowerScript class <code class="docutils literal"><span class="pre">cdb.objects.Object</span></code> is used for making assignments. For details, please refer to the PowerScript manual.</p>
</div>
<div class="section" id="zugriffsrechte-fur-beitrage">
<span id="cdbblog-channel"></span><span id="helpid-cdb-blog-channel"></span><h3>Access rights for postings<a class="headerlink" href="#zugriffsrechte-fur-beitrage" title="Permalink to this headline">¶</a></h3>
<p>By default, the read right for postings depends on the <code class="docutils literal"><span class="pre">read</span></code> right of the object to which the posting refers. In the kernel, this is mapped similarly to a relationship access profile, i.e., the right is not evaluated for a search via <code class="docutils literal"><span class="pre">CDB_Search</span></code>. The right is evaluated at the points where postings are usually displayed, i.e., in the Enterprise-Search or in the Activities.</p>
</div>
<div class="section" id="automatisches-loschen-von-beitragen">
<h3>Automatic deleting of postings<a class="headerlink" href="#automatisches-loschen-von-beitragen" title="Permalink to this headline">¶</a></h3>
<p>If an object is deleted, the postings assigned to this object are automatically deleted with it.</p>
</div>
</div>
<div class="section" id="anzeige-der-aktivitaten-als-registerkarte">
<h2>Display of the Activities as tab<a class="headerlink" href="#anzeige-der-aktivitaten-als-registerkarte" title="Permalink to this headline">¶</a></h2>
<p>You can use a <span class="xref std std-ref">cdb-gui-maskconfig-dlgitemtypes-sect-cdbelinkcontrol</span> to have the Activities displayed for a specific topic/channel. The system already has a preset mask containing just this control. This mask is called <code class="docutils literal"><span class="pre">cdb_elink_activitystream</span></code>. It can be used as a tab in a <span class="xref std std-ref">mask composition</span>. When creating an object and when searching, the eLink application remains inactive. Therefore, it is generally advisable either to define different mask compositions for the different actions or to hide the tab using the PowerScript function <code class="xref py py-func docutils literal"><span class="pre">disable_registers()</span></code>. This occurs in the <code class="xref py py-class docutils literal"><span class="pre">Channel</span></code> class, for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Channel</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="n">__maps_to__</span> <span class="o">=</span> <span class="s2">&quot;cdbblog_channel&quot;</span>
    <span class="n">__classname__</span> <span class="o">=</span> <span class="s2">&quot;cdbblog_channel&quot;</span>

    <span class="k">def</span> <span class="nf">_skip_activity_register</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">action</span> <span class="o">!=</span> <span class="s2">&quot;info&quot;</span> <span class="ow">and</span> <span class="n">ctx</span><span class="o">.</span><span class="n">action</span> <span class="o">!=</span> <span class="s2">&quot;modify&quot;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ctx</span><span class="o">.</span><span class="n">disable_registers</span><span class="p">([</span><span class="s2">&quot;cdb_elink_activitystream&quot;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c1"># Some context adaptors does not support disable_registers</span>
                <span class="k">pass</span>

    <span class="n">event_map</span> <span class="o">=</span> <span class="p">{(</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;pre_mask&quot;</span><span class="p">):</span> <span class="s2">&quot;_skip_activity_register&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="kanale">
<h2>Channels<a class="headerlink" href="#kanale" title="Permalink to this headline">¶</a></h2>
<p>For a posting to become visible to the user, there has to be a topic to which the posting is assigned. In many cases, this topic is an object, e.g., a project. In some cases, however, no suitable object exists. When this is the case, you can create a channel to which postings are assigned. An example of such a channel is the <em>New ideas</em> channel. As described in <a class="reference internal" href="#cdb-class-activity-attributes-posting-on-create"><span class="std std-ref">Activities configuration for object creation</span></a>, you can configure settings so that the system postings for creating an object are assigned to a channel. The configuration for channels can be accessed in the menu tree <span class="menuselection">Administration/Configuration ‣ Activities ‣ Channels</span>. By default only administrators are permitted to create new channels there.</p>
</div>
</div>
<div class="section" id="tagliche-zusammenfassung-als-e-mail">
<h1>Daily Activities as E-Mail<a class="headerlink" href="#tagliche-zusammenfassung-als-e-mail" title="Permalink to this headline">¶</a></h1>
<p>This is a user opt-in function which requires the service <code class="xref py py-obj docutils literal"><span class="pre">cs.activitystream.daily_mail_service.DailyMailService</span></code> to run. The service itself relies on the mail server configuration (usually found in <code class="xref py py-obj docutils literal"><span class="pre">$CADDOK_BASE/etc/site.conf</span></code>).</p>
<p>If the service is up and running, it will send e-mails once a day. The default starting time is 0am and can be modified by adding the parameter &#8220;&#8211;start&#8221; to the service, specifying a value like &#8220;20:15&#8221; (formatted &#8220;%H:%M&#8221;). Don&#8217;t forget to restart the service afterwards. Please note that such a change should be made during the weekend, as the service always looks at the postings and comments changed during the last 24 hours. If you change the service&#8217;s starting time, some objects may be reported as new twice, or not at all.</p>
<p>The e-mail contains the full text of all of yesterday&#8217;s postings and comments. If you want only excerpts of the text, you can modify the e-mail template.</p>
<p>The template can be found in <code class="xref py py-obj docutils literal"><span class="pre">chrome/activity_digest.html</span></code> in the module directory. To customize it, you should first copy it to your custom module and overwrite the class <code class="xref py py-obj docutils literal"><span class="pre">cs.activitystream.daily_mails.DailyMailer</span></code> to use your copy. You will have to specify the new directory the template can be found in, for example like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">cdb</span> <span class="kn">import</span> <span class="n">CADDOK</span>
<span class="kn">from</span> <span class="nn">cs.activitystream.daily_mails</span> <span class="kn">import</span> <span class="n">DailyMailer</span>

<span class="k">class</span> <span class="nc">CustomMailer</span><span class="p">(</span><span class="n">DailyMailer</span><span class="p">):</span>
    <span class="n">__notification_template_folder__</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CADDOK</span><span class="o">.</span><span class="n">BASE</span><span class="p">,</span> <span class="s2">&quot;email_templates&quot;</span><span class="p">)</span>
    <span class="n">__notification_template__</span> <span class="o">=</span> <span class="s2">&quot;activity_digest.html&quot;</span>
</pre></div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sharing_overview.html" class="btn btn-neutral float-right" title="Share Objects" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="admin_activitystream_intro.html" class="btn btn-neutral" title="Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Contact Software.
      Last updated on 04.06.2018.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'15.3.1.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>