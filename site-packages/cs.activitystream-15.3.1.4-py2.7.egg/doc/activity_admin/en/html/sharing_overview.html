

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Share Objects &mdash; Activities</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Activities" href="index.html"/>
        <link rel="prev" title="Activities" href="admin_activitystream.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="/doc/en" class="icon fa-book">
            Documentation Portal
          </a>
        

        
          <a href="index.html" class="icon icon-home"> Activities
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="admin_activitystream_intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin_activitystream.html">Activities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="admin_activitystream.html#themen-abonnieren">Subscribe Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_activitystream.html#systembeitrag">System Posting</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_activitystream.html#anzeige-der-aktivitaten-als-registerkarte">Display of the Activities as tab</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_activitystream.html#kanale">Channels</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="admin_activitystream.html#tagliche-zusammenfassung-als-e-mail">Daily Activities as E-Mail</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Share Objects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#operationsablauf">Operation Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="#groups">Recipient Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="#eingebettete-esearch">Embedded Enterprise-Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="#einrichtung-fur-eigene-klassen">Setup for Custom Classes</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Activities</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Share Objects</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/sharing_overview.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="objekte-teilen">
<span id="helpid-cdb-sharing-admin"></span><span id="overview"></span><h1>Share Objects<a class="headerlink" href="#objekte-teilen" title="Permalink to this headline">¶</a></h1>
<div class="section" id="operationsablauf">
<h2>Operation Logic<a class="headerlink" href="#operationsablauf" title="Permalink to this headline">¶</a></h2>
<p>The Operation <code class="xref py py-obj docutils literal"><span class="pre">Share</span> <span class="pre">(cdb_share_objects)</span></code> may be called with or without context. It opens the URL of the &#8220;Share&#8221; dialog, and appends the cdb_object_ids of any context objects.</p>
<ul class="simple">
<li><p class="first">URL without context: <code class="xref py py-obj docutils literal"><span class="pre">$CADDOK_WWWSERVICE_URL/share_objects</span></code></p>
</li>
<li><p class="first">URL with context: <code class="xref py py-obj docutils literal"><span class="pre">$CADDOK_WWWSERVICE_URL/share_objects?attachments=eb5af880-4be0-11e0-a016-005056c00008,99504583-76e1-11de-a2d5-986f0c508d59</span></code></p>
</li>
</ul>
<p>The dialog requires the user to select at least one attachment and one recipient. Since common roles and recipient lists may be used as recipients, the operation can only determine if at least one valid recipient was selected, when the user confirms the dialog.</p>
<p>After confirming the dialog, an object of class <code class="xref py py-obj docutils literal"><span class="pre">cdb_sharing</span> <span class="pre">(cs.sharing.Sharing)</span></code> will be created. It is used as an activity channel, with an initial posting containing the user message and selected attachmenmts. The <code class="xref py py-obj docutils literal"><span class="pre">cdb_sharing</span></code> object itself contains only metadata related to change control, e.g. creation date and creator (<code class="xref py py-obj docutils literal"><span class="pre">cdb_cdate</span></code>, and <code class="xref py py-obj docutils literal"><span class="pre">cdb_cpersno</span></code>, respectively).</p>
<p>Nachrichten abonnierter Kanäle für das <code class="xref py py-obj docutils literal"><span class="pre">cdb_sharing</span></code> Objekt sowie eventuelle E-Mail
Benachrichtigungen (einstellbar in den persönlichen Einstellungen) werden
asynchron durch eine Message Queue erzeugt. Wartende und fehlgeschlagene Aufträge
können Sie unter
<span class="menuselection">Administration/Konfiguration ‣ Teilen ‣ Teilen-Aufträge</span>
einsehen und ggf. neu starten. Die in der E-Mail verwendete Sprache können Sie über
Dienstoption <code class="xref py py-obj docutils literal"><span class="pre">--language</span></code> für den Dienst
<code class="docutils literal"><span class="pre">cs.sharing.share_objects_server.ShareObjectsServer</span></code> festlegen.</p>
</div>
<div class="section" id="groups">
<span id="helpid-cdb-sharing-admin-group"></span><h2>Recipient Lists<a class="headerlink" href="#groups" title="Permalink to this headline">¶</a></h2>
<p>Users may save the currently selected recipients as a personal recipient list. After providing a name, an object of class <code class="xref py py-obj docutils literal"><span class="pre">cdb_personal_sharing_group</span> <span class="pre">(cs.sharing.groups.PersonalSharingGroup)</span></code> will be created, and the selected recipients will be added as members by creating entries of class <code class="xref py py-obj docutils literal"><span class="pre">cdb_sharing_group_member</span> <span class="pre">(cs.sharing.groups.SharingGroupMember)</span></code>.</p>
<p>At this time, valid recipients are users (<code class="xref py py-obj docutils literal"><span class="pre">angestellter</span></code>), common roles (<code class="xref py py-obj docutils literal"><span class="pre">cdb_global_role</span></code>), and recipient lists themselves, although this limitation is not enforced when creating a recipient list.</p>
<p>Recipient lists may be defined for roles (for ex. &#8220;public&#8221;) by administrators. If a recipient list is defined for a role, all of the role&#8217;s members can use the recipient list, but only administrators may change it.</p>
<div class="section" id="objektspezifische-groups">
<h3>Object-Specific Recipient Lists<a class="headerlink" href="#objektspezifische-groups" title="Permalink to this headline">¶</a></h3>
<p>Objects to be shared may offer dynamic recipient lists (class <code class="xref py py-obj docutils literal"><span class="pre">cdb_object_sharing_group</span> <span class="pre">(cs.sharing.groups.ObjectSharingGroup)</span></code>), which may be selected as recipients. These lists are predefined, and will be added at runtime to all objects matching the rule.</p>
<p>Lists are resolved either using a method of the object&#8217;s Powerscript class, or one of its attributes. The former has to return a list of tuples (<code class="xref py py-obj docutils literal"><span class="pre">subject_id</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">subject_type</span></code>), the latter must contain a user ID (<code class="xref py py-obj docutils literal"><span class="pre">angestellter.personalnummer</span></code>).</p>
</div>
</div>
<div class="section" id="eingebettete-esearch">
<h2>Embedded Enterprise-Search<a class="headerlink" href="#eingebettete-esearch" title="Permalink to this headline">¶</a></h2>
<p>The &#8220;Share&#8221; Dialog utilizes Enterprise-Search for powering its search box. Please make sure all required services are up and running.</p>
</div>
<div class="section" id="einrichtung-fur-eigene-klassen">
<h2>Setup for Custom Classes<a class="headerlink" href="#einrichtung-fur-eigene-klassen" title="Permalink to this headline">¶</a></h2>
<p>To make objects shareable, you will first have to enable its class for the REST API by setting &#8220;REST API active&#8221; and a unique &#8220;REST Name&#8221; in the class configuration.</p>
<div class="section" id="operation-verfugbar-machen">
<h3>Enable Operation<a class="headerlink" href="#operation-verfugbar-machen" title="Permalink to this headline">¶</a></h3>
<p>To make the operation <code class="docutils literal"><span class="pre">Share</span></code> available in your custom class&#8217;s context menu, enable the operation <code class="docutils literal"><span class="pre">cdb_share_objects</span></code> ( <span class="menuselection">Administration/Configuration ‣ Administration ‣ Operations</span> ) for your class. Then, add code corresponding to the following example to its Powerscript class:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cs.sharing.share_objects</span> <span class="kn">import</span> <span class="n">WithSharing</span>
<span class="kn">from</span> <span class="nn">cs.documents</span> <span class="kn">import</span> <span class="n">Document</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Document</span><span class="p">,</span> <span class="n">WithSharing</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="objektspezifische-groups-einrichten">
<span id="helpid-cdb-sharing-admin-object-group"></span><h3>Set Up Object-Specific Recipient Lists<a class="headerlink" href="#objektspezifische-groups-einrichten" title="Permalink to this headline">¶</a></h3>
<p>Object-specific recipient lists can be set up like this:</p>
<ol class="arabic simple">
<li><p class="first">Create a new recipient list or select an existing one at <span class="menuselection">Administration/Configuration ‣ Share ‣ Recipient Lists</span></p>
</li>
<li><p class="first">The recipient list&#8217;s object rule must contain a predicate with at least one term for your class. Only objects matching the rule will show the recipient list in the dialog.</p>
</li>
<li><p class="first">If the recipient list is not a simple attribute containing a user ID (<code class="docutils literal"><span class="pre">angestellter.personalnummer</span></code>), add code to the Powerscript class to resolve it. For example:</p>
</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cdb.objects</span> <span class="kn">import</span> <span class="n">Object</span>

<span class="k">class</span> <span class="nc">myObjectsClass</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">getCustomRecipients</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sharingGroup</span><span class="p">):</span>
        <span class="s2">&quot;Empfängerliste auflösen/resolve recipient list&quot;</span>
        <span class="k">return</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">cdb_cpersno</span><span class="p">,</span> <span class="s2">&quot;Person&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subject_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_type</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;Administrator&quot;</span><span class="p">,</span> <span class="s2">&quot;Common Role&quot;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="admin_activitystream.html" class="btn btn-neutral" title="Activities" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Contact Software.
      Last updated on 04.06.2018.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'15.3.1.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>