

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Audit Trail &mdash; Basics</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Stichwortverzeichnis"
              href="genindex.html"/>
        <link rel="search" title="Suche" href="search.html"/>
    <link rel="top" title="Basics" href="index.html"/>
        <link rel="prev" title="Semantische Verknüpfungen" href="admin_semanticlinks.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="/doc/de" class="icon fa-book">
            Dokumentationsportal
          </a>
        

        
          <a href="index.html" class="icon icon-home"> Basics
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="admin_base_intro.html">Einleitung</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin_calendar.html">Kalender</a><ul>
<li class="toctree-l2"><a class="reference internal" href="admin_calendar_preface.html">Einführung</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_calendar_profile.html">Kalenderprofile</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_calendar_exception.html">Kalenderprofilausnahmen</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_calendar_entry.html">Kalendereinträge</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_calendar_daytype.html">Tagesart</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="admin_currency.html">Währungen und Umrechnungskurse</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin_semanticlinks.html">Semantische Verknüpfungen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="admin_semanticlinks.html#einleitung">Einleitung</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_semanticlinks.html#verknupfungstypen">Verknüpfungstypen</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_semanticlinks.html#link-graph">Link-Graph</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Audit Trail</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#einleitung">Einleitung</a></li>
<li class="toctree-l2"><a class="reference internal" href="#konfiguration">Konfiguration</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Basics</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Audit Trail</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/admin_audittrail.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="audit-trail">
<span id="admin-audittrail"></span><h1>Audit Trail<a class="headerlink" href="#audit-trail" title="Link zu dieser Überschrift">¶</a></h1>
<div class="section" id="einleitung">
<h2>Einleitung<a class="headerlink" href="#einleitung" title="Link zu dieser Überschrift">¶</a></h2>
<p><span class="guilabel">Audit Trail</span> ist eine Komponente zum Erfassen und Vergleichen von Änderungen. Standardmäßig
werden nur Änderungen erfasst, die im Zuge der Neuanlage, Modifikation oder Löschung erfolgen. Weitere
Typen von Änderungen können konfiguriert werden und im Zuge des PowerScript-Customizings hinzugefügt
werden.
In den nachfolgenden Kapiteln erfahren Sie, wie Sie dieses Werkzeug kundenindividuell konfigurieren
können.</p>
</div>
<div class="section" id="konfiguration">
<h2>Konfiguration<a class="headerlink" href="#konfiguration" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="id1">
<h3>Einleitung<a class="headerlink" href="#id1" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die <span class="guilabel">Audit Trail-Konfiguration</span> besteht aus mehreren Teilen:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><span class="guilabel">Audit Trail-Konfiguration</span></dt>
<dd>Hiermit wird bestimmt, welche Fachobjekte vom <span class="guilabel">Audit Trail</span> überwacht werden sollen.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Audit Trail-Typen</span></dt>
<dd>Hier werden die unterschiedlichen Typen und Icons für den <span class="guilabel">Audit Trail</span> bestimmt.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">PowerScript-Anpassungen</span></dt>
<dd>Damit Fachobjekte ein <span class="guilabel">Audit Trail</span> erhalten, müssen Klassen im PowerScript von der Klasse <em>WithAuditTrail</em> aus <em>cs.audittrail</em> erben.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Beziehung</span></dt>
<dd>Zur Nutzung des <span class="guilabel">Audit Trail</span> muss eine Beziehung erstellt werden.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Maske</span></dt>
<dd>Hier werden die notwendigen Maskenanpassungen für die Darstellung des <span class="guilabel">Audit Trail</span> erläutert.</dd>
</dl>
</li>
</ul>
<p>Dabei gilt zu beachten, dass die zu erweiterende Klasse eine <em>cdb_object_id</em> beinhaltet.</p>
</div>
<div class="section" id="audit-trail-konfiguration">
<h3>Audit Trail-Konfiguration<a class="headerlink" href="#audit-trail-konfiguration" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Konfiguration, welche Fachobjekte vom <span class="guilabel">Audit Trail</span> überwacht werden sollen, erfolgt über
die <span class="guilabel">Audit Trail-Konfiguration</span>. Diese können Sie über den Menüzugang
<span class="menuselection">Administration/Konfiguration ‣ Konfiguration ‣ Audit Trail ‣ Audit Trail-Konfiguration</span> pflegen.
Die Definition einer <em>Audit Trail-Konfiguration</em> erfolgt über folgende Stammdaten:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><span class="guilabel">Name</span></dt>
<dd>Geben Sie hier der Konfiguration einen verständlichen Namen.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Klasse</span></dt>
<dd>Gibt an, für welche Klasse der <span class="guilabel">Audit Trail</span> Änderungen, Neuanlagen, etc. erfasst.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Indexierbar?</span></dt>
<dd>Gibt an, ob Fachobjekte der Klasse indexierbar sind. Dies ist kein Muss, beeinflusst aber die Daten, die bei der Ausgabe
der Informationen vom <span class="guilabel">Audit Trail</span> angezogen werden. Bei Aktivierung wird nicht nur das einzelne
Fachobjekt betrachtet, sondern alle Versionen. Dies ermöglicht dann Änderungen über Versionen hinweg darzustellen und
zu vergleichen.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Ident-Feld</span></dt>
<dd>Falls Fachobjekte der Klasse indexierbar sind, muss hier ein Ident-Feld angegeben werden. Bei Dokumenten wäre dies
z.B. die z_nummer.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Index / Version / Revision</span></dt>
<dd>Falls Fachobjekte der Klasse indexierbar sind, muss hier das Index-Feld angegeben werden. Bei Dokumenten wäre dies
z.B. der z_index.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Modul</span></dt>
<dd>Hier trägt das System mit der Neuanlage automatisch das Modul ein, in dem der Typ definiert wird (das ist Ihr Kundenmodul).</dd>
</dl>
</li>
</ul>
<p>Nach Anlage der <span class="guilabel">Audit Trail-Konfiguration</span> müssen noch die überwachten Felder (d.h. falls eine Änderung an diesen
erfolgt, wird ein Audit Trail-Eintrag vorgenommen) angegeben werden:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><span class="guilabel">Name</span></dt>
<dd>Geben Sie hier das Attribut an, welches im Audit Trail erfasst werden soll.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Modul</span></dt>
<dd>Hier trägt das System mit der Neuanlage automatisch das Modul ein, in dem der Typ definiert wird (das ist Ihr Kundenmodul).</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Bemerkung</p>
<p class="last">Ohne dieses Feld <em>Konfigurationen</em> werden keine Wertänderungen erfasst.</p>
</div>
</div>
<div class="section" id="audit-trail-typen">
<h3>Audit Trail-Typen<a class="headerlink" href="#audit-trail-typen" title="Link zu dieser Überschrift">¶</a></h3>
<p>Werden im Zusammenhang mit dem kundenseitigen Customizing weitere Typen benötigt, können diese für die Ausgabe im <span class="guilabel">Audit Trail</span>
über den Menüzugang <span class="menuselection">Administration/Konfiguration ‣ Konfiguration ‣ Audit Trail ‣ Audit Trail-Typen</span> eingepflegt werden.
Die Definition eines <em>Audit Trail-Typen</em> erfolgt über folgende Stammdaten:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><span class="guilabel">Typ</span></dt>
<dd>Benennen Sie hiermit den Typ. Dieser wird benötigt, um den <span class="guilabel">Audit Trail</span> Eintrag zu kennzeichnen.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Name</span></dt>
<dd>Geben Sie hier dem Typ einen verständlichen Namen.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Icon-ID</span></dt>
<dd>Wählen Sie hier ein Icon, das beim Eintrag im <span class="guilabel">Audit Trail</span> dargestellt werden soll.</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="powerscript-anpassungen">
<h3>PowerScript-Anpassungen<a class="headerlink" href="#powerscript-anpassungen" title="Link zu dieser Überschrift">¶</a></h3>
<p>Damit man den <span class="guilabel">Audit Trail</span> für die Fachobjekte einer bestimmten Klasse erfassen kann, müssen Sie für Ihre Klasse von der Klasse
<em>WithAuditTrail</em> aus dem Modul <em>cs.audittrail</em> erben und dies in Python implementieren,
z.B. wie folgt für die angepasste Klasse <em>cDocument</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env powerscript</span>
<span class="c1"># -*- python -*- coding: UTF-8 -*-</span>
<span class="kn">from</span> <span class="nn">cs.audittrail</span> <span class="kn">import</span> <span class="n">WithAuditTrail</span>
<span class="kn">from</span> <span class="nn">cs.documents</span> <span class="kn">import</span> <span class="n">Document</span>

<span class="k">class</span> <span class="nc">cDocument</span><span class="p">(</span><span class="n">Document</span><span class="p">,</span> <span class="n">WithAuditTrail</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Des Weiteren ermöglicht ein Überschreiben der Methode <em>referencedAuditTrailObjects</em> die Darstellung vom eigenen Fachobjekt auf darunterliegende
auszudehnen oder aber die Aggregation mit anderen Fachobjekten. So kann man z.B. die Änderungen an Projektaufgaben im <span class="guilabel">Audit Trail</span>
des Projekts darstellen lassen. Natürlich nur unter der Vorraussetzung, das beide Klassen vorab um <em>WithAuditTrail</em> erweitert wurden.</p>
</div>
<div class="section" id="beziehung">
<h3>Beziehung<a class="headerlink" href="#beziehung" title="Link zu dieser Überschrift">¶</a></h3>
<p>Zur Darstellung des <span class="guilabel">Audit Trail</span> an Fachobjekten wird eine Beziehung <span class="guilabel">Audit Trail</span> benötigt, in welcher die Klasse als Referer,
die Standardklasse <em>cdb_audittrail_objects</em> als Verknüpfungsklasse und die Standardklasse <em>cdb_audittrail_view</em> als Reference erfasst wird.
Dabei muss in der Referer Keymap <em>cdb_object_id=object_id</em> und in der Reference Keymap <em>audittrail_object_id=audittrail_id</em> eingetragen werden.
Da die Anzeige über die Maske erfolgt, empfiehlt es sich die Beziehung auszublenden.</p>
</div>
<div class="section" id="maske">
<h3>Maske<a class="headerlink" href="#maske" title="Link zu dieser Überschrift">¶</a></h3>
<p>Zur Anzeige an Fachobjekten benötigt man für jedes Fachobjekt eine zusätzliche Maske, die im Maskenreqister eingetragen werden muss.
Dabei muss in der URL des eLINKControls der Restname und der Rollenname der vorab erzeugten Beziehung eingetragen werden. Die Maske  <em>cs_audittrail_view_reg</em>
kann hierbei als Beispiel herangezogen werden.
Zur Darstellung des <span class="guilabel">Audit Trail</span> im Web-Client steht das Outlet <em>cs-audittrail-web-AuditTrailOutlet</em> zur Verfügung, bei dem auch die Beziehung
eingetragen werden muss.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="admin_semanticlinks.html" class="btn btn-neutral" title="Semantische Verknüpfungen" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Contact Software.
      Zuletzt aktualisiert am 15.08.2018.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'15.4.2.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>