

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Audit Trail &mdash; Basics</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Basics" href="index.html"/>
        <link rel="prev" title="Semantic links" href="admin_semanticlinks.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="/doc/en" class="icon fa-book">
            Documentation Portal
          </a>
        

        
          <a href="index.html" class="icon icon-home"> Basics
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="admin_base_intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin_calendar.html">Calendar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="admin_calendar_preface.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_calendar_profile.html">Calendar profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_calendar_exception.html">Calendar profile exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_calendar_entry.html">Calendar entries</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_calendar_daytype.html">Day type</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="admin_currency.html">Currencies and exchange rates</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin_semanticlinks.html">Semantic links</a><ul>
<li class="toctree-l2"><a class="reference internal" href="admin_semanticlinks.html#einleitung">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_semanticlinks.html#verknupfungstypen">Link Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="admin_semanticlinks.html#link-graph">Link Graph</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Audit Trail</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#einleitung">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#konfiguration">Configuration</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Basics</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Audit Trail</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/admin_audittrail.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="audit-trail">
<span id="admin-audittrail"></span><h1>Audit Trail<a class="headerlink" href="#audit-trail" title="Permalink to this headline">¶</a></h1>
<div class="section" id="einleitung">
<h2>Introduction<a class="headerlink" href="#einleitung" title="Permalink to this headline">¶</a></h2>
<p><span class="guilabel">Audit Trail</span> is a component for capturing and comparing changes. By default, only changes that are made during creation, modification or deletion are recorded. Further types of changes can be configured and added in the course of PowerScript customizing. In the following chapters you will learn how you can configure this tool to suit your individual requirements.</p>
</div>
<div class="section" id="konfiguration">
<h2>Configuration<a class="headerlink" href="#konfiguration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Introduction<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>The <span class="guilabel">Audit Trail Configuration</span> consists of several parts:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><span class="guilabel">Audit Trail Configuration</span></dt>
<dd>This determines which subject objects are to be monitored by the <span class="guilabel">Audit Trail</span>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Audit Trail Types</span></dt>
<dd>Here the different types and icons for the <span class="guilabel">Audit Trail</span> are determined.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">PowerScript Customizations</span></dt>
<dd>For business objects to receive an <span class="guilabel">Audit Trail</span>, classes in PowerScript must inherit from the <em>WithAuditTrail</em> class <em>cs.audittrail</em>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Relationship</span></dt>
<dd>To use the :guilabel`:<code class="xref py py-obj docutils literal"><span class="pre">Audit</span> <span class="pre">Trail</span></code>, a relationship must be created.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Mask</span></dt>
<dd>Here the necessary mask adjustments for the display of the <span class="guilabel">Audit Trail</span> are explained.</dd>
</dl>
</li>
</ul>
<p>Note that the class to be extended contains a <em>cdb_object_id</em>.</p>
</div>
<div class="section" id="audit-trail-konfiguration">
<h3>Audit Trail Configuration<a class="headerlink" href="#audit-trail-konfiguration" title="Permalink to this headline">¶</a></h3>
<p>The configuration of which subject objects are to be monitored by the <span class="guilabel">Audit Trail</span> is done via the <span class="guilabel">Audit Trail Configuration</span>. You can maintain this via the menu access <span class="menuselection">Administration/Configuration ‣ Configuration ‣ Audit Trail ‣ Audit Trail Configuration</span>. The definition of an <em>Audit Trail configuration</em> is done via the following master data:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><span class="guilabel">Name</span></dt>
<dd>Give the configuration an understandable name.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Class</span></dt>
<dd>Indicates for which class the <span class="guilabel">Audit Trail</span> records modifcations, creations, and so on.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Indexable?</span></dt>
<dd>Specifies whether business objects in the class can be indexed. This is not a must, but it affects the data that is drawn to the <span class="guilabel">Audit Trail</span> when the information is output. During activation, not only the individual business object is considered, but all versions. This enables changes to be displayed and compared across versions.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Ident Field</span></dt>
<dd>If business objects of the class can be indexed, an ident field must be specified here. For documents this would be the z_number.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Index / Version / Revision</span></dt>
<dd>If business objects of the class can be indexed, the index field must be specified here. For documents this would be e.g. the z_index.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Module</span></dt>
<dd>Here, the system automatically enters the module in which the type is defined (this is your customer module).</dd>
</dl>
</li>
</ul>
<p>After creating the <span class="guilabel">Audit Trail Configuration</span>, the monitored fields have to be specified (i.e. if a change is made to these, an Audit Trail entry will be made):</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><span class="guilabel">Name</span></dt>
<dd>Specify the attribute that is to be recorded in the audit trail.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Module</span></dt>
<dd>Here, the system automatically enters the module in which the type is defined (this is your customer module).</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Without these field <em>configurations</em>, no value changes are recorded.</p>
</div>
</div>
<div class="section" id="audit-trail-typen">
<h3>Audit Trail Types<a class="headerlink" href="#audit-trail-typen" title="Permalink to this headline">¶</a></h3>
<p>If additional types are required in connection with customer customizing, they can be entered for output in the <span class="guilabel">Audit Trail</span> via the menu access <span class="menuselection">Administration/Configuration ‣ Configuration ‣ Audit Trail ‣ Audit Trail Types</span>. The definition of an <em>Audit Trail Type</em> is carried out using the following master data:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><span class="guilabel">Type</span></dt>
<dd>Use this to name the type. This is required to identify the <span class="guilabel">Audit Trail</span> entry.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Name</span></dt>
<dd>Give this type an understandable name.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><span class="guilabel">Icon ID</span></dt>
<dd>Select the <span class="guilabel">Audit Trail</span> icon to be displayed.</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="powerscript-anpassungen">
<h3><span class="guilabel">PowerScript Customizations</span><a class="headerlink" href="#powerscript-anpassungen" title="Permalink to this headline">¶</a></h3>
<p>To capture the <span class="guilabel">Audit Trail</span> for the business objects of a specific class, you must inherit for your class from the <em>cs.audittrail</em> class and implement this in Python, e.g. as follows for the custom class <em>cDocument</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env powerscript</span>
<span class="c1"># -*- python -*- coding: UTF-8 -*-</span>
<span class="kn">from</span> <span class="nn">cs.audittrail</span> <span class="kn">import</span> <span class="n">WithAuditTrail</span>
<span class="kn">from</span> <span class="nn">cs.documents</span> <span class="kn">import</span> <span class="n">Document</span>

<span class="k">class</span> <span class="nc">cDocument</span><span class="p">(</span><span class="n">Document</span><span class="p">,</span> <span class="n">WithAuditTrail</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Furthermore, overwriting the <em>referencedAuditTrailObjects</em> method allows you to extend the display from your own business object to underlying business objects or to aggregate with other business objects. For example, you can display the changes to project tasks in the <span class="guilabel">Audit Trail</span> of the project. Of course only under the condition that both classes have been extended by <em>WithAuditTrail</em> in advance.</p>
</div>
<div class="section" id="beziehung">
<h3>Relationship<a class="headerlink" href="#beziehung" title="Permalink to this headline">¶</a></h3>
<p>To display the <span class="guilabel">Audit Trail</span> of business objects, a relation <span class="guilabel">Audit Trail</span> is required in which the class is recorded as Referer, the standard class <em>cdb_audittrail_objects</em> as Link Class and the standard class <em>cdb_audittrail_view</em> as Reference. In the Referer Keymap <em>cdb_object_id=object_id</em> and in the Reference Keymap <em>audittrail_object_id=audittrail_id</em> must be entered. Since the display is via the mask, it is recommended to hide the relationship.</p>
</div>
<div class="section" id="maske">
<h3>Mask<a class="headerlink" href="#maske" title="Permalink to this headline">¶</a></h3>
<p>To display on business objects, an additional mask is required for each business object, which must be entered in the mask register. The remaining name and the role name of the pre-generated relationship must be entered in the URL of the eLINKControl. The mask <em>cs_audittrail_view_reg</em> can be used as an example. The outlet <em>cs-audittrail-web-AuditTrailOutlet</em> is available to display the <span class="guilabel">Audit Trail</span> in the web client, where the relationship must also be entered.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="admin_semanticlinks.html" class="btn btn-neutral" title="Semantic links" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Contact Software.
      Last updated on 15.08.2018.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'15.4.2.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>