<metal:filter define-macro="filter_button">
  <button type="button" class="btn btn-mini ${'active elink-filter-on' if filteractive else ''}"
          data-elink-filter="${filtername}"
          tal:define="filteractive filteractive|False;
                      filtertitle filtertitle|filtername;
                      cnt cnt|-1"
          title="${filtertitle}${' (%s)' % cnt if cnt > -1 else ''}">
    <metal:btncontent define-slot="filter_content"></metal:btncontent>
  </button>
</metal:filter>

<metal:filterdropdown define-macro="filter_dropdown">
  <metal:filterbtn define-slot="button">
  <metal:btn use-macro="global_plugins['filters'].macros.filter_button" />
  </metal:filterbtn>
  <button type="button" class="btn btn-mini dropdown-toggle" data-toggle="dropdown">
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu elink-filter-dropdown">
    <metal:dropdownslot define-slot="dropdown_content"></metal:dropdownslot>
  </ul>
</metal:filterdropdown>

<metal:filterinput define-macro="filter_input">
<div class="input-prepend elink-filter-input"
     tal:define="filter_input_class filter_input_class|'span2';
                 filter_input_placeholder filter_input_placeholder|options.labels.cdb_elink_filter_placeholder">
  <span class="add-on"><img src="${options.plugins}filters/filter_gray.png" /></span>
  <input type="text"
         class="${filter_input_class}"
         placeholder="${filter_input_placeholder}" />
</div>
</metal:filterinput>
