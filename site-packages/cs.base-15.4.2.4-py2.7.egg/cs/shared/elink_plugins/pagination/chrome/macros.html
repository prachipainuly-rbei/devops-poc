<metal:paginator define-macro="paginator">
  <div class="pagination pagination-centered pagination-small"
       tal:condition="paginator and paginator[1] > 1">
    <ul tal:define="
          showpages showpages|5;
          currpage paginator[0];
          rstart max(currpage - showpages / 2, 1);
          rend min(currpage + showpages, paginator[1] + 1);
          rstart max(rend - showpages, 1) if (rend - rstart) <= showpages else rstart;
          pagelist range(rstart, rend)[:showpages]">
      <li class="${pagedisabled}"
          data-elink-paginator-page="${currpage - 1}"
          tal:define="pagedisabled 'disabled' if currpage == 1 else ''">
        <a href="${'#' if not pagedisabled else None}">
          <i class="icon-double-angle-left"></i></a></li>
      <li class="${'active' if currpage == pageno else ''}"
          data-elink-paginator-page="${pageno}"
          tal:repeat="pageno pagelist">
        <a href="${'#' if currpage != pageno else None}">${pageno}</a></li>
      <li class="${pagedisabled}"
          data-elink-paginator-page="${currpage + 1}"
          tal:define="pagedisabled 'disabled' if currpage >= paginator[1] else ''">
        <a href="${'#' if not pagedisabled else None}">
          <i class="icon-double-angle-right"></i></a></li>
    </ul>
  </div>
</metal:paginator>
