<div>
    <table id="col_data">

        <td tal:repeat="node columns" data-cdb_object_id="${node['object'].cdb_object_id}" data-parent_object_id="${node['object'].parent_object_id}" class="header_td">

            <div class="col_line" tal:repeat="i range(depth)" layer="${i}"></div>


            <tal:last tal:condition="repeat.node.end">
                <div class="col_line col_last"></div>
            </tal:last>
            <tal:inner tal:condition="not repeat.node.end">
                <div class="col_line col_with_connector" layer="${depth}"></div>
            </tal:inner>


            <div class="col_hitarea collapsed" tal:condition="node['group']"></div>

            <tal:withchildren tal:condition="node['group']">
                <div class="col_node collapsed">
                <a class="tree_node"
                   href="${node['object'].MakeURL('CDB_ShowObject')}"
                                   title="${node['object'].GetDescription()}">

                        <img src="${node['object'].GetObjectIcon()}"></img>
                        ${node['object'].GetDescription()}
                </a>
                </div>
            </tal:withchildren>
            <tal:withoutchildren tal:condition="not node['group']">
                <div class="col_node">
                <a class="tree_node"
                   href="${node['object'].MakeURL('CDB_ShowObject')}"
                                   title="${node['object'].GetDescription()}">

                        <img src="${node['object'].GetObjectIcon()}"></img>
                        ${node['object'].GetDescription()}
                </a>
                </div>

            </tal:withoutchildren>

        </td>

    </table>

    <table id="matrix_columns">
		<tr tal:repeat="k links.keys()" data-cdb_object_id="${k}">

			<td tal:repeat="node columns"
				data-cdb_object_id="${node['object'].cdb_object_id}"
				class="cell ${'readonly' if links[k][node['object'].cdb_object_id]['read_only'] else ''}"
				data-readonly="${1 if links[k][node['object'].cdb_object_id]['read_only'] else 0}"
				data-orig_value="${links[k][node['object'].cdb_object_id]['link_name']}" 
				data-link_object_id="${links[k][node['object'].cdb_object_id]['link_object_id']}"
                data-link_type_object_id="${links[k][node['object'].cdb_object_id]['link_type_object_id']}">
            	<div class="dropdown cell-dropdown">
            		<tal:writeable tal:condition="not links[k][node['object'].cdb_object_id]['read_only']">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">
						${links[k][node['object'].cdb_object_id]['link_name'] or '&nbsp;'}
						</a>
					</tal:writeable>
					<tal:readonly tal:condition="links[k][node['object'].cdb_object_id]['read_only']">
						<span class="readonly">${links[k][node['object'].cdb_object_id]['link_name'] or '&nbsp;'}</span>
					</tal:readonly>
				</div>
            </td>
		</tr>
    </table>


</div>